/*! For license information please see phaser~loader.3b34b4ea95a75df02edb.js.LICENSE.txt */
(self.webpackChunk_agogpixel_phaser3_project_starter=self.webpackChunk_agogpixel_phaser3_project_starter||[]).push([[911],{95634:e=>{function t(e,t){return parseInt(e.getAttribute(t),10)}e.exports=function(e,i,s,a,r){void 0===s&&(s=0),void 0===a&&(a=0);var n=i.cutX,o=i.cutY,h=i.source.width,l=i.source.height,d=i.sourceIndex,c={},u=e.getElementsByTagName("info")[0],f=e.getElementsByTagName("common")[0];c.font=u.getAttribute("face"),c.size=t(u,"size"),c.lineHeight=t(f,"lineHeight")+a,c.chars={};var p=e.getElementsByTagName("char"),g=void 0!==i&&i.trimmed;if(g)var y=i.height,x=i.width;for(var v=0;v<p.length;v++){var m=p[v],L=t(m,"id"),E=String.fromCharCode(L),F=t(m,"x"),w=t(m,"y"),S=t(m,"width"),P=t(m,"height");g&&(F<x&&(x=F),w<y&&(y=w)),g&&0!==y&&0!==x&&(F-=i.x,w-=i.y);var k=(n+F)/h,R=(o+w)/l,T=(n+F+S)/h,A=(o+w+P)/l;if(c.chars[L]={x:F,y:w,width:S,height:P,centerX:Math.floor(S/2),centerY:Math.floor(P/2),xOffset:t(m,"xoffset"),yOffset:t(m,"yoffset"),xAdvance:t(m,"xadvance")+s,data:{},kerning:{},u0:k,v0:R,u1:T,v1:A},r&&0!==S&&0!==P){var O=r.add(E,d,F,w,S,P);O&&O.setUVs(S,P,k,R,T,A)}}var C=e.getElementsByTagName("kerning");for(v=0;v<C.length;v++){var b=C[v],I=t(b,"first"),D=t(b,"second"),U=t(b,"amount");c.chars[D].kerning[I]=U}return c}},44231:(e,t,i)=>{var s=i(69186),a=i(60351),r=i(40),n=i(25738),o=i(15966),h=i(32710),l=i(82825),d=i(64567),c=new s({initialize:function(e,t){this.loader=e,this.cache=n(t,"cache",!1),this.type=n(t,"type",!1),this.key=n(t,"key",!1);var i=this.key;if(e.prefix&&""!==e.prefix&&(this.key=e.prefix+i),!this.type||!this.key)throw new Error("Invalid Loader."+this.type+" key");var s=n(t,"url");void 0===s?s=e.path+i+"."+n(t,"extension",""):"string"!=typeof s||s.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)||(s=e.path+s),this.url=s,this.src="",this.xhrSettings=d(n(t,"responseType",void 0)),n(t,"xhrSettings",!1)&&(this.xhrSettings=h(this.xhrSettings,n(t,"xhrSettings",{}))),this.xhrLoader=null,this.state="function"==typeof this.url?a.FILE_POPULATED:a.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=n(t,"config",{}),this.multiFile,this.linkFile},setLink:function(e){this.linkFile=e,e.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===a.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=a.FILE_LOADING,this.src=o(this,this.loader.baseURL),0===this.src.indexOf("data:")?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=l(this,this.loader.xhr))},onLoad:function(e,t){var i=e.responseURL&&(0===e.responseURL.indexOf("file://")||0===e.responseURL.indexOf("capacitor://"))&&0===t.target.status,s=!(t.target&&200!==t.target.status)||i;4===e.readyState&&e.status>=400&&e.status<=599&&(s=!1),this.state=a.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,s)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(e){e.lengthComputable&&(this.bytesLoaded=e.loaded,this.bytesTotal=e.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(r.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=a.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=a.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){this.state=a.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.cache.add(this.key,this.data),this.pendingDestroy()},pendingDestroy:function(e){void 0===e&&(e=this.data);var t=this.key,i=this.type;this.loader.emit(r.FILE_COMPLETE,t,i,e),this.loader.emit(r.FILE_KEY_COMPLETE+i+"-"+t,t,i,e),this.loader.flagForRemoval(this)},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});c.createObjectURL=function(e,t,i){if("function"==typeof URL)e.src=URL.createObjectURL(t);else{var s=new FileReader;s.onload=function(){e.removeAttribute("crossOrigin"),e.src="data:"+(t.type||i)+";base64,"+s.result.split(",")[1]},s.onerror=e.onerror,s.readAsDataURL(t)}},c.revokeObjectURL=function(e){"function"==typeof URL&&URL.revokeObjectURL(e.src)},e.exports=c},15966:e=>{e.exports=function(e,t){return!!e.url&&(e.url.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?e.url:t+e.url)}},90894:(e,t,i)=>{var s=i(69186),a=i(60351),r=i(96609),n=i(26729),o=i(40),h=i(25028),l=i(25738),d=i(46236),c=i(12063),u=i(64567),f=new s({Extends:n,initialize:function(e){n.call(this);var t=e.sys.game.config,i=e.sys.settings.loader;this.scene=e,this.systems=e.sys,this.cacheManager=e.sys.cache,this.textureManager=e.sys.textures,this.sceneManager=e.sys.game.scene,h.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(l(i,"baseURL",t.loaderBaseURL)),this.setPath(l(i,"path",t.loaderPath)),this.setPrefix(l(i,"prefix",t.loaderPrefix)),this.maxParallelDownloads=l(i,"maxParallelDownloads",t.loaderMaxParallelDownloads),this.xhr=u(l(i,"responseType",t.loaderResponseType),l(i,"async",t.loaderAsync),l(i,"user",t.loaderUser),l(i,"password",t.loaderPassword),l(i,"timeout",t.loaderTimeout),l(i,"withCredentials",t.loaderWithCredentials)),this.crossOrigin=l(i,"crossOrigin",t.loaderCrossOrigin),this.totalToLoad=0,this.progress=0,this.list=new r,this.inflight=new r,this.queue=new r,this._deleteQueue=new r,this.totalFailed=0,this.totalComplete=0,this.state=a.LOADER_IDLE,this.multiKeyIndex=0,e.sys.events.once(c.BOOT,this.boot,this),e.sys.events.on(c.START,this.pluginStart,this)},boot:function(){this.systems.events.once(c.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(c.SHUTDOWN,this.shutdown,this)},setBaseURL:function(e){return void 0===e&&(e=""),""!==e&&"/"!==e.substr(-1)&&(e=e.concat("/")),this.baseURL=e,this},setPath:function(e){return void 0===e&&(e=""),""!==e&&"/"!==e.substr(-1)&&(e=e.concat("/")),this.path=e,this},setPrefix:function(e){return void 0===e&&(e=""),this.prefix=e,this},setCORS:function(e){return this.crossOrigin=e,this},addFile:function(e){Array.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++){var i=e[t];this.keyExists(i)||(this.list.set(i),this.emit(o.ADD,i.key,i.type,this,i),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(e){var t=e.hasCacheConflict();return t||this.list.iterate((function(i){if(i.type===e.type&&i.key===e.key)return t=!0,!1})),!t&&this.isLoading()&&(this.inflight.iterate((function(i){if(i.type===e.type&&i.key===e.key)return t=!0,!1})),this.queue.iterate((function(i){if(i.type===e.type&&i.key===e.key)return t=!0,!1}))),t},addPack:function(e,t){t&&e.hasOwnProperty(t)&&(e={packKey:e[t]});var i=0,s=this.baseURL,a=this.path,r=this.prefix;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=e[n],h=l(o,"baseURL",s),d=l(o,"path",a),c=l(o,"prefix",r),u=l(o,"files",null),f=l(o,"defaultType","void");if(Array.isArray(u)){this.setBaseURL(h),this.setPath(d),this.setPrefix(c);for(var p=0;p<u.length;p++){var g=u[p],y=g.hasOwnProperty("type")?g.type:f;this[y]&&(this[y](g),i++)}}}return this.setBaseURL(s),this.setPath(a),this.setPrefix(r),i>0},isLoading:function(){return this.state===a.LOADER_LOADING||this.state===a.LOADER_PROCESSING},isReady:function(){return this.state===a.LOADER_IDLE||this.state===a.LOADER_COMPLETE},start:function(){this.isReady()&&(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(o.START,this),0===this.list.size?this.loadComplete():(this.state=a.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(c.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(o.PROGRESS,this.progress)},update:function(){this.state===a.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each((function(e){if((e.state===a.FILE_POPULATED||e.state===a.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(e),this.list.delete(e),e.crossOrigin||(e.crossOrigin=this.crossOrigin),e.load()),this.inflight.size===this.maxParallelDownloads)return!1}),this)},nextFile:function(e,t){this.inflight&&(this.inflight.delete(e),this.updateProgress(),t?(this.totalComplete++,this.queue.set(e),this.emit(o.FILE_LOAD,e),e.onProcess()):(this.totalFailed++,this._deleteQueue.set(e),this.emit(o.FILE_LOAD_ERROR,e),this.fileProcessComplete(e)))},fileProcessComplete:function(e){this.scene&&this.systems&&this.systems.game&&!this.systems.game.pendingDestroy&&(e.state===a.FILE_ERRORED?e.multiFile&&e.multiFile.onFileFailed(e):e.state===a.FILE_COMPLETE&&(e.multiFile?e.multiFile.isReadyToProcess()&&e.multiFile.addToCache():e.addToCache()),this.queue.delete(e),0===this.list.size&&0===this.inflight.size&&0===this.queue.size&&this.loadComplete())},loadComplete:function(){this.emit(o.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=a.LOADER_COMPLETE,this.systems.events.off(c.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(o.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(e){this._deleteQueue.set(e)},saveJSON:function(e,t){return this.save(JSON.stringify(e),t)},save:function(e,t,i){void 0===t&&(t="file.json"),void 0===i&&(i="application/json");var s=new Blob([e],{type:i}),a=URL.createObjectURL(s),r=document.createElement("a");return r.download=t,r.textContent="Download "+t,r.href=a,r.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var e=this.systems.game.config,t=this.systems.settings.loader;this.setBaseURL(l(t,"baseURL",e.loaderBaseURL)),this.setPath(l(t,"path",e.loaderPath)),this.setPrefix(l(t,"prefix",e.loaderPrefix)),this.state=a.LOADER_IDLE},shutdown:function(){this.reset(),this.state=a.LOADER_SHUTDOWN,this.systems.events.off(c.UPDATE,this.update,this),this.systems.events.off(c.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=a.LOADER_DESTROYED,this.systems.events.off(c.UPDATE,this.update,this),this.systems.events.off(c.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});d.register("Loader",f,"load"),e.exports=f},32710:(e,t,i)=>{var s=i(72646),a=i(64567);e.exports=function(e,t){var i=void 0===e?a():s({},e);if(t)for(var r in t)void 0!==t[r]&&(i[r]=t[r]);return i}},60697:(e,t,i)=>{var s=new(i(69186))({initialize:function(e,t,i,s){var a=[];s.forEach((function(e){e&&a.push(e)})),this.loader=e,this.type=t,this.key=i,this.multiKeyIndex=e.multiKeyIndex++,this.files=a,this.complete=!1,this.pending=a.length,this.failed=0,this.config={},this.baseURL=e.baseURL,this.path=e.path,this.prefix=e.prefix;for(var r=0;r<a.length;r++)a[r].multiFile=this},isReadyToProcess:function(){return 0===this.pending&&0===this.failed&&!this.complete},addToMultiFile:function(e){return this.files.push(e),e.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(e){-1!==this.files.indexOf(e)&&this.pending--},onFileFailed:function(e){-1!==this.files.indexOf(e)&&this.failed++}});e.exports=s},82825:(e,t,i)=>{var s=i(32710);e.exports=function(e,t){var i=s(t,e.xhrSettings),a=new XMLHttpRequest;if(a.open("GET",e.src,i.async,i.user,i.password),a.responseType=e.xhrSettings.responseType,a.timeout=i.timeout,i.headers)for(var r in i.headers)a.setRequestHeader(r,i.headers[r]);return i.header&&i.headerValue&&a.setRequestHeader(i.header,i.headerValue),i.requestedWith&&a.setRequestHeader("X-Requested-With",i.requestedWith),i.overrideMimeType&&a.overrideMimeType(i.overrideMimeType),i.withCredentials&&(a.withCredentials=!0),a.onload=e.onLoad.bind(e,a),a.onerror=e.onError.bind(e,a),a.onprogress=e.onProgress.bind(e),a.send(),a}},64567:e=>{e.exports=function(e,t,i,s,a,r){return void 0===e&&(e=""),void 0===t&&(t=!0),void 0===i&&(i=""),void 0===s&&(s=""),void 0===a&&(a=0),void 0===r&&(r=!1),{responseType:e,async:t,user:i,password:s,timeout:a,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:r}}},60351:e=>{e.exports={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19}},32108:(e,t,i)=>{var s=i(69186),a=i(25028),r=i(85665),n=i(40),o=new s({Extends:r,initialize:function(e,t,i,s,a){r.call(this,e,t,i,s,a),this.type="animationJSON"},onProcess:function(){this.loader.once(n.POST_PROCESS,this.onLoadComplete,this),r.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});a.register("animation",(function(e,t,i,s){if(Array.isArray(e))for(var a=0;a<e.length;a++)this.addFile(new o(this,e[a]));else this.addFile(new o(this,e,t,s,i));return this})),e.exports=o},61117:(e,t,i)=>{var s=i(69186),a=i(25028),r=i(25738),n=i(46198),o=i(53013),h=i(85665),l=i(60697),d=new s({Extends:l,initialize:function(e,t,i,s,a,d){var c,u;if(o(t)){var f=t;t=r(f,"key"),c=new n(e,{key:t,url:r(f,"textureURL"),extension:r(f,"textureExtension","png"),normalMap:r(f,"normalMap"),xhrSettings:r(f,"textureXhrSettings")}),u=new h(e,{key:t,url:r(f,"atlasURL"),extension:r(f,"atlasExtension","json"),xhrSettings:r(f,"atlasXhrSettings")})}else c=new n(e,t,i,a),u=new h(e,t,s,d);c.linkFile?l.call(this,e,"atlasjson",t,[c,u,c.linkFile]):l.call(this,e,"atlasjson",t,[c,u])},addToCache:function(){if(this.isReadyToProcess()){var e=this.files[0],t=this.files[1],i=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(e.key,e.data,t.data,i),t.addToCache(),this.complete=!0}}});a.register("aseprite",(function(e,t,i,s,a){var r;if(Array.isArray(e))for(var n=0;n<e.length;n++)r=new d(this,e[n]),this.addFile(r.files);else r=new d(this,e,t,i,s,a),this.addFile(r.files);return this})),e.exports=d},62896:(e,t,i)=>{var s=i(69186),a=i(25028),r=i(25738),n=i(46198),o=i(53013),h=i(85665),l=i(60697),d=new s({Extends:l,initialize:function(e,t,i,s,a,d){var c,u;if(o(t)){var f=t;t=r(f,"key"),c=new n(e,{key:t,url:r(f,"textureURL"),extension:r(f,"textureExtension","png"),normalMap:r(f,"normalMap"),xhrSettings:r(f,"textureXhrSettings")}),u=new h(e,{key:t,url:r(f,"atlasURL"),extension:r(f,"atlasExtension","json"),xhrSettings:r(f,"atlasXhrSettings")})}else c=new n(e,t,i,a),u=new h(e,t,s,d);c.linkFile?l.call(this,e,"atlasjson",t,[c,u,c.linkFile]):l.call(this,e,"atlasjson",t,[c,u])},addToCache:function(){if(this.isReadyToProcess()){var e=this.files[0],t=this.files[1],i=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(e.key,e.data,t.data,i),t.pendingDestroy(),this.complete=!0}}});a.register("atlas",(function(e,t,i,s,a){var r;if(Array.isArray(e))for(var n=0;n<e.length;n++)r=new d(this,e[n]),this.addFile(r.files);else r=new d(this,e,t,i,s,a),this.addFile(r.files);return this})),e.exports=d},61242:(e,t,i)=>{var s=i(69186),a=i(25028),r=i(25738),n=i(46198),o=i(53013),h=i(60697),l=i(22992),d=new s({Extends:h,initialize:function(e,t,i,s,a,d){var c,u;if(o(t)){var f=t;t=r(f,"key"),c=new n(e,{key:t,url:r(f,"textureURL"),extension:r(f,"textureExtension","png"),normalMap:r(f,"normalMap"),xhrSettings:r(f,"textureXhrSettings")}),u=new l(e,{key:t,url:r(f,"atlasURL"),extension:r(f,"atlasExtension","xml"),xhrSettings:r(f,"atlasXhrSettings")})}else c=new n(e,t,i,a),u=new l(e,t,s,d);c.linkFile?h.call(this,e,"atlasxml",t,[c,u,c.linkFile]):h.call(this,e,"atlasxml",t,[c,u])},addToCache:function(){if(this.isReadyToProcess()){var e=this.files[0],t=this.files[1],i=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(e.key,e.data,t.data,i),t.pendingDestroy(),this.complete=!0}}});a.register("atlasXML",(function(e,t,i,s,a){var r;if(Array.isArray(e))for(var n=0;n<e.length;n++)r=new d(this,e[n]),this.addFile(r.files);else r=new d(this,e,t,i,s,a),this.addFile(r.files);return this})),e.exports=d},70384:(e,t,i)=>{var s=i(69186),a=i(60351),r=i(44231),n=i(25028),o=i(25738),h=i(79805),l=i(53013),d=new s({Extends:r,initialize:function(e,t,i,s,a){if(l(t)){var n=t;t=o(n,"key"),s=o(n,"xhrSettings"),a=o(n,"context",a)}var h={type:"audio",cache:e.cacheManager.audio,extension:i.type,responseType:"arraybuffer",key:t,url:i.url,xhrSettings:s,config:{context:a}};r.call(this,e,h)},onProcess:function(){this.state=a.FILE_PROCESSING;var e=this;this.config.context.decodeAudioData(this.xhrLoader.response,(function(t){e.data=t,e.onProcessComplete()}),(function(t){console.error("Error decoding audio: "+e.key+" - ",t?t.message:null),e.onProcessError()})),this.config.context=null}});d.create=function(e,t,i,s,a){var r=e.systems.game,n=r.config.audio,c=r.device.audio;l(t)&&(i=o(t,"url",[]),s=o(t,"config",{}));var u=d.getAudioURL(r,i);return u?c.webAudio&&!n.disableWebAudio?new d(e,t,u,a,r.sound.context):new h(e,t,u,s):null},d.getAudioURL=function(e,t){Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var s=o(t[i],"url",t[i]);if(0===s.indexOf("blob:")||0===s.indexOf("data:"))return{url:s,type:""};var a=s.match(/\.([a-zA-Z0-9]+)($|\?)/);if(a=o(t[i],"type",a?a[1]:"").toLowerCase(),e.device.audio[a])return{url:s,type:a}}return null},n.register("audio",(function(e,t,i,s){var a,r=this.systems.game,n=r.config.audio,o=r.device.audio;if(n.noAudio||!o.webAudio&&!o.audioData)return this;if(Array.isArray(e))for(var h=0;h<e.length;h++)(a=d.create(this,e[h]))&&this.addFile(a);else(a=d.create(this,e,t,i,s))&&this.addFile(a);return this})),e.exports=d},55154:(e,t,i)=>{var s=i(70384),a=i(69186),r=i(25028),n=i(25738),o=i(53013),h=i(85665),l=i(60697),d=new a({Extends:l,initialize:function(e,t,i,a,r,d,c){if(o(t)){var u=t;t=n(u,"key"),i=n(u,"jsonURL"),a=n(u,"audioURL"),r=n(u,"audioConfig"),d=n(u,"audioXhrSettings"),c=n(u,"jsonXhrSettings")}var f;if(a){var p=s.create(e,t,a,r,d);p&&(f=new h(e,t,i,c),l.call(this,e,"audiosprite",t,[p,f]),this.config.resourceLoad=!1)}else f=new h(e,t,i,c),l.call(this,e,"audiosprite",t,[f]),this.config.resourceLoad=!0,this.config.audioConfig=r,this.config.audioXhrSettings=d},onFileComplete:function(e){if(-1!==this.files.indexOf(e)&&(this.pending--,this.config.resourceLoad&&"json"===e.type&&e.data.hasOwnProperty("resources"))){var t=e.data.resources,i=n(this.config,"audioConfig"),a=n(this.config,"audioXhrSettings"),r=s.create(this.loader,e.key,t,i,a);r&&(this.addToMultiFile(r),this.loader.addFile(r))}},addToCache:function(){if(this.isReadyToProcess()){var e=this.files[0],t=this.files[1];e.addToCache(),t.addToCache(),this.complete=!0}}});r.register("audioSprite",(function(e,t,i,s,a,r){var n,o=this.systems.game,h=o.config.audio,l=o.device.audio;if(h&&h.noAudio||!l.webAudio&&!l.audioData)return this;if(Array.isArray(e))for(var c=0;c<e.length;c++)(n=new d(this,e[c])).files&&this.addFile(n.files);else(n=new d(this,e,t,i,s,a,r)).files&&this.addFile(n.files);return this}))},93763:(e,t,i)=>{var s=i(69186),a=i(60351),r=i(44231),n=i(25028),o=i(25738),h=i(53013),l=new s({Extends:r,initialize:function(e,t,i,s,a){var n="bin";if(h(t)){var l=t;t=o(l,"key"),i=o(l,"url"),s=o(l,"xhrSettings"),n=o(l,"extension",n),a=o(l,"dataType",a)}var d={type:"binary",cache:e.cacheManager.binary,extension:n,responseType:"arraybuffer",key:t,url:i,xhrSettings:s,config:{dataType:a}};r.call(this,e,d)},onProcess:function(){this.state=a.FILE_PROCESSING;var e=this.config.dataType;this.data=e?new e(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});n.register("binary",(function(e,t,i,s){if(Array.isArray(e))for(var a=0;a<e.length;a++)this.addFile(new l(this,e[a]));else this.addFile(new l(this,e,t,s,i));return this})),e.exports=l},9386:(e,t,i)=>{var s=i(69186),a=i(25028),r=i(25738),n=i(46198),o=i(53013),h=i(60697),l=i(95634),d=i(22992),c=new s({Extends:h,initialize:function(e,t,i,s,a,l){var c,u;if(o(t)){var f=t;t=r(f,"key"),c=new n(e,{key:t,url:r(f,"textureURL"),extension:r(f,"textureExtension","png"),normalMap:r(f,"normalMap"),xhrSettings:r(f,"textureXhrSettings")}),u=new d(e,{key:t,url:r(f,"fontDataURL"),extension:r(f,"fontDataExtension","xml"),xhrSettings:r(f,"fontDataXhrSettings")})}else c=new n(e,t,i,a),u=new d(e,t,s,l);c.linkFile?h.call(this,e,"bitmapfont",t,[c,u,c.linkFile]):h.call(this,e,"bitmapfont",t,[c,u])},addToCache:function(){if(this.isReadyToProcess()){var e=this.files[0],t=this.files[1];e.addToCache(),t.pendingDestroy();var i=e.cache.get(e.key),s=l(t.data,e.cache.getFrame(e.key),0,0,i);this.loader.cacheManager.bitmapFont.add(e.key,{data:s,texture:e.key,frame:null}),this.complete=!0}}});a.register("bitmapFont",(function(e,t,i,s,a){var r;if(Array.isArray(e))for(var n=0;n<e.length;n++)r=new c(this,e[n]),this.addFile(r.files);else r=new c(this,e,t,i,s,a),this.addFile(r.files);return this})),e.exports=c},71709:(e,t,i)=>{var s=i(69186),a=i(60351),r=i(44231),n=i(25028),o=i(25738),h=i(53013),l=new s({Extends:r,initialize:function(e,t,i,s){var a="css";if(h(t)){var n=t;t=o(n,"key"),i=o(n,"url"),s=o(n,"xhrSettings"),a=o(n,"extension",a)}var l={type:"script",cache:!1,extension:a,responseType:"text",key:t,url:i,xhrSettings:s};r.call(this,e,l)},onProcess:function(){this.state=a.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});n.register("css",(function(e,t,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)this.addFile(new l(this,e[s]));else this.addFile(new l(this,e,t,i));return this})),e.exports=l},95069:(e,t,i)=>{var s=i(69186),a=i(60351),r=i(44231),n=i(25028),o=i(25738),h=i(53013),l=i(45964),d=new s({Extends:r,initialize:function(e,t,i,s,a){var n="glsl";if(h(t)){var l=t;t=o(l,"key"),i=o(l,"url"),s=o(l,"shaderType","fragment"),a=o(l,"xhrSettings"),n=o(l,"extension",n)}else void 0===s&&(s="fragment");var d={type:"glsl",cache:e.cacheManager.shader,extension:n,responseType:"text",key:t,url:i,config:{shaderType:s},xhrSettings:a};r.call(this,e,d)},onProcess:function(){this.state=a.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var e=this.data.split("\n"),t=this.extractBlock(e,0);if(t)for(;t;){var i=this.getShaderName(t.header),s=this.getShaderType(t.header),a=this.getShaderUniforms(t.header),r=t.shader;if(this.cache.has(i)){var n=this.cache.get(i);"fragment"===s?n.fragmentSrc=r:n.vertexSrc=r,n.uniforms||(n.uniforms=a)}else"fragment"===s?this.cache.add(i,new l(i,r,"",a)):this.cache.add(i,new l(i,"",r,a));t=this.extractBlock(e,t.offset)}else"fragment"===this.config.shaderType?this.cache.add(this.key,new l(this.key,this.data)):this.cache.add(this.key,new l(this.key,"",this.data));this.pendingDestroy()},getShaderName:function(e){for(var t=0;t<e.length;t++){var i=e[t].trim();if("name:"===i.substring(0,5))return i.substring(5).trim()}return this.key},getShaderType:function(e){for(var t=0;t<e.length;t++){var i=e[t].trim();if("type:"===i.substring(0,5))return i.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(e){for(var t={},i=0;i<e.length;i++){var s=e[i].trim();if("uniform."===s.substring(0,8)){var a=s.indexOf(":");if(a){var r=s.substring(8,a);try{t[r]=JSON.parse(s.substring(a+1))}catch(e){console.warn("Invalid uniform JSON: "+r)}}}}return t},extractBlock:function(e,t){for(var i=-1,s=-1,a=-1,r=!1,n=!1,o=[],h=[],l=t;l<e.length;l++){var d=e[l].trim();if("---"===d)if(-1===i)i=l,r=!0;else{if(!r){n=!1;break}s=l,r=!1,n=!0}else r?o.push(d):n&&(h.push(d),a=l)}return r||-1===s?null:{header:o,shader:h.join("\n"),offset:a}}});n.register("glsl",(function(e,t,i,s){if(Array.isArray(e))for(var a=0;a<e.length;a++)this.addFile(new d(this,e[a]));else this.addFile(new d(this,e,t,i,s));return this})),e.exports=d},79805:(e,t,i)=>{var s=i(69186),a=i(40),r=i(44231),n=i(25738),o=i(15966),h=i(53013),l=new s({Extends:r,initialize:function(e,t,i,s){if(h(t)){var a=t;t=n(a,"key"),s=n(a,"config",s)}var o={type:"audio",cache:e.cacheManager.audio,extension:i.type,key:t,url:i.url,config:s};r.call(this,e,o),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var e=0;e<this.data.length;e++){var t=this.data[e];t.oncanplaythrough=null,t.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(e){var t=e.target;t.oncanplaythrough=null,t.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(a.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var e=this.config&&this.config.instances||1;this.filesTotal=e,this.filesLoaded=0,this.percentComplete=0;for(var t=0;t<e;t++){var i=new Audio;i.dataset||(i.dataset={}),i.dataset.name=this.key+("0"+t).slice(-2),i.dataset.used="false",this.locked?i.dataset.locked="true":(i.dataset.locked="false",i.preload="auto",i.oncanplaythrough=this.onProgress.bind(this),i.onerror=this.onError.bind(this)),this.data.push(i)}for(t=0;t<this.data.length;t++)(i=this.data[t]).src=o(this,this.loader.baseURL),this.locked||i.load();this.locked&&setTimeout(this.onLoad.bind(this))}});e.exports=l},18579:(e,t,i)=>{var s=i(69186),a=i(60351),r=i(44231),n=i(25028),o=i(25738),h=i(53013),l=new s({Extends:r,initialize:function(e,t,i,s){var a="html";if(h(t)){var n=t;t=o(n,"key"),i=o(n,"url"),s=o(n,"xhrSettings"),a=o(n,"extension",a)}var l={type:"text",cache:e.cacheManager.html,extension:a,responseType:"text",key:t,url:i,xhrSettings:s};r.call(this,e,l)},onProcess:function(){this.state=a.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});n.register("html",(function(e,t,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)this.addFile(new l(this,e[s]));else this.addFile(new l(this,e,t,i));return this})),e.exports=l},51852:(e,t,i)=>{var s=i(69186),a=i(60351),r=i(44231),n=i(25028),o=i(25738),h=i(53013),l=new s({Extends:r,initialize:function(e,t,i,s,a,n){void 0===s&&(s=512),void 0===a&&(a=512);var l="html";if(h(t)){var d=t;t=o(d,"key"),i=o(d,"url"),n=o(d,"xhrSettings"),l=o(d,"extension",l),s=o(d,"width",s),a=o(d,"height",a)}var c={type:"html",cache:e.textureManager,extension:l,responseType:"text",key:t,url:i,xhrSettings:n,config:{width:s,height:a}};r.call(this,e,c)},onProcess:function(){this.state=a.FILE_PROCESSING;var e=this.config.width,t=this.config.height,i=[];i.push('<svg width="'+e+'px" height="'+t+'px" viewBox="0 0 '+e+" "+t+'" xmlns="http://www.w3.org/2000/svg">'),i.push('<foreignObject width="100%" height="100%">'),i.push('<body xmlns="http://www.w3.org/1999/xhtml">'),i.push(this.xhrLoader.responseText),i.push("</body>"),i.push("</foreignObject>"),i.push("</svg>");var s=[i.join("\n")],n=this;try{var o=new window.Blob(s,{type:"image/svg+xml;charset=utf-8"})}catch(e){return n.state=a.FILE_ERRORED,void n.onProcessComplete()}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){r.revokeObjectURL(n.data),n.onProcessComplete()},this.data.onerror=function(){r.revokeObjectURL(n.data),n.onProcessError()},r.createObjectURL(this.data,o,"image/svg+xml")},addToCache:function(){var e=this.cache.addImage(this.key,this.data);this.pendingDestroy(e)}});n.register("htmlTexture",(function(e,t,i,s,a){if(Array.isArray(e))for(var r=0;r<e.length;r++)this.addFile(new l(this,e[r]));else this.addFile(new l(this,e,t,i,s,a));return this})),e.exports=l},46198:(e,t,i)=>{var s=i(69186),a=i(60351),r=i(44231),n=i(25028),o=i(25738),h=i(53013),l=new s({Extends:r,initialize:function e(t,i,s,a,n){var l,d="png";if(h(i)){var c=i;i=o(c,"key"),s=o(c,"url"),l=o(c,"normalMap"),a=o(c,"xhrSettings"),d=o(c,"extension",d),n=o(c,"frameConfig")}Array.isArray(s)&&(l=s[1],s=s[0]);var u={type:"image",cache:t.textureManager,extension:d,responseType:"blob",key:i,url:s,xhrSettings:a,config:n};if(r.call(this,t,u),l){var f=new e(t,this.key,l,a,n);f.type="normalMap",this.setLink(f),t.addFile(f)}},onProcess:function(){this.state=a.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var e=this;this.data.onload=function(){r.revokeObjectURL(e.data),e.onProcessComplete()},this.data.onerror=function(){r.revokeObjectURL(e.data),e.onProcessError()},r.createObjectURL(this.data,this.xhrLoader.response,"image/png")},addToCache:function(){var e,t=this.linkFile;t&&t.state===a.FILE_COMPLETE?(e="image"===this.type?this.cache.addImage(this.key,this.data,t.data):this.cache.addImage(t.key,t.data,this.data),this.pendingDestroy(e),t.pendingDestroy(e)):t||(e=this.cache.addImage(this.key,this.data),this.pendingDestroy(e))}});n.register("image",(function(e,t,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)this.addFile(new l(this,e[s]));else this.addFile(new l(this,e,t,i));return this})),e.exports=l},85665:(e,t,i)=>{var s=i(69186),a=i(60351),r=i(44231),n=i(25028),o=i(25738),h=i(76076),l=i(53013),d=new s({Extends:r,initialize:function(e,t,i,s,n){var d="json";if(l(t)){var c=t;t=o(c,"key"),i=o(c,"url"),s=o(c,"xhrSettings"),d=o(c,"extension",d),n=o(c,"dataKey",n)}var u={type:"json",cache:e.cacheManager.json,extension:d,responseType:"text",key:t,url:i,xhrSettings:s,config:n};r.call(this,e,u),l(i)&&(this.data=n?h(i,n):i,this.state=a.FILE_POPULATED)},onProcess:function(){if(this.state!==a.FILE_POPULATED){this.state=a.FILE_PROCESSING;try{var e=JSON.parse(this.xhrLoader.responseText)}catch(e){throw console.warn("Invalid JSON: "+this.key),this.onProcessError(),e}var t=this.config;this.data="string"==typeof t?h(e,t,e):e}this.onProcessComplete()}});n.register("json",(function(e,t,i,s){if(Array.isArray(e))for(var a=0;a<e.length;a++)this.addFile(new d(this,e[a]));else this.addFile(new d(this,e,t,s,i));return this})),e.exports=d},97147:(e,t,i)=>{var s=i(69186),a=i(25028),r=i(25738),n=i(46198),o=i(53013),h=i(85665),l=i(60697),d=new s({Extends:l,initialize:function(e,t,i,s,a,n,d){if(o(t)){var c=t;t=r(c,"key"),i=r(c,"url",!1)?r(c,"url"):r(c,"atlasURL"),n=r(c,"xhrSettings"),s=r(c,"path"),a=r(c,"baseURL"),d=r(c,"textureXhrSettings")}var u=new h(e,t,i,n);l.call(this,e,"multiatlas",t,[u]),this.config.path=s,this.config.baseURL=a,this.config.textureXhrSettings=d},onFileComplete:function(e){if(-1!==this.files.indexOf(e)&&(this.pending--,"json"===e.type&&e.data.hasOwnProperty("textures"))){var t=e.data.textures,i=this.config,s=this.loader,a=s.baseURL,o=s.path,h=s.prefix,l=r(i,"baseURL",this.baseURL),d=r(i,"path",this.path),c=r(i,"prefix",this.prefix),u=r(i,"textureXhrSettings");s.setBaseURL(l),s.setPath(d),s.setPrefix(c);for(var f=0;f<t.length;f++){var p=t[f].image,g="MA"+this.multiKeyIndex+"_"+p,y=new n(s,g,p,u);if(this.addToMultiFile(y),s.addFile(y),t[f].normalMap){var x=new n(s,g,t[f].normalMap,u);x.type="normalMap",y.setLink(x),this.addToMultiFile(x),s.addFile(x)}}s.setBaseURL(a),s.setPath(o),s.setPrefix(h)}},addToCache:function(){if(this.isReadyToProcess()){for(var e=this.files[0],t=[],i=[],s=[],a=1;a<this.files.length;a++){var r=this.files[a];if("normalMap"!==r.type)for(var n=r.key.indexOf("_"),o=r.key.substr(n+1),h=r.data,l=0;l<e.data.textures.length;l++){var d=e.data.textures[l];if(d.image===o){i.push(h),t.push(d),r.linkFile&&s.push(r.linkFile.data);break}}}for(0===s.length&&(s=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,i,t,s),this.complete=!0,a=0;a<this.files.length;a++)this.files[a].pendingDestroy()}}});a.register("multiatlas",(function(e,t,i,s,a){var r;if(Array.isArray(e))for(var n=0;n<e.length;n++)r=new d(this,e[n]),this.addFile(r.files);else r=new d(this,e,t,i,s,a),this.addFile(r.files);return this})),e.exports=d},92233:(e,t,i)=>{var s=i(69186),a=i(25028),r=i(25738),n=i(53013),o=i(60697),h=i(12328),l=new s({Extends:o,initialize:function(e,t,i,s){var a="js",l=[];if(n(t)){var d=t;t=r(d,"key"),i=r(d,"url"),s=r(d,"xhrSettings"),a=r(d,"extension",a)}Array.isArray(i)||(i=[i]);for(var c=0;c<i.length;c++){var u=new h(e,{key:t+"_"+c.toString(),url:i[c],extension:a,xhrSettings:s});u.onProcess=function(){this.onProcessComplete()},l.push(u)}o.call(this,e,"scripts",t,l)},addToCache:function(){if(this.isReadyToProcess()){for(var e=0;e<this.files.length;e++){var t=this.files[e];t.data=document.createElement("script"),t.data.language="javascript",t.data.type="text/javascript",t.data.defer=!1,t.data.text=t.xhrLoader.responseText,document.head.appendChild(t.data)}this.complete=!0}}});a.register("scripts",(function(e,t,i){var s;if(Array.isArray(e))for(var a=0;a<e.length;a++)s=new l(this,e[a]),this.addFile(s.files);else s=new l(this,e,t,i),this.addFile(s.files);return this})),e.exports=l},45849:(e,t,i)=>{var s=i(69186),a=i(25028),r=i(25738),n=i(53013),o=i(60697),h=i(11669),l=i(91252),d=i(20368),c=new s({Extends:o,initialize:function(e,t,i,s,a,h){var l,c,u=e.cacheManager.obj;if(n(t)){var f=t;t=r(f,"key"),l=new d(e,{key:t,type:"obj",cache:u,url:r(f,"url"),extension:r(f,"extension","obj"),xhrSettings:r(f,"xhrSettings"),config:{flipUV:r(f,"flipUV",a)}}),(s=r(f,"matURL"))&&(c=new d(e,{key:t,type:"mat",cache:u,url:s,extension:r(f,"matExtension","mat"),xhrSettings:r(f,"xhrSettings")}))}else l=new d(e,{key:t,url:i,type:"obj",cache:u,extension:"obj",xhrSettings:h,config:{flipUV:a}}),s&&(c=new d(e,{key:t,url:s,type:"mat",cache:u,extension:"mat",xhrSettings:h}));o.call(this,e,"obj",t,[l,c])},addToCache:function(){if(this.isReadyToProcess()){var e=this.files[0],t=this.files[1],i=h(e.data,e.config.flipUV);t&&(i.materials=l(t.data)),e.cache.add(e.key,i),this.complete=!0}}});a.register("obj",(function(e,t,i,s,a){var r;if(Array.isArray(e))for(var n=0;n<e.length;n++)r=new c(this,e[n]),this.addFile(r.files);else r=new c(this,e,t,i,s,a),this.addFile(r.files);return this})),e.exports=c},65263:(e,t,i)=>{var s=i(69186),a=i(60351),r=i(25028),n=i(85665),o=new s({Extends:n,initialize:function(e,t,i,s,a){n.call(this,e,t,i,s,a),this.type="packfile"},onProcess:function(){this.state!==a.FILE_POPULATED&&(this.state=a.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.loader.addPack(this.data,this.config),this.onProcessComplete()}});r.register("pack",(function(e,t,i,s){if(Array.isArray(e))for(var a=0;a<e.length;a++)this.addFile(new o(this,e[a]));else this.addFile(new o(this,e,t,s,i));return this})),e.exports=o},76147:(e,t,i)=>{var s=i(69186),a=i(60351),r=i(44231),n=i(25028),o=i(25738),h=i(53013),l=new s({Extends:r,initialize:function(e,t,i,s,n,l){var d="js";if(h(t)){var c=t;t=o(c,"key"),i=o(c,"url"),l=o(c,"xhrSettings"),d=o(c,"extension",d),s=o(c,"start"),n=o(c,"mapping")}var u={type:"plugin",cache:!1,extension:d,responseType:"text",key:t,url:i,xhrSettings:l,config:{start:s,mapping:n}};r.call(this,e,u),"function"==typeof i&&(this.data=i,this.state=a.FILE_POPULATED)},onProcess:function(){var e=this.loader.systems.plugins,t=this.config,i=o(t,"start",!1),s=o(t,"mapping",null);if(this.state===a.FILE_POPULATED)e.install(this.key,this.data,i,s);else{this.state=a.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var r=e.install(this.key,window[this.key],i,s);(i||s)&&(this.loader.systems[s]=r,this.loader.scene[s]=r)}this.onProcessComplete()}});n.register("plugin",(function(e,t,i,s,a){if(Array.isArray(e))for(var r=0;r<e.length;r++)this.addFile(new l(this,e[r]));else this.addFile(new l(this,e,t,i,s,a));return this})),e.exports=l},38443:(e,t,i)=>{var s=i(69186),a=i(60351),r=i(44231),n=i(25028),o=i(25738),h=i(53013),l=new s({Extends:r,initialize:function(e,t,i,s,a){var n="svg";if(h(t)){var l=t;t=o(l,"key"),i=o(l,"url"),s=o(l,"svgConfig",{}),a=o(l,"xhrSettings"),n=o(l,"extension",n)}var d={type:"svg",cache:e.textureManager,extension:n,responseType:"text",key:t,url:i,xhrSettings:a,config:{width:o(s,"width"),height:o(s,"height"),scale:o(s,"scale")}};r.call(this,e,d)},onProcess:function(){this.state=a.FILE_PROCESSING;var e=this.xhrLoader.responseText,t=[e],i=this.config.width,s=this.config.height,n=this.config.scale;e:if(i&&s||n){var o=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("svg")[0],h=o.hasAttribute("viewBox"),l=parseFloat(o.getAttribute("width")),d=parseFloat(o.getAttribute("height"));if(!h&&l&&d)o.setAttribute("viewBox","0  0 "+l+" "+d);else if(h&&!l&&!d){var c=o.getAttribute("viewBox").split(/\s+|,/);l=c[2],d=c[3]}if(n){if(!l||!d)break e;i=l*n,s=d*n}o.setAttribute("width",i.toString()+"px"),o.setAttribute("height",s.toString()+"px"),t=[(new XMLSerializer).serializeToString(o)]}try{var u=new window.Blob(t,{type:"image/svg+xml;charset=utf-8"})}catch(e){return void this.onProcessError()}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var f=this,p=!1;this.data.onload=function(){p||r.revokeObjectURL(f.data),f.onProcessComplete()},this.data.onerror=function(){p?f.onProcessError():(p=!0,r.revokeObjectURL(f.data),f.data.src="data:image/svg+xml,"+encodeURIComponent(t.join("")))},r.createObjectURL(this.data,u,"image/svg+xml")},addToCache:function(){var e=this.cache.addImage(this.key,this.data);this.pendingDestroy(e)}});n.register("svg",(function(e,t,i,s){if(Array.isArray(e))for(var a=0;a<e.length;a++)this.addFile(new l(this,e[a]));else this.addFile(new l(this,e,t,i,s));return this})),e.exports=l},79633:(e,t,i)=>{var s=i(69186),a=i(60351),r=i(44231),n=i(25028),o=i(25738),h=i(53013),l=new s({Extends:r,initialize:function(e,t,i,s){var a="js";if(h(t)){var n=t;t=o(n,"key"),i=o(n,"url"),s=o(n,"xhrSettings"),a=o(n,"extension",a)}var l={type:"text",extension:a,responseType:"text",key:t,url:i,xhrSettings:s};r.call(this,e,l)},onProcess:function(){this.state=a.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var e=this.data.concat("(function(){\nreturn new "+this.key+"();\n}).call(this);"),t=eval;this.loader.sceneManager.add(this.key,t(e)),this.complete=!0}});n.register("sceneFile",(function(e,t,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)this.addFile(new l(this,e[s]));else this.addFile(new l(this,e,t,i));return this})),e.exports=l},83926:(e,t,i)=>{var s=i(69186),a=i(60351),r=i(44231),n=i(25028),o=i(25738),h=i(53013),l=new s({Extends:r,initialize:function(e,t,i,s,n,l){var d="js";if(h(t)){var c=t;t=o(c,"key"),i=o(c,"url"),l=o(c,"xhrSettings"),d=o(c,"extension",d),s=o(c,"systemKey"),n=o(c,"sceneKey")}var u={type:"scenePlugin",cache:!1,extension:d,responseType:"text",key:t,url:i,xhrSettings:l,config:{systemKey:s,sceneKey:n}};r.call(this,e,u),"function"==typeof i&&(this.data=i,this.state=a.FILE_POPULATED)},onProcess:function(){var e=this.loader.systems.plugins,t=this.config,i=this.key,s=o(t,"systemKey",i),r=o(t,"sceneKey",i);this.state===a.FILE_POPULATED?e.installScenePlugin(s,this.data,r,this.loader.scene,!0):(this.state=a.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),e.installScenePlugin(s,window[this.key],r,this.loader.scene,!0)),this.onProcessComplete()}});n.register("scenePlugin",(function(e,t,i,s,a){if(Array.isArray(e))for(var r=0;r<e.length;r++)this.addFile(new l(this,e[r]));else this.addFile(new l(this,e,t,i,s,a));return this})),e.exports=l},12328:(e,t,i)=>{var s=i(69186),a=i(60351),r=i(44231),n=i(25028),o=i(25738),h=i(53013),l=new s({Extends:r,initialize:function(e,t,i,s){var a="js";if(h(t)){var n=t;t=o(n,"key"),i=o(n,"url"),s=o(n,"xhrSettings"),a=o(n,"extension",a)}var l={type:"script",cache:!1,extension:a,responseType:"text",key:t,url:i,xhrSettings:s};r.call(this,e,l)},onProcess:function(){this.state=a.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});n.register("script",(function(e,t,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)this.addFile(new l(this,e[s]));else this.addFile(new l(this,e,t,i));return this})),e.exports=l},67250:(e,t,i)=>{var s=i(69186),a=i(25028),r=i(46198),n=new s({Extends:r,initialize:function(e,t,i,s,a){r.call(this,e,t,i,a,s),this.type="spritesheet"},addToCache:function(){var e=this.cache.addSpriteSheet(this.key,this.data,this.config);this.pendingDestroy(e)}});a.register("spritesheet",(function(e,t,i,s){if(Array.isArray(e))for(var a=0;a<e.length;a++)this.addFile(new n(this,e[a]));else this.addFile(new n(this,e,t,i,s));return this})),e.exports=n},20368:(e,t,i)=>{var s=i(69186),a=i(60351),r=i(44231),n=i(25028),o=i(25738),h=i(53013),l=new s({Extends:r,initialize:function(e,t,i,s){var a="text",n="txt",l=e.cacheManager.text;if(h(t)){var d=t;t=o(d,"key"),i=o(d,"url"),s=o(d,"xhrSettings"),n=o(d,"extension",n),a=o(d,"type",a),l=o(d,"cache",l)}var c={type:a,cache:l,extension:n,responseType:"text",key:t,url:i,xhrSettings:s};r.call(this,e,c)},onProcess:function(){this.state=a.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});n.register("text",(function(e,t,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)this.addFile(new l(this,e[s]));else this.addFile(new l(this,e,t,i));return this})),e.exports=l},88794:(e,t,i)=>{var s=i(69186),a=i(60351),r=i(44231),n=i(25028),o=i(25738),h=i(53013),l=i(53012),d=new s({Extends:r,initialize:function(e,t,i,s){var a="csv";if(h(t)){var n=t;t=o(n,"key"),i=o(n,"url"),s=o(n,"xhrSettings"),a=o(n,"extension",a)}var d={type:"tilemapCSV",cache:e.cacheManager.tilemap,extension:a,responseType:"text",key:t,url:i,xhrSettings:s};r.call(this,e,d),this.tilemapFormat=l.CSV},onProcess:function(){this.state=a.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var e={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,e),this.pendingDestroy(e)}});n.register("tilemapCSV",(function(e,t,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)this.addFile(new d(this,e[s]));else this.addFile(new d(this,e,t,i));return this})),e.exports=d},84116:(e,t,i)=>{var s=i(69186),a=i(25028),r=i(85665),n=i(53012),o=new s({Extends:r,initialize:function(e,t,i,s){r.call(this,e,t,i,s),this.type="tilemapJSON",this.cache=e.cacheManager.tilemap},addToCache:function(){var e={format:n.WELTMEISTER,data:this.data};this.cache.add(this.key,e),this.pendingDestroy(e)}});a.register("tilemapImpact",(function(e,t,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)this.addFile(new o(this,e[s]));else this.addFile(new o(this,e,t,i));return this})),e.exports=o},82666:(e,t,i)=>{var s=i(69186),a=i(25028),r=i(85665),n=i(53012),o=new s({Extends:r,initialize:function(e,t,i,s){r.call(this,e,t,i,s),this.type="tilemapJSON",this.cache=e.cacheManager.tilemap},addToCache:function(){var e={format:n.TILED_JSON,data:this.data};this.cache.add(this.key,e),this.pendingDestroy(e)}});a.register("tilemapTiledJSON",(function(e,t,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)this.addFile(new o(this,e[s]));else this.addFile(new o(this,e,t,i));return this})),e.exports=o},77579:(e,t,i)=>{var s=i(69186),a=i(25028),r=i(25738),n=i(46198),o=i(53013),h=i(60697),l=i(20368),d=new s({Extends:h,initialize:function(e,t,i,s,a,d){var c,u;if(o(t)){var f=t;t=r(f,"key"),c=new n(e,{key:t,url:r(f,"textureURL"),extension:r(f,"textureExtension","png"),normalMap:r(f,"normalMap"),xhrSettings:r(f,"textureXhrSettings")}),u=new l(e,{key:t,url:r(f,"atlasURL"),extension:r(f,"atlasExtension","txt"),xhrSettings:r(f,"atlasXhrSettings")})}else c=new n(e,t,i,a),u=new l(e,t,s,d);c.linkFile?h.call(this,e,"unityatlas",t,[c,u,c.linkFile]):h.call(this,e,"unityatlas",t,[c,u])},addToCache:function(){if(this.isReadyToProcess()){var e=this.files[0],t=this.files[1],i=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(e.key,e.data,t.data,i),t.pendingDestroy(),this.complete=!0}}});a.register("unityAtlas",(function(e,t,i,s,a){var r;if(Array.isArray(e))for(var n=0;n<e.length;n++)r=new d(this,e[n]),this.addFile(r.files);else r=new d(this,e,t,i,s,a),this.addFile(r.files);return this})),e.exports=d},8548:(e,t,i)=>{var s=i(69186),a=i(60351),r=i(44231),n=i(25028),o=i(15966),h=i(25738),l=i(53013),d=new s({Extends:r,initialize:function(e,t,i,s,a,n,o){void 0===s&&(s="loadeddata"),void 0===a&&(a=!1),void 0===n&&(n=!1),"loadeddata"!==s&&"canplay"!==s&&"canplaythrough"!==s&&(s="loadeddata");var h={type:"video",cache:e.cacheManager.video,extension:i.type,responseType:"blob",key:t,url:i.url,xhrSettings:o,config:{loadEvent:s,asBlob:a,noAudio:n}};this.onLoadCallback=this.onVideoLoadHandler.bind(this),this.onErrorCallback=this.onVideoErrorHandler.bind(this),r.call(this,e,h)},onProcess:function(){if(this.state=a.FILE_PROCESSING,this.config.asBlob){var e=this.createVideoElement();this.data=e;var t=this;this.data.onloadeddata=function(){t.onProcessComplete()},this.data.onerror=function(){r.revokeObjectURL(t.data),t.onProcessError()},r.createObjectURL(e,this.xhrLoader.response,""),e.load()}else this.onProcessComplete()},createVideoElement:function(){var e=document.createElement("video");return e.controls=!1,e.crossOrigin=this.loader.crossOrigin,this.config.noAudio&&(e.muted=!0,e.defaultMuted=!0,e.setAttribute("autoplay","autoplay")),e.setAttribute("playsinline","playsinline"),e.setAttribute("preload","auto"),e},onVideoLoadHandler:function(e){var t=e.target;t.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),t.removeEventListener("error",this.onErrorCallback,!0),this.data=t,this.resetXHR(),this.loader.nextFile(this,!0)},onVideoErrorHandler:function(e){var t=e.target;t&&(t.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),t.removeEventListener("error",this.onErrorCallback,!0)),this.resetXHR(),this.loader.nextFile(this,!1)},load:function(){var e=this.config.loadEvent;if(this.config.asBlob)r.prototype.load.call(this);else{this.percentComplete=0;var t=this.createVideoElement();t.addEventListener(e,this.onLoadCallback,!0),t.addEventListener("error",this.onErrorCallback,!0),t.src=o(this,this.loader.baseURL),t.load()}}});d.create=function(e,t,i,s,a,r,n){var o=e.systems.game;l(t)&&(i=h(t,"url",[]),s=h(t,"loadEvent","loadeddata"),a=h(t,"asBlob",!1),r=h(t,"noAudio",!1),n=h(t,"xhrSettings"),t=h(t,"key"));var c=d.getVideoURL(o,i);if(c)return new d(e,t,c,s,a,r,n)},d.getVideoURL=function(e,t){Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var s,a=h(t[i],"url",t[i]);if(0===a.indexOf("blob:"))return{url:a,type:""};if(s=0===a.indexOf("data:")?a.split(",")[0].match(/\/(.*?);/):a.match(/\.([a-zA-Z0-9]+)($|\?)/),s=h(t[i],"type",s?s[1]:"").toLowerCase(),e.device.video[s])return{url:a,type:s}}return null},n.register("video",(function(e,t,i,s,a,r){var n;if(Array.isArray(e))for(var o=0;o<e.length;o++)(n=d.create(this,e[o]))&&this.addFile(n);else(n=d.create(this,e,t,i,s,a,r))&&this.addFile(n);return this})),e.exports=d},22992:(e,t,i)=>{var s=i(69186),a=i(60351),r=i(44231),n=i(25028),o=i(25738),h=i(53013),l=i(3726),d=new s({Extends:r,initialize:function(e,t,i,s){var a="xml";if(h(t)){var n=t;t=o(n,"key"),i=o(n,"url"),s=o(n,"xhrSettings"),a=o(n,"extension",a)}var l={type:"xml",cache:e.cacheManager.xml,extension:a,responseType:"text",key:t,url:i,xhrSettings:s};r.call(this,e,l)},onProcess:function(){this.state=a.FILE_PROCESSING,this.data=l(this.xhrLoader.responseText),this.data?this.onProcessComplete():(console.warn("Invalid XMLFile: "+this.key),this.onProcessError())}});n.register("xml",(function(e,t,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)this.addFile(new d(this,e[s]));else this.addFile(new d(this,e,t,i));return this})),e.exports=d},67377:(e,t,i)=>{e.exports={AnimationJSONFile:i(32108),AsepriteFile:i(61117),AtlasJSONFile:i(62896),AtlasXMLFile:i(61242),AudioFile:i(70384),AudioSpriteFile:i(55154),BinaryFile:i(93763),BitmapFontFile:i(9386),CSSFile:i(71709),GLSLFile:i(95069),HTML5AudioFile:i(79805),HTMLFile:i(18579),HTMLTextureFile:i(51852),ImageFile:i(46198),JSONFile:i(85665),MultiAtlasFile:i(97147),MultiScriptFile:i(92233),OBJFile:i(45849),PackFile:i(65263),PluginFile:i(76147),SceneFile:i(79633),ScenePluginFile:i(83926),ScriptFile:i(12328),SpriteSheetFile:i(67250),SVGFile:i(38443),TextFile:i(20368),TilemapCSVFile:i(88794),TilemapImpactFile:i(84116),TilemapJSONFile:i(82666),UnityAtlasFile:i(77579),VideoFile:i(8548),XMLFile:i(22992)}},74266:(e,t,i)=>{var s=i(60351),a=i(72646),r={Events:i(40),FileTypes:i(67377),File:i(44231),FileTypesManager:i(25028),GetURL:i(15966),LoaderPlugin:i(90894),MergeXHRSettings:i(32710),MultiFile:i(60697),XHRLoader:i(82825),XHRSettings:i(64567)};r=a(!1,r,s),e.exports=r},53012:e=>{e.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}}}]);