/*! For license information please see vendors~phaser~gameobjects.a5f486bb764943e393b0.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{1231:function(t,e,i){var s={Events:i(82),DisplayList:i(1232),GameObjectCreator:i(19),GameObjectFactory:i(8),UpdateList:i(1233),Components:i(14),GetCalcMatrix:i(23),BuildGameObject:i(33),BuildGameObjectAnimation:i(506),GameObject:i(16),BitmapText:i(163),Blitter:i(243),Bob:i(507),Container:i(244),DOMElement:i(508),DynamicBitmapText:i(245),Extern:i(510),Graphics:i(246),Group:i(128),Image:i(129),Layer:i(251),Particles:i(1262),PathFollower:i(519),RenderTexture:i(253),RetroFont:i(1270),Rope:i(254),Sprite:i(67),Text:i(255),GetTextSize:i(520),MeasureText:i(522),TextStyle:i(521),TileSprite:i(256),Zone:i(138),Video:i(257),Shape:i(39),Arc:i(523),Curve:i(524),Ellipse:i(525),Grid:i(526),IsoBox:i(527),IsoTriangle:i(528),Line:i(529),Polygon:i(530),Rectangle:i(531),Star:i(532),Triangle:i(533),Factories:{Blitter:i(1318),Container:i(1319),DOMElement:i(1320),DynamicBitmapText:i(1321),Extern:i(1322),Graphics:i(1323),Group:i(1324),Image:i(1325),Layer:i(1326),Particles:i(1327),PathFollower:i(1328),RenderTexture:i(1329),Rope:i(1330),Sprite:i(1331),StaticBitmapText:i(1332),Text:i(1333),TileSprite:i(1334),Zone:i(1335),Video:i(1336),Arc:i(1337),Curve:i(1338),Ellipse:i(1339),Grid:i(1340),IsoBox:i(1341),IsoTriangle:i(1342),Line:i(1343),Polygon:i(1344),Rectangle:i(1345),Star:i(1346),Triangle:i(1347)},Creators:{Blitter:i(1348),Container:i(1349),DynamicBitmapText:i(1350),Graphics:i(1351),Group:i(1352),Image:i(1353),Layer:i(1354),Particles:i(1355),RenderTexture:i(1356),Rope:i(1357),Sprite:i(1358),StaticBitmapText:i(1359),Text:i(1360),TileSprite:i(1361),Zone:i(1362),Video:i(1363)}};s.Shader=i(258),s.Mesh=i(259),s.PointLight=i(165),s.Factories.Shader=i(1372),s.Factories.Mesh=i(1373),s.Factories.PointLight=i(1374),s.Creators.Shader=i(1375),s.Creators.Mesh=i(1376),s.Creators.PointLight=i(1377),s.Light=i(534),s.LightsManager=i(535),s.LightsPlugin=i(1378),t.exports=s},1232:function(t,e,i){var s=i(3),n=i(126),r=i(29),a=i(82),h=i(22),o=i(88),l=new s({Extends:n,initialize:function(t){n.call(this,t),this.sortChildrenFlag=!1,this.scene=t,this.systems=t.sys,this.events=t.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(h.BOOT,this.boot,this),this.events.on(h.START,this.start,this)},boot:function(){this.events.once(h.DESTROY,this.destroy,this)},addChildCallback:function(t){t.displayList&&t.displayList!==this&&t.removeFromDisplayList(),t.displayList||(this.queueDepthSort(),t.displayList=this,t.emit(a.ADDED_TO_SCENE,t,this.scene),this.events.emit(h.ADDED_TO_SCENE,t,this.scene))},removeChildCallback:function(t){this.queueDepthSort(),t.displayList=null,t.emit(a.REMOVED_FROM_SCENE,t,this.scene),this.events.emit(h.REMOVED_FROM_SCENE,t,this.scene)},start:function(){this.events.once(h.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(o(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(t,e){return t._depth-e._depth},getChildren:function(){return this.list},shutdown:function(){for(var t=this.list,e=t.length;e--;)t[e].destroy(!0);t.length=0,this.events.off(h.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(h.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});r.register("DisplayList",l,"displayList"),t.exports=l},1233:function(t,e,i){var s=i(3),n=i(235),r=i(29),a=i(22),h=new s({Extends:n,initialize:function(t){n.call(this),this.checkQueue=!0,this.scene=t,this.systems=t.sys,t.sys.events.once(a.BOOT,this.boot,this),t.sys.events.on(a.START,this.start,this)},boot:function(){this.systems.events.once(a.DESTROY,this.destroy,this)},start:function(){var t=this.systems.events;t.on(a.PRE_UPDATE,this.update,this),t.on(a.UPDATE,this.sceneUpdate,this),t.once(a.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(t,e){for(var i=this._active,s=i.length,n=0;n<s;n++){var r=i[n];r.active&&r.preUpdate.call(r,t,e)}},shutdown:function(){for(var t=this._active.length;t--;)this._active[t].destroy(!0);for(t=this._pending.length;t--;)this._pending[t].destroy(!0);for(t=this._destroy.length;t--;)this._destroy[t].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var e=this.systems.events;e.off(a.PRE_UPDATE,this.update,this),e.off(a.UPDATE,this.sceneUpdate,this),e.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(a.START,this.start,this),this.scene=null,this.systems=null}});r.register("UpdateList",h,"updateList"),t.exports=h},1234:function(t,e){t.exports=function(t,e,i,s){if(void 0===i&&(i=!1),void 0===s)return s={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0};var n,r,a,h,o=t.text,l=o.length,u=t.maxWidth,d=t.wordWrapCharCode,c=Number.MAX_VALUE,f=Number.MAX_VALUE,p=0,v=0,g=t.fontData.chars,m=t.fontData.lineHeight,y=t.letterSpacing,x=0,T=0,w=0,S=null,b=t._align,_=0,L=0,C=t.fontSize/t.fontData.size,E=C*t.scaleX,F=C*t.scaleY,A=null,R=0,k=[],P=Number.MAX_VALUE,M=0,O=0,B=0,D=[],Y=[],X=null;if(u>0){for(n=0;n<l;n++)if(10!==(w=o.charCodeAt(n))){if(S=g[w]){if(null!==A)var W=S.kerning[R];w===d?null!==X&&(D.push({word:X.word,i:X.i,x:X.x*E,y:X.y*F,w:X.w*E,h:X.h*F,cr:!1}),X=null):(null===X&&(X={word:"",i:n,x:x,y:T,w:0,h:m,cr:!1}),X.word=X.word.concat(o[n]),X.w+=S.xOffset+S.xAdvance+(void 0!==W?W:0)),x+=S.xAdvance+y,A=S,R=w}}else null!==X&&(D.push({word:X.word,i:X.i,x:X.x*E,y:X.y*F,w:X.w*E,h:X.h*F,cr:!0}),X=null),x=0,T+=m,A=null;var I;null!==X&&D.push({word:X.word,i:X.i,x:X.x*E,y:X.y*F,w:X.w*E,h:X.h*F,cr:!1}),x=0,T=0,A=null,R=0;var z=0,V=[];for(n=0;n<D.length;n++){var G=D[n],U=G.x,N=G.x+G.w;if(I)z=U-(U-(I.x+I.w)+I.w),I=null;U-z>u||N-z>u?(V.push(G.i-1),G.cr?(V.push(G.i+G.word.length),z=0,I=null):I=G):G.cr&&(V.push(G.i+G.word.length),z=0,I=null)}for(n=V.length-1;n>=0;n--)r=o,a=V[n],h="\n",o=r.substr(0,a)+h+r.substr(a+1);s.wrappedText=o,l=o.length,D=[],X=null}var H=0;for(n=0;n<l;n++)if(10!==(w=o.charCodeAt(n))){if(S=g[w]){if(_=x,L=T,null!==A){var j=S.kerning[R];_+=void 0!==j?j:0}c>_&&(c=_),f>L&&(f=L);var K=_+S.xAdvance,Z=L+m;p<K&&(p=K),v<Z&&(v=Z);var q=S.xOffset+S.xAdvance+(void 0!==j?j:0);w===d?null!==X&&(D.push({word:X.word,i:X.i,x:X.x*E,y:X.y*F,w:X.w*E,h:X.h*F}),X=null):(null===X&&(X={word:"",i:H,x:x,y:T,w:0,h:m}),X.word=X.word.concat(o[n]),X.w+=q),Y.push({i:H,char:o[n],code:w,x:(S.xOffset+x)*C,y:(S.yOffset+T)*C,w:S.width*C,h:S.height*C,t:T*C,r:K*C,b:m*C,line:O,glyph:S}),x+=S.xAdvance+y,A=S,R=w,B=K*C,H++}}else null!==X&&(D.push({word:X.word,i:X.i,x:X.x*E,y:X.y*F,w:X.w*E,h:X.h*F}),X=null),x=0,T+=m,A=null,k[O]=B,B>M&&(M=B),B<P&&(P=B),O++,B=0;if(null!==X&&D.push({word:X.word,i:X.i,x:X.x*E,y:X.y*F,w:X.w*E,h:X.h*F}),k[O]=B,B>M&&(M=B),B<P&&(P=B),b>0)for(var J=0;J<Y.length;J++){var Q=Y[J];if(1===b){var $=(M-k[Q.line])/2;Q.x+=$,Q.r+=$}else if(2===b){var tt=M-k[Q.line];Q.x+=tt,Q.r+=tt}}var et=s.local,it=s.global,st=s.lines;return et.x=c*C,et.y=f*C,et.width=p*C,et.height=v*C,it.x=t.x-t._displayOriginX+c*E,it.y=t.y-t._displayOriginY+f*F,it.width=p*E,it.height=v*F,st.shortest=P,st.longest=M,st.lengths=k,e&&(et.x=Math.ceil(et.x),et.y=Math.ceil(et.y),et.width=Math.ceil(et.width),et.height=Math.ceil(et.height),it.x=Math.ceil(it.x),it.y=Math.ceil(it.y),it.width=Math.ceil(it.width),it.height=Math.ceil(it.height),st.shortest=Math.ceil(P),st.longest=Math.ceil(M)),i&&(t._displayOriginX=t.originX*et.width,t._displayOriginY=t.originY*et.height,it.x=t.x-t._displayOriginX*t.scaleX,it.y=t.y-t._displayOriginY*t.scaleY,e&&(it.x=Math.ceil(it.x),it.y=Math.ceil(it.y))),s.words=D,s.characters=Y,s.lines.height=m,s.scale=C,s.scaleX=t.scaleX,s.scaleY=t.scaleY,s}},1235:function(t,e,i){var s=i(164);t.exports=function(t,e,i,n,r,a,h){var o=t.sys.textures.get(i),l=o.get(n),u=t.sys.cache.xml.get(r);if(l&&u){var d=s(u,l,a,h,o);return t.sys.cache.bitmapFont.add(e,{data:d,texture:i,frame:n,fromAtlas:!0}),!0}return!1}},1236:function(t,e,i){var s=i(4),n=i(4);s=i(1237),n=i(1239),t.exports={renderWebGL:s,renderCanvas:n}},1237:function(t,e,i){var s=i(1238),n=i(23),r=i(15);t.exports=function(t,e,i,a){if(0!==e._text.length){i.addToRenderList(e);var h,o,l,u=t.pipelines.set(e.pipeline,e),d=n(e,i,a).calc,c=i.roundPixels,f=i.alpha,p=e.charColors,v=e.tintFill,g=r.getTintAppendFloatAlpha,m=g(e.tintTopLeft,f*e._alphaTL),y=g(e.tintTopRight,f*e._alphaTR),x=g(e.tintBottomLeft,f*e._alphaBL),T=g(e.tintBottomRight,f*e._alphaBR),w=e.frame.glTexture,S=u.setGameObject(e),b=e.getTextBounds(!1).characters,_=e.dropShadowX,L=e.dropShadowY,C=0!==_||0!==L;if(t.pipelines.preBatch(e),C){var E=e.dropShadowColor,F=e.dropShadowAlpha,A=g(E,f*F*e._alphaTL),R=g(E,f*F*e._alphaTR),k=g(E,f*F*e._alphaBL),P=g(E,f*F*e._alphaBR);for(h=0;h<b.length;h++)l=(o=b[h]).glyph,32!==o.code&&0!==l.width&&0!==l.height&&s(u,e,o,l,_,L,d,c,A,R,k,P,1,w,S)}for(h=0;h<b.length;h++)if(l=(o=b[h]).glyph,32!==o.code&&0!==l.width&&0!==l.height)if(p[o.i]){var M=p[o.i],O=M.tintEffect,B=g(M.tintTL,f*e._alphaTL),D=g(M.tintTR,f*e._alphaTR),Y=g(M.tintBL,f*e._alphaBL),X=g(M.tintBR,f*e._alphaBR);s(u,e,o,l,0,0,d,c,B,D,Y,X,O,w,S)}else s(u,e,o,l,0,0,d,c,m,y,x,T,v,w,S);t.pipelines.postBatch(e)}}},1238:function(t,e){t.exports=function(t,e,i,s,n,r,a,h,o,l,u,d,c,f,p){var v=i.x-e.displayOriginX+n,g=i.y-e.displayOriginY+r,m=v+i.w,y=g+i.h,x=a.getXRound(v,g,h),T=a.getYRound(v,g,h),w=a.getXRound(v,y,h),S=a.getYRound(v,y,h),b=a.getXRound(m,y,h),_=a.getYRound(m,y,h),L=a.getXRound(m,g,h),C=a.getYRound(m,g,h);t.batchQuad(e,x,T,w,S,b,_,L,C,s.u0,s.v0,s.u1,s.v1,o,l,u,d,c,f,p)}},1239:function(t,e,i){var s=i(35);t.exports=function(t,e,i,n){var r=e._text,a=r.length,h=t.currentContext;if(0!==a&&s(t,h,e,i,n)){i.addToRenderList(e);var o=e.fromAtlas?e.frame:e.texture.frames.__BASE,l=e.fontData.chars,u=e.fontData.lineHeight,d=e._letterSpacing,c=0,f=0,p=0,v=null,g=0,m=0,y=0,x=0,T=0,w=0,S=null,b=0,_=o.source.image,L=o.cutX,C=o.cutY,E=e._fontSize/e.fontData.size,F=e._align,A=0,R=0,k=e.getTextBounds(!1);e.maxWidth>0&&(a=(r=k.wrappedText).length);var P=e._bounds.lines;1===F?R=(P.longest-P.lengths[0])/2:2===F&&(R=P.longest-P.lengths[0]),h.translate(-e.displayOriginX,-e.displayOriginY);for(var M=i.roundPixels,O=0;O<a;O++)if(10!==(p=r.charCodeAt(O))){if(v=l[p]){if(g=L+v.x,m=C+v.y,y=v.width,x=v.height,T=v.xOffset+c,w=v.yOffset+f,null!==S){var B=v.kerning[b];T+=void 0!==B?B:0}T*=E,w*=E,T+=R,c+=v.xAdvance+d,S=v,b=p,0!==y&&0!==x&&32!==p&&(M&&(T=Math.round(T),w=Math.round(w)),h.save(),h.translate(T,w),h.scale(E,E),h.drawImage(_,g,m,y,x,0,0,y,x),h.restore())}}else A++,1===F?R=(P.longest-P.lengths[A])/2:2===F&&(R=P.longest-P.lengths[A]),c=0,f+=u,S=null;h.restore()}}},1240:function(t,e,i){var s=i(4),n=i(4);s=i(1241),n=i(1242),t.exports={renderWebGL:s,renderCanvas:n}},1241:function(t,e,i){var s=i(30),n=i(15),r=new s;t.exports=function(t,e,i,s){var a=e.getRenderList();if(0!==a.length){var h=i.alpha*e.alpha;if(0!==h){i.addToRenderList(e);var o=t.pipelines.set(this.pipeline,e),l=i.scrollX*e.scrollFactorX,u=i.scrollY*e.scrollFactorY,d=r.copyFrom(i.matrix);s&&(d.multiplyWithOffset(s,-l,-u),l=0,u=0);var c=e.x-l,f=e.y-u,p=-1,v=i.roundPixels;t.pipelines.preBatch(e);for(var g=0;g<a.length;g++){var m=a[g],y=m.frame,x=m.alpha*h;if(0!==x){var T=y.width,w=y.height,S=c+m.x+y.x,b=f+m.y+y.y;m.flipX&&(T*=-1,S+=y.width),m.flipY&&(w*=-1,b+=y.height);var _=S+T,L=b+w,C=d.getX(S,b),E=d.getY(S,b),F=d.getX(_,L),A=d.getY(_,L),R=n.getTintAppendFloatAlpha(m.tint,x);if(y.sourceIndex!==p){var k=o.setGameObject(e,y);p=y.sourceIndex}v&&(C=Math.round(C),E=Math.round(E),F=Math.round(F),A=Math.round(A)),o.batchQuad(e,C,E,C,A,F,A,F,E,y.u0,y.v0,y.u1,y.v1,R,R,R,R,false,y.glTexture,k)&&(p=-1)}}t.pipelines.postBatch(e)}}}},1242:function(t,e){t.exports=function(t,e,i,s){var n=e.getRenderList();if(0!==n.length){var r=t.currentContext,a=i.alpha*e.alpha;if(0!==a){i.addToRenderList(e),r.globalCompositeOperation=t.blendModes[e.blendMode],r.imageSmoothingEnabled=!(!t.antialias||e.frame.source.scaleMode);var h=e.x-i.scrollX*e.scrollFactorX,o=e.y-i.scrollY*e.scrollFactorY;r.save(),s&&s.copyToContext(r);for(var l=i.roundPixels,u=0;u<n.length;u++){var d=n[u],c=d.flipX||d.flipY,f=d.frame,p=f.canvasData,v=f.x,g=f.y,m=1,y=1,x=d.alpha*a;0!==x&&(r.globalAlpha=x,c?(d.flipX&&(m=-1,v-=p.width),d.flipY&&(y=-1,g-=p.height),r.save(),r.translate(d.x+h,d.y+o),r.scale(m,y),r.drawImage(f.source.image,p.x,p.y,p.width,p.height,v,g,p.width,p.height),r.restore()):(l&&(v=Math.round(v),g=Math.round(g)),r.drawImage(f.source.image,p.x,p.y,p.width,p.height,v+d.x+h,g+d.y+o,p.width,p.height)))}r.restore()}}}},1243:function(t,e,i){var s=i(4),n=i(4);s=i(1244),n=i(1245),t.exports={renderWebGL:s,renderCanvas:n}},1244:function(t,e){t.exports=function(t,e,i,s){i.addToRenderList(e);var n=e.list,r=n.length;if(0!==r){var a=e.localTransform;s?(a.loadIdentity(),a.multiply(s),a.translate(e.x,e.y),a.rotate(e.rotation),a.scale(e.scaleX,e.scaleY)):a.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),t.pipelines.preBatch(e);var h=-1!==e.blendMode;h||t.setBlendMode(0);for(var o=e.alpha,l=e.scrollFactorX,u=e.scrollFactorY,d=0;d<r;d++){var c=n[d];if(c.willRender(i)){var f,p,v,g;if(void 0!==c.alphaTopLeft)f=c.alphaTopLeft,p=c.alphaTopRight,v=c.alphaBottomLeft,g=c.alphaBottomRight;else{var m=c.alpha;f=m,p=m,v=m,g=m}var y=c.scrollFactorX,x=c.scrollFactorY;h||c.blendMode===t.currentBlendMode||t.setBlendMode(c.blendMode);var T=c.mask;T&&T.preRenderWebGL(t,c,i);var w=c.type;w!==t.currentType&&(t.newType=!0,t.currentType=w),t.nextTypeMatch=d<r-1&&n[d+1].type===t.currentType,c.setScrollFactor(y*l,x*u),c.setAlpha(f*o,p*o,v*o,g*o),c.renderWebGL(t,c,i,a),c.setAlpha(f,p,v,g),c.setScrollFactor(y,x),T&&T.postRenderWebGL(t,i),t.newType=!1}}t.pipelines.postBatch(e)}}},1245:function(t,e){t.exports=function(t,e,i,s){i.addToRenderList(e);var n=e.list;if(0!==n.length){var r=e.localTransform;s?(r.loadIdentity(),r.multiply(s),r.translate(e.x,e.y),r.rotate(e.rotation),r.scale(e.scaleX,e.scaleY)):r.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY);var a=-1!==e.blendMode;a||t.setBlendMode(0);var h=e._alpha,o=e.scrollFactorX,l=e.scrollFactorY;e.mask&&e.mask.preRenderCanvas(t,null,i);for(var u=0;u<n.length;u++){var d=n[u];if(d.willRender(i)){var c=d.alpha,f=d.scrollFactorX,p=d.scrollFactorY;a||d.blendMode===t.currentBlendMode||t.setBlendMode(d.blendMode),d.setScrollFactor(f*o,p*l),d.setAlpha(c*h),d.renderCanvas(t,d,i,r),d.setAlpha(c),d.setScrollFactor(f,p)}}e.mask&&e.mask.postRenderCanvas(t)}}},1246:function(t,e,i){var s=i(4),n=i(4);s=i(509),n=i(509),t.exports={renderWebGL:s,renderCanvas:n}},1247:function(t,e){t.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},1248:function(t,e,i){var s=i(4),n=i(4);s=i(1249),n=i(1250),t.exports={renderWebGL:s,renderCanvas:n}},1249:function(t,e,i){var s=i(23),n=i(30),r=i(15),a=new n;t.exports=function(t,e,i,n){var h=e.text,o=h.length;if(0!==o){i.addToRenderList(e);var l=t.pipelines.set(e.pipeline,e),u=s(e,i,n),d=u.sprite,c=u.calc,f=a,p=e.cropWidth>0||e.cropHeight>0;p&&(l.flush(),t.pushScissor(c.tx,c.ty,e.cropWidth*c.scaleX,e.cropHeight*c.scaleY));var v,g,m=e.frame.glTexture,y=e.tintFill,x=r.getTintAppendFloatAlpha(e.tintTopLeft,i.alpha*e._alphaTL),T=r.getTintAppendFloatAlpha(e.tintTopRight,i.alpha*e._alphaTR),w=r.getTintAppendFloatAlpha(e.tintBottomLeft,i.alpha*e._alphaBL),S=r.getTintAppendFloatAlpha(e.tintBottomRight,i.alpha*e._alphaBR),b=l.setGameObject(e),_=0,L=0,C=0,E=0,F=e.letterSpacing,A=0,R=0,k=e.scrollX,P=e.scrollY,M=e.fontData,O=M.chars,B=M.lineHeight,D=e.fontSize/M.size,Y=0,X=e._align,W=0,I=0,z=e.getTextBounds(!1);e.maxWidth>0&&(o=(h=z.wrappedText).length);var V=e._bounds.lines;1===X?I=(V.longest-V.lengths[0])/2:2===X&&(I=V.longest-V.lengths[0]);var G=i.roundPixels,U=e.displayCallback,N=e.callbackData;t.pipelines.preBatch(e);for(var H=0;H<o;H++)if(10!==(C=h.charCodeAt(H))){if(v=O[C]){A=v.width,R=v.height;var j=v.xOffset+_-k,K=v.yOffset+L-P;if(null!==g){var Z=v.kerning[E];j+=void 0!==Z?Z:0}if(_+=v.xAdvance+F,g=v,E=C,0!==A&&0!==R&&32!==C){if(D=e.fontSize/e.fontData.size,Y=0,U){N.color=0,N.tint.topLeft=x,N.tint.topRight=T,N.tint.bottomLeft=w,N.tint.bottomRight=S,N.index=H,N.charCode=C,N.x=j,N.y=K,N.scale=D,N.rotation=Y,N.data=v.data;var q=U(N);j=q.x,K=q.y,D=q.scale,Y=q.rotation,q.color?(x=q.color,T=q.color,w=q.color,S=q.color):(x=q.tint.topLeft,T=q.tint.topRight,w=q.tint.bottomLeft,S=q.tint.bottomRight),x=r.getTintAppendFloatAlpha(x,i.alpha*e._alphaTL),T=r.getTintAppendFloatAlpha(T,i.alpha*e._alphaTR),w=r.getTintAppendFloatAlpha(w,i.alpha*e._alphaBL),S=r.getTintAppendFloatAlpha(S,i.alpha*e._alphaBR)}j*=D,K*=D,j-=e.displayOriginX,K-=e.displayOriginY,j+=I,f.applyITRS(j,K,Y,D,D),c.multiply(f,d);var J=v.u0,Q=v.v0,$=v.u1,tt=v.v1,et=A,it=R,st=d.e,nt=d.f,rt=it*d.c+d.e,at=it*d.d+d.f,ht=et*d.a+it*d.c+d.e,ot=et*d.b+it*d.d+d.f,lt=et*d.a+d.e,ut=et*d.b+d.f;G&&(st=Math.round(st),nt=Math.round(nt),rt=Math.round(rt),at=Math.round(at),ht=Math.round(ht),ot=Math.round(ot),lt=Math.round(lt),ut=Math.round(ut)),l.batchQuad(e,st,nt,rt,at,ht,ot,lt,ut,J,Q,$,tt,x,T,w,S,y,m,b)}}}else W++,1===X?I=(V.longest-V.lengths[W])/2:2===X&&(I=V.longest-V.lengths[W]),_=0,L+=B,g=null;p&&(l.flush(),t.popScissor()),t.pipelines.postBatch(e)}}},1250:function(t,e,i){var s=i(35);t.exports=function(t,e,i,n){var r=e._text,a=r.length,h=t.currentContext;if(0!==a&&s(t,h,e,i,n)){i.addToRenderList(e);var o=e.fromAtlas?e.frame:e.texture.frames.__BASE,l=e.displayCallback,u=e.callbackData,d=e.fontData.chars,c=e.fontData.lineHeight,f=e._letterSpacing,p=0,v=0,g=0,m=null,y=0,x=0,T=0,w=0,S=0,b=0,_=null,L=0,C=e.frame.source.image,E=o.cutX,F=o.cutY,A=0,R=0,k=e._fontSize/e.fontData.size,P=e._align,M=0,O=0;e.getTextBounds(!1);var B=e._bounds.lines;1===P?O=(B.longest-B.lengths[0])/2:2===P&&(O=B.longest-B.lengths[0]),h.translate(-e.displayOriginX,-e.displayOriginY);var D=i.roundPixels;e.cropWidth>0&&e.cropHeight>0&&(h.beginPath(),h.rect(0,0,e.cropWidth,e.cropHeight),h.clip());for(var Y=0;Y<a;Y++)if(R=k,A=0,10!==(g=r.charCodeAt(Y))){if(m=d[g]){if(y=E+m.x,x=F+m.y,T=m.width,w=m.height,S=m.xOffset+p-e.scrollX,b=m.yOffset+v-e.scrollY,null!==_){var X=m.kerning[L];S+=void 0!==X?X:0}if(l){u.index=Y,u.charCode=g,u.x=S,u.y=b,u.scale=R,u.rotation=A,u.data=m.data;var W=l(u);S=W.x,b=W.y,R=W.scale,A=W.rotation}S*=R,b*=R,S+=O,p+=m.xAdvance+f,_=m,L=g,0!==T&&0!==w&&32!==g&&(D&&(S=Math.round(S),b=Math.round(b)),h.save(),h.translate(S,b),h.rotate(A),h.scale(R,R),h.drawImage(C,y,x,T,w,0,0,T,w),h.restore())}}else M++,1===P?O=(B.longest-B.lengths[M])/2:2===P&&(O=B.longest-B.lengths[M]),p=0,v+=c,_=null;h.restore()}}},1251:function(t,e,i){var s=i(4),n=i(4);s=i(1252),n=i(1253),t.exports={renderWebGL:s,renderCanvas:n}},1252:function(t,e,i){var s=i(23);t.exports=function(t,e,i,n){t.pipelines.clear();var r=s(e,i,n).calc;e.render.call(e,t,i,r),t.pipelines.rebind()}},1253:function(t,e){},1254:function(t,e,i){var s=i(4),n=i(4);s=i(1255),n=i(511),n=i(511),t.exports={renderWebGL:s,renderCanvas:n}},1255:function(t,e,i){var s=i(247),n=i(23),r=i(30),a=i(15),h=function(t,e,i){this.x=t,this.y=e,this.width=i},o=function(t,e,i){this.points=[],this.pointsLength=1,this.points[0]=new h(t,e,i)},l=[],u=new r;t.exports=function(t,e,i,r){if(0!==e.commandBuffer.length){i.addToRenderList(e);var d=t.pipelines.set(e.pipeline,e);t.pipelines.preBatch(e);for(var c=n(e,i,r).calc,f=u.loadIdentity(),p=e.commandBuffer,v=i.alpha*e.alpha,g=1,m=d.fillTint,y=d.strokeTint,x=0,T=0,w=0,S=2*Math.PI,b=[],_=0,L=!0,C=null,E=a.getTintAppendFloatAlpha,F=0;F<p.length;F++)switch(p[F]){case s.BEGIN_PATH:b.length=0,C=null,L=!0;break;case s.CLOSE_PATH:L=!1,C&&C.points.length&&C.points.push(C.points[0]);break;case s.FILL_PATH:for(_=0;_<b.length;_++)d.batchFillPath(b[_].points,f,c);break;case s.STROKE_PATH:for(_=0;_<b.length;_++)d.batchStrokePath(b[_].points,g,L,f,c);break;case s.LINE_STYLE:g=p[++F];var A=E(p[++F],p[++F]*v);y.TL=A,y.TR=A,y.BL=A,y.BR=A;break;case s.FILL_STYLE:var R=E(p[++F],p[++F]*v);m.TL=R,m.TR=R,m.BL=R,m.BR=R;break;case s.GRADIENT_FILL_STYLE:var k=p[++F]*v,P=p[++F]*v,M=p[++F]*v,O=p[++F]*v;m.TL=E(p[++F],k),m.TR=E(p[++F],P),m.BL=E(p[++F],M),m.BR=E(p[++F],O);break;case s.GRADIENT_LINE_STYLE:g=p[++F];var B=p[++F]*v;y.TL=E(p[++F],B),y.TR=E(p[++F],B),y.BL=E(p[++F],B),y.BR=E(p[++F],B);break;case s.ARC:var D=0,Y=p[++F],X=p[++F],W=p[++F],I=p[++F],z=p[++F],V=p[++F],G=p[++F];for(z-=I,V?z<-S?z=-S:z>0&&(z=z%S-S):z>S?z=S:z<0&&(z=S+z%S),null===C&&(C=new o(Y+Math.cos(I)*W,X+Math.sin(I)*W,g),b.push(C),D+=.01);D<1+G;)w=z*D+I,x=Y+Math.cos(w)*W,T=X+Math.sin(w)*W,C.points.push(new h(x,T,g)),D+=.01;w=z+I,x=Y+Math.cos(w)*W,T=X+Math.sin(w)*W,C.points.push(new h(x,T,g));break;case s.FILL_RECT:d.batchFillRect(p[++F],p[++F],p[++F],p[++F],f,c);break;case s.FILL_TRIANGLE:d.batchFillTriangle(p[++F],p[++F],p[++F],p[++F],p[++F],p[++F],f,c);break;case s.STROKE_TRIANGLE:d.batchStrokeTriangle(p[++F],p[++F],p[++F],p[++F],p[++F],p[++F],g,f,c);break;case s.LINE_TO:null!==C?C.points.push(new h(p[++F],p[++F],g)):(C=new o(p[++F],p[++F],g),b.push(C));break;case s.MOVE_TO:C=new o(p[++F],p[++F],g),b.push(C);break;case s.SAVE:l.push(f.copyToArray());break;case s.RESTORE:f.copyFromArray(l.pop());break;case s.TRANSLATE:Y=p[++F],X=p[++F],f.translate(Y,X);break;case s.SCALE:Y=p[++F],X=p[++F],f.scale(Y,X);break;case s.ROTATE:f.rotate(p[++F])}t.pipelines.postBatch(e)}}},1259:function(t,e,i){var s=i(4),n=i(4);s=i(1260),n=i(1261),t.exports={renderWebGL:s,renderCanvas:n}},1260:function(t,e){t.exports=function(t,e,i){var s=e.list,n=s.length;if(0!==n){e.depthSort(),t.pipelines.preBatch(e);var r=-1!==e.blendMode;r||t.setBlendMode(0);for(var a=e.alpha,h=0;h<n;h++){var o=s[h];if(o.willRender(i)){var l,u,d,c;if(void 0!==o.alphaTopLeft)l=o.alphaTopLeft,u=o.alphaTopRight,d=o.alphaBottomLeft,c=o.alphaBottomRight;else{var f=o.alpha;l=f,u=f,d=f,c=f}r||o.blendMode===t.currentBlendMode||t.setBlendMode(o.blendMode);var p=o.mask;p&&p.preRenderWebGL(t,o,i);var v=o.type;v!==t.currentType&&(t.newType=!0,t.currentType=v),t.nextTypeMatch=h<n-1&&s[h+1].type===t.currentType,o.setAlpha(l*a,u*a,d*a,c*a),o.renderWebGL(t,o,i),o.setAlpha(l,u,d,c),p&&p.postRenderWebGL(t,i),t.newType=!1}}t.pipelines.postBatch(e)}}},1261:function(t,e){t.exports=function(t,e,i){var s=e.list;if(0!==s.length){e.depthSort();var n=-1!==e.blendMode;n||t.setBlendMode(0);var r=e._alpha;e.mask&&e.mask.preRenderCanvas(t,null,i);for(var a=0;a<s.length;a++){var h=s[a];if(h.willRender(i)){var o=h.alpha;n||h.blendMode===t.currentBlendMode||t.setBlendMode(h.blendMode),h.setAlpha(o*r),h.renderCanvas(t,h,i),h.setAlpha(o)}}e.mask&&e.mask.postRenderCanvas(t)}}},1262:function(t,e,i){t.exports={EmitterOp:i(512),GravityWell:i(513),Particle:i(514),ParticleEmitter:i(515),ParticleEmitterManager:i(252),Zones:i(1266)}},1263:function(t,e,i){var s=i(4),n=i(4);s=i(1264),n=i(1265),t.exports={renderWebGL:s,renderCanvas:n}},1264:function(t,e,i){var s=i(30),n=i(15),r=new s,a=new s,h=new s,o=new s;t.exports=function(t,e,i,s){var l=e.emitters.list,u=l.length;if(0!==u){var d=t.pipelines.set(e.pipeline),c=r,f=a,p=h,v=o;s?(v.loadIdentity(),v.multiply(s),v.translate(e.x,e.y),v.rotate(e.rotation),v.scale(e.scaleX,e.scaleY)):v.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY);var g=i.roundPixels,m=e.defaultFrame.glTexture,y=n.getTintAppendFloatAlpha,x=d.setGameObject(e,e.defaultFrame);t.pipelines.preBatch(e);for(var T=0;T<u;T++){var w=l[T],S=w.alive,b=S.length;if(w.visible&&0!==b){i.addToRenderList(w);var _=w.scrollFactorX,L=w.scrollFactorY;t.setBlendMode(w.blendMode),w.mask&&(w.mask.preRenderWebGL(t,w,i),t.pipelines.set(e.pipeline));for(var C=0;C<b;C++){var E=S[C],F=E.alpha*i.alpha;if(!(F<=0)){p.applyITRS(E.x,E.y,E.rotation,E.scaleX,E.scaleY),c.copyFrom(i.matrix),c.multiplyWithOffset(v,-i.scrollX*_,-i.scrollY*L),p.e=E.x,p.f=E.y,c.multiply(p,f);var A=E.frame,R=-A.halfWidth,k=-A.halfHeight,P=R+A.width,M=k+A.height,O=f.getXRound(R,k,g),B=f.getYRound(R,k,g),D=f.getXRound(R,M,g),Y=f.getYRound(R,M,g),X=f.getXRound(P,M,g),W=f.getYRound(P,M,g),I=f.getXRound(P,k,g),z=f.getYRound(P,k,g),V=y(E.tint,F);d.batchQuad(w,O,B,D,Y,X,W,I,z,A.u0,A.v0,A.u1,A.v1,V,V,V,V,0,m,x)}}w.mask&&w.mask.postRenderWebGL(t,i)}}t.pipelines.postBatch(e)}}},1265:function(t,e,i){var s=i(30),n=new s,r=new s,a=new s,h=new s;t.exports=function(t,e,i,s){var o=e.emitters.list,l=o.length;if(0!==l){var u=n.copyFrom(i.matrix),d=r,c=a,f=h;s?(f.loadIdentity(),f.multiply(s),f.translate(e.x,e.y),f.rotate(e.rotation),f.scale(e.scaleX,e.scaleY)):f.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY);for(var p=t.currentContext,v=i.roundPixels,g=0;g<l;g++){var m=o[g],y=m.alive,x=y.length;if(m.visible&&0!==x){i.addToRenderList(m);var T=m.scrollFactorX,w=m.scrollFactorY;p.save(),p.globalCompositeOperation=t.blendModes[m.blendMode];for(var S=0;S<x;S++){var b=y[S],_=b.alpha*i.alpha;if(!(_<=0)){c.applyITRS(b.x,b.y,b.rotation,b.scaleX,b.scaleY),u.copyFrom(i.matrix),u.multiplyWithOffset(f,-i.scrollX*T,-i.scrollY*w),c.e=b.x,c.f=b.y,u.multiply(c,d);var L=b.frame,C=L.canvasData,E=-L.halfWidth,F=-L.halfHeight;p.globalAlpha=_,p.save(),d.setToContext(p),v&&(E=Math.round(E),F=Math.round(F)),p.imageSmoothingEnabled=!(!t.antialias||L.source.scaleMode),p.drawImage(L.source.image,C.x,C.y,C.width,C.height,E,F,C.width,C.height),p.restore()}}p.restore()}}}}},1266:function(t,e,i){t.exports={DeathZone:i(516),EdgeZone:i(517),RandomZone:i(518)}},1267:function(t,e,i){var s=i(4),n=i(4);s=i(1268),n=i(1269),t.exports={renderWebGL:s,renderCanvas:n}},1268:function(t,e,i){var s=i(15);t.exports=function(t,e,i,n){i.addToRenderList(e);var r=i.alpha,a=e.renderTarget,h=a.width,o=a.height,l=s.getTintAppendFloatAlpha,u=t.pipelines.set(e.pipeline),d=u.setTexture2D(a.texture);t.pipelines.preBatch(e),u.batchTexture(e,a.texture,h,o,e.x,e.y,h,o,e.scaleX,e.scaleY,e.rotation,e.flipX,!e.flipY,e.scrollFactorX,e.scrollFactorY,e.displayOriginX,e.displayOriginY,0,0,h,o,l(e.tintTopLeft,r*e._alphaTL),l(e.tintTopRight,r*e._alphaTR),l(e.tintBottomLeft,r*e._alphaBL),l(e.tintBottomRight,r*e._alphaBR),e.tintFill,0,0,i,n,!0,d),t.resetTextures(),t.pipelines.postBatch(e)}},1269:function(t,e){t.exports=function(t,e,i,s){i.addToRenderList(e),t.batchSprite(e,e.frame,i,s)}},1270:function(t,e,i){var s=i(1271),n=i(20),r={Parse:i(1272)};r=n(!1,r,s),t.exports=r},1271:function(t,e){t.exports={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:"ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789\"(),-.' ",TEXT_SET7:"AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW\")28FLRX-'39",TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:"ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'\"?!",TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,\"-+!?()':;0123456789"}},1272:function(t,e,i){var s=i(9);t.exports=function(t,e){var i=e.width,n=e.height,r=Math.floor(i/2),a=Math.floor(n/2),h=s(e,"chars","");if(""!==h){var o=s(e,"image",""),l=t.sys.textures.getFrame(o),u=l.cutX,d=l.cutY,c=l.source.width,f=l.source.height,p=s(e,"offset.x",0),v=s(e,"offset.y",0),g=s(e,"spacing.x",0),m=s(e,"spacing.y",0),y=s(e,"lineSpacing",0),x=s(e,"charsPerRow",null);null===x&&(x=c/i)>h.length&&(x=h.length);for(var T=p,w=v,S={retroFont:!0,font:o,size:i,lineHeight:n+y,chars:{}},b=0,_=0;_<h.length;_++){var L=h.charCodeAt(_),C=(u+T)/c,E=(d+w)/f,F=(u+T+i)/c,A=(d+w+n)/f;S.chars[L]={x:T,y:w,width:i,height:n,centerX:r,centerY:a,xOffset:0,yOffset:0,xAdvance:i,data:{},kerning:{},u0:C,v0:E,u1:F,v1:A},++b===x?(b=0,T=p,w+=n+m):T+=i+g}return{data:S,frame:null,texture:o}}}},1273:function(t,e,i){var s=i(4),n=i(4);s=i(1274),n=i(1275),t.exports={renderWebGL:s,renderCanvas:n}},1274:function(t,e,i){var s=i(23),n=i(15);t.exports=function(t,e,i,r){i.addToRenderList(e);var a=t.pipelines.set(e.pipeline,e),h=s(e,i,r).calc,o=e.vertices,l=e.uv,u=e.colors,d=e.alphas,c=e.alpha,f=n.getTintAppendFloatAlpha,p=i.roundPixels,v=o.length,g=Math.floor(.5*v);a.flush(),t.pipelines.preBatch(e);var m=a.setGameObject(e),y=a.vertexViewF32,x=a.vertexViewU32,T=a.vertexCount*a.currentShader.vertexComponentCount-1,w=0,S=e.tintFill;e.dirty&&e.updateVertices();for(var b=e.debugCallback,_=[],L=0;L<v;L+=2){var C=o[L+0],E=o[L+1],F=C*h.a+E*h.c+h.e,A=C*h.b+E*h.d+h.f;p&&(F=Math.round(F),A=Math.round(A)),y[++T]=F,y[++T]=A,y[++T]=l[L+0],y[++T]=l[L+1],y[++T]=m,y[++T]=S,x[++T]=f(u[w],i.alpha*(d[w]*c)),w++,b&&(_[L+0]=F,_[L+1]=A)}b&&b.call(e,e,v,_),a.vertexCount+=g,t.pipelines.postBatch(e)}},1275:function(t,e){t.exports=function(){}},1276:function(t,e,i){var s=i(4),n=i(4);s=i(1277),n=i(1278),t.exports={renderWebGL:s,renderCanvas:n}},1277:function(t,e,i){var s=i(15);t.exports=function(t,e,i,n){if(0!==e.width&&0!==e.height){i.addToRenderList(e);var r=e.frame,a=r.width,h=r.height,o=s.getTintAppendFloatAlpha,l=t.pipelines.set(e.pipeline,e),u=l.setTexture2D(r.glTexture,e);t.pipelines.preBatch(e),l.batchTexture(e,r.glTexture,a,h,e.x,e.y,a/e.style.resolution,h/e.style.resolution,e.scaleX,e.scaleY,e.rotation,e.flipX,e.flipY,e.scrollFactorX,e.scrollFactorY,e.displayOriginX,e.displayOriginY,0,0,a,h,o(e.tintTopLeft,i.alpha*e._alphaTL),o(e.tintTopRight,i.alpha*e._alphaTR),o(e.tintBottomLeft,i.alpha*e._alphaBL),o(e.tintBottomRight,i.alpha*e._alphaBR),e.tintFill,0,0,i,n,!1,u),t.pipelines.postBatch(e)}}},1278:function(t,e){t.exports=function(t,e,i,s){0!==e.width&&0!==e.height&&(i.addToRenderList(e),t.batchSprite(e,e.frame,i,s))}},1279:function(t,e,i){var s=i(4),n=i(4);s=i(1280),n=i(1281),t.exports={renderWebGL:s,renderCanvas:n}},1280:function(t,e,i){var s=i(15);t.exports=function(t,e,i,n){e.updateCanvas();var r=e.width,a=e.height;if(0!==r&&0!==a){i.addToRenderList(e),t.pipelines.preBatch(e);var h=s.getTintAppendFloatAlpha,o=t.pipelines.set(e.pipeline,e),l=o.setTexture2D(e.fillPattern,e);o.batchTexture(e,e.fillPattern,e.displayFrame.width*e.tileScaleX,e.displayFrame.height*e.tileScaleY,e.x,e.y,r,a,e.scaleX,e.scaleY,e.rotation,e.flipX,e.flipY,e.scrollFactorX,e.scrollFactorY,e.originX*r,e.originY*a,0,0,r,a,h(e.tintTopLeft,i.alpha*e._alphaTL),h(e.tintTopRight,i.alpha*e._alphaTR),h(e.tintBottomLeft,i.alpha*e._alphaBL),h(e.tintBottomRight,i.alpha*e._alphaBR),e.tintFill,e.tilePositionX%e.displayFrame.width/e.displayFrame.width,e.tilePositionY%e.displayFrame.height/e.displayFrame.height,i,n,!1,l),t.pipelines.postBatch(e)}}},1281:function(t,e){t.exports=function(t,e,i,s){e.updateCanvas(),i.addToRenderList(e),t.batchSprite(e,e.frame,i,s)}},1282:function(t,e,i){var s=i(4),n=i(4);s=i(1283),n=i(1284),t.exports={renderWebGL:s,renderCanvas:n}},1283:function(t,e){t.exports=function(t,e,i,s){e.videoTexture&&(i.addToRenderList(e),e.pipeline.batchSprite(e,i,s))}},1284:function(t,e){t.exports=function(t,e,i,s){e.videoTexture&&(i.addToRenderList(e),t.batchSprite(e,e.frame,i,s))}},1285:function(t,e,i){var s=i(4),n=i(4);s=i(1286),n=i(1287),t.exports={renderWebGL:s,renderCanvas:n}},1286:function(t,e,i){var s=i(23),n=i(130),r=i(89);t.exports=function(t,e,i,a){i.addToRenderList(e);var h=t.pipelines.set(e.pipeline),o=s(e,i,a),l=h.calcMatrix.copyFrom(o.calc),u=e._displayOriginX,d=e._displayOriginY,c=i.alpha*e.alpha;t.pipelines.preBatch(e),e.isFilled&&n(h,l,e,c,u,d),e.isStroked&&r(h,e,c,u,d),t.pipelines.postBatch(e)}},1287:function(t,e,i){var s=i(42),n=i(56),r=i(68),a=i(35);t.exports=function(t,e,i,h){i.addToRenderList(e);var o=t.currentContext;if(a(t,o,e,i,h)){var l=e.radius;o.beginPath(),o.arc(l-e.originX*(2*l),l-e.originY*(2*l),l,s(e._startAngle),s(e._endAngle),e.anticlockwise),e.closePath&&o.closePath(),e.isFilled&&(n(o,e),o.fill()),e.isStroked&&(r(o,e),o.stroke()),o.restore()}}},1288:function(t,e,i){var s=i(4),n=i(4);s=i(1289),n=i(1290),t.exports={renderWebGL:s,renderCanvas:n}},1289:function(t,e,i){var s=i(130),n=i(23),r=i(89);t.exports=function(t,e,i,a){i.addToRenderList(e);var h=t.pipelines.set(e.pipeline),o=n(e,i,a),l=h.calcMatrix.copyFrom(o.calc),u=e._displayOriginX+e._curveBounds.x,d=e._displayOriginY+e._curveBounds.y,c=i.alpha*e.alpha;t.pipelines.preBatch(e),e.isFilled&&s(h,l,e,c,u,d),e.isStroked&&r(h,e,c,u,d),t.pipelines.postBatch(e)}},1290:function(t,e,i){var s=i(56),n=i(68),r=i(35);t.exports=function(t,e,i,a){i.addToRenderList(e);var h=t.currentContext;if(r(t,h,e,i,a)){var o=e._displayOriginX+e._curveBounds.x,l=e._displayOriginY+e._curveBounds.y,u=e.pathData,d=u.length-1,c=u[0]-o,f=u[1]-l;h.beginPath(),h.moveTo(c,f),e.closePath||(d-=2);for(var p=2;p<d;p+=2){var v=u[p]-o,g=u[p+1]-l;h.lineTo(v,g)}e.closePath&&h.closePath(),e.isFilled&&(s(h,e),h.fill()),e.isStroked&&(n(h,e),h.stroke()),h.restore()}}},1291:function(t,e,i){var s=i(4),n=i(4);s=i(1292),n=i(1293),t.exports={renderWebGL:s,renderCanvas:n}},1292:function(t,e,i){var s=i(130),n=i(23),r=i(89);t.exports=function(t,e,i,a){i.addToRenderList(e);var h=t.pipelines.set(e.pipeline),o=n(e,i,a),l=h.calcMatrix.copyFrom(o.calc),u=e._displayOriginX,d=e._displayOriginY,c=i.alpha*e.alpha;t.pipelines.preBatch(e),e.isFilled&&s(h,l,e,c,u,d),e.isStroked&&r(h,e,c,u,d),t.pipelines.postBatch(e)}},1293:function(t,e,i){var s=i(56),n=i(68),r=i(35);t.exports=function(t,e,i,a){i.addToRenderList(e);var h=t.currentContext;if(r(t,h,e,i,a)){var o=e._displayOriginX,l=e._displayOriginY,u=e.pathData,d=u.length-1,c=u[0]-o,f=u[1]-l;h.beginPath(),h.moveTo(c,f),e.closePath||(d-=2);for(var p=2;p<d;p+=2){var v=u[p]-o,g=u[p+1]-l;h.lineTo(v,g)}h.closePath(),e.isFilled&&(s(h,e),h.fill()),e.isStroked&&(n(h,e),h.stroke()),h.restore()}}},1294:function(t,e,i){var s=i(4),n=i(4);s=i(1295),n=i(1296),t.exports={renderWebGL:s,renderCanvas:n}},1295:function(t,e,i){var s=i(23),n=i(15);t.exports=function(t,e,i,r){i.addToRenderList(e);var a=t.pipelines.set(e.pipeline),h=s(e,i,r);a.calcMatrix.copyFrom(h.calc).translate(-e._displayOriginX,-e._displayOriginY);var o,l,u=i.alpha*e.alpha,d=e.width,c=e.height,f=e.cellWidth,p=e.cellHeight,v=Math.ceil(d/f),g=Math.ceil(c/p),m=f,y=p,x=f-(v*f-d),T=p-(g*p-c),w=e.showCells,S=e.showAltCells,b=e.showOutline,_=0,L=0,C=0,E=0,F=0;if(b&&(m--,y--,x===f&&x--,T===p&&T--),t.pipelines.preBatch(e),w&&e.fillAlpha>0)for(o=a.fillTint,l=n.getTintAppendFloatAlpha(e.fillColor,e.fillAlpha*u),o.TL=l,o.TR=l,o.BL=l,o.BR=l,L=0;L<g;L++)for(S&&(C=L%2),_=0;_<v;_++)S&&C?C=0:(C++,E=_<v-1?m:x,F=L<g-1?y:T,a.batchFillRect(_*f,L*p,E,F));if(S&&e.altFillAlpha>0)for(o=a.fillTint,l=n.getTintAppendFloatAlpha(e.altFillColor,e.altFillAlpha*u),o.TL=l,o.TR=l,o.BL=l,o.BR=l,L=0;L<g;L++)for(S&&(C=L%2),_=0;_<v;_++)!S||C?(C=0,E=_<v-1?m:x,F=L<g-1?y:T,a.batchFillRect(_*f,L*p,E,F)):C=1;if(b&&e.outlineFillAlpha>0){var A=a.strokeTint,R=n.getTintAppendFloatAlpha(e.outlineFillColor,e.outlineFillAlpha*u);for(A.TL=R,A.TR=R,A.BL=R,A.BR=R,_=1;_<v;_++){var k=_*f;a.batchLine(k,0,k,c,1,1,1,0,!1)}for(L=1;L<g;L++){var P=L*p;a.batchLine(0,P,d,P,1,1,1,0,!1)}}t.pipelines.postBatch(e)}},1296:function(t,e,i){var s=i(56),n=i(68),r=i(35);t.exports=function(t,e,i,a){i.addToRenderList(e);var h=t.currentContext;if(r(t,h,e,i,a)){var o=-e._displayOriginX,l=-e._displayOriginY,u=i.alpha*e.alpha,d=e.width,c=e.height,f=e.cellWidth,p=e.cellHeight,v=Math.ceil(d/f),g=Math.ceil(c/p),m=f,y=p,x=f-(v*f-d),T=p-(g*p-c),w=e.showCells,S=e.showAltCells,b=e.showOutline,_=0,L=0,C=0,E=0,F=0;if(b&&(m--,y--,x===f&&x--,T===p&&T--),w&&e.fillAlpha>0)for(s(h,e),L=0;L<g;L++)for(S&&(C=L%2),_=0;_<v;_++)S&&C?C=0:(C++,E=_<v-1?m:x,F=L<g-1?y:T,h.fillRect(o+_*f,l+L*p,E,F));if(S&&e.altFillAlpha>0)for(s(h,e,e.altFillColor,e.altFillAlpha*u),L=0;L<g;L++)for(S&&(C=L%2),_=0;_<v;_++)!S||C?(C=0,E=_<v-1?m:x,F=L<g-1?y:T,h.fillRect(o+_*f,l+L*p,E,F)):C=1;if(b&&e.outlineFillAlpha>0){for(n(h,e,e.outlineFillColor,e.outlineFillAlpha*u),_=1;_<v;_++){var A=_*f;h.beginPath(),h.moveTo(A+o,l),h.lineTo(A+o,c+l),h.stroke()}for(L=1;L<g;L++){var R=L*p;h.beginPath(),h.moveTo(o,R+l),h.lineTo(o+d,R+l),h.stroke()}}h.restore()}}},1297:function(t,e,i){var s=i(4),n=i(4);s=i(1298),n=i(1299),t.exports={renderWebGL:s,renderCanvas:n}},1298:function(t,e,i){var s=i(23),n=i(15);t.exports=function(t,e,i,r){i.addToRenderList(e);var a,h,o,l,u,d,c,f,p,v=t.pipelines.set(e.pipeline),g=s(e,i,r),m=v.calcMatrix.copyFrom(g.calc),y=e.width,x=e.height,T=y/2,w=y/e.projection,S=i.alpha*e.alpha;e.isFilled&&(t.pipelines.preBatch(e),e.showTop&&(a=n.getTintAppendFloatAlpha(e.fillTop,S),h=m.getX(-T,-x),o=m.getY(-T,-x),l=m.getX(0,-w-x),u=m.getY(0,-w-x),d=m.getX(T,-x),c=m.getY(T,-x),f=m.getX(0,w-x),p=m.getY(0,w-x),v.batchQuad(e,h,o,l,u,d,c,f,p,0,0,1,1,a,a,a,a,2)),e.showLeft&&(a=n.getTintAppendFloatAlpha(e.fillLeft,S),h=m.getX(-T,0),o=m.getY(-T,0),l=m.getX(0,w),u=m.getY(0,w),d=m.getX(0,w-x),c=m.getY(0,w-x),f=m.getX(-T,-x),p=m.getY(-T,-x),v.batchQuad(e,h,o,l,u,d,c,f,p,0,0,1,1,a,a,a,a,2)),e.showRight&&(a=n.getTintAppendFloatAlpha(e.fillRight,S),h=m.getX(T,0),o=m.getY(T,0),l=m.getX(0,w),u=m.getY(0,w),d=m.getX(0,w-x),c=m.getY(0,w-x),f=m.getX(T,-x),p=m.getY(T,-x),v.batchQuad(e,h,o,l,u,d,c,f,p,0,0,1,1,a,a,a,a,2)),t.pipelines.postBatch(e))}},1299:function(t,e,i){var s=i(56),n=i(35);t.exports=function(t,e,i,r){i.addToRenderList(e);var a=t.currentContext;if(n(t,a,e,i,r)&&e.isFilled){var h=e.width,o=e.height,l=h/2,u=h/e.projection;e.showTop&&(s(a,e,e.fillTop),a.beginPath(),a.moveTo(-l,-o),a.lineTo(0,-u-o),a.lineTo(l,-o),a.lineTo(l,-1),a.lineTo(0,u-1),a.lineTo(-l,-1),a.lineTo(-l,-o),a.fill()),e.showLeft&&(s(a,e,e.fillLeft),a.beginPath(),a.moveTo(-l,0),a.lineTo(0,u),a.lineTo(0,u-o),a.lineTo(-l,-o),a.lineTo(-l,0),a.fill()),e.showRight&&(s(a,e,e.fillRight),a.beginPath(),a.moveTo(l,0),a.lineTo(0,u),a.lineTo(0,u-o),a.lineTo(l,-o),a.lineTo(l,0),a.fill()),a.restore()}}},130:function(t,e,i){var s=i(15);t.exports=function(t,e,i,n,r,a){for(var h=s.getTintAppendFloatAlpha(i.fillColor,i.fillAlpha*n),o=i.pathData,l=i.pathIndexes,u=0;u<l.length;u+=3){var d=2*l[u],c=2*l[u+1],f=2*l[u+2],p=o[d+0]-r,v=o[d+1]-a,g=o[c+0]-r,m=o[c+1]-a,y=o[f+0]-r,x=o[f+1]-a,T=e.getX(p,v),w=e.getY(p,v),S=e.getX(g,m),b=e.getY(g,m),_=e.getX(y,x),L=e.getY(y,x);t.batchTri(i,T,w,S,b,_,L,0,0,1,1,h,h,h,2)}}},1300:function(t,e,i){var s=i(4),n=i(4);s=i(1301),n=i(1302),t.exports={renderWebGL:s,renderCanvas:n}},1301:function(t,e,i){var s=i(23),n=i(15);t.exports=function(t,e,i,r){i.addToRenderList(e);var a=t.pipelines.set(e.pipeline),h=s(e,i,r),o=a.calcMatrix.copyFrom(h.calc),l=e.width,u=e.height,d=l/2,c=l/e.projection,f=e.isReversed,p=i.alpha*e.alpha;if(e.isFilled){var v,g,m,y,x,T,w;if(t.pipelines.preBatch(e),e.showTop&&f){v=n.getTintAppendFloatAlpha(e.fillTop,p),g=o.getX(-d,-u),m=o.getY(-d,-u),y=o.getX(0,-c-u),x=o.getY(0,-c-u),T=o.getX(d,-u),w=o.getY(d,-u);var S=o.getX(0,c-u),b=o.getY(0,c-u);a.batchQuad(e,g,m,y,x,T,w,S,b,0,0,1,1,v,v,v,v,2)}e.showLeft&&(v=n.getTintAppendFloatAlpha(e.fillLeft,p),f?(g=o.getX(-d,-u),m=o.getY(-d,-u),y=o.getX(0,c),x=o.getY(0,c),T=o.getX(0,c-u),w=o.getY(0,c-u)):(g=o.getX(-d,0),m=o.getY(-d,0),y=o.getX(0,c),x=o.getY(0,c),T=o.getX(0,c-u),w=o.getY(0,c-u)),a.batchTri(e,g,m,y,x,T,w,0,0,1,1,v,v,v,2)),e.showRight&&(v=n.getTintAppendFloatAlpha(e.fillRight,p),f?(g=o.getX(d,-u),m=o.getY(d,-u),y=o.getX(0,c),x=o.getY(0,c),T=o.getX(0,c-u),w=o.getY(0,c-u)):(g=o.getX(d,0),m=o.getY(d,0),y=o.getX(0,c),x=o.getY(0,c),T=o.getX(0,c-u),w=o.getY(0,c-u)),a.batchTri(e,g,m,y,x,T,w,0,0,1,1,v,v,v,2)),t.pipelines.postBatch(e)}}},1302:function(t,e,i){var s=i(56),n=i(35);t.exports=function(t,e,i,r){i.addToRenderList(e);var a=t.currentContext;if(n(t,a,e,i,r)&&e.isFilled){var h=e.width,o=e.height,l=h/2,u=h/e.projection,d=e.isReversed;e.showTop&&d&&(s(a,e,e.fillTop),a.beginPath(),a.moveTo(-l,-o),a.lineTo(0,-u-o),a.lineTo(l,-o),a.lineTo(0,u-o),a.fill()),e.showLeft&&(s(a,e,e.fillLeft),a.beginPath(),d?(a.moveTo(-l,-o),a.lineTo(0,u),a.lineTo(0,u-o)):(a.moveTo(-l,0),a.lineTo(0,u),a.lineTo(0,u-o)),a.fill()),e.showRight&&(s(a,e,e.fillRight),a.beginPath(),d?(a.moveTo(l,-o),a.lineTo(0,u),a.lineTo(0,u-o)):(a.moveTo(l,0),a.lineTo(0,u),a.lineTo(0,u-o)),a.fill()),a.restore()}}},1303:function(t,e,i){var s=i(4),n=i(4);s=i(1304),n=i(1305),t.exports={renderWebGL:s,renderCanvas:n}},1304:function(t,e,i){var s=i(23),n=i(15);t.exports=function(t,e,i,r){i.addToRenderList(e);var a=t.pipelines.set(e.pipeline),h=s(e,i,r);a.calcMatrix.copyFrom(h.calc);var o=e._displayOriginX,l=e._displayOriginY,u=i.alpha*e.alpha;if(t.pipelines.preBatch(e),e.isStroked){var d=a.strokeTint,c=n.getTintAppendFloatAlpha(e.strokeColor,e.strokeAlpha*u);d.TL=c,d.TR=c,d.BL=c,d.BR=c;var f=e._startWidth,p=e._endWidth;a.batchLine(e.geom.x1-o,e.geom.y1-l,e.geom.x2-o,e.geom.y2-l,f,p,1,0,!1,h.sprite,h.camera)}t.pipelines.postBatch(e)}},1305:function(t,e,i){var s=i(68),n=i(35);t.exports=function(t,e,i,r){i.addToRenderList(e);var a=t.currentContext;if(n(t,a,e,i,r)){var h=e._displayOriginX,o=e._displayOriginY;e.isStroked&&(s(a,e),a.beginPath(),a.moveTo(e.geom.x1-h,e.geom.y1-o),a.lineTo(e.geom.x2-h,e.geom.y2-o),a.stroke()),a.restore()}}},1306:function(t,e,i){var s=i(4),n=i(4);s=i(1307),n=i(1308),t.exports={renderWebGL:s,renderCanvas:n}},1307:function(t,e,i){var s=i(130),n=i(23),r=i(89);t.exports=function(t,e,i,a){i.addToRenderList(e);var h=t.pipelines.set(e.pipeline),o=n(e,i,a),l=h.calcMatrix.copyFrom(o.calc),u=e._displayOriginX,d=e._displayOriginY,c=i.alpha*e.alpha;t.pipelines.preBatch(e),e.isFilled&&s(h,l,e,c,u,d),e.isStroked&&r(h,e,c,u,d),t.pipelines.postBatch(e)}},1308:function(t,e,i){var s=i(56),n=i(68),r=i(35);t.exports=function(t,e,i,a){i.addToRenderList(e);var h=t.currentContext;if(r(t,h,e,i,a)){var o=e._displayOriginX,l=e._displayOriginY,u=e.pathData,d=u.length-1,c=u[0]-o,f=u[1]-l;h.beginPath(),h.moveTo(c,f),e.closePath||(d-=2);for(var p=2;p<d;p+=2){var v=u[p]-o,g=u[p+1]-l;h.lineTo(v,g)}h.closePath(),e.isFilled&&(s(h,e),h.fill()),e.isStroked&&(n(h,e),h.stroke()),h.restore()}}},1309:function(t,e,i){var s=i(4),n=i(4);s=i(1310),n=i(1311),t.exports={renderWebGL:s,renderCanvas:n}},1310:function(t,e,i){var s=i(23),n=i(89),r=i(15);t.exports=function(t,e,i,a){i.addToRenderList(e);var h=t.pipelines.set(e.pipeline),o=s(e,i,a);h.calcMatrix.copyFrom(o.calc);var l=e._displayOriginX,u=e._displayOriginY,d=i.alpha*e.alpha;if(t.pipelines.preBatch(e),e.isFilled){var c=h.fillTint,f=r.getTintAppendFloatAlpha(e.fillColor,e.fillAlpha*d);c.TL=f,c.TR=f,c.BL=f,c.BR=f,h.batchFillRect(-l,-u,e.width,e.height)}e.isStroked&&n(h,e,d,l,u),t.pipelines.postBatch(e)}},1311:function(t,e,i){var s=i(56),n=i(68),r=i(35);t.exports=function(t,e,i,a){i.addToRenderList(e);var h=t.currentContext;if(r(t,h,e,i,a)){var o=e._displayOriginX,l=e._displayOriginY;e.isFilled&&(s(h,e),h.fillRect(-o,-l,e.width,e.height)),e.isStroked&&(n(h,e),h.beginPath(),h.rect(-o,-l,e.width,e.height),h.stroke()),h.restore()}}},1312:function(t,e,i){var s=i(4),n=i(4);s=i(1313),n=i(1314),t.exports={renderWebGL:s,renderCanvas:n}},1313:function(t,e,i){var s=i(130),n=i(23),r=i(89);t.exports=function(t,e,i,a){i.addToRenderList(e);var h=t.pipelines.set(e.pipeline),o=n(e,i,a),l=h.calcMatrix.copyFrom(o.calc),u=e._displayOriginX,d=e._displayOriginY,c=i.alpha*e.alpha;t.pipelines.preBatch(e),e.isFilled&&s(h,l,e,c,u,d),e.isStroked&&r(h,e,c,u,d),t.pipelines.postBatch(e)}},1314:function(t,e,i){var s=i(56),n=i(68),r=i(35);t.exports=function(t,e,i,a){i.addToRenderList(e);var h=t.currentContext;if(r(t,h,e,i,a)){var o=e._displayOriginX,l=e._displayOriginY,u=e.pathData,d=u.length-1,c=u[0]-o,f=u[1]-l;h.beginPath(),h.moveTo(c,f),e.closePath||(d-=2);for(var p=2;p<d;p+=2){var v=u[p]-o,g=u[p+1]-l;h.lineTo(v,g)}h.closePath(),e.isFilled&&(s(h,e),h.fill()),e.isStroked&&(n(h,e),h.stroke()),h.restore()}}},1315:function(t,e,i){var s=i(4),n=i(4);s=i(1316),n=i(1317),t.exports={renderWebGL:s,renderCanvas:n}},1316:function(t,e,i){var s=i(23),n=i(89),r=i(15);t.exports=function(t,e,i,a){i.addToRenderList(e);var h=t.pipelines.set(e.pipeline),o=s(e,i,a);h.calcMatrix.copyFrom(o.calc);var l=e._displayOriginX,u=e._displayOriginY,d=i.alpha*e.alpha;if(t.pipelines.preBatch(e),e.isFilled){var c=h.fillTint,f=r.getTintAppendFloatAlpha(e.fillColor,e.fillAlpha*d);c.TL=f,c.TR=f,c.BL=f,c.BR=f;var p=e.geom.x1-l,v=e.geom.y1-u,g=e.geom.x2-l,m=e.geom.y2-u,y=e.geom.x3-l,x=e.geom.y3-u;h.batchFillTriangle(p,v,g,m,y,x,o.sprite,o.camera)}e.isStroked&&n(h,e,d,l,u),t.pipelines.postBatch(e)}},1317:function(t,e,i){var s=i(56),n=i(68),r=i(35);t.exports=function(t,e,i,a){i.addToRenderList(e);var h=t.currentContext;if(r(t,h,e,i,a)){var o=e._displayOriginX,l=e._displayOriginY,u=e.geom.x1-o,d=e.geom.y1-l,c=e.geom.x2-o,f=e.geom.y2-l,p=e.geom.x3-o,v=e.geom.y3-l;h.beginPath(),h.moveTo(u,d),h.lineTo(c,f),h.lineTo(p,v),h.closePath(),e.isFilled&&(s(h,e),h.fill()),e.isStroked&&(n(h,e),h.stroke()),h.restore()}}},1318:function(t,e,i){var s=i(243);i(8).register("blitter",(function(t,e,i,n){return this.displayList.add(new s(this.scene,t,e,i,n))}))},1319:function(t,e,i){var s=i(244);i(8).register("container",(function(t,e,i){return this.displayList.add(new s(this.scene,t,e,i))}))},1320:function(t,e,i){var s=i(508);i(8).register("dom",(function(t,e,i,n,r){var a=new s(this.scene,t,e,i,n,r);return this.displayList.add(a),a}))},1321:function(t,e,i){var s=i(245);i(8).register("dynamicBitmapText",(function(t,e,i,n,r){return this.displayList.add(new s(this.scene,t,e,i,n,r))}))},1322:function(t,e,i){var s=i(510);i(8).register("extern",(function(){var t=new s(this.scene);return this.displayList.add(t),t}))},1323:function(t,e,i){var s=i(246);i(8).register("graphics",(function(t){return this.displayList.add(new s(this.scene,t))}))},1324:function(t,e,i){var s=i(128);i(8).register("group",(function(t,e){return this.updateList.add(new s(this.scene,t,e))}))},1325:function(t,e,i){var s=i(129);i(8).register("image",(function(t,e,i,n){return this.displayList.add(new s(this.scene,t,e,i,n))}))},1326:function(t,e,i){var s=i(251);i(8).register("layer",(function(t){return this.displayList.add(new s(this.scene,t))}))},1327:function(t,e,i){var s=i(8),n=i(252);s.register("particles",(function(t,e,i){return this.displayList.add(new n(this.scene,t,e,i))}))},1328:function(t,e,i){var s=i(8),n=i(519);s.register("follower",(function(t,e,i,s,r){var a=new n(this.scene,t,e,i,s,r);return this.displayList.add(a),this.updateList.add(a),a}))},1329:function(t,e,i){var s=i(8),n=i(253);s.register("renderTexture",(function(t,e,i,s,r,a){return this.displayList.add(new n(this.scene,t,e,i,s,r,a))}))},1330:function(t,e,i){var s=i(254);i(8).register("rope",(function(t,e,i,n,r,a,h,o){return this.displayList.add(new s(this.scene,t,e,i,n,r,a,h,o))}))},1331:function(t,e,i){var s=i(8),n=i(67);s.register("sprite",(function(t,e,i,s){var r=new n(this.scene,t,e,i,s);return this.displayList.add(r),r}))},1332:function(t,e,i){var s=i(163);i(8).register("bitmapText",(function(t,e,i,n,r,a){return this.displayList.add(new s(this.scene,t,e,i,n,r,a))}))},1333:function(t,e,i){var s=i(255);i(8).register("text",(function(t,e,i,n){return this.displayList.add(new s(this.scene,t,e,i,n))}))},1334:function(t,e,i){var s=i(256);i(8).register("tileSprite",(function(t,e,i,n,r,a){return this.displayList.add(new s(this.scene,t,e,i,n,r,a))}))},1335:function(t,e,i){var s=i(138);i(8).register("zone",(function(t,e,i,n){return this.displayList.add(new s(this.scene,t,e,i,n))}))},1336:function(t,e,i){var s=i(257);i(8).register("video",(function(t,e,i){return this.displayList.add(new s(this.scene,t,e,i))}))},1337:function(t,e,i){var s=i(523),n=i(8);n.register("arc",(function(t,e,i,n,r,a,h,o){return this.displayList.add(new s(this.scene,t,e,i,n,r,a,h,o))})),n.register("circle",(function(t,e,i,n,r){return this.displayList.add(new s(this.scene,t,e,i,0,360,!1,n,r))}))},1338:function(t,e,i){var s=i(8),n=i(524);s.register("curve",(function(t,e,i,s,r){return this.displayList.add(new n(this.scene,t,e,i,s,r))}))},1339:function(t,e,i){var s=i(525);i(8).register("ellipse",(function(t,e,i,n,r,a){return this.displayList.add(new s(this.scene,t,e,i,n,r,a))}))},1340:function(t,e,i){var s=i(8),n=i(526);s.register("grid",(function(t,e,i,s,r,a,h,o,l,u){return this.displayList.add(new n(this.scene,t,e,i,s,r,a,h,o,l,u))}))},1341:function(t,e,i){var s=i(8),n=i(527);s.register("isobox",(function(t,e,i,s,r,a,h){return this.displayList.add(new n(this.scene,t,e,i,s,r,a,h))}))},1342:function(t,e,i){var s=i(8),n=i(528);s.register("isotriangle",(function(t,e,i,s,r,a,h,o){return this.displayList.add(new n(this.scene,t,e,i,s,r,a,h,o))}))},1343:function(t,e,i){var s=i(8),n=i(529);s.register("line",(function(t,e,i,s,r,a,h,o){return this.displayList.add(new n(this.scene,t,e,i,s,r,a,h,o))}))},1344:function(t,e,i){var s=i(8),n=i(530);s.register("polygon",(function(t,e,i,s,r){return this.displayList.add(new n(this.scene,t,e,i,s,r))}))},1345:function(t,e,i){var s=i(8),n=i(531);s.register("rectangle",(function(t,e,i,s,r,a){return this.displayList.add(new n(this.scene,t,e,i,s,r,a))}))},1346:function(t,e,i){var s=i(532);i(8).register("star",(function(t,e,i,n,r,a,h){return this.displayList.add(new s(this.scene,t,e,i,n,r,a,h))}))},1347:function(t,e,i){var s=i(8),n=i(533);s.register("triangle",(function(t,e,i,s,r,a,h,o,l,u){return this.displayList.add(new n(this.scene,t,e,i,s,r,a,h,o,l,u))}))},1348:function(t,e,i){var s=i(243),n=i(33),r=i(19),a=i(18);r.register("blitter",(function(t,e){void 0===t&&(t={});var i=a(t,"key",null),r=a(t,"frame",null),h=new s(this.scene,0,0,i,r);return void 0!==e&&(t.add=e),n(this.scene,h,t),h}))},1349:function(t,e,i){var s=i(33),n=i(244),r=i(19),a=i(18);r.register("container",(function(t,e){void 0===t&&(t={});var i=a(t,"x",0),r=a(t,"y",0),h=a(t,"children",null),o=new n(this.scene,i,r,h);return void 0!==e&&(t.add=e),s(this.scene,o,t),o}))},1350:function(t,e,i){var s=i(245),n=i(33),r=i(19),a=i(18);r.register("dynamicBitmapText",(function(t,e){void 0===t&&(t={});var i=a(t,"font",""),r=a(t,"text",""),h=a(t,"size",!1),o=new s(this.scene,0,0,i,r,h);return void 0!==e&&(t.add=e),n(this.scene,o,t),o}))},1351:function(t,e,i){var s=i(19),n=i(246);s.register("graphics",(function(t,e){void 0===t&&(t={}),void 0!==e&&(t.add=e);var i=new n(this.scene,t);return t.add&&this.scene.sys.displayList.add(i),i}))},1352:function(t,e,i){var s=i(19),n=i(128);s.register("group",(function(t){return new n(this.scene,null,t)}))},1353:function(t,e,i){var s=i(33),n=i(19),r=i(18),a=i(129);n.register("image",(function(t,e){void 0===t&&(t={});var i=r(t,"key",null),n=r(t,"frame",null),h=new a(this.scene,0,0,i,n);return void 0!==e&&(t.add=e),s(this.scene,h,t),h}))},1354:function(t,e,i){var s=i(33),n=i(251),r=i(19),a=i(18);r.register("layer",(function(t,e){void 0===t&&(t={});var i=a(t,"children",null),r=new n(this.scene,i);return void 0!==e&&(t.add=e),s(this.scene,r,t),r}))},1355:function(t,e,i){var s=i(19),n=i(18),r=i(5),a=i(252);s.register("particles",(function(t,e){void 0===t&&(t={});var i=n(t,"key",null),s=n(t,"frame",null),h=r(t,"emitters",null),o=new a(this.scene,i,s,h);return void 0!==e&&(t.add=e),r(t,"add",!1)?this.displayList.add(o):this.updateList.add(o),o}))},1356:function(t,e,i){var s=i(33),n=i(19),r=i(18),a=i(253);n.register("renderTexture",(function(t,e){void 0===t&&(t={});var i=r(t,"x",0),n=r(t,"y",0),h=r(t,"width",32),o=r(t,"height",32),l=r(t,"key",void 0),u=r(t,"frame",void 0),d=new a(this.scene,i,n,h,o,l,u);return void 0!==e&&(t.add=e),s(this.scene,d,t),d}))},1357:function(t,e,i){var s=i(33),n=i(19),r=i(18),a=i(9),h=i(254);n.register("rope",(function(t,e){void 0===t&&(t={});var i=r(t,"key",null),n=r(t,"frame",null),o=r(t,"horizontal",!0),l=a(t,"points",void 0),u=a(t,"colors",void 0),d=a(t,"alphas",void 0),c=new h(this.scene,0,0,i,n,l,o,u,d);return void 0!==e&&(t.add=e),s(this.scene,c,t),t.add||this.updateList.add(c),c}))},1358:function(t,e,i){var s=i(33),n=i(506),r=i(19),a=i(18),h=i(67);r.register("sprite",(function(t,e){void 0===t&&(t={});var i=a(t,"key",null),r=a(t,"frame",null),o=new h(this.scene,0,0,i,r);return void 0!==e&&(t.add=e),s(this.scene,o,t),n(o,t),o}))},1359:function(t,e,i){var s=i(163),n=i(33),r=i(19),a=i(18),h=i(9);r.register("bitmapText",(function(t,e){void 0===t&&(t={});var i=h(t,"font",""),r=a(t,"text",""),o=a(t,"size",!1),l=h(t,"align",0),u=new s(this.scene,0,0,i,r,o,l);return void 0!==e&&(t.add=e),n(this.scene,u,t),u}))},1360:function(t,e,i){var s=i(33),n=i(19),r=i(18),a=i(255);n.register("text",(function(t,e){void 0===t&&(t={});var i=r(t,"text",""),n=r(t,"style",null),h=r(t,"padding",null);null!==h&&(n.padding=h);var o=new a(this.scene,0,0,i,n);return void 0!==e&&(t.add=e),s(this.scene,o,t),o.autoRound=r(t,"autoRound",!0),o.resolution=r(t,"resolution",1),o}))},1361:function(t,e,i){var s=i(33),n=i(19),r=i(18),a=i(256);n.register("tileSprite",(function(t,e){void 0===t&&(t={});var i=r(t,"x",0),n=r(t,"y",0),h=r(t,"width",512),o=r(t,"height",512),l=r(t,"key",""),u=r(t,"frame",""),d=new a(this.scene,i,n,h,o,l,u);return void 0!==e&&(t.add=e),s(this.scene,d,t),d}))},1362:function(t,e,i){var s=i(19),n=i(18),r=i(138);s.register("zone",(function(t){var e=n(t,"x",0),i=n(t,"y",0),s=n(t,"width",1),a=n(t,"height",s);return new r(this.scene,e,i,s,a)}))},1363:function(t,e,i){var s=i(33),n=i(19),r=i(18),a=i(257);n.register("video",(function(t,e){void 0===t&&(t={});var i=r(t,"key",null),n=new a(this.scene,0,0,i);return void 0!==e&&(t.add=e),s(this.scene,n,t),t.add||this.updateList.add(n),n}))},1364:function(t,e,i){var s=i(4),n=i(4);s=i(1365),n=i(1366),t.exports={renderWebGL:s,renderCanvas:n}},1365:function(t,e,i){var s=i(23);t.exports=function(t,e,i,n){if(e.shader){if(i.addToRenderList(e),t.pipelines.clear(),e.renderToTexture)e.load(),e.flush();else{var r=s(e,i,n).calc;t.width===e._rendererWidth&&t.height===e._rendererHeight||e.projOrtho(0,t.width,t.height,0),e.load(r.matrix),e.flush()}t.pipelines.rebind()}}},1366:function(t,e){t.exports=function(){}},1367:function(t,e,i){var s=i(4),n=i(4);s=i(1368),n=i(1369),t.exports={renderWebGL:s,renderCanvas:n}},1368:function(t,e,i){var s=i(23);t.exports=function(t,e,i,n){var r=e.faces,a=r.length;if(0!==a){i.addToRenderList(e);var h=t.pipelines.set(e.pipeline,e),o=s(e,i,n).calc,l=h.setGameObject(e),u=h.vertexViewF32,d=h.vertexViewU32,c=h.vertexCount*h.currentShader.vertexComponentCount-1,f=e.tintFill,p=[],v=e.debugCallback,g=o.a,m=o.b,y=o.c,x=o.d,T=o.e,w=o.f,S=e.viewPosition.z,b=e.hideCCW,_=i.roundPixels,L=i.alpha*e.alpha,C=0;t.pipelines.preBatch(e);for(var E=0;E<a;E++){var F=r[E];F.isInView(i,b,S,L,g,m,y,x,T,w,_)&&(h.shouldFlush(3)&&(h.flush(),c=0),c=F.load(u,d,c,l,f),C++,h.vertexCount+=3,v&&p.push(F))}e.totalFrame+=C,v&&v.call(e,e,p),t.pipelines.postBatch(e)}}},1369:function(t,e){t.exports=function(){}},1370:function(t,e,i){var s=i(4),n=i(4);s=i(1371),t.exports={renderWebGL:s,renderCanvas:n}},1371:function(t,e,i){var s=i(23);t.exports=function(t,e,i,n){i.addToRenderList(e);var r=t.pipelines.set(e.pipeline),a=s(e,i,n).calc,h=e.width,o=e.height,l=-e._radius,u=-e._radius,d=l+h,c=u+o,f=a.getX(0,0),p=a.getY(0,0),v=a.getX(l,u),g=a.getY(l,u),m=a.getX(l,c),y=a.getY(l,c),x=a.getX(d,c),T=a.getY(d,c),w=a.getX(d,u),S=a.getY(d,u);t.pipelines.preBatch(e),r.batchPointLight(e,i,v,g,m,y,x,T,w,S,f,p),t.pipelines.postBatch(e)}},1372:function(t,e,i){var s=i(258);i(8).register("shader",(function(t,e,i,n,r,a,h){return this.displayList.add(new s(this.scene,t,e,i,n,r,a,h))}))},1373:function(t,e,i){var s=i(259);i(8).register("mesh",(function(t,e,i,n,r,a,h,o,l,u,d){return this.displayList.add(new s(this.scene,t,e,i,n,r,a,h,o,l,u,d))}))},1374:function(t,e,i){var s=i(8),n=i(165);s.register("pointlight",(function(t,e,i,s,r,a){return this.displayList.add(new n(this.scene,t,e,i,s,r,a))}))},1375:function(t,e,i){var s=i(33),n=i(19),r=i(18),a=i(258);n.register("shader",(function(t,e){void 0===t&&(t={});var i=r(t,"key",null),n=r(t,"x",0),h=r(t,"y",0),o=r(t,"width",128),l=r(t,"height",128),u=new a(this.scene,i,n,h,o,l);return void 0!==e&&(t.add=e),s(this.scene,u,t),u}))},1376:function(t,e,i){var s=i(33),n=i(19),r=i(18),a=i(9),h=i(259);n.register("mesh",(function(t,e){void 0===t&&(t={});var i=r(t,"key",null),n=r(t,"frame",null),o=a(t,"vertices",[]),l=a(t,"uvs",[]),u=a(t,"indicies",[]),d=a(t,"containsZ",!1),c=a(t,"normals",[]),f=a(t,"colors",16777215),p=a(t,"alphas",1),v=new h(this.scene,0,0,i,n,o,l,u,d,c,f,p);return void 0!==e&&(t.add=e),s(this.scene,v,t),v}))},1377:function(t,e,i){var s=i(33),n=i(19),r=i(18),a=i(165);n.register("pointlight",(function(t,e){void 0===t&&(t={});var i=r(t,"color",16777215),n=r(t,"radius",128),h=r(t,"intensity",1),o=r(t,"attenuation",.1),l=new a(this.scene,0,0,i,n,h,o);return void 0!==e&&(t.add=e),s(this.scene,l,t),l}))},1378:function(t,e,i){var s=i(3),n=i(535),r=i(29),a=i(22),h=new s({Extends:n,initialize:function(t){this.scene=t,this.systems=t.sys,t.sys.settings.isBooted||t.sys.events.once(a.BOOT,this.boot,this),n.call(this)},boot:function(){var t=this.systems.events;t.on(a.SHUTDOWN,this.shutdown,this),t.on(a.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});r.register("LightsPlugin",h,"lights"),t.exports=h},163:function(t,e,i){var s=i(3),n=i(21),r=i(14),a=i(16),h=i(1234),o=i(1235),l=i(164),u=i(13),d=i(1236),c=new s({Extends:a,Mixins:[r.Alpha,r.BlendMode,r.Depth,r.Mask,r.Origin,r.Pipeline,r.ScrollFactor,r.Texture,r.Tint,r.Transform,r.Visible,d],initialize:function(t,e,i,s,n,r,o){void 0===n&&(n=""),void 0===o&&(o=0),a.call(this,t,"BitmapText"),this.font=s;var l=this.scene.sys.cache.bitmapFont.get(s);l||console.warn("Invalid BitmapText key: "+s),this.fontData=l.data,this._text="",this._fontSize=r||this.fontData.size,this._letterSpacing=0,this._align=o,this._bounds=h(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=l.fromAtlas,this.setTexture(l.texture,l.frame),this.setPosition(e,i),this.setOrigin(0,0),this.initPipeline(),this.setText(n)},setLeftAlign:function(){return this._align=c.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=c.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=c.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(t){return this._fontSize=t,this._dirty=!0,this},setLetterSpacing:function(t){return void 0===t&&(t=0),this._letterSpacing=t,this._dirty=!0,this},setText:function(t){return t||0===t||(t=""),Array.isArray(t)&&(t=t.join("\n")),t!==this.text&&(this._text=t.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(t,e,i,s){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=.5),this.dropShadowX=t,this.dropShadowY=e,this.dropShadowColor=i,this.dropShadowAlpha=s,this},setCharacterTint:function(t,e,i,s,r,a,h){void 0===t&&(t=0),void 0===e&&(e=1),void 0===i&&(i=!1),void 0===s&&(s=-1),void 0===r&&(r=s,a=s,h=s);var o=this.text.length;-1===e&&(e=o),t<0&&(t=o+t),t=n(t,0,o-1);for(var l=n(t+e,t,o),u=this.charColors,d=t;d<l;d++){var c=u[d];if(-1===s)u[d]=null;else{var f=i?1:0;c?(c.tintEffect=f,c.tintTL=s,c.tintTR=r,c.tintBL=a,c.tintBR=h):u[d]={tintEffect:f,tintTL:s,tintTR:r,tintBL:a,tintBR:h}}}return this},setWordTint:function(t,e,i,s,n,r,a){void 0===e&&(e=1);for(var h=this.getTextBounds().words,o="number"==typeof t,l=0,u=0;u<h.length;u++){var d=h[u];if((o&&u===t||!o&&d.word===t)&&(this.setCharacterTint(d.i,d.word.length,i,s,n,r,a),++l===e))return this}return this},getTextBounds:function(t){var e=this._bounds;return(this._dirty||t||this.scaleX!==e.scaleX||this.scaleY!==e.scaleY)&&(h(this,t,!0,e),this._dirty=!1),e},getCharacterAt:function(t,e,i){for(var s=this.getLocalPoint(t,e,null,i),n=this.getTextBounds().characters,r=new u,a=0;a<n.length;a++){var h=n[a];if(r.setTo(h.x,h.t,h.r-h.x,h.b),r.contains(s.x,s.y))return h}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(t,e,i){if(void 0===e&&(e=this._fontSize),void 0===i&&(i=this._align),t!==this.font){var s=this.scene.sys.cache.bitmapFont.get(t);s&&(this.font=t,this.fontData=s.data,this._fontSize=e,this._align=i,this.fromAtlas=!0===s.fromAtlas,this.setTexture(s.texture,s.frame),h(this,!1,!0,this._bounds))}return this},setMaxWidth:function(t,e){return this._maxWidth=t,this._dirty=!0,void 0!==e&&(this.wordWrapCharCode=e),this},align:{set:function(t){this._align=t,this._dirty=!0},get:function(){return this._align}},text:{set:function(t){this.setText(t)},get:function(){return this._text}},fontSize:{set:function(t){this._fontSize=t,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(t){this._letterSpacing=t,this._dirty=!0},get:function(){return this._letterSpacing}},maxWidth:{set:function(t){this._maxWidth=t,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},toJSON:function(){var t=r.ToJSON(this),e={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,align:this.align};return t.data=e,t},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});c.ALIGN_LEFT=0,c.ALIGN_CENTER=1,c.ALIGN_RIGHT=2,c.ParseFromAtlas=o,c.ParseXMLBitmapFont=l,t.exports=c},164:function(t,e){function i(t,e){return parseInt(t.getAttribute(e),10)}t.exports=function(t,e,s,n,r){void 0===s&&(s=0),void 0===n&&(n=0);var a=e.cutX,h=e.cutY,o=e.source.width,l=e.source.height,u=e.sourceIndex,d={},c=t.getElementsByTagName("info")[0],f=t.getElementsByTagName("common")[0];d.font=c.getAttribute("face"),d.size=i(c,"size"),d.lineHeight=i(f,"lineHeight")+n,d.chars={};var p=t.getElementsByTagName("char"),v=void 0!==e&&e.trimmed;if(v)var g=e.height,m=e.width;for(var y=0;y<p.length;y++){var x=p[y],T=i(x,"id"),w=String.fromCharCode(T),S=i(x,"x"),b=i(x,"y"),_=i(x,"width"),L=i(x,"height");v&&(S<m&&(m=S),b<g&&(g=b)),v&&0!==g&&0!==m&&(S-=e.x,b-=e.y);var C=(a+S)/o,E=(h+b)/l,F=(a+S+_)/o,A=(h+b+L)/l;if(d.chars[T]={x:S,y:b,width:_,height:L,centerX:Math.floor(_/2),centerY:Math.floor(L/2),xOffset:i(x,"xoffset"),yOffset:i(x,"yoffset"),xAdvance:i(x,"xadvance")+s,data:{},kerning:{},u0:C,v0:E,u1:F,v1:A},r&&0!==_&&0!==L){var R=r.add(w,u,S,b,_,L);R&&R.setUVs(_,L,C,E,F,A)}}var k=t.getElementsByTagName("kerning");for(y=0;y<k.length;y++){var P=k[y],M=i(P,"first"),O=i(P,"second"),B=i(P,"amount");d.chars[O].kerning[M]=B}return d}},165:function(t,e,i){var s=i(3),n=i(14),r=i(16),a=i(202),h=i(97),o=i(1370),l=new s({Extends:r,Mixins:[n.AlphaSingle,n.BlendMode,n.Depth,n.GetBounds,n.Mask,n.Pipeline,n.ScrollFactor,n.Transform,n.Visible,o],initialize:function(t,e,i,s,n,o,l){void 0===s&&(s=16777215),void 0===n&&(n=128),void 0===o&&(o=1),void 0===l&&(l=.1),r.call(this,t,"PointLight"),this.initPipeline(h.POINTLIGHT_PIPELINE),this.setPosition(e,i),this.color=a(s),this.intensity=o,this.attenuation=l,this.width=2*n,this.height=2*n,this._radius=n},radius:{get:function(){return this._radius},set:function(t){this._radius=t,this.width=2*t,this.height=2*t}},originX:{get:function(){return.5}},originY:{get:function(){return.5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});t.exports=l},243:function(t,e,i){var s=i(1240),n=i(507),r=i(3),a=i(14),h=i(120),o=i(16),l=i(126),u=new r({Extends:o,Mixins:[a.Alpha,a.BlendMode,a.Depth,a.Mask,a.Pipeline,a.ScrollFactor,a.Size,a.Texture,a.Transform,a.Visible,s],initialize:function(t,e,i,s,n){o.call(this,t,"Blitter"),this.setTexture(s,n),this.setPosition(e,i),this.initPipeline(),this.children=new l,this.renderList=[],this.dirty=!1},create:function(t,e,i,s,r){void 0===s&&(s=!0),void 0===r&&(r=this.children.length),void 0===i?i=this.frame:i instanceof h||(i=this.texture.get(i));var a=new n(this,t,e,i,s);return this.children.addAt(a,r,!1),this.dirty=!0,a},createFromCallback:function(t,e,i,s){for(var n=this.createMultiple(e,i,s),r=0;r<n.length;r++){var a=n[r];t.call(this,a,r)}return n},createMultiple:function(t,e,i){void 0===e&&(e=this.frame.name),void 0===i&&(i=!0),Array.isArray(e)||(e=[e]);var s=[],n=this;return e.forEach((function(e){for(var r=0;r<t;r++)s.push(n.create(0,0,e,i))})),s},childCanRender:function(t){return t.visible&&t.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});t.exports=u},244:function(t,e,i){var s=i(232),n=i(41),r=i(3),a=i(14),h=i(82),o=i(16),l=i(13),u=i(1243),d=i(484),c=i(6),f=new r({Extends:o,Mixins:[a.AlphaSingle,a.BlendMode,a.ComputedSize,a.Depth,a.Mask,a.Pipeline,a.Transform,a.Visible,u],initialize:function(t,e,i,s){o.call(this,t,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new a.TransformMatrix,this.tempTransformMatrix=new a.TransformMatrix,this._sortKey="",this._sysEvents=t.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPipeline(),this.setPosition(e,i),this.clearAlpha(),this.setBlendMode(n.SKIP_CHECK),s&&this.add(s)},originX:{get:function(){return.5}},originY:{get:function(){return.5}},displayOriginX:{get:function(){return.5*this.width}},displayOriginY:{get:function(){return.5*this.height}},setExclusive:function(t){return void 0===t&&(t=!0),this.exclusive=t,this},getBounds:function(t){if(void 0===t&&(t=new l),t.setTo(this.x,this.y,0,0),this.parentContainer){var e=this.parentContainer.getBoundsTransformMatrix().transformPoint(this.x,this.y);t.setTo(e.x,e.y,0,0)}if(this.list.length>0){var i=this.list,s=new l,n=!1;t.setEmpty();for(var r=0;r<i.length;r++){var a=i[r];a.getBounds&&(a.getBounds(s),n?d(s,t,t):(t.setTo(s.x,s.y,s.width,s.height),n=!0))}}return t},addHandler:function(t){t.once(h.DESTROY,this.remove,this),this.exclusive&&(t.parentContainer&&t.parentContainer.remove(t),t.removeFromDisplayList(),t.parentContainer=this)},removeHandler:function(t){t.off(h.DESTROY,this.remove),this.exclusive&&(t.parentContainer=null,t.addToDisplayList())},pointToContainer:function(t,e){void 0===e&&(e=new c),this.parentContainer?this.parentContainer.pointToContainer(t,e):e=new c(t.x,t.y);var i=this.tempTransformMatrix;return i.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),i.invert(),i.transformPoint(t.x,t.y,e),e},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(t){return s.Add(this.list,t,this.maxSize,this.addHandler,this),this},addAt:function(t,e){return s.AddAt(this.list,t,e,this.maxSize,this.addHandler,this),this},getAt:function(t){return this.list[t]},getIndex:function(t){return this.list.indexOf(t)},sort:function(t,e){return t?(void 0===e&&(e=function(e,i){return e[t]-i[t]}),s.StableSort(this.list,e),this):this},getByName:function(t){return s.GetFirst(this.list,"name",t)},getRandom:function(t,e){return s.GetRandom(this.list,t,e)},getFirst:function(t,e,i,n){return s.GetFirst(this.list,t,e,i,n)},getAll:function(t,e,i,n){return s.GetAll(this.list,t,e,i,n)},count:function(t,e,i,n){return s.CountAllMatching(this.list,t,e,i,n)},swap:function(t,e){return s.Swap(this.list,t,e),this},moveTo:function(t,e){return s.MoveTo(this.list,t,e),this},moveAbove:function(t,e){return s.MoveAbove(this.list,t,e),this},moveBelow:function(t,e){return s.MoveBelow(this.list,t,e),this},remove:function(t,e){var i=s.Remove(this.list,t,this.removeHandler,this);if(e&&i){Array.isArray(i)||(i=[i]);for(var n=0;n<i.length;n++)i[n].destroy()}return this},removeAt:function(t,e){var i=s.RemoveAt(this.list,t,this.removeHandler,this);return e&&i&&i.destroy(),this},removeBetween:function(t,e,i){var n=s.RemoveBetween(this.list,t,e,this.removeHandler,this);if(i)for(var r=0;r<n.length;r++)n[r].destroy();return this},removeAll:function(t){var e=s.RemoveBetween(this.list,0,this.list.length,this.removeHandler,this);if(t)for(var i=0;i<e.length;i++)e[i].destroy();return this},bringToTop:function(t){return s.BringToTop(this.list,t),this},sendToBack:function(t){return s.SendToBack(this.list,t),this},moveUp:function(t){return s.MoveUp(this.list,t),this},moveDown:function(t){return s.MoveDown(this.list,t),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return s.Shuffle(this.list),this},replace:function(t,e,i){return s.Replace(this.list,t,e)&&(this.addHandler(e),this.removeHandler(t),i&&t.destroy()),this},exists:function(t){return this.list.indexOf(t)>-1},setAll:function(t,e,i,n){return s.SetAll(this.list,t,e,i,n),this},each:function(t,e){var i,s=[null],n=this.list.slice(),r=n.length;for(i=2;i<arguments.length;i++)s.push(arguments[i]);for(i=0;i<r;i++)s[0]=n[i],t.apply(e,s);return this},iterate:function(t,e){var i,s=[null];for(i=2;i<arguments.length;i++)s.push(arguments[i]);for(i=0;i<this.list.length;i++)s[0]=this.list[i],t.apply(e,s);return this},setScrollFactor:function(t,e,i){return void 0===e&&(e=t),void 0===i&&(i=!1),this.scrollFactorX=t,this.scrollFactorY=e,i&&(s.SetAll(this.list,"scrollFactorX",t),s.SetAll(this.list,"scrollFactorY",e)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[]}});t.exports=f},245:function(t,e,i){var s=i(163),n=i(3),r=i(1248),a=new n({Extends:s,Mixins:[r],initialize:function(t,e,i,n,r,a,h){s.call(this,t,e,i,n,r,a,h),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(t,e){return this.cropWidth=t,this.cropHeight=e,this},setDisplayCallback:function(t){return this.displayCallback=t,this},setScrollX:function(t){return this.scrollX=t,this},setScrollY:function(t){return this.scrollY=t,this}});t.exports=a},246:function(t,e,i){var s=i(143),n=i(3),r=i(247),a=i(322),h=i(323),o=i(324),l=i(328),u=i(140),d=i(331),c=i(332),f=i(333),p=i(121),v=i(16),g=i(5),m=i(9),y=i(17),x=i(1254),T=new n({Extends:v,Mixins:[a,h,o,l,u,c,f,d,x],initialize:function(t,e){var i=m(e,"x",0),s=m(e,"y",0);v.call(this,t,"Graphics"),this.setPosition(i,s),this.initPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.setDefaultStyles(e)},setDefaultStyles:function(t){return m(t,"lineStyle",null)&&(this.defaultStrokeWidth=m(t,"lineStyle.width",1),this.defaultStrokeColor=m(t,"lineStyle.color",16777215),this.defaultStrokeAlpha=m(t,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),m(t,"fillStyle",null)&&(this.defaultFillColor=m(t,"fillStyle.color",16777215),this.defaultFillAlpha=m(t,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(t,e,i){return void 0===i&&(i=1),this.commandBuffer.push(r.LINE_STYLE,t,e,i),this._lineWidth=t,this},fillStyle:function(t,e){return void 0===e&&(e=1),this.commandBuffer.push(r.FILL_STYLE,t,e),this},fillGradientStyle:function(t,e,i,s,n,a,h,o){return void 0===n&&(n=1),void 0===a&&(a=n),void 0===h&&(h=n),void 0===o&&(o=n),this.commandBuffer.push(r.GRADIENT_FILL_STYLE,n,a,h,o,t,e,i,s),this},lineGradientStyle:function(t,e,i,s,n,a){return void 0===a&&(a=1),this.commandBuffer.push(r.GRADIENT_LINE_STYLE,t,a,e,i,s,n),this},beginPath:function(){return this.commandBuffer.push(r.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(r.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(r.FILL_PATH),this},fill:function(){return this.commandBuffer.push(r.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(r.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(r.STROKE_PATH),this},fillCircleShape:function(t){return this.fillCircle(t.x,t.y,t.radius)},strokeCircleShape:function(t){return this.strokeCircle(t.x,t.y,t.radius)},fillCircle:function(t,e,i){return this.beginPath(),this.arc(t,e,i,0,y.PI2),this.fillPath(),this},strokeCircle:function(t,e,i){return this.beginPath(),this.arc(t,e,i,0,y.PI2),this.strokePath(),this},fillRectShape:function(t){return this.fillRect(t.x,t.y,t.width,t.height)},strokeRectShape:function(t){return this.strokeRect(t.x,t.y,t.width,t.height)},fillRect:function(t,e,i,s){return this.commandBuffer.push(r.FILL_RECT,t,e,i,s),this},strokeRect:function(t,e,i,s){var n=this._lineWidth/2,r=t-n,a=t+n;return this.beginPath(),this.moveTo(t,e),this.lineTo(t,e+s),this.strokePath(),this.beginPath(),this.moveTo(t+i,e),this.lineTo(t+i,e+s),this.strokePath(),this.beginPath(),this.moveTo(r,e),this.lineTo(a+i,e),this.strokePath(),this.beginPath(),this.moveTo(r,e+s),this.lineTo(a+i,e+s),this.strokePath(),this},fillRoundedRect:function(t,e,i,s,n){void 0===n&&(n=20);var r=n,a=n,h=n,o=n;return"number"!=typeof n&&(r=g(n,"tl",20),a=g(n,"tr",20),h=g(n,"bl",20),o=g(n,"br",20)),this.beginPath(),this.moveTo(t+r,e),this.lineTo(t+i-a,e),this.arc(t+i-a,e+a,a,-y.TAU,0),this.lineTo(t+i,e+s-o),this.arc(t+i-o,e+s-o,o,0,y.TAU),this.lineTo(t+h,e+s),this.arc(t+h,e+s-h,h,y.TAU,Math.PI),this.lineTo(t,e+r),this.arc(t+r,e+r,r,-Math.PI,-y.TAU),this.fillPath(),this},strokeRoundedRect:function(t,e,i,s,n){void 0===n&&(n=20);var r=n,a=n,h=n,o=n;return"number"!=typeof n&&(r=g(n,"tl",20),a=g(n,"tr",20),h=g(n,"bl",20),o=g(n,"br",20)),this.beginPath(),this.moveTo(t+r,e),this.lineTo(t+i-a,e),this.moveTo(t+i-a,e),this.arc(t+i-a,e+a,a,-y.TAU,0),this.lineTo(t+i,e+s-o),this.moveTo(t+i,e+s-o),this.arc(t+i-o,e+s-o,o,0,y.TAU),this.lineTo(t+h,e+s),this.moveTo(t+h,e+s),this.arc(t+h,e+s-h,h,y.TAU,Math.PI),this.lineTo(t,e+r),this.moveTo(t,e+r),this.arc(t+r,e+r,r,-Math.PI,-y.TAU),this.strokePath(),this},fillPointShape:function(t,e){return this.fillPoint(t.x,t.y,e)},fillPoint:function(t,e,i){return!i||i<1?i=1:(t-=i/2,e-=i/2),this.commandBuffer.push(r.FILL_RECT,t,e,i,i),this},fillTriangleShape:function(t){return this.fillTriangle(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)},strokeTriangleShape:function(t){return this.strokeTriangle(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)},fillTriangle:function(t,e,i,s,n,a){return this.commandBuffer.push(r.FILL_TRIANGLE,t,e,i,s,n,a),this},strokeTriangle:function(t,e,i,s,n,a){return this.commandBuffer.push(r.STROKE_TRIANGLE,t,e,i,s,n,a),this},strokeLineShape:function(t){return this.lineBetween(t.x1,t.y1,t.x2,t.y2)},lineBetween:function(t,e,i,s){return this.beginPath(),this.moveTo(t,e),this.lineTo(i,s),this.strokePath(),this},lineTo:function(t,e){return this.commandBuffer.push(r.LINE_TO,t,e),this},moveTo:function(t,e){return this.commandBuffer.push(r.MOVE_TO,t,e),this},strokePoints:function(t,e,i,s){void 0===e&&(e=!1),void 0===i&&(i=!1),void 0===s&&(s=t.length),this.beginPath(),this.moveTo(t[0].x,t[0].y);for(var n=1;n<s;n++)this.lineTo(t[n].x,t[n].y);return e&&this.lineTo(t[0].x,t[0].y),i&&this.closePath(),this.strokePath(),this},fillPoints:function(t,e,i,s){void 0===e&&(e=!1),void 0===i&&(i=!1),void 0===s&&(s=t.length),this.beginPath(),this.moveTo(t[0].x,t[0].y);for(var n=1;n<s;n++)this.lineTo(t[n].x,t[n].y);return e&&this.lineTo(t[0].x,t[0].y),i&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(t,e){void 0===e&&(e=32);var i=t.getPoints(e);return this.strokePoints(i,!0)},strokeEllipse:function(t,e,i,s,n){void 0===n&&(n=32);var r=new p(t,e,i,s).getPoints(n);return this.strokePoints(r,!0)},fillEllipseShape:function(t,e){void 0===e&&(e=32);var i=t.getPoints(e);return this.fillPoints(i,!0)},fillEllipse:function(t,e,i,s,n){void 0===n&&(n=32);var r=new p(t,e,i,s).getPoints(n);return this.fillPoints(r,!0)},arc:function(t,e,i,s,n,a,h){return void 0===a&&(a=!1),void 0===h&&(h=0),this.commandBuffer.push(r.ARC,t,e,i,s,n,a,h),this},slice:function(t,e,i,s,n,a,h){return void 0===a&&(a=!1),void 0===h&&(h=0),this.commandBuffer.push(r.BEGIN_PATH),this.commandBuffer.push(r.MOVE_TO,t,e),this.commandBuffer.push(r.ARC,t,e,i,s,n,a,h),this.commandBuffer.push(r.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(r.SAVE),this},restore:function(){return this.commandBuffer.push(r.RESTORE),this},translateCanvas:function(t,e){return this.commandBuffer.push(r.TRANSLATE,t,e),this},scaleCanvas:function(t,e){return this.commandBuffer.push(r.SCALE,t,e),this},rotateCanvas:function(t){return this.commandBuffer.push(r.ROTATE,t),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(t,e,i){var s,n,r=this.scene.sys,a=r.game.renderer;if(void 0===e&&(e=r.scale.width),void 0===i&&(i=r.scale.height),T.TargetCamera.setScene(this.scene),T.TargetCamera.setViewport(0,0,e,i),T.TargetCamera.scrollX=this.x,T.TargetCamera.scrollY=this.y,"string"==typeof t)if(r.textures.exists(t)){var h=(s=r.textures.get(t)).getSourceImage();h instanceof HTMLCanvasElement&&(n=h.getContext("2d"))}else n=(s=r.textures.createCanvas(t,e,i)).getSourceImage().getContext("2d");else t instanceof HTMLCanvasElement&&(n=t.getContext("2d"));return n&&(this.renderCanvas(a,this,T.TargetCamera,null,n,!1),s&&s.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});T.TargetCamera=new s,t.exports=T},247:function(t,e){t.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},251:function(t,e,i){var s=i(41),n=i(3),r=i(14),a=i(187),h=i(110),o=i(12),l=i(82),u=i(126),d=i(1259),c=i(22),f=i(88),p=new n({Extends:u,Mixins:[r.AlphaSingle,r.BlendMode,r.Depth,r.Mask,r.Pipeline,r.Visible,o,d],initialize:function(t,e){u.call(this,t),o.call(this),this.scene=t,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=t.sys,this.events=t.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPipeline(),this.clearAlpha(),this.setBlendMode(s.SKIP_CHECK),e&&this.add(e),t.sys.queueDepthSort()},setActive:function(t){return this.active=t,this},setName:function(t){return this.name=t,this},setState:function(t){return this.state=t,this},setDataEnabled:function(){return this.data||(this.data=new h(this)),this},setData:function(t,e){return this.data||(this.data=new h(this)),this.data.set(t,e),this},incData:function(t,e){return this.data||(this.data=new h(this)),this.data.inc(t,e),this},toggleData:function(t){return this.data||(this.data=new h(this)),this.data.toggle(t),this},getData:function(t){return this.data||(this.data=new h(this)),this.data.get(t)},setInteractive:function(){return this},disableInteractive:function(){return this},removeInteractive:function(){return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return a(this)},willRender:function(t){return!(15!==this.renderFlags||0===this.list.length||0!==this.cameraFilter&&this.cameraFilter&t.id)},getIndexList:function(){for(var t=this,e=this.parentContainer,i=[];e&&(i.unshift(e.getIndex(t)),t=e,e.parentContainer);)e=e.parentContainer;return i.unshift(this.displayList.getIndex(t)),i},addChildCallback:function(t){t.displayList&&t.displayList!==this&&t.removeFromDisplayList(),t.displayList||(this.queueDepthSort(),t.displayList=this,t.emit(l.ADDED_TO_SCENE,t,this.scene),this.events.emit(c.ADDED_TO_SCENE,t,this.scene))},removeChildCallback:function(t){this.queueDepthSort(),t.displayList=null,t.emit(l.REMOVED_FROM_SCENE,t,this.scene),this.events.emit(c.REMOVED_FROM_SCENE,t,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(f(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(t,e){return t._depth-e._depth},getChildren:function(){return this.list},destroy:function(){if(this.scene&&!this.ignoreDestroy){this.emit(l.DESTROY,this);for(var t=this.list.length;t--;)this.list[t].destroy();this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});t.exports=p},252:function(t,e,i){var s=i(3),n=i(14),r=i(16),a=i(513),h=i(126),o=i(515),l=i(1263),u=new s({Extends:r,Mixins:[n.Depth,n.Mask,n.Pipeline,n.Transform,n.Visible,l],initialize:function(t,e,i,s){if(r.call(this,t,"ParticleEmitterManager"),this.blendMode=-1,this.timeScale=1,this.texture=null,this.frame=null,this.frameNames=[],null===i||"object"!=typeof i&&!Array.isArray(i)||(s=i,i=null),this.setTexture(e,i),this.initPipeline(),this.emitters=new h(this),this.wells=new h(this),s){Array.isArray(s)||(s=[s]);for(var n=0;n<s.length;n++)this.createEmitter(s[n])}},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setTexture:function(t,e){return this.texture=this.scene.sys.textures.get(t),this.setFrame(e)},setFrame:function(t){this.frame=this.texture.get(t);var e=this.texture.getFramesFromTextureSource(this.frame.sourceIndex),i=[];return e.forEach((function(t){i.push(t.name)})),this.frameNames=i,this.defaultFrame=this.frame,this},setEmitterFrames:function(t,e){Array.isArray(t)||(t=[t]);var i=e.frames;i.length=0;for(var s=0;s<t.length;s++){var n=t[s];-1!==this.frameNames.indexOf(n)&&i.push(this.texture.get(n))}return i.length>0?e.defaultFrame=i[0]:e.defaultFrame=this.defaultFrame,this},addEmitter:function(t){return this.emitters.add(t)},createEmitter:function(t){return this.addEmitter(new o(this,t))},removeEmitter:function(t){return this.emitters.remove(t,!0)},addGravityWell:function(t){return this.wells.add(t)},createGravityWell:function(t){return this.addGravityWell(new a(t))},emitParticle:function(t,e,i){for(var s=this.emitters.list,n=0;n<s.length;n++){var r=s[n];r.active&&r.emitParticle(t,e,i)}return this},emitParticleAt:function(t,e,i){return this.emitParticle(i,t,e)},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},getProcessors:function(){return this.wells.getAll("active",!0)},preUpdate:function(t,e){e*=this.timeScale;for(var i=this.emitters.list,s=0;s<i.length;s++){var n=i[s];n.active&&n.preUpdate(t,e)}},setAlpha:function(){},setScrollFactor:function(){},setBlendMode:function(){}});t.exports=u},253:function(t,e,i){var s=i(41),n=i(143),r=i(36),a=i(3),h=i(14),o=i(38),l=i(120),u=i(16),d=i(4),c=i(97),f=i(1267),p=i(151),v=i(15),g=i(242),m=new a({Extends:u,Mixins:[h.Alpha,h.BlendMode,h.ComputedSize,h.Crop,h.Depth,h.Flip,h.GetBounds,h.Mask,h.Origin,h.Pipeline,h.ScrollFactor,h.Tint,h.Transform,h.Visible,f],initialize:function(t,e,i,s,a,h,l){void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=32),void 0===a&&(a=32),u.call(this,t,"RenderTexture"),this.renderer=t.sys.renderer,this.textureManager=t.sys.textures,this.globalTint=16777215,this.globalAlpha=1,this.canvas=null,this.dirty=!1,this._crop=this.resetCropObject(),this.texture=null,this.frame=null,this._saved=!1,void 0===h?(this.canvas=r.create2D(this,s,a),this.texture=t.sys.textures.addCanvas(g(),this.canvas),this.frame=this.texture.get()):(this.texture=t.sys.textures.get(h),this.frame=this.texture.get(l),this.canvas=this.frame.source.image,this._saved=!0,this.dirty=!0,this.width=this.frame.cutWidth,this.height=this.frame.cutHeight),this.context=this.canvas.getContext("2d"),this._eraseMode=!1,this.camera=new n(0,0,s,a),this.renderTarget=null;var f=this.renderer;f?f.type===o.WEBGL?(this.drawGameObject=this.batchGameObjectWebGL,this.renderTarget=new p(f,s,a,1,0,!1)):f.type===o.CANVAS&&(this.drawGameObject=this.batchGameObjectCanvas):this.drawGameObject=d,this.camera.setScene(t),this.setPosition(e,i),void 0===h&&this.setSize(s,a),this.setOrigin(0,0),this.initPipeline(c.SINGLE_PIPELINE)},setSize:function(t,e){return this.resize(t,e)},resize:function(t,e){void 0===e&&(e=t);var i=this.frame;if(t!==this.width||e!==this.height){if("__BASE"===i.name){this.canvas.width=t,this.canvas.height=e,this.texture.width=t,this.texture.height=e;var s=this.renderTarget;s&&(s.resize(t,e),i.glTexture=s.texture,i.source.isRenderTexture=!0,i.source.isGLTexture=!0,i.source.glTexture=s.texture),this.camera.setSize(t,e),i.source.width=t,i.source.height=e,i.setSize(t,e),this.width=t,this.height=e}}else{var n=this.texture.getSourceImage();i.cutX+t>n.width&&(t=n.width-i.cutX),i.cutY+e>n.height&&(e=n.height-i.cutY),i.setSize(t,e,i.cutX,i.cutY)}this.updateDisplayOrigin();var r=this.input;return r&&!r.customHitArea&&(r.hitArea.width=t,r.hitArea.height=e),this},setGlobalTint:function(t){return this.globalTint=t,this},setGlobalAlpha:function(t){return this.globalAlpha=t,this},saveTexture:function(t){return this.textureManager.renameTexture(this.texture.key,t),this._saved=!0,this.texture},fill:function(t,e,i,s,n,r){var a=this.frame,h=this.camera,o=this.renderer;void 0===e&&(e=1),void 0===i&&(i=0),void 0===s&&(s=0),void 0===n&&(n=a.cutWidth),void 0===r&&(r=a.cutHeight);var l=(t>>16&255)/255,u=(t>>8&255)/255,d=(255&t)/255,c=this.renderTarget;if(h.preRender(),c){c.bind(!0);var f=this.pipeline;f.manager.set(f);var p=c.width,g=c.height,m=o.width/p,y=o.height/g;f.drawFillRect(i*m,s*y,n*m,r*y,v.getTintFromFloats(d,u,l,1),e),c.unbind(!0)}else{var x=this.context;o.setContext(x),x.fillStyle="rgba("+l+","+u+","+d+","+e+")",x.fillRect(i+a.cutX,s+a.cutY,n,r),o.setContext()}return this.dirty=!0,this},clear:function(){if(this.dirty){var t=this.renderTarget;if(t)t.clear();else{var e=this.context;e.save(),e.setTransform(1,0,0,1,0,0),e.clearRect(this.frame.cutX,this.frame.cutY,this.frame.cutWidth,this.frame.cutHeight),e.restore()}this.dirty=!1}return this},erase:function(t,e,i){return this._eraseMode=!0,this.draw(t,e,i,1,16777215),this._eraseMode=!1,this},draw:function(t,e,i,s,n){return this.beginDraw(),this.batchDraw(t,e,i,s,n),this.endDraw(),this},drawFrame:function(t,e,i,s,n,r){return this.beginDraw(),this.batchDrawFrame(t,e,i,s,n,r),this.endDraw(),this},beginDraw:function(){var t=this.camera,e=this.renderer,i=this.renderTarget;return t.preRender(),i?e.beginCapture(i.width,i.height):e.setContext(this.context),this},batchDraw:function(t,e,i,s,n){return void 0===s&&(s=this.globalAlpha),n=void 0===n?(this.globalTint>>16)+(65280&this.globalTint)+((255&this.globalTint)<<16):(n>>16)+(65280&n)+((255&n)<<16),Array.isArray(t)||(t=[t]),this.batchList(t,e,i,s,n),this},batchDrawFrame:function(t,e,i,s,n,r){void 0===i&&(i=0),void 0===s&&(s=0),void 0===n&&(n=this.globalAlpha),r=void 0===r?(this.globalTint>>16)+(65280&this.globalTint)+((255&this.globalTint)<<16):(r>>16)+(65280&r)+((255&r)<<16);var a=this.textureManager.getFrame(t,e);return a&&(this.renderTarget?this.pipeline.batchTextureFrame(a,i,s,r,n,this.camera.matrix,null):this.batchTextureFrame(a,i+this.frame.cutX,s+this.frame.cutY,n,r)),this},endDraw:function(t){void 0===t&&(t=this._eraseMode);var e=this.renderer,i=this.renderTarget;if(i){var s=e.endCapture();e.pipelines.setUtility().blitFrame(s,i,1,!1,!1,t),e.resetScissor(),e.resetViewport()}else e.setContext();return this.dirty=!0,this},batchList:function(t,e,i,s,n){for(var r=0;r<t.length;r++){var a=t[r];a&&a!==this&&(a.renderWebGL||a.renderCanvas?this.drawGameObject(a,e,i):a.isParent||a.list?this.batchGroup(a.getChildren(),e,i):"string"==typeof a?this.batchTextureFrameKey(a,null,e,i,s,n):a instanceof l?this.batchTextureFrame(a,e,i,s,n):Array.isArray(a)&&this.batchList(a,e,i,s,n))}},batchGroup:function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0),e+=this.frame.cutX,i+=this.frame.cutY;for(var s=0;s<t.length;s++){var n=t[s];if(n.willRender(this.camera)){var r=n.x+e,a=n.y+i;this.drawGameObject(n,r,a)}}},batchGameObjectWebGL:function(t,e,i){void 0===e&&(e=t.x),void 0===i&&(i=t.y);var s=t.x,n=t.y;t.setPosition(e+this.frame.cutX,i+this.frame.cutY),t.renderDirect?t.renderDirect(this.renderer,t,this.camera):t.renderWebGL(this.renderer,t,this.camera),t.setPosition(s,n)},batchGameObjectCanvas:function(t,e,i){void 0===e&&(e=t.x),void 0===i&&(i=t.y);var n=t.x,r=t.y;if(this._eraseMode){var a=t.blendMode;t.blendMode=s.ERASE}t.setPosition(e+this.frame.cutX,i+this.frame.cutY),t.renderCanvas(this.renderer,t,this.camera,null),t.setPosition(n,r),this._eraseMode&&(t.blendMode=a)},batchTextureFrameKey:function(t,e,i,s,n,r){var a=this.textureManager.getFrame(t,e);a&&this.batchTextureFrame(a,i,s,n,r)},batchTextureFrame:function(t,e,i,s,n){if(void 0===e&&(e=0),void 0===i&&(i=0),e+=this.frame.cutX,i+=this.frame.cutY,this.renderTarget)this.pipeline.batchTextureFrame(t,e,i,n,s,this.camera.matrix,null);else{var r=this.context,a=t.canvasData,h=t.source.image,o=this.camera.matrix;r.save(),r.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",r.globalAlpha=s,o.setToContext(r),r.drawImage(h,a.x,a.y,a.width,a.height,e,i,a.width,a.height),r.restore()}},snapshotArea:function(t,e,i,s,n,r,a){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,n,!1,t,e,i,s,r,a):this.renderer.snapshotCanvas(this.canvas,n,!1,t,e,i,s,r,a),this},snapshot:function(t,e,i){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,t,!1,0,0,this.width,this.height,e,i):this.renderer.snapshotCanvas(this.canvas,t,!1,0,0,this.width,this.height,e,i),this},snapshotPixel:function(t,e,i){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,i,!0,t,e):this.renderer.snapshotCanvas(this.canvas,i,!0,t,e),this},preDestroy:function(){this._saved||(r.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.texture.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.texture=null)}});t.exports=m},254:function(t,e,i){var s=i(112),n=i(3),r=i(14),a=i(16),h=i(97),o=i(1273),l=i(6),u=new n({Extends:a,Mixins:[r.AlphaSingle,r.BlendMode,r.Depth,r.Flip,r.Mask,r.Pipeline,r.Size,r.Texture,r.Transform,r.Visible,r.ScrollFactor,o],initialize:function(t,e,i,n,r,o,u,d,c){void 0===n&&(n="__DEFAULT"),void 0===o&&(o=2),void 0===u&&(u=!0),a.call(this,t,"Rope"),this.anims=new s(this),this.points=o,this.vertices,this.uv,this.colors,this.alphas,this.tintFill="__DEFAULT"===n,this.dirty=!1,this.horizontal=u,this._flipX=!1,this._flipY=!1,this._perp=new l,this.debugCallback=null,this.debugGraphic=null,this.setTexture(n,r),this.setPosition(e,i),this.setSizeToFrame(),this.initPipeline(h.ROPE_PIPELINE),Array.isArray(o)&&this.resizeArrays(o.length),this.setPoints(o,d,c),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(t,e){var i=this.anims.currentFrame;this.anims.update(t,e),this.anims.currentFrame!==i&&(this.updateUVs(),this.updateVertices())},play:function(t,e,i){return this.anims.play(t,e,i),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(t,e,i){return void 0===t&&(t=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(t,e,i))},setVertical:function(t,e,i){return void 0===t&&(t=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(t,e,i)):this},setTintFill:function(t){return void 0===t&&(t=!1),this.tintFill=t,this},setAlphas:function(t,e){var i=this.points.length;if(i<1)return this;var s,n=this.alphas;void 0===t?t=[1]:Array.isArray(t)||void 0!==e||(t=[t]);var r=0;if(void 0!==e)for(s=0;s<i;s++)n[r=2*s]=t,n[r+1]=e;else if(t.length===i)for(s=0;s<i;s++)n[r=2*s]=t[s],n[r+1]=t[s];else{var a=t[0];for(s=0;s<i;s++)r=2*s,t.length>r&&(a=t[r]),n[r]=a,t.length>r+1&&(a=t[r+1]),n[r+1]=a}return this},setColors:function(t){var e=this.points.length;if(e<1)return this;var i,s=this.colors;void 0===t?t=[16777215]:Array.isArray(t)||(t=[t]);var n=0;if(t.length===e)for(i=0;i<e;i++)s[n=2*i]=t[i],s[n+1]=t[i];else{var r=t[0];for(i=0;i<e;i++)n=2*i,t.length>n&&(r=t[n]),s[n]=r,t.length>n+1&&(r=t[n+1]),s[n+1]=r}return this},setPoints:function(t,e,i){if(void 0===t&&(t=2),"number"==typeof t){var s,n,r,a=t;if(a<2&&(a=2),t=[],this.horizontal)for(r=-this.frame.halfWidth,n=this.frame.width/(a-1),s=0;s<a;s++)t.push({x:r+s*n,y:0});else for(r=-this.frame.halfHeight,n=this.frame.height/(a-1),s=0;s<a;s++)t.push({x:0,y:r+s*n})}var h=t.length,o=this.points.length;return h<1?(console.warn("Rope: Not enough points given"),this):(1===h&&(t.unshift({x:0,y:0}),h++),o!==h&&this.resizeArrays(h),this.points=t,this.updateUVs(),null!=e&&this.setColors(e),null!=i&&this.setAlphas(i),this)},updateUVs:function(){for(var t=this.uv,e=this.points.length,i=this.frame.u0,s=this.frame.v0,n=this.frame.u1,r=this.frame.v1,a=(n-i)/(e-1),h=(r-s)/(e-1),o=0;o<e;o++){var l,u,d,c,f=4*o;this.horizontal?(this._flipX?(l=n-o*a,d=n-o*a):(l=i+o*a,d=i+o*a),this._flipY?(u=r,c=s):(u=s,c=r)):(this._flipX?(l=i,d=n):(l=n,d=i),this._flipY?(u=r-o*h,c=r-o*h):(u=s+o*h,c=s+o*h)),t[f+0]=l,t[f+1]=u,t[f+2]=d,t[f+3]=c}return this},resizeArrays:function(t){var e=this.colors,i=this.alphas;this.vertices=new Float32Array(4*t),this.uv=new Float32Array(4*t),e=new Uint32Array(2*t),i=new Float32Array(2*t);for(var s=0;s<2*t;s++)e[s]=16777215,i[s]=1;return this.colors=e,this.alphas=i,this.dirty=!0,this},updateVertices:function(){var t=this._perp,e=this.points,i=this.vertices,s=e.length;if(this.dirty=!1,!(s<1)){for(var n,r=e[0],a=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,h=0;h<s;h++){var o=e[h],l=4*h;n=h<s-1?e[h+1]:o,t.x=n.y-r.y,t.y=-(n.x-r.x);var u=t.length();t.x/=u,t.y/=u,t.x*=a,t.y*=a,i[l]=o.x+t.x,i[l+1]=o.y+t.y,i[l+2]=o.x-t.x,i[l+3]=o.y-t.y,r=o}return this}},setDebug:function(t,e){return this.debugGraphic=t,this.debugCallback=t||e?e||this.renderDebugVerts:null,this},renderDebugVerts:function(t,e,i){var s=t.debugGraphic,n=i[0],r=i[1],a=i[2],h=i[3];s.lineBetween(n,r,a,h);for(var o=4;o<e;o+=4){var l=i[o+0],u=i[o+1],d=i[o+2],c=i[o+3];s.lineBetween(n,r,l,u),s.lineBetween(a,h,d,c),s.lineBetween(a,h,l,u),s.lineBetween(l,u,d,c),n=l,r=u,a=d,h=c}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(t){return this._flipX=t,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(t){return this._flipY=t,this.updateUVs()}}});t.exports=u},255:function(t,e,i){var s=i(152),n=i(36),r=i(3),a=i(14),h=i(26),o=i(16),l=i(520),u=i(9),d=i(215),c=i(1276),f=i(521),p=new r({Extends:o,Mixins:[a.Alpha,a.BlendMode,a.ComputedSize,a.Crop,a.Depth,a.Flip,a.GetBounds,a.Mask,a.Origin,a.Pipeline,a.ScrollFactor,a.Tint,a.Transform,a.Visible,c],initialize:function(t,e,i,s,r){void 0===e&&(e=0),void 0===i&&(i=0),o.call(this,t,"Text"),this.renderer=t.sys.renderer,this.setPosition(e,i),this.setOrigin(0,0),this.initPipeline(),this.canvas=n.create(this),this.context=this.canvas.getContext("2d"),this.style=new f(this,r),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.dirty=!1,0===this.style.resolution&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(s),r&&r.padding&&this.setPadding(r.padding),r&&r.lineSpacing&&this.setLineSpacing(r.lineSpacing),t.sys.game.events.on(h.CONTEXT_RESTORED,(function(){this.dirty=!0}),this)},initRTL:function(){this.style.rtl&&(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",s(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function(t){var e=this.style;if(e.wordWrapCallback){var i=e.wordWrapCallback.call(e.wordWrapCallbackScope,t,this);return Array.isArray(i)&&(i=i.join("\n")),i}return e.wordWrapWidth?e.wordWrapUseAdvanced?this.advancedWordWrap(t,this.context,this.style.wordWrapWidth):this.basicWordWrap(t,this.context,this.style.wordWrapWidth):t},advancedWordWrap:function(t,e,i){for(var s="",n=t.replace(/ +/gi," ").split(this.splitRegExp),r=n.length,a=0;a<r;a++){var h=n[a],o="";if(h=h.replace(/^ *|\s*$/gi,""),e.measureText(h).width<i)s+=h+"\n";else{for(var l=i,u=h.split(" "),d=0;d<u.length;d++){var c=u[d],f=c+" ",p=e.measureText(f).width;if(p>l){if(0===d){for(var v=f;v.length&&(v=v.slice(0,-1),!((p=e.measureText(v).width)<=l)););if(!v.length)throw new Error("This text's wordWrapWidth setting is less than a single character!");var g=c.substr(v.length);u[d]=g,o+=v}var m=u[d].length?d:d+1,y=u.slice(m).join(" ").replace(/[ \n]*$/gi,"");n[a+1]=y+" "+(n[a+1]||""),r=n.length;break}o+=f,l-=p}s+=o.replace(/[ \n]*$/gi,"")+"\n"}}return s=s.replace(/[\s|\n]*$/gi,"")},basicWordWrap:function(t,e,i){for(var s="",n=t.split(this.splitRegExp),r=n.length-1,a=e.measureText(" ").width,h=0;h<=r;h++){for(var o=i,l=n[h].split(" "),u=l.length-1,d=0;d<=u;d++){var c=l[d],f=e.measureText(c).width,p=f;d<u&&(p+=a),p>o&&d>0&&(s+="\n",o=i),s+=c,d<u?(s+=" ",o-=p):o-=f}h<r&&(s+="\n")}return s},getWrappedText:function(t){return void 0===t&&(t=this._text),this.style.syncFont(this.canvas,this.context),this.runWordWrap(t).split(this.splitRegExp)},setText:function(t){return t||0===t||(t=""),Array.isArray(t)&&(t=t.join("\n")),t!==this._text&&(this._text=t.toString(),this.updateText()),this},setStyle:function(t){return this.style.setStyle(t)},setFont:function(t){return this.style.setFont(t)},setFontFamily:function(t){return this.style.setFontFamily(t)},setFontSize:function(t){return this.style.setFontSize(t)},setFontStyle:function(t){return this.style.setFontStyle(t)},setFixedSize:function(t,e){return this.style.setFixedSize(t,e)},setBackgroundColor:function(t){return this.style.setBackgroundColor(t)},setFill:function(t){return this.style.setFill(t)},setColor:function(t){return this.style.setColor(t)},setStroke:function(t,e){return this.style.setStroke(t,e)},setShadow:function(t,e,i,s,n,r){return this.style.setShadow(t,e,i,s,n,r)},setShadowOffset:function(t,e){return this.style.setShadowOffset(t,e)},setShadowColor:function(t){return this.style.setShadowColor(t)},setShadowBlur:function(t){return this.style.setShadowBlur(t)},setShadowStroke:function(t){return this.style.setShadowStroke(t)},setShadowFill:function(t){return this.style.setShadowFill(t)},setWordWrapWidth:function(t,e){return this.style.setWordWrapWidth(t,e)},setWordWrapCallback:function(t,e){return this.style.setWordWrapCallback(t,e)},setAlign:function(t){return this.style.setAlign(t)},setResolution:function(t){return this.style.setResolution(t)},setLineSpacing:function(t){return this.lineSpacing=t,this.updateText()},setPadding:function(t,e,i,s){if("object"==typeof t){var n=t,r=u(n,"x",null);null!==r?(t=r,i=r):(t=u(n,"left",0),i=u(n,"right",t));var a=u(n,"y",null);null!==a?(e=a,s=a):(e=u(n,"top",0),s=u(n,"bottom",e))}else void 0===t&&(t=0),void 0===e&&(e=t),void 0===i&&(i=t),void 0===s&&(s=e);return this.padding.left=t,this.padding.top=e,this.padding.right=i,this.padding.bottom=s,this.updateText()},setMaxLines:function(t){return this.style.setMaxLines(t)},updateText:function(){var t=this.canvas,e=this.context,i=this.style,s=i.resolution,n=i.metrics;i.syncFont(t,e);var r=this._text;(i.wordWrapWidth||i.wordWrapCallback)&&(r=this.runWordWrap(this._text));var a,h=r.split(this.splitRegExp),o=l(this,n,h),u=this.padding;0===i.fixedWidth?(this.width=o.width+u.left+u.right,a=o.width):(this.width=i.fixedWidth,(a=this.width-u.left-u.right)<o.width&&(a=o.width)),0===i.fixedHeight?this.height=o.height+u.top+u.bottom:this.height=i.fixedHeight;var d,c,f=this.width,p=this.height;this.updateDisplayOrigin(),f*=s,p*=s,f=Math.max(f,1),p=Math.max(p,1),t.width!==f||t.height!==p?(t.width=f,t.height=p,this.frame.setSize(f,p),i.syncFont(t,e)):e.clearRect(0,0,f,p),e.save(),e.scale(s,s),i.backgroundColor&&(e.fillStyle=i.backgroundColor,e.fillRect(0,0,f,p)),i.syncStyle(t,e),e.textBaseline="alphabetic",e.translate(u.left,u.top);for(var v=0;v<o.lines;v++){if(d=i.strokeThickness/2,c=i.strokeThickness/2+v*o.lineHeight+n.ascent,v>0&&(c+=o.lineSpacing*v),i.rtl)d=f-d;else if("right"===i.align)d+=a-o.lineWidths[v];else if("center"===i.align)d+=(a-o.lineWidths[v])/2;else if("justify"===i.align){if(o.lineWidths[v]/o.width>=.85){var g=o.width-o.lineWidths[v],m=e.measureText(" ").width,y=h[v].trim(),x=y.split(" ");g+=(h[v].length-y.length)*m;for(var T=Math.floor(g/m),w=0;T>0;)x[w]+=" ",w=(w+1)%(x.length-1||1),--T;h[v]=x.join(" ")}}this.autoRound&&(d=Math.round(d),c=Math.round(c)),i.strokeThickness&&(this.style.syncShadow(e,i.shadowStroke),e.strokeText(h[v],d,c)),i.color&&(this.style.syncShadow(e,i.shadowFill),e.fillText(h[v],d,c))}e.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(t,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var S=this.input;return S&&!S.customHitArea&&(S.hitArea.width=this.width,S.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(t){this.setText(t)}},toJSON:function(){var t=a.ToJSON(this),e={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return t.data=e,t},preDestroy:function(){this.style.rtl&&d(this.canvas),n.remove(this.canvas),this.texture.destroy()}});t.exports=p},256:function(t,e,i){var s=i(36),n=i(3),r=i(14),a=i(26),h=i(16),o=i(380),l=i(205),u=i(1279),d=i(6),c=new n({Extends:h,Mixins:[r.Alpha,r.BlendMode,r.ComputedSize,r.Crop,r.Depth,r.Flip,r.GetBounds,r.Mask,r.Origin,r.Pipeline,r.ScrollFactor,r.Tint,r.Transform,r.Visible,u],initialize:function(t,e,i,n,r,l,u){var c=t.sys.renderer;h.call(this,t,"TileSprite");var f=t.sys.textures.get(l),p=f.get(u);n&&r?(n=Math.floor(n),r=Math.floor(r)):(n=p.width,r=p.height),this._tilePosition=new d,this._tileScale=new d(1,1),this.dirty=!1,this.renderer=c,this.canvas=s.create(this,n,r),this.context=this.canvas.getContext("2d"),this.displayTexture=f,this.displayFrame=p,this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.potWidth=o(p.width),this.potHeight=o(p.height),this.fillCanvas=s.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d"),this.fillPattern=null,this.setPosition(e,i),this.setSize(n,r),this.setFrame(u),this.setOriginFromFrame(),this.initPipeline(),t.sys.game.events.on(a.CONTEXT_RESTORED,(function(t){if(t){var e=t.gl;this.dirty=!0,this.fillPattern=null,this.fillPattern=t.createTexture2D(0,e.LINEAR,e.LINEAR,e.REPEAT,e.REPEAT,e.RGBA,this.fillCanvas,this.potWidth,this.potHeight)}}),this)},setTexture:function(t,e){return this.displayTexture=this.scene.sys.textures.get(t),this.setFrame(e)},setFrame:function(t){var e=this.displayTexture.get(t);return this.potWidth=o(e.width),this.potHeight=o(e.height),this.canvas.width=0,e.cutWidth&&e.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this.displayFrame=e,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(t,e){return void 0!==t&&(this.tilePositionX=t),void 0!==e&&(this.tilePositionY=e),this},setTileScale:function(t,e){return void 0===t&&(t=this.tileScaleX),void 0===e&&(e=t),this.tileScaleX=t,this.tileScaleY=e,this},updateTileTexture:function(){if(this.dirty&&this.renderer){var t=this.displayFrame;if(t.source.isRenderTexture||t.source.isGLTexture)return console.warn("TileSprites can only use Image or Canvas based textures"),void(this.dirty=!1);var e=this.fillContext,i=this.fillCanvas,s=this.potWidth,n=this.potHeight;this.renderer&&this.renderer.gl||(s=t.cutWidth,n=t.cutHeight),e.clearRect(0,0,s,n),i.width=s,i.height=n,e.drawImage(t.source.image,t.cutX,t.cutY,t.cutWidth,t.cutHeight,0,0,s,n),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(i,this.fillPattern):this.fillPattern=e.createPattern(i,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var t=this.canvas;if(t.width===this.width&&t.height===this.height||(t.width=this.width,t.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl)this.dirty=!1;else{var e=this.context;this.scene.sys.game.config.antialias||l.disable(e);var i=this._tileScale.x,s=this._tileScale.y,n=this._tilePosition.x,r=this._tilePosition.y;e.clearRect(0,0,this.width,this.height),e.save(),e.scale(i,s),e.translate(-n,-r),e.fillStyle=this.fillPattern,e.fillRect(n,r,this.width/i,this.height/s),e.restore(),this.dirty=!1}},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),s.remove(this.canvas),s.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null,this.texture.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(t){this._tilePosition.x=t,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(t){this._tilePosition.y=t,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(t){this._tileScale.x=t,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(t){this._tileScale.y=t,this.dirty=!0}}});t.exports=c},257:function(t,e,i){var s=i(3),n=i(21),r=i(14),a=i(82),h=i(26),o=i(55),l=i(16),u=i(77),d=i(242),c=i(1282),f=i(17),p=new s({Extends:l,Mixins:[r.Alpha,r.BlendMode,r.Depth,r.Flip,r.GetBounds,r.Mask,r.Origin,r.Pipeline,r.ScrollFactor,r.Size,r.TextureCrop,r.Tint,r.Transform,r.Visible,c],initialize:function(t,e,i,s){l.call(this,t,"Video"),this.video=null,this.videoTexture=null,this.videoTextureSource=null,this.snapshotTexture=null,this.flipY=!1,this._key=d(),this.touchLocked=!0,this.playWhenUnlocked=!1,this.retryLimit=20,this.retry=0,this.retryInterval=500,this._retryID=null,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={play:this.playHandler.bind(this),error:this.loadErrorHandler.bind(this),end:this.completeHandler.bind(this),time:this.timeUpdateHandler.bind(this),seeking:this.seekingHandler.bind(this),seeked:this.seekedHandler.bind(this)},this._crop=this.resetCropObject(),this.markers={},this._markerIn=-1,this._markerOut=f.MAX_SAFE_INTEGER,this._lastUpdate=0,this._cacheKey="",this._isSeeking=!1,this.removeVideoElementOnDestroy=!1,this.setPosition(e,i),this.initPipeline(),s&&this.changeSource(s,!1);var n=t.sys.game.events;n.on(h.PAUSE,this.globalPause,this),n.on(h.RESUME,this.globalResume,this);var r=t.sys.sound;r&&r.on(u.GLOBAL_MUTE,this.globalMute,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},play:function(t,e,i){if(this.touchLocked&&this.playWhenUnlocked||this.isPlaying())return this;var s=this.video;if(!s)return console.warn("Video not loaded"),this;void 0===t&&(t=s.loop);var n=this.scene.sys.sound;n&&n.mute&&this.setMute(!0),isNaN(e)||(this._markerIn=e),!isNaN(i)&&i>e&&(this._markerOut=i),s.loop=t;var r=this._callbacks,a=s.play();return void 0!==a?a.then(this.playPromiseSuccessHandler.bind(this)).catch(this.playPromiseErrorHandler.bind(this)):(s.addEventListener("playing",r.play,!0),s.readyState<2&&(this.retry=this.retryLimit,this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval))),s.addEventListener("ended",r.end,!0),s.addEventListener("timeupdate",r.time,!0),s.addEventListener("seeking",r.seeking,!0),s.addEventListener("seeked",r.seeked,!0),this},changeSource:function(t,e,i,s,n){void 0===e&&(e=!0),this.video&&this.stop();var r=this.scene.sys.cache.video.get(t);return r?(this.video=r,this._cacheKey=t,this._codePaused=r.paused,this._codeMuted=r.muted,this.videoTexture?(this.scene.sys.textures.remove(this._key),this.videoTexture=this.scene.sys.textures.create(this._key,r,r.videoWidth,r.videoHeight),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,r.videoWidth,r.videoHeight),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(a.VIDEO_CREATED,this,r.videoWidth,r.videoHeight)):this.updateTexture(),r.currentTime=0,this._lastUpdate=0,e&&this.play(i,s,n)):this.video=null,this},addMarker:function(t,e,i){return!isNaN(e)&&e>=0&&!isNaN(i)&&(this.markers[t]=[e,i]),this},playMarker:function(t,e){var i=this.markers[t];return i&&this.play(e,i[0],i[1]),this},removeMarker:function(t){return delete this.markers[t],this},snapshot:function(t,e){return void 0===t&&(t=this.width),void 0===e&&(e=this.height),this.snapshotArea(0,0,this.width,this.height,t,e)},snapshotArea:function(t,e,i,s,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=this.width),void 0===s&&(s=this.height),void 0===n&&(n=i),void 0===r&&(r=s);var a=this.video,h=this.snapshotTexture;return h?(h.setSize(n,r),a&&h.context.drawImage(a,t,e,i,s,0,0,n,r)):(h=this.scene.sys.textures.createCanvas(d(),n,r),this.snapshotTexture=h,a&&h.context.drawImage(a,t,e,i,s,0,0,n,r)),h.update()},saveSnapshotTexture:function(t){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,t):this.snapshotTexture=this.scene.sys.textures.createCanvas(t,this.width,this.height),this.snapshotTexture},loadURL:function(t,e,i){void 0===e&&(e="loadeddata"),void 0===i&&(i=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var s=document.createElement("video");return s.controls=!1,i&&(s.muted=!0,s.defaultMuted=!0,s.setAttribute("autoplay","autoplay")),s.setAttribute("playsinline","playsinline"),s.setAttribute("preload","auto"),s.addEventListener("error",this._callbacks.error,!0),s.src=t,s.load(),this.video=s,this},loadMediaStream:function(t,e,i){void 0===e&&(e="loadeddata"),void 0===i&&(i=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var s=document.createElement("video");s.controls=!1,i&&(s.muted=!0,s.defaultMuted=!0,s.setAttribute("autoplay","autoplay")),s.setAttribute("playsinline","playsinline"),s.setAttribute("preload","auto"),s.addEventListener("error",this._callbacks.error,!0);try{s.srcObject=t}catch(e){s.src=window.URL.createObjectURL(t)}return s.load(),this.video=s,this},playPromiseSuccessHandler:function(){this._codePaused=!1,this.touchLocked=!1,this.emit(a.VIDEO_PLAY,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn)},playPromiseErrorHandler:function(t){this.scene.sys.input.once(o.POINTER_DOWN,this.unlockHandler,this),this.touchLocked=!0,this.playWhenUnlocked=!0,this.emit(a.VIDEO_ERROR,this,t)},playHandler:function(){this._codePaused=!1,this.touchLocked=!1,this.emit(a.VIDEO_PLAY,this),this.video.removeEventListener("playing",this._callbacks.play,!0)},loadErrorHandler:function(t){this.stop(),this.emit(a.VIDEO_ERROR,this,t)},unlockHandler:function(){this.touchLocked=!1,this.playWhenUnlocked=!1,this.emit(a.VIDEO_UNLOCKED,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn),this.video.play(),this.emit(a.VIDEO_PLAY,this)},completeHandler:function(){this.emit(a.VIDEO_COMPLETE,this)},timeUpdateHandler:function(){this.video&&this.video.currentTime<this._lastUpdate&&(this.emit(a.VIDEO_LOOP,this),this._lastUpdate=0)},preUpdate:function(){var t=this.video;if(t){var e=t.currentTime;e!==this._lastUpdate&&(this._lastUpdate=e,this.updateTexture(),e>=this._markerOut&&(t.loop?(t.currentTime=this._markerIn,this.updateTexture(),this._lastUpdate=e,this.emit(a.VIDEO_LOOP,this)):(this.emit(a.VIDEO_COMPLETE,this),this.stop())))}},checkVideoProgress:function(){this.video.readyState>=2?this.updateTexture():(this.retry--,this.retry>0?this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval):this.emit(a.VIDEO_TIMEOUT,this))},updateTexture:function(){var t=this.video,e=t.videoWidth,i=t.videoHeight;if(this.videoTexture){var s=this.videoTextureSource;s.source!==t&&(s.source=t,s.width=e,s.height=i),s.update()}else this.videoTexture=this.scene.sys.textures.create(this._key,t,e,i),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,e,i),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(a.VIDEO_CREATED,this,e,i)},getVideoKey:function(){return this._cacheKey},seekTo:function(t){var e=this.video;if(e){var i=e.duration;if(i!==1/0&&!isNaN(i)){var s=i*t;this.setCurrentTime(s)}}return this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(t){var e=this.video;if(e){if("string"==typeof t){var i=t[0],s=parseFloat(t.substr(1));"+"===i?t=e.currentTime+s:"-"===i&&(t=e.currentTime-s)}e.currentTime=t,this._lastUpdate=t}return this},isSeeking:function(){return this._isSeeking},seekingHandler:function(){this._isSeeking=!0,this.emit(a.VIDEO_SEEKING,this)},seekedHandler:function(){this._isSeeking=!1,this.emit(a.VIDEO_SEEKED,this),this.video&&this.updateTexture()},getProgress:function(){var t=this.video;if(t){var e=t.currentTime,i=t.duration;if(i!==1/0&&!isNaN(i))return e/i}return 0},getDuration:function(){return this.video?this.video.duration:0},setMute:function(t){void 0===t&&(t=!0),this._codeMuted=t;var e=this.video;return e&&(e.muted=!!this._systemMuted||t),this},isMuted:function(){return this._codeMuted},globalMute:function(t,e){this._systemMuted=e;var i=this.video;i&&(i.muted=!!this._codeMuted||e)},globalPause:function(){this._systemPaused=!0,this.video&&this.video.pause()},globalResume:function(){this._systemPaused=!1,this.video&&!this._codePaused&&this.video.play()},setPaused:function(t){void 0===t&&(t=!0);var e=this.video;return this._codePaused=t,e&&(t?e.paused||e.pause():t||e.paused&&!this._systemPaused&&e.play()),this},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(t){return void 0===t&&(t=1),this.video&&(this.video.volume=n(t,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(t){return this.video&&(this.video.playbackRate=t),this},getLoop:function(){return!!this.video&&this.video.loop},setLoop:function(t){return void 0===t&&(t=!0),this.video&&(this.video.loop=t),this},isPlaying:function(){return!!this.video&&!(this.video.paused||this.video.ended)},isPaused:function(){return this.video&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(t,e){return void 0===e&&(e=!1),this.videoTexture&&this.scene.sys.textures.renameTexture(this._key,t),this._key=t,this.flipY=e,this.videoTextureSource&&this.videoTextureSource.setFlipY(e),this.videoTexture},stop:function(){var t=this.video;if(t){var e=this._callbacks;for(var i in e)t.removeEventListener(i,e[i],!0);t.pause()}return this._retryID&&window.clearTimeout(this._retryID),this.emit(a.VIDEO_STOP,this),this},removeVideoElement:function(){var t=this.video;if(t){for(t.parentNode&&t.parentNode.removeChild(t);t.hasChildNodes();)t.removeChild(t.firstChild);t.removeAttribute("autoplay"),t.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(),this.removeVideoElementOnDestroy&&this.removeVideoElement();var t=this.scene.sys.game.events;t.off(h.PAUSE,this.globalPause,this),t.off(h.RESUME,this.globalResume,this);var e=this.scene.sys.sound;e&&e.off(u.GLOBAL_MUTE,this.globalMute,this),this._retryID&&window.clearTimeout(this._retryID)}});t.exports=p},258:function(t,e,i){var s=i(3),n=i(14),r=i(16),a=i(5),h=i(20),o=i(505),l=i(1364),u=i(30),d=new s({Extends:r,Mixins:[n.ComputedSize,n.Depth,n.GetBounds,n.Mask,n.Origin,n.ScrollFactor,n.Transform,n.Visible,l],initialize:function(t,e,i,s,n,a,h,o){void 0===i&&(i=0),void 0===s&&(s=0),void 0===n&&(n=128),void 0===a&&(a=128),r.call(this,t,"Shader"),this.blendMode=-1,this.shader;var l=t.sys.renderer;this.renderer=l,this.gl=l.gl,this.vertexData=new ArrayBuffer(2*Float32Array.BYTES_PER_ELEMENT*6),this.vertexBuffer=l.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new u,this._tempMatrix2=new u,this._tempMatrix3=new u,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=l.width,this._rendererHeight=l.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(i,s),this.setSize(n,a),this.setOrigin(.5,.5),this.setShader(e,h,o)},willRender:function(t){return!!this.renderToTexture||!(r.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id)},setRenderToTexture:function(t,e){if(void 0===e&&(e=!1),!this.renderToTexture){var i=this.width,s=this.height,n=this.renderer;this.glTexture=n.createTextureFromSource(null,i,s,0),this.glTexture.flipY=e,this.framebuffer=n.createFramebuffer(i,s,this.glTexture,!1),this._rendererWidth=i,this._rendererHeight=s,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),t&&(this.texture=this.scene.sys.textures.addGLTexture(t,this.glTexture,i,s))}return this.shader&&(n.pipelines.clear(),this.load(),this.flush(),n.pipelines.rebind()),this},setShader:function(t,e,i){if(void 0===e&&(e=[]),"string"==typeof t){var s=this.scene.sys.cache.shader;if(!s.has(t))return console.warn("Shader missing: "+t),this;this.shader=s.get(t)}else this.shader=t;var n=this.gl,r=this.renderer;this.program&&n.deleteProgram(this.program);var a=r.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);n.uniformMatrix4fv(n.getUniformLocation(a,"uViewMatrix"),!1,this.viewMatrix),n.uniformMatrix4fv(n.getUniformLocation(a,"uProjectionMatrix"),!1,this.projectionMatrix),n.uniform2f(n.getUniformLocation(a,"uResolution"),this.width,this.height),this.program=a;var o=new Date,l={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[o.getFullYear(),o.getMonth(),o.getDate(),60*o.getHours()*60+60*o.getMinutes()+o.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=h(!0,{},this.shader.uniforms,l):this.uniforms=l;for(var u=0;u<4;u++)e[u]&&this.setSampler2D("iChannel"+u,e[u],u,i);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(t){return this.pointer=t,this},projOrtho:function(t,e,i,s){var n=1/(t-e),r=1/(i-s),a=this.projectionMatrix;a[0]=-2*n,a[5]=-2*r,a[10]=-.001,a[12]=(t+e)*n,a[13]=(s+i)*r,a[14]=-0;var h=this.program,o=this.gl;this.renderer.setProgram(h),o.uniformMatrix4fv(o.getUniformLocation(h,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=e,this._rendererHeight=i},initUniforms:function(){var t=this.gl,e=this.renderer.glFuncMap,i=this.program;for(var s in this._textureCount=0,this.uniforms){var n=this.uniforms[s],r=n.type,a=e[r];n.uniformLocation=t.getUniformLocation(i,s),"sampler2D"!==r&&(n.glMatrix=a.matrix,n.glValueLength=a.length,n.glFunc=a.func)}},setSampler2DBuffer:function(t,e,i,s,n,r){void 0===n&&(n=0),void 0===r&&(r={});var a=this.uniforms[t];return a.value=e,r.width=i,r.height=s,a.textureData=r,this._textureCount=n,this.initSampler2D(a),this},setSampler2D:function(t,e,i,s){void 0===i&&(i=0);var n=this.scene.sys.textures;if(n.exists(e)){var r=n.getFrame(e);if(r.glTexture&&r.glTexture.isRenderTexture)return this.setSampler2DBuffer(t,r.glTexture,r.width,r.height,i,s);var a=this.uniforms[t],h=r.source;a.textureKey=e,a.source=h.image,a.value=r.glTexture,h.isGLTexture&&(s||(s={}),s.width=h.width,s.height=h.height),s&&(a.textureData=s),this._textureCount=i,this.initSampler2D(a)}return this},setUniform:function(t,e){return o(this.uniforms,t,e),this},getUniform:function(t){return a(this.uniforms,t,null)},setChannel0:function(t,e){return this.setSampler2D("iChannel0",t,0,e)},setChannel1:function(t,e){return this.setSampler2D("iChannel1",t,1,e)},setChannel2:function(t,e){return this.setSampler2D("iChannel2",t,2,e)},setChannel3:function(t,e){return this.setSampler2D("iChannel3",t,3,e)},initSampler2D:function(t){if(t.value){var e=this.gl;e.activeTexture(e.TEXTURE0+this._textureCount),e.bindTexture(e.TEXTURE_2D,t.value);var i=t.textureData;if(i&&!t.value.isRenderTexture){var s=e[a(i,"magFilter","linear").toUpperCase()],n=e[a(i,"minFilter","linear").toUpperCase()],r=e[a(i,"wrapS","repeat").toUpperCase()],h=e[a(i,"wrapT","repeat").toUpperCase()],o=e[a(i,"format","rgba").toUpperCase()];if(i.repeat&&(r=e.REPEAT,h=e.REPEAT),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!!i.flipY),i.width){var l=a(i,"width",512),u=a(i,"height",2),d=a(i,"border",0);e.texImage2D(e.TEXTURE_2D,0,o,l,u,d,o,e.UNSIGNED_BYTE,null)}else e.texImage2D(e.TEXTURE_2D,0,o,e.RGBA,e.UNSIGNED_BYTE,t.source);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,s),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,h)}this.renderer.setProgram(this.program),e.uniform1i(t.uniformLocation,this._textureCount),this._textureCount++}},syncUniforms:function(){var t,e,i,s,n,r=this.gl,a=this.uniforms,h=0;for(var o in a)i=(t=a[o]).glFunc,e=t.glValueLength,s=t.uniformLocation,null!==(n=t.value)&&(1===e?t.glMatrix?i.call(r,s,t.transpose,n):i.call(r,s,n):2===e?i.call(r,s,n.x,n.y):3===e?i.call(r,s,n.x,n.y,n.z):4===e?i.call(r,s,n.x,n.y,n.z,n.w):"sampler2D"===t.type&&(r.activeTexture(r.TEXTURE0+h),r.bindTexture(r.TEXTURE_2D,n),r.uniform1i(s,h),h++))},load:function(t){var e=this.gl,i=this.width,s=this.height,n=this.renderer,r=this.program,a=this.viewMatrix;if(!this.renderToTexture){var h=-this._displayOriginX,o=-this._displayOriginY;a[0]=t[0],a[1]=t[1],a[4]=t[2],a[5]=t[3],a[8]=t[4],a[9]=t[5],a[12]=a[0]*h+a[4]*o,a[13]=a[1]*h+a[5]*o}e.useProgram(r),e.uniformMatrix4fv(e.getUniformLocation(r,"uViewMatrix"),!1,a),e.uniform2f(e.getUniformLocation(r,"uResolution"),this.width,this.height);var l=this.uniforms,u=l.resolution;u.value.x=i,u.value.y=s,l.time.value=n.game.loop.getDuration();var d=this.pointer;if(d){var c=l.mouse,f=d.x/i,p=1-d.y/s;c.value.x=f.toFixed(2),c.value.y=p.toFixed(2)}this.syncUniforms()},flush:function(){var t=this.width,e=this.height,i=this.program,s=this.gl,n=this.vertexBuffer,r=this.renderer,a=2*Float32Array.BYTES_PER_ELEMENT;this.renderToTexture&&(r.setFramebuffer(this.framebuffer),s.clearColor(0,0,0,0),s.clear(s.COLOR_BUFFER_BIT)),s.bindBuffer(s.ARRAY_BUFFER,n);var h=s.getAttribLocation(i,"inPosition");-1!==h&&(s.enableVertexAttribArray(h),s.vertexAttribPointer(h,2,s.FLOAT,!1,a,0));var o=this.vertexViewF32;o[3]=e,o[4]=t,o[5]=e,o[8]=t,o[9]=e,o[10]=t;s.bufferSubData(s.ARRAY_BUFFER,0,this.bytes.subarray(0,6*a)),s.drawArrays(s.TRIANGLES,0,6),this.renderToTexture&&r.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},preDestroy:function(){var t=this.gl;t.deleteProgram(this.program),t.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(this.renderer.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null)}});t.exports=d},259:function(t,e,i){var s=i(3),n=i(14),r=i(42),a=i(124),h=i(16),o=i(473),l=i(472),u=i(23),d=i(76),c=i(1367),f=i(88),p=i(45),v=i(125),g=new s({Extends:h,Mixins:[n.AlphaSingle,n.BlendMode,n.Depth,n.Mask,n.Pipeline,n.Size,n.Texture,n.Transform,n.Visible,n.ScrollFactor,c],initialize:function(t,e,i,s,n,r,a,o,l,u,c,f){void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s="__WHITE"),h.call(this,t,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new p,this.modelScale=new p(1,1,1),this.modelRotation=new p,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new d,this.viewPosition=new p,this.viewMatrix=new d,this.projectionMatrix=new d,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1;var v=t.sys.renderer;this.setPosition(e,i),this.setTexture(s,n),this.setSize(v.width,v.height),this.initPipeline(),this.setPerspective(v.width,v.height),r&&this.addVertices(r,a,o,l,u,c,f)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(t){return this.viewPosition.addScale(p.LEFT,t),this.dirtyCache[10]=1,this},panY:function(t){return this.viewPosition.y+=p.DOWN.y*t,this.dirtyCache[10]=1,this},panZ:function(t){return this.viewPosition.z+=t,this.dirtyCache[10]=1,this},setPerspective:function(t,e,i,s,n){return void 0===i&&(i=45),void 0===s&&(s=.01),void 0===n&&(n=1e3),this.projectionMatrix.perspective(r(i),t/e,s,n),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(t,e,i,s){return void 0===t&&(t=this.scene.sys.renderer.getAspectRatio()),void 0===e&&(e=1),void 0===i&&(i=-1e3),void 0===s&&(s=1e3),this.projectionMatrix.ortho(-t,t,-e,e,i,s),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach((function(t){t.destroy()})),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(t,e,i,s,n,r,a,h,o){var u=this.scene.sys.cache.obj.get(t);return u&&l(u,this,e,i,s,n,r,a,h,o),this},sortByDepth:function(t,e){return t.depth-e.depth},depthSort:function(){return f(this.faces,this.sortByDepth),this},addVertex:function(t,e,i,s,n,r,a){var h=new v(t,e,i,s,n,r,a);return this.vertices.push(h),h},addFace:function(t,e,i){var s=new a(t,e,i);return this.faces.push(s),this.dirtyCache[9]=-1,s},addVertices:function(t,e,i,s,n,r,a){var h=o(t,e,i,s,n,r,a);return h&&(this.faces=this.faces.concat(h.faces),this.vertices=this.vertices.concat(h.vertices)),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(t){return this.faces[t]},getFaceAt:function(t,e,i){void 0===i&&(i=this.scene.sys.cameras.main);for(var s=u(this,i).calc,n=this.faces,r=[],a=0;a<n.length;a++){var h=n[a];h.contains(t,e,s)&&r.push(h)}return f(r,this.sortByDepth)},setDebug:function(t,e){return this.debugGraphic=t,this.debugCallback=t||e?e||this.renderDebug:null,this},isDirty:function(){var t=this.modelPosition,e=this.modelRotation,i=this.modelScale,s=this.dirtyCache,n=t.x,r=t.y,a=t.z,h=e.x,o=e.y,l=e.z,u=i.x,d=i.y,c=i.z,f=this.getFaceCount(),p=s[0],v=s[1],g=s[2],m=s[3],y=s[4],x=s[5],T=s[6],w=s[7],S=s[8],b=s[9];return s[0]=n,s[1]=r,s[2]=a,s[3]=h,s[4]=o,s[5]=l,s[6]=u,s[7]=d,s[8]=c,s[9]=f,p!==n||v!==r||g!==a||m!==h||y!==o||x!==l||T!==u||w!==d||S!==c||b!==f},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var t=this.dirtyCache;if(this.ignoreDirtyCache||t[10]||this.isDirty()){var e=this.width,i=this.height,s=this.viewMatrix,n=this.viewPosition;t[10]&&(s.identity(),s.translate(n),s.invert(),t[10]=0);var r=this.transformMatrix;r.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var a=n.z,h=this.faces,o=0;o<h.length;o++)h[o].transformCoordinatesLocal(r,e,i,a);this.depthSort()}},renderDebug:function(t,e){for(var i=t.debugGraphic,s=0;s<e.length;s++){var n=e[s],r=n.vertex1.tx,a=n.vertex1.ty,h=n.vertex2.tx,o=n.vertex2.ty,l=n.vertex3.tx,u=n.vertex3.ty;i.strokeTriangle(r,a,h,o,l,u)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null}});t.exports=g},33:function(t,e,i){var s=i(41),n=i(18);t.exports=function(t,e,i){e.x=n(i,"x",0),e.y=n(i,"y",0),e.depth=n(i,"depth",0),e.flipX=n(i,"flipX",!1),e.flipY=n(i,"flipY",!1);var r=n(i,"scale",null);"number"==typeof r?e.setScale(r):null!==r&&(e.scaleX=n(r,"x",1),e.scaleY=n(r,"y",1));var a=n(i,"scrollFactor",null);"number"==typeof a?e.setScrollFactor(a):null!==a&&(e.scrollFactorX=n(a,"x",1),e.scrollFactorY=n(a,"y",1)),e.rotation=n(i,"rotation",0);var h=n(i,"angle",null);null!==h&&(e.angle=h),e.alpha=n(i,"alpha",1);var o=n(i,"origin",null);if("number"==typeof o)e.setOrigin(o);else if(null!==o){var l=n(o,"x",.5),u=n(o,"y",.5);e.setOrigin(l,u)}return e.blendMode=n(i,"blendMode",s.NORMAL),e.visible=n(i,"visible",!0),n(i,"add",!0)&&t.sys.displayList.add(e),e.preUpdate&&t.sys.updateList.add(e),e}},39:function(t,e,i){var s=i(3),n=i(14),r=i(16),a=i(53),h=new s({Extends:r,Mixins:[n.AlphaSingle,n.BlendMode,n.Depth,n.GetBounds,n.Mask,n.Origin,n.Pipeline,n.ScrollFactor,n.Transform,n.Visible],initialize:function(t,e,i){void 0===e&&(e="Shape"),r.call(this,t,e),this.geom=i,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new a,this.width=0,this.height=0,this.initPipeline()},setFillStyle:function(t,e){return void 0===e&&(e=1),void 0===t?this.isFilled=!1:(this.fillColor=t,this.fillAlpha=e,this.isFilled=!0),this},setStrokeStyle:function(t,e,i){return void 0===i&&(i=1),void 0===t?this.isStroked=!1:(this.lineWidth=t,this.strokeColor=e,this.strokeAlpha=i,this.isStroked=!0),this},setClosePath:function(t){return this.closePath=t,this},setSize:function(t,e){return this.width=t,this.height=e,this},setDisplaySize:function(t,e){return this.displayWidth=t,this.displayHeight=e,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(t){this.scaleX=t/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(t){this.scaleY=t/this.height}}});t.exports=h},506:function(t,e,i){var s=i(18);t.exports=function(t,e){var i=s(e,"anims",null);if(null===i)return t;if("string"==typeof i)t.anims.play(i);else if("object"==typeof i){var n=t.anims,r=s(i,"key",void 0);if(r){var a=s(i,"startFrame",void 0),h=s(i,"delay",0),o=s(i,"repeat",0),l=s(i,"repeatDelay",0),u=s(i,"yoyo",!1),d=s(i,"play",!1),c=s(i,"delayedPlay",0),f={key:r,delay:h,repeat:o,repeatDelay:l,yoyo:u,startFrame:a};d?n.play(f):c>0?n.playAfterDelay(f,c):n.load(f)}}return t}},507:function(t,e,i){var s=i(3),n=i(120),r=new s({initialize:function(t,e,i,s,n){this.parent=t,this.x=e,this.y=i,this.frame=s,this.data={},this.tint=16777215,this._visible=n,this._alpha=1,this.flipX=!1,this.flipY=!1},setFrame:function(t){return void 0===t?this.frame=this.parent.frame:t instanceof n&&t.texture===this.parent.texture?this.frame=t:this.frame=this.parent.texture.get(t),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(t,e,i){return this.x=t,this.y=e,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,i&&this.setFrame(i),this},setPosition:function(t,e){return this.x=t,this.y=e,this},setFlipX:function(t){return this.flipX=t,this},setFlipY:function(t){return this.flipY=t,this},setFlip:function(t,e){return this.flipX=t,this.flipY=e,this},setVisible:function(t){return this.visible=t,this},setAlpha:function(t){return this.alpha=t,this},setTint:function(t){return this.tint=t,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(t){this.parent.dirty|=this._visible!==t,this._visible=t}},alpha:{get:function(){return this._alpha},set:function(t){this.parent.dirty|=this._alpha>0!=t>0,this._alpha=t}}});t.exports=r},508:function(t,e,i){var s=i(3),n=i(14),r=i(1246),a=i(16),h=i(10),o=i(215),l=i(22),u=i(150),d=new s({Extends:a,Mixins:[n.AlphaSingle,n.BlendMode,n.Depth,n.Origin,n.ScrollFactor,n.Transform,n.Visible,r],initialize:function(t,e,i,s,n,r){a.call(this,t,"DOMElement"),this.parent=t.sys.game.domContainer,this.cache=t.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new u,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(e,i),"string"==typeof s?"#"===s[0]?this.setElement(s.substr(1),n,r):this.createElement(s,n,r):s&&this.setElement(s,n,r),t.sys.events.on(l.SLEEP,this.handleSceneEvent,this),t.sys.events.on(l.WAKE,this.handleSceneEvent,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},handleSceneEvent:function(t){var e=this.node,i=e.style;e&&(i.display=t.settings.visible?"block":"none")},setSkew:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.skewX=t,this.skewY=e,this},setPerspective:function(t){return this.parent.style.perspective=t+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(t){this.parent.style.perspective=t+"px"}},addListener:function(t){if(this.node){t=t.split(" ");for(var e=0;e<t.length;e++)this.node.addEventListener(t[e],this.handler,!1)}return this},removeListener:function(t){if(this.node){t=t.split(" ");for(var e=0;e<t.length;e++)this.node.removeEventListener(t[e],this.handler)}return this},dispatchNativeEvent:function(t){this.emit(t.type,t)},createElement:function(t,e,i){return this.setElement(document.createElement(t),e,i)},setElement:function(t,e,i){var s;if(this.removeElement(),"string"==typeof t?("#"===t[0]&&(t=t.substr(1)),s=document.getElementById(t)):"object"==typeof t&&1===t.nodeType&&(s=t),!s)return this;if(this.node=s,e&&h(e))for(var n in e)s.style[n]=e[n];else"string"==typeof e&&(s.style=e);return s.style.zIndex="0",s.style.display="inline",s.style.position="absolute",s.phaser=this,this.parent&&this.parent.appendChild(s),i&&(s.innerText=i),this.updateSize()},createFromCache:function(t,e){var i=this.cache.get(t);return i&&this.createFromHTML(i,e),this},createFromHTML:function(t,e){void 0===e&&(e="div"),this.removeElement();var i=document.createElement(e);return this.node=i,i.style.zIndex="0",i.style.display="inline",i.style.position="absolute",i.phaser=this,this.parent&&this.parent.appendChild(i),i.innerHTML=t,this.updateSize()},removeElement:function(){return this.node&&(o(this.node),this.node=null),this},updateSize:function(){var t=this.node,e=t.getBoundingClientRect();return this.width=t.clientWidth,this.height=t.clientHeight,this.displayWidth=e.width||0,this.displayHeight=e.height||0,this},getChildByProperty:function(t,e){if(this.node)for(var i=this.node.querySelectorAll("*"),s=0;s<i.length;s++)if(i[s][t]===e)return i[s];return null},getChildByID:function(t){return this.getChildByProperty("id",t)},getChildByName:function(t){return this.getChildByProperty("name",t)},setClassName:function(t){return this.node&&(this.node.className=t,this.updateSize()),this},setText:function(t){return this.node&&(this.node.innerText=t,this.updateSize()),this},setHTML:function(t){return this.node&&(this.node.innerHTML=t,this.updateSize()),this},preUpdate:function(){var t=this.parentContainer,e=this.node;e&&t&&!t.willRender()&&(e.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(l.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(l.WAKE,this.handleSceneEvent,this)}});t.exports=d},509:function(t,e,i){var s=i(1247),n=i(16),r=i(30),a=new r,h=new r,o=new r;t.exports=function(t,e,i,r){if(e.node){var l=e.node.style,u=e.scene.sys.settings;if(!l||!u.visible||n.RENDER_MASK!==e.renderFlags||0!==e.cameraFilter&&e.cameraFilter&i.id||e.parentContainer&&!e.parentContainer.willRender())l.display="none";else{var d=e.parentContainer,c=i.alpha*e.alpha;d&&(c*=d.alpha);var f=a,p=h,v=o,g=0,m=0,y="0%",x="0%";r?(g=e.width*e.scaleX*e.originX,m=e.height*e.scaleY*e.originY,p.applyITRS(e.x-g,e.y-m,e.rotation,e.scaleX,e.scaleY),f.copyFrom(i.matrix),f.multiplyWithOffset(r,-i.scrollX*e.scrollFactorX,-i.scrollY*e.scrollFactorY),p.e=e.x-g,p.f=e.y-m,f.multiply(p,v)):(g=e.width*e.originX,m=e.height*e.originY,p.applyITRS(e.x-g,e.y-m,e.rotation,e.scaleX,e.scaleY),f.copyFrom(i.matrix),y=100*e.originX+"%",x=100*e.originY+"%",p.e-=i.scrollX*e.scrollFactorX,p.f-=i.scrollY*e.scrollFactorY,f.multiply(p,v)),e.transformOnly||(l.display="block",l.opacity=c,l.zIndex=e._depth,l.pointerEvents=e.pointerEvents,l.mixBlendMode=s[e._blendMode]),l.transform=v.getCSSMatrix()+" skew("+e.skewX+"rad, "+e.skewY+"rad) rotate3d("+e.rotate3d.x+","+e.rotate3d.y+","+e.rotate3d.z+","+e.rotate3d.w+e.rotate3dAngle+")",l.transformOrigin=y+" "+x}}}},510:function(t,e,i){var s=i(3),n=i(14),r=i(16),a=i(1251),h=new s({Extends:r,Mixins:[n.Alpha,n.BlendMode,n.Depth,n.Flip,n.Origin,n.ScrollFactor,n.Size,n.Texture,n.Tint,n.Transform,n.Visible,a],initialize:function(t){r.call(this,t,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});t.exports=h},511:function(t,e,i){var s=i(247),n=i(35);t.exports=function(t,e,i,r,a,h){var o=e.commandBuffer,l=o.length,u=a||t.currentContext;if(0!==l&&n(t,u,e,i,r)){i.addToRenderList(e);var d=1,c=1,f=0,p=0,v=1,g=0,m=0,y=0;u.beginPath();for(var x=0;x<l;++x){switch(o[x]){case s.ARC:u.arc(o[x+1],o[x+2],o[x+3],o[x+4],o[x+5],o[x+6]),x+=7;break;case s.LINE_STYLE:v=o[x+1],f=o[x+2],d=o[x+3],g=(16711680&f)>>>16,m=(65280&f)>>>8,y=255&f,u.strokeStyle="rgba("+g+","+m+","+y+","+d+")",u.lineWidth=v,x+=3;break;case s.FILL_STYLE:p=o[x+1],c=o[x+2],g=(16711680&p)>>>16,m=(65280&p)>>>8,y=255&p,u.fillStyle="rgba("+g+","+m+","+y+","+c+")",x+=2;break;case s.BEGIN_PATH:u.beginPath();break;case s.CLOSE_PATH:u.closePath();break;case s.FILL_PATH:h||u.fill();break;case s.STROKE_PATH:h||u.stroke();break;case s.FILL_RECT:h?u.rect(o[x+1],o[x+2],o[x+3],o[x+4]):u.fillRect(o[x+1],o[x+2],o[x+3],o[x+4]),x+=4;break;case s.FILL_TRIANGLE:u.beginPath(),u.moveTo(o[x+1],o[x+2]),u.lineTo(o[x+3],o[x+4]),u.lineTo(o[x+5],o[x+6]),u.closePath(),h||u.fill(),x+=6;break;case s.STROKE_TRIANGLE:u.beginPath(),u.moveTo(o[x+1],o[x+2]),u.lineTo(o[x+3],o[x+4]),u.lineTo(o[x+5],o[x+6]),u.closePath(),h||u.stroke(),x+=6;break;case s.LINE_TO:u.lineTo(o[x+1],o[x+2]),x+=2;break;case s.MOVE_TO:u.moveTo(o[x+1],o[x+2]),x+=2;break;case s.LINE_FX_TO:u.lineTo(o[x+1],o[x+2]),x+=5;break;case s.MOVE_FX_TO:u.moveTo(o[x+1],o[x+2]),x+=5;break;case s.SAVE:u.save();break;case s.RESTORE:u.restore();break;case s.TRANSLATE:u.translate(o[x+1],o[x+2]),x+=2;break;case s.SCALE:u.scale(o[x+1],o[x+2]),x+=2;break;case s.ROTATE:u.rotate(o[x+1]),x+=1;break;case s.GRADIENT_FILL_STYLE:x+=5;break;case s.GRADIENT_LINE_STYLE:x+=6}}u.restore()}}},512:function(t,e,i){var s=i(3),n=i(147),r=i(86),a=i(5),h=i(75),o=new s({initialize:function(t,e,i,s){void 0===s&&(s=!1),this.propertyKey=e,this.propertyValue=i,this.defaultValue=i,this.steps=0,this.counter=0,this.start=0,this.end=0,this.ease,this.emitOnly=s,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.loadConfig(t)},loadConfig:function(t,e){void 0===t&&(t={}),e&&(this.propertyKey=e),this.propertyValue=a(t,this.propertyKey,this.defaultValue),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return this.propertyValue},onChange:function(t){return this.propertyValue=t,this.setMethods()},setMethods:function(){var t=this.propertyValue,e=typeof t;if(this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,"number"===e)this.onEmit=this.staticValueEmit,this.onUpdate=this.staticValueUpdate;else if(Array.isArray(t))this.onEmit=this.randomStaticValueEmit;else if("function"===e)this.emitOnly?this.onEmit=t:this.onUpdate=t;else if("object"===e&&this.hasBoth(t,"start","end")){this.start=t.start,this.end=t.end;var i=this.has(t,"random");if(i&&(this.onEmit=this.randomRangedValueEmit),this.has(t,"steps"))this.steps=t.steps,this.counter=this.start,this.onEmit=this.steppedEmit;else{var s=this.has(t,"ease")?t.ease:"Linear";this.ease=r(s,t.easeParams),i||(this.onEmit=this.easedValueEmit),this.onUpdate=this.easeValueUpdate}}else if("object"===e&&this.hasBoth(t,"min","max"))this.start=t.min,this.end=t.max,this.onEmit=this.randomRangedValueEmit;else if("object"===e&&this.has(t,"random")){var n=t.random;Array.isArray(n)&&(this.start=n[0],this.end=n[1]),this.onEmit=this.randomRangedValueEmit}else"object"===e&&this.hasEither(t,"onEmit","onUpdate")&&(this.has(t,"onEmit")&&(this.onEmit=t.onEmit),this.has(t,"onUpdate")&&(this.onUpdate=t.onUpdate));return this},has:function(t,e){return t.hasOwnProperty(e)},hasBoth:function(t,e,i){return t.hasOwnProperty(e)&&t.hasOwnProperty(i)},hasEither:function(t,e,i){return t.hasOwnProperty(e)||t.hasOwnProperty(i)},defaultEmit:function(t,e,i){return i},defaultUpdate:function(t,e,i,s){return s},staticValueEmit:function(){return this.propertyValue},staticValueUpdate:function(){return this.propertyValue},randomStaticValueEmit:function(){var t=Math.floor(Math.random()*this.propertyValue.length);return this.propertyValue[t]},randomRangedValueEmit:function(t,e){var i=n(this.start,this.end);return t&&t.data[e]&&(t.data[e].min=i),i},steppedEmit:function(){var t=this.counter,e=this.counter+(this.end-this.start)/this.steps;return this.counter=h(e,this.start,this.end),t},easedValueEmit:function(t,e){if(t&&t.data[e]){var i=t.data[e];i.min=this.start,i.max=this.end}return this.start},easeValueUpdate:function(t,e,i){var s=t.data[e];return(s.max-s.min)*this.ease(i)+s.min}});t.exports=o},513:function(t,e,i){var s=i(3),n=i(5),r=new s({initialize:function(t,e,i,s,r){if("object"==typeof t){var a=t;t=n(a,"x",0),e=n(a,"y",0),i=n(a,"power",0),s=n(a,"epsilon",100),r=n(a,"gravity",50)}else void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=100),void 0===r&&(r=50);this.x=t,this.y=e,this.active=!0,this._gravity=r,this._power=0,this._epsilon=0,this.power=i,this.epsilon=s},update:function(t,e){var i=this.x-t.x,s=this.y-t.y,n=i*i+s*s;if(0!==n){var r=Math.sqrt(n);n<this._epsilon&&(n=this._epsilon);var a=this._power*e/(n*r)*100;t.velocityX+=i*a,t.velocityY+=s*a}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(t){this._epsilon=t*t}},power:{get:function(){return this._power/this._gravity},set:function(t){this._power=t*this._gravity}},gravity:{get:function(){return this._gravity},set:function(t){var e=this.power;this._gravity=t,this.power=e}}});t.exports=r},514:function(t,e,i){var s=i(3),n=i(42),r=i(54),a=new s({initialize:function(t){this.emitter=t,this.frame=null,this.x=0,this.y=0,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215,current:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1}}},isAlive:function(){return this.lifeCurrent>0},resetPosition:function(){this.x=0,this.y=0},fire:function(t,e){var i=this.emitter;this.frame=i.getFrame(),i.emitZone&&i.emitZone.getPoint(this),this.x+=void 0===t?i.x.onEmit(this,"x"):t,this.y+=void 0===e?i.y.onEmit(this,"y"):e,this.life=i.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0;var s=i.speedX.onEmit(this,"speedX"),a=i.speedY?i.speedY.onEmit(this,"speedY"):s;if(i.radial){var h=n(i.angle.onEmit(this,"angle"));this.velocityX=Math.cos(h)*Math.abs(s),this.velocityY=Math.sin(h)*Math.abs(a)}else if(i.moveTo){var o=i.moveToX.onEmit(this,"moveToX"),l=i.moveToY?i.moveToY.onEmit(this,"moveToY"):o,u=Math.atan2(l-this.y,o-this.x),d=r(this.x,this.y,o,l)/(this.life/1e3);this.velocityX=Math.cos(u)*d,this.velocityY=Math.sin(u)*d}else this.velocityX=s,this.velocityY=a;i.acceleration&&(this.accelerationX=i.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=i.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=i.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=i.maxVelocityY.onEmit(this,"maxVelocityY"),this.delayCurrent=i.delay.onEmit(this,"delay"),this.scaleX=i.scaleX.onEmit(this,"scaleX"),this.scaleY=i.scaleY?i.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=i.rotate.onEmit(this,"rotate"),this.rotation=n(this.angle),this.bounce=i.bounce.onEmit(this,"bounce"),this.alpha=i.alpha.onEmit(this,"alpha"),this.tint=i.tint.onEmit(this,"tint")},computeVelocity:function(t,e,i,s){var n=this.velocityX,r=this.velocityY,a=this.accelerationX,h=this.accelerationY,o=this.maxVelocityX,l=this.maxVelocityY;n+=t.gravityX*i,r+=t.gravityY*i,a&&(n+=a*i),h&&(r+=h*i),n>o?n=o:n<-o&&(n=-o),r>l?r=l:r<-l&&(r=-l),this.velocityX=n,this.velocityY=r;for(var u=0;u<s.length;u++)s[u].update(this,e,i)},checkBounds:function(t){var e=t.bounds,i=-this.bounce;this.x<e.x&&t.collideLeft?(this.x=e.x,this.velocityX*=i):this.x>e.right&&t.collideRight&&(this.x=e.right,this.velocityX*=i),this.y<e.y&&t.collideTop?(this.y=e.y,this.velocityY*=i):this.y>e.bottom&&t.collideBottom&&(this.y=e.bottom,this.velocityY*=i)},update:function(t,e,i){if(this.delayCurrent>0)return this.delayCurrent-=t,!1;var s=this.emitter,r=1-this.lifeCurrent/this.life;return this.lifeT=r,this.computeVelocity(s,t,e,i),this.x+=this.velocityX*e,this.y+=this.velocityY*e,s.bounds&&this.checkBounds(s),s.deathZone&&s.deathZone.willKill(this)?(this.lifeCurrent=0,!0):(this.scaleX=s.scaleX.onUpdate(this,"scaleX",r,this.scaleX),s.scaleY?this.scaleY=s.scaleY.onUpdate(this,"scaleY",r,this.scaleY):this.scaleY=this.scaleX,this.angle=s.rotate.onUpdate(this,"rotate",r,this.angle),this.rotation=n(this.angle),this.alpha=s.alpha.onUpdate(this,"alpha",r,this.alpha),this.tint=s.tint.onUpdate(this,"tint",r,this.tint),this.lifeCurrent-=t,this.lifeCurrent<=0)}});t.exports=a},515:function(t,e,i){var s=i(41),n=i(3),r=i(14),a=i(516),h=i(517),o=i(512),l=i(5),u=i(234),d=i(503),c=i(127),f=i(514),p=i(518),v=i(13),g=i(88),m=i(6),y=i(75),x=new n({Mixins:[r.BlendMode,r.Mask,r.ScrollFactor,r.Visible],initialize:function(t,e){this.manager=t,this.texture=t.texture,this.frames=[t.defaultFrame],this.defaultFrame=t.defaultFrame,this.configFastMap=["active","blendMode","collideBottom","collideLeft","collideRight","collideTop","deathCallback","deathCallbackScope","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxParticles","name","on","particleBringToTop","particleClass","radial","timeScale","trackVisible","visible"],this.configOpMap=["accelerationX","accelerationY","angle","alpha","bounce","delay","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],this.name="",this.particleClass=f,this.x=new o(e,"x",0,!0),this.y=new o(e,"y",0,!0),this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.accelerationX=new o(e,"accelerationX",0,!0),this.accelerationY=new o(e,"accelerationY",0,!0),this.maxVelocityX=new o(e,"maxVelocityX",1e4,!0),this.maxVelocityY=new o(e,"maxVelocityY",1e4,!0),this.speedX=new o(e,"speedX",0,!0),this.speedY=new o(e,"speedY",0,!0),this.moveTo=!1,this.moveToX=new o(e,"moveToX",0,!0),this.moveToY=new o(e,"moveToY",0,!0),this.bounce=new o(e,"bounce",0,!0),this.scaleX=new o(e,"scaleX",1),this.scaleY=new o(e,"scaleY",1),this.tint=new o(e,"tint",16777215),this.alpha=new o(e,"alpha",1),this.lifespan=new o(e,"lifespan",1e3,!0),this.angle=new o(e,"angle",{min:0,max:360},!0),this.rotate=new o(e,"rotate",0),this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.quantity=new o(e,"quantity",1,!0),this.delay=new o(e,"delay",0,!0),this.frequency=0,this.on=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZone=null,this.deathZone=null,this.bounds=null,this.collideLeft=!0,this.collideRight=!0,this.collideTop=!0,this.collideBottom=!0,this.active=!0,this.visible=!0,this.blendMode=s.NORMAL,this.follow=null,this.followOffset=new m,this.trackVisible=!1,this.currentFrame=0,this.randomFrame=!0,this.frameQuantity=1,this.dead=[],this.alive=[],this._counter=0,this._frameCounter=0,e&&this.fromJSON(e)},fromJSON:function(t){if(!t)return this;var e=0,i="";for(e=0;e<this.configFastMap.length;e++)i=this.configFastMap[e],c(t,i)&&(this[i]=l(t,i));for(e=0;e<this.configOpMap.length;e++)i=this.configOpMap[e],c(t,i)&&this[i].loadConfig(t);if(this.acceleration=0!==this.accelerationX.propertyValue||0!==this.accelerationY.propertyValue,this.moveTo=0!==this.moveToX.propertyValue||0!==this.moveToY.propertyValue,c(t,"speed")&&(this.speedX.loadConfig(t,"speed"),this.speedY=null),(d(t,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),c(t,"scale")&&(this.scaleX.loadConfig(t,"scale"),this.scaleY=null),c(t,"callbackScope")){var s=l(t,"callbackScope",null);this.emitCallbackScope=s,this.deathCallbackScope=s}return c(t,"emitZone")&&this.setEmitZone(t.emitZone),c(t,"deathZone")&&this.setDeathZone(t.deathZone),c(t,"bounds")&&this.setBounds(t.bounds),c(t,"followOffset")&&this.followOffset.setFromObject(l(t,"followOffset",0)),c(t,"frame")&&this.setFrame(t.frame),c(t,"reserve")&&this.reserve(t.reserve),this},toJSON:function(t){void 0===t&&(t={});var e=0,i="";for(e=0;e<this.configFastMap.length;e++)t[i=this.configFastMap[e]]=this[i];for(e=0;e<this.configOpMap.length;e++)this[i=this.configOpMap[e]]&&(t[i]=this[i].toJSON());return this.speedY||(delete t.speedX,t.speed=this.speedX.toJSON()),this.scaleY||(delete t.scaleX,t.scale=this.scaleX.toJSON()),t},startFollow:function(t,e,i,s){return void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=!1),this.follow=t,this.followOffset.set(e,i),this.trackVisible=s,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){if(1===this.frames.length)return this.defaultFrame;if(this.randomFrame)return u(this.frames);var t=this.frames[this.currentFrame];return this._frameCounter++,this._frameCounter===this.frameQuantity&&(this._frameCounter=0,this.currentFrame=y(this.currentFrame+1,0,this._frameLength)),t},setFrame:function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=1),this.randomFrame=e,this.frameQuantity=i,this.currentFrame=0,this._frameCounter=0;var s=typeof t;if(Array.isArray(t)||"string"===s||"number"===s)this.manager.setEmitterFrames(t,this);else if("object"===s){var n=t;(t=l(n,"frames",null))&&this.manager.setEmitterFrames(t,this);var r=l(n,"cycle",!1);this.randomFrame=!r,this.frameQuantity=l(n,"quantity",i)}return this._frameLength=this.frames.length,1===this._frameLength&&(this.frameQuantity=1,this.randomFrame=!1),this},setRadial:function(t){return void 0===t&&(t=!0),this.radial=t,this},setPosition:function(t,e){return this.x.onChange(t),this.y.onChange(e),this},setBounds:function(t,e,i,s){if("object"==typeof t){var n=t;t=n.x,e=n.y,i=c(n,"w")?n.w:n.width,s=c(n,"h")?n.h:n.height}return this.bounds?this.bounds.setTo(t,e,i,s):this.bounds=new v(t,e,i,s),this},setSpeedX:function(t){return this.speedX.onChange(t),this.radial=!1,this},setSpeedY:function(t){return this.speedY&&(this.speedY.onChange(t),this.radial=!1),this},setSpeed:function(t){return this.speedX.onChange(t),this.speedY=null,this.radial=!0,this},setScaleX:function(t){return this.scaleX.onChange(t),this},setScaleY:function(t){return this.scaleY.onChange(t),this},setScale:function(t){return this.scaleX.onChange(t),this.scaleY=null,this},setGravityX:function(t){return this.gravityX=t,this},setGravityY:function(t){return this.gravityY=t,this},setGravity:function(t,e){return this.gravityX=t,this.gravityY=e,this},setAlpha:function(t){return this.alpha.onChange(t),this},setTint:function(t){return this.tint.onChange(t),this},setEmitterAngle:function(t){return this.angle.onChange(t),this},setAngle:function(t){return this.angle.onChange(t),this},setLifespan:function(t){return this.lifespan.onChange(t),this},setQuantity:function(t){return this.quantity.onChange(t),this},setFrequency:function(t,e){return this.frequency=t,this._counter=0,e&&this.quantity.onChange(e),this},setEmitZone:function(t){if(void 0===t)this.emitZone=null;else{var e=l(t,"type","random"),i=l(t,"source",null);switch(e){case"random":this.emitZone=new p(i);break;case"edge":var s=l(t,"quantity",1),n=l(t,"stepRate",0),r=l(t,"yoyo",!1),a=l(t,"seamless",!0);this.emitZone=new h(i,s,n,r,a)}}return this},setDeathZone:function(t){if(void 0===t)this.deathZone=null;else{var e=l(t,"type","onEnter"),i=l(t,"source",null);if(i&&"function"==typeof i.contains){var s="onEnter"===e;this.deathZone=new a(i,s)}}return this},reserve:function(t){for(var e=this.dead,i=0;i<t;i++)e.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()===this.maxParticles},onParticleEmit:function(t,e){return void 0===t?(this.emitCallback=null,this.emitCallbackScope=null):"function"==typeof t&&(this.emitCallback=t,e&&(this.emitCallbackScope=e)),this},onParticleDeath:function(t,e){return void 0===t?(this.deathCallback=null,this.deathCallbackScope=null):"function"==typeof t&&(this.deathCallback=t,e&&(this.deathCallbackScope=e)),this},killAll:function(){for(var t=this.dead,e=this.alive;e.length>0;)t.push(e.pop());return this},forEachAlive:function(t,e){for(var i=this.alive,s=i.length,n=0;n<s;++n)t.call(e,i[n],this);return this},forEachDead:function(t,e){for(var i=this.dead,s=i.length,n=0;n<s;++n)t.call(e,i[n],this);return this},start:function(){return this.on=!0,this._counter=0,this},stop:function(){return this.on=!1,this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},remove:function(){return this.manager.removeEmitter(this),this},depthSort:function(){return g(this.alive,this.depthSortCallback),this},flow:function(t,e){return void 0===e&&(e=1),this.frequency=t,this.quantity.onChange(e),this.start()},explode:function(t,e,i){return this.frequency=-1,this.emitParticle(t,e,i)},emitParticleAt:function(t,e,i){return this.emitParticle(i,t,e)},emitParticle:function(t,e,i){if(!this.atLimit()){void 0===t&&(t=this.quantity.onEmit());for(var s=this.dead,n=this.follow?this.follow.x+this.followOffset.x:e,r=this.follow?this.follow.y+this.followOffset.y:i,a=0;a<t;a++){var h=s.pop();if(h||(h=new this.particleClass(this)),h.fire(n,r),this.particleBringToTop?this.alive.push(h):this.alive.unshift(h),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,h,this),this.atLimit())break}return h}},preUpdate:function(t,e){var i=(e*=this.timeScale)/1e3;this.trackVisible&&(this.visible=this.follow.visible);var s=this.manager.getProcessors(),n=this.alive,r=this.dead,a=0,h=[],o=n.length;for(a=0;a<o;a++){var l=n[a];l.update(e,i,s)&&h.push({index:a,particle:l})}if((o=h.length)>0){var u=this.deathCallback,d=this.deathCallbackScope;for(a=o-1;a>=0;a--){var c=h[a];n.splice(c.index,1),r.push(c.particle),u&&u.call(d,c.particle),c.particle.resetPosition()}}this.on&&(0===this.frequency?this.emitParticle():this.frequency>0&&(this._counter-=e,this._counter<=0&&(this.emitParticle(),this._counter=this.frequency-Math.abs(this._counter))))},depthSortCallback:function(t,e){return t.y-e.y}});t.exports=x},516:function(t,e,i){var s=new(i(3))({initialize:function(t,e){this.source=t,this.killOnEnter=e},willKill:function(t){var e=this.source.contains(t.x,t.y);return e&&this.killOnEnter||!e&&!this.killOnEnter}});t.exports=s},517:function(t,e,i){var s=new(i(3))({initialize:function(t,e,i,s,n){void 0===s&&(s=!1),void 0===n&&(n=!0),this.source=t,this.points=[],this.quantity=e,this.stepRate=i,this.yoyo=s,this.counter=-1,this.seamless=n,this._length=0,this._direction=0,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var t=this.points[0],e=this.points[this.points.length-1];t.x===e.x&&t.y===e.y&&this.points.pop()}var i=this._length;return this._length=this.points.length,this._length<i&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(t){return this.source=t,this.updateSource()},getPoint:function(t){0===this._direction?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,-1===this.counter&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var e=this.points[this.counter];e&&(t.x=e.x,t.y=e.y)}});t.exports=s},518:function(t,e,i){var s=i(3),n=i(6),r=new s({initialize:function(t){this.source=t,this._tempVec=new n},getPoint:function(t){var e=this._tempVec;this.source.getRandomPoint(e),t.x=e.x,t.y=e.y}});t.exports=r},519:function(t,e,i){var s=i(3),n=i(14),r=i(67),a=new s({Extends:r,Mixins:[n.PathFollower],initialize:function(t,e,i,s,n,a){r.call(this,t,i,s,n,a),this.path=e},preUpdate:function(t,e){this.anims.update(t,e),this.pathUpdate(t)}});t.exports=a},520:function(t,e){t.exports=function(t,e,i){var s=t.canvas,n=t.context,r=t.style,a=[],h=0,o=i.length;r.maxLines>0&&r.maxLines<i.length&&(o=r.maxLines),r.syncFont(s,n);for(var l=0;l<o;l++){var u=r.strokeThickness;u+=n.measureText(i[l]).width,r.wordWrap&&(u-=n.measureText(" ").width),a[l]=Math.ceil(u),h=Math.max(h,a[l])}var d=e.fontSize+r.strokeThickness,c=d*o,f=t.lineSpacing;return o>1&&(c+=f*(o-1)),{width:h,height:c,lines:o,lineWidths:a,lineSpacing:f,lineHeight:d}}},521:function(t,e,i){var s=i(3),n=i(18),r=i(9),a=i(522),h={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|Mqgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},o=new s({initialize:function(t,e){this.parent=t,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(e,!1,!0);var i=r(e,"metrics",!1);this.metrics=i?{ascent:r(i,"ascent",0),descent:r(i,"descent",0),fontSize:r(i,"fontSize",0)}:a(this)},setStyle:function(t,e,i){for(var s in void 0===e&&(e=!0),void 0===i&&(i=!1),t&&t.hasOwnProperty("fontSize")&&"number"==typeof t.fontSize&&(t.fontSize=t.fontSize.toString()+"px"),h){var a=i?h[s][1]:this[s];this[s]="wordWrapCallback"===s||"wordWrapCallbackScope"===s?r(t,h[s][0],a):n(t,h[s][0],a)}var o=r(t,"font",null);null!==o&&this.setFont(o,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var l=r(t,"fill",null);return null!==l&&(this.color=l),e?this.update(!0):this.parent},syncFont:function(t,e){e.font=this._font},syncStyle:function(t,e){e.textBaseline="alphabetic",e.fillStyle=this.color,e.strokeStyle=this.stroke,e.lineWidth=this.strokeThickness,e.lineCap="round",e.lineJoin="round"},syncShadow:function(t,e){e?(t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur):(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowColor=0,t.shadowBlur=0)},update:function(t){return t&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=a(this)),this.parent.updateText()},setFont:function(t,e){void 0===e&&(e=!0);var i=t,s="",n="";if("string"!=typeof t)i=r(t,"fontFamily","Courier"),s=r(t,"fontSize","16px"),n=r(t,"fontStyle","");else{var a=t.split(" "),h=0;n=a.length>2?a[h++]:"",s=a[h++]||"16px",i=a[h++]||"Courier"}return i===this.fontFamily&&s===this.fontSize&&n===this.fontStyle||(this.fontFamily=i,this.fontSize=s,this.fontStyle=n,e&&this.update(!0)),this.parent},setFontFamily:function(t){return this.fontFamily!==t&&(this.fontFamily=t,this.update(!0)),this.parent},setFontStyle:function(t){return this.fontStyle!==t&&(this.fontStyle=t,this.update(!0)),this.parent},setFontSize:function(t){return"number"==typeof t&&(t=t.toString()+"px"),this.fontSize!==t&&(this.fontSize=t,this.update(!0)),this.parent},setTestString:function(t){return this.testString=t,this.update(!0)},setFixedSize:function(t,e){return this.fixedWidth=t,this.fixedHeight=e,t&&(this.parent.width=t),e&&(this.parent.height=e),this.update(!1)},setBackgroundColor:function(t){return this.backgroundColor=t,this.update(!1)},setFill:function(t){return this.color=t,this.update(!1)},setColor:function(t){return this.color=t,this.update(!1)},setResolution:function(t){return this.resolution=t,this.update(!1)},setStroke:function(t,e){return void 0===e&&(e=this.strokeThickness),void 0===t&&0!==this.strokeThickness?(this.strokeThickness=0,this.update(!0)):this.stroke===t&&this.strokeThickness===e||(this.stroke=t,this.strokeThickness=e,this.update(!0)),this.parent},setShadow:function(t,e,i,s,n,r){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i="#000"),void 0===s&&(s=0),void 0===n&&(n=!1),void 0===r&&(r=!0),this.shadowOffsetX=t,this.shadowOffsetY=e,this.shadowColor=i,this.shadowBlur=s,this.shadowStroke=n,this.shadowFill=r,this.update(!1)},setShadowOffset:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.shadowOffsetX=t,this.shadowOffsetY=e,this.update(!1)},setShadowColor:function(t){return void 0===t&&(t="#000"),this.shadowColor=t,this.update(!1)},setShadowBlur:function(t){return void 0===t&&(t=0),this.shadowBlur=t,this.update(!1)},setShadowStroke:function(t){return this.shadowStroke=t,this.update(!1)},setShadowFill:function(t){return this.shadowFill=t,this.update(!1)},setWordWrapWidth:function(t,e){return void 0===e&&(e=!1),this.wordWrapWidth=t,this.wordWrapUseAdvanced=e,this.update(!1)},setWordWrapCallback:function(t,e){return void 0===e&&(e=null),this.wordWrapCallback=t,this.wordWrapCallbackScope=e,this.update(!1)},setAlign:function(t){return void 0===t&&(t="left"),this.align=t,this.update(!1)},setMaxLines:function(t){return void 0===t&&(t=0),this.maxLines=t,this.update(!1)},getTextMetrics:function(){var t=this.metrics;return{ascent:t.ascent,descent:t.descent,fontSize:t.fontSize}},toJSON:function(){var t={};for(var e in h)t[e]=this[e];return t.metrics=this.getTextMetrics(),t},destroy:function(){this.parent=void 0}});t.exports=o},522:function(t,e,i){var s=i(36);t.exports=function(t){var e=s.create(this),i=e.getContext("2d");t.syncFont(e,i);var n=i.measureText(t.testString);if("actualBoundingBoxAscent"in n){var r=n.actualBoundingBoxAscent,a=n.actualBoundingBoxDescent;return s.remove(e),{ascent:r,descent:a,fontSize:r+a}}var h=Math.ceil(n.width*t.baselineX),o=h,l=2*o;o=o*t.baselineY|0,e.width=h,e.height=l,i.fillStyle="#f00",i.fillRect(0,0,h,l),i.font=t._font,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(t.testString,0,o);var u={ascent:0,descent:0,fontSize:0},d=i.getImageData(0,0,h,l);if(!d)return u.ascent=o,u.descent=o+6,u.fontSize=u.ascent+u.descent,s.remove(e),u;var c,f,p=d.data,v=p.length,g=4*h,m=0,y=!1;for(c=0;c<o;c++){for(f=0;f<g;f+=4)if(255!==p[m+f]){y=!0;break}if(y)break;m+=g}for(u.ascent=o-c,m=v-g,y=!1,c=l;c>o;c--){for(f=0;f<g;f+=4)if(255!==p[m+f]){y=!0;break}if(y)break;m-=g}return u.descent=c-o,u.fontSize=u.ascent+u.descent,s.remove(e),u}},523:function(t,e,i){var s=i(1285),n=i(3),r=i(42),a=i(66),h=i(72),o=i(17),l=i(39),u=new n({Extends:l,Mixins:[s],initialize:function(t,e,i,s,n,r,a,o,u){void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=128),void 0===n&&(n=0),void 0===r&&(r=360),void 0===a&&(a=!1),l.call(this,t,"Arc",new h(0,0,s)),this._startAngle=n,this._endAngle=r,this._anticlockwise=a,this._iterations=.01,this.setPosition(e,i);var d=2*this.geom.radius;this.setSize(d,d),void 0!==o&&this.setFillStyle(o,u),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(t){this._iterations=t,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(t){this.geom.radius=t;var e=2*t;this.setSize(e,e),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(t){this._startAngle=t,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(t){this._endAngle=t,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(t){this._anticlockwise=t,this.updateData()}},setRadius:function(t){return this.radius=t,this},setIterations:function(t){return void 0===t&&(t=.01),this.iterations=t,this},setStartAngle:function(t,e){return this._startAngle=t,void 0!==e&&(this._anticlockwise=e),this.updateData()},setEndAngle:function(t,e){return this._endAngle=t,void 0!==e&&(this._anticlockwise=e),this.updateData()},updateData:function(){var t=this._iterations,e=t,i=this.geom.radius,s=r(this._startAngle),n=r(this._endAngle),h=i,l=i;n-=s,this._anticlockwise?n<-o.PI2?n=-o.PI2:n>0&&(n=-o.PI2+n%o.PI2):n>o.PI2?n=o.PI2:n<0&&(n=o.PI2+n%o.PI2);for(var u,d=[h+Math.cos(s)*i,l+Math.sin(s)*i];e<1;)u=n*e+s,d.push(h+Math.cos(u)*i,l+Math.sin(u)*i),e+=t;return u=n+s,d.push(h+Math.cos(u)*i,l+Math.sin(u)*i),d.push(h+Math.cos(s)*i,l+Math.sin(s)*i),this.pathIndexes=a(d),this.pathData=d,this}});t.exports=u},524:function(t,e,i){var s=i(3),n=i(1288),r=i(66),a=i(13),h=i(39),o=new s({Extends:h,Mixins:[n],initialize:function(t,e,i,s,n,r){void 0===e&&(e=0),void 0===i&&(i=0),h.call(this,t,"Curve",s),this._smoothness=32,this._curveBounds=new a,this.closePath=!1,this.setPosition(e,i),void 0!==n&&this.setFillStyle(n,r),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(t){this._smoothness=t,this.updateData()}},setSmoothness:function(t){return this._smoothness=t,this.updateData()},updateData:function(){var t=this._curveBounds,e=this._smoothness;this.geom.getBounds(t,e),this.setSize(t.width,t.height),this.updateDisplayOrigin();for(var i=[],s=this.geom.getPoints(e),n=0;n<s.length;n++)i.push(s[n].x,s[n].y);return i.push(s[0].x,s[0].y),this.pathIndexes=r(i),this.pathData=i,this}});t.exports=o},525:function(t,e,i){var s=i(3),n=i(66),r=i(1291),a=i(121),h=i(39),o=new s({Extends:h,Mixins:[r],initialize:function(t,e,i,s,n,r,o){void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=128),void 0===n&&(n=128),h.call(this,t,"Ellipse",new a(s/2,n/2,s,n)),this._smoothness=64,this.setPosition(e,i),this.width=s,this.height=n,void 0!==r&&this.setFillStyle(r,o),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(t){this._smoothness=t,this.updateData()}},setSize:function(t,e){return this.width=t,this.height=e,this.geom.setPosition(t/2,e/2),this.geom.setSize(t,e),this.updateData()},setSmoothness:function(t){return this._smoothness=t,this.updateData()},updateData:function(){for(var t=[],e=this.geom.getPoints(this._smoothness),i=0;i<e.length;i++)t.push(e[i].x,e[i].y);return t.push(e[0].x,e[0].y),this.pathIndexes=n(t),this.pathData=t,this}});t.exports=o},526:function(t,e,i){var s=i(3),n=i(39),r=i(1294),a=new s({Extends:n,Mixins:[r],initialize:function(t,e,i,s,r,a,h,o,l,u,d){void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=128),void 0===r&&(r=128),void 0===a&&(a=32),void 0===h&&(h=32),n.call(this,t,"Grid",null),this.cellWidth=a,this.cellHeight=h,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(e,i),this.setSize(s,r),this.setFillStyle(o,l),void 0!==u&&this.setOutlineStyle(u,d),this.updateDisplayOrigin()},setFillStyle:function(t,e){return void 0===e&&(e=1),void 0===t?this.showCells=!1:(this.fillColor=t,this.fillAlpha=e,this.showCells=!0),this},setAltFillStyle:function(t,e){return void 0===e&&(e=1),void 0===t?this.showAltCells=!1:(this.altFillColor=t,this.altFillAlpha=e,this.showAltCells=!0),this},setOutlineStyle:function(t,e){return void 0===e&&(e=1),void 0===t?this.showOutline=!1:(this.outlineFillColor=t,this.outlineFillAlpha=e,this.showOutline=!0),this}});t.exports=a},527:function(t,e,i){var s=i(1297),n=i(3),r=i(39),a=new n({Extends:r,Mixins:[s],initialize:function(t,e,i,s,n,a,h,o){void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=48),void 0===n&&(n=32),void 0===a&&(a=15658734),void 0===h&&(h=10066329),void 0===o&&(o=13421772),r.call(this,t,"IsoBox",null),this.projection=4,this.fillTop=a,this.fillLeft=h,this.fillRight=o,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(e,i),this.setSize(s,n),this.updateDisplayOrigin()},setProjection:function(t){return this.projection=t,this},setFaces:function(t,e,i){return void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===i&&(i=!0),this.showTop=t,this.showLeft=e,this.showRight=i,this},setFillStyle:function(t,e,i){return this.fillTop=t,this.fillLeft=e,this.fillRight=i,this.isFilled=!0,this}});t.exports=a},528:function(t,e,i){var s=i(3),n=i(1300),r=i(39),a=new s({Extends:r,Mixins:[n],initialize:function(t,e,i,s,n,a,h,o,l){void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=48),void 0===n&&(n=32),void 0===a&&(a=!1),void 0===h&&(h=15658734),void 0===o&&(o=10066329),void 0===l&&(l=13421772),r.call(this,t,"IsoTriangle",null),this.projection=4,this.fillTop=h,this.fillLeft=o,this.fillRight=l,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=a,this.isFilled=!0,this.setPosition(e,i),this.setSize(s,n),this.updateDisplayOrigin()},setProjection:function(t){return this.projection=t,this},setReversed:function(t){return this.isReversed=t,this},setFaces:function(t,e,i){return void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===i&&(i=!0),this.showTop=t,this.showLeft=e,this.showRight=i,this},setFillStyle:function(t,e,i){return this.fillTop=t,this.fillLeft=e,this.fillRight=i,this.isFilled=!0,this}});t.exports=a},529:function(t,e,i){var s=i(3),n=i(39),r=i(53),a=i(1303),h=new s({Extends:n,Mixins:[a],initialize:function(t,e,i,s,a,h,o,l,u){void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=0),void 0===a&&(a=0),void 0===h&&(h=128),void 0===o&&(o=0),n.call(this,t,"Line",new r(s,a,h,o));var d=Math.max(1,this.geom.right-this.geom.left),c=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(e,i),this.setSize(d,c),void 0!==l&&this.setStrokeStyle(1,l,u),this.updateDisplayOrigin()},setLineWidth:function(t,e){return void 0===e&&(e=t),this._startWidth=t,this._endWidth=e,this.lineWidth=t,this},setTo:function(t,e,i,s){return this.geom.setTo(t,e,i,s),this}});t.exports=h},530:function(t,e,i){var s=i(1306),n=i(3),r=i(66),a=i(480),h=i(228),o=i(39),l=i(481),u=new n({Extends:o,Mixins:[s],initialize:function(t,e,i,s,n,r){void 0===e&&(e=0),void 0===i&&(i=0),o.call(this,t,"Polygon",new h(s));var l=a(this.geom);this.setPosition(e,i),this.setSize(l.width,l.height),void 0!==n&&this.setFillStyle(n,r),this.updateDisplayOrigin(),this.updateData()},smooth:function(t){void 0===t&&(t=1);for(var e=0;e<t;e++)l(this.geom);return this.updateData()},updateData:function(){for(var t=[],e=this.geom.points,i=0;i<e.length;i++)t.push(e[i].x,e[i].y);return t.push(e[0].x,e[0].y),this.pathIndexes=r(t),this.pathData=t,this}});t.exports=u},531:function(t,e,i){var s=i(3),n=i(13),r=i(39),a=i(1309),h=new s({Extends:r,Mixins:[a],initialize:function(t,e,i,s,a,h,o){void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=128),void 0===a&&(a=128),r.call(this,t,"Rectangle",new n(0,0,s,a)),this.setPosition(e,i),this.setSize(s,a),void 0!==h&&this.setFillStyle(h,o),this.updateDisplayOrigin(),this.updateData()},setSize:function(t,e){return this.width=t,this.height=e,this.geom.setSize(t,e),this.updateData(),this},updateData:function(){var t=[],e=this.geom,i=this._tempLine;return e.getLineA(i),t.push(i.x1,i.y1,i.x2,i.y2),e.getLineB(i),t.push(i.x2,i.y2),e.getLineC(i),t.push(i.x2,i.y2),e.getLineD(i),t.push(i.x2,i.y2),this.pathData=t,this}});t.exports=h},532:function(t,e,i){var s=i(1312),n=i(3),r=i(66),a=i(39),h=new n({Extends:a,Mixins:[s],initialize:function(t,e,i,s,n,r,h,o){void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=5),void 0===n&&(n=32),void 0===r&&(r=64),a.call(this,t,"Star",null),this._points=s,this._innerRadius=n,this._outerRadius=r,this.setPosition(e,i),this.setSize(2*r,2*r),void 0!==h&&this.setFillStyle(h,o),this.updateDisplayOrigin(),this.updateData()},setPoints:function(t){return this._points=t,this.updateData()},setInnerRadius:function(t){return this._innerRadius=t,this.updateData()},setOuterRadius:function(t){return this._outerRadius=t,this.updateData()},points:{get:function(){return this._points},set:function(t){this._points=t,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(t){this._innerRadius=t,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(t){this._outerRadius=t,this.updateData()}},updateData:function(){var t=[],e=this._points,i=this._innerRadius,s=this._outerRadius,n=Math.PI/2*3,a=Math.PI/e,h=s,o=s;t.push(h,o+-s);for(var l=0;l<e;l++)t.push(h+Math.cos(n)*s,o+Math.sin(n)*s),n+=a,t.push(h+Math.cos(n)*i,o+Math.sin(n)*i),n+=a;return t.push(h,o+-s),this.pathIndexes=r(t),this.pathData=t,this}});t.exports=h},533:function(t,e,i){var s=i(3),n=i(39),r=i(87),a=i(1315),h=new s({Extends:n,Mixins:[a],initialize:function(t,e,i,s,a,h,o,l,u,d,c){void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=0),void 0===a&&(a=128),void 0===h&&(h=64),void 0===o&&(o=0),void 0===l&&(l=128),void 0===u&&(u=128),n.call(this,t,"Triangle",new r(s,a,h,o,l,u));var f=this.geom.right-this.geom.left,p=this.geom.bottom-this.geom.top;this.setPosition(e,i),this.setSize(f,p),void 0!==d&&this.setFillStyle(d,c),this.updateDisplayOrigin(),this.updateData()},setTo:function(t,e,i,s,n,r){return this.geom.setTo(t,e,i,s,n,r),this.updateData()},updateData:function(){var t=[],e=this.geom,i=this._tempLine;return e.getLineA(i),t.push(i.x1,i.y1,i.x2,i.y2),e.getLineB(i),t.push(i.x2,i.y2),e.getLineC(i),t.push(i.x2,i.y2),this.pathData=t,this}});t.exports=h},534:function(t,e,i){var s=i(72),n=i(3),r=i(14),a=i(213),h=i(15),o=new n({Extends:s,Mixins:[r.ScrollFactor,r.Visible],initialize:function(t,e,i,n,r,h,o){s.call(this,t,e,i),this.color=new a(n,r,h),this.intensity=o,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1)},willRender:function(t){return!(o.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id)},setColor:function(t){var e=h.getFloatsFromUintRGB(t);return this.color.set(e[0],e[1],e[2]),this},setIntensity:function(t){return this.intensity=t,this},setRadius:function(t){return this.radius=t,this}});o.RENDER_MASK=15,t.exports=o},535:function(t,e,i){var s=i(157),n=i(3),r=i(54),a=i(534),h=i(165),o=i(213),l=i(81),u=i(88),d=i(15),c=new n({initialize:function(){this.lights=[],this.ambientColor=new o(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(t,e,i,s,n,r){return this.systems.displayList.add(new h(this.scene,t,e,i,s,n,r))},enable:function(){return-1===this.maxLights&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(t){for(var e=this.lights,i=t.worldView,n=[],a=0;a<e.length;a++){var h=e[a];h.willRender(t)&&s(h,i)&&n.push({light:h,distance:r(h.x,h.y,i.centerX,i.centerY)})}return n.length>this.maxLights&&(u(n,this.sortByDistance),n=n.slice(0,this.maxLights)),this.visibleLights=n.length,n},sortByDistance:function(t,e){return t.distance>=e.distance},setAmbientColor:function(t){var e=d.getFloatsFromUintRGB(t);return this.ambientColor.set(e[0],e[1],e[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(t,e,i,s,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=128),void 0===s&&(s=16777215),void 0===n&&(n=1);var r=d.getFloatsFromUintRGB(s),h=new a(t,e,i,r[0],r[1],r[2],n);return this.lights.push(h),h},removeLight:function(t){var e=this.lights.indexOf(t);return e>=0&&l(this.lights,e),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});t.exports=c},56:function(t,e){t.exports=function(t,e,i,s){var n=i||e.fillColor,r=s||e.fillAlpha,a=(16711680&n)>>>16,h=(65280&n)>>>8,o=255&n;t.fillStyle="rgba("+a+","+h+","+o+","+r+")"}},68:function(t,e){t.exports=function(t,e,i,s){var n=i||e.strokeColor,r=s||e.strokeAlpha,a=(16711680&n)>>>16,h=(65280&n)>>>8,o=255&n;t.strokeStyle="rgba("+a+","+h+","+o+","+r+")",t.lineWidth=e.lineWidth}},89:function(t,e,i){var s=i(15);t.exports=function(t,e,i,n,r){var a=t.strokeTint,h=s.getTintAppendFloatAlpha(e.strokeColor,e.strokeAlpha*i);a.TL=h,a.TR=h,a.BL=h,a.BR=h;var o=e.pathData,l=o.length-1,u=e.lineWidth,d=u/2,c=o[0]-n,f=o[1]-r;e.closePath||(l-=2);for(var p=2;p<l;p+=2){var v=o[p]-n,g=o[p+1]-r;t.batchLine(c,f,v,g,d,d,u,p-2,!!e.closePath&&p===l-1),c=v,f=g}}}}]);