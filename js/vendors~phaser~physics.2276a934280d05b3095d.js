/*! For license information please see vendors~phaser~physics.2276a934280d05b3095d.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{103:function(t,e,i){var o={};t.exports=o;var n=i(104);o._motionWakeThreshold=.18,o._motionSleepThreshold=.08,o._minBias=.9,o.update=function(t,e){for(var i=e*e*e,n=0;n<t.length;n++){var s=t[n],r=s.speed*s.speed+s.angularSpeed*s.angularSpeed;if(0===s.force.x&&0===s.force.y){var a=Math.min(s.motion,r),l=Math.max(s.motion,r);s.motion=o._minBias*a+(1-o._minBias)*l,s.sleepThreshold>0&&s.motion<o._motionSleepThreshold*i?(s.sleepCounter+=1,s.sleepCounter>=s.sleepThreshold&&o.set(s,!0)):s.sleepCounter>0&&(s.sleepCounter-=1)}else o.set(s,!1)}},o.afterCollisions=function(t,e){for(var i=e*e*e,n=0;n<t.length;n++){var s=t[n];if(s.isActive){var r=s.collision,a=r.bodyA.parent,l=r.bodyB.parent;if(!(a.isSleeping&&l.isSleeping||a.isStatic||l.isStatic)&&(a.isSleeping||l.isSleeping)){var c=a.isSleeping&&!a.isStatic?a:l,h=c===a?l:a;!c.isStatic&&h.motion>o._motionWakeThreshold*i&&o.set(c,!1)}}}},o.set=function(t,e){var i=t.isSleeping;e?(t.isSleeping=!0,t.sleepCounter=t.sleepThreshold,t.positionImpulse.x=0,t.positionImpulse.y=0,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.anglePrev=t.angle,t.speed=0,t.angularSpeed=0,t.motion=0,i||n.trigger(t,"sleepStart")):(t.isSleeping=!1,t.sleepCounter=0,i&&n.trigger(t,"sleepEnd"))}},104:function(t,e,i){var o={};t.exports=o;var n=i(25);o.on=function(t,e,i){for(var o,n=e.split(" "),s=0;s<n.length;s++)o=n[s],t.events=t.events||{},t.events[o]=t.events[o]||[],t.events[o].push(i);return i},o.off=function(t,e,i){if(e){"function"==typeof e&&(i=e,e=n.keys(t.events).join(" "));for(var o=e.split(" "),s=0;s<o.length;s++){var r=t.events[o[s]],a=[];if(i&&r)for(var l=0;l<r.length;l++)r[l]!==i&&a.push(r[l]);t.events[o[s]]=a}}else t.events={}},o.trigger=function(t,e,i){var o,s,r,a,l=t.events;if(l&&n.keys(l).length>0){i||(i={}),o=e.split(" ");for(var c=0;c<o.length;c++)if(r=l[s=o[c]]){(a=n.clone(i,!1)).name=s,a.source=t;for(var h=0;h<r.length;h++)r[h].apply(t,[a])}}}},131:function(t,e,i){t.exports={Bounce:i(1465),Collision:i(1466),Force:i(1467),Friction:i(1468),Gravity:i(1469),Mass:i(1470),Sensor:i(1471),SetBody:i(1472),Sleep:i(1473),Static:i(1490),Transform:i(1491),Velocity:i(1492)}},132:function(t,e){var i={};t.exports=i,i.create=function(t,e){var o=t.bodyA,n=t.bodyB,s={id:i.id(o,n),bodyA:o,bodyB:n,activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:o.isSensor||n.isSensor,timeCreated:e,timeUpdated:e,collision:null,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return i.update(s,t,e),s},i.update=function(t,e,o){if(t.collision=e,e.collided){var n=e.supports,s=t.activeContacts,r=e.parentA,a=e.parentB;t.inverseMass=r.inverseMass+a.inverseMass,t.friction=Math.min(r.friction,a.friction),t.frictionStatic=Math.max(r.frictionStatic,a.frictionStatic),t.restitution=Math.max(r.restitution,a.restitution),t.slop=Math.max(r.slop,a.slop);for(var l=0;l<n.length;l++)s[l]=n[l].contact;var c=n.length;c<s.length&&(s.length=c),t.separation=e.depth,i.setActive(t,!0,o)}else!0===t.isActive&&i.setActive(t,!1,o)},i.setActive=function(t,e,i){e?(t.isActive=!0,t.timeUpdated=i):(t.isActive=!1,t.activeContacts.length=0)},i.id=function(t,e){return t.id<e.id?"A"+t.id+"B"+e.id:"A"+e.id+"B"+t.id}},1437:function(t,e,i){t.exports={Arcade:i(1438),Matter:i(1464)}},1438:function(t,e,i){var o=i(70),n=i(20),s={ArcadePhysics:i(1439),Body:i(556),Collider:i(557),Components:i(264),Events:i(266),Factory:i(550),GetOverlapX:i(267),GetOverlapY:i(268),SeparateX:i(564),SeparateY:i(565),Group:i(553),Image:i(551),Sprite:i(170),StaticBody:i(566),StaticGroup:i(554),Tilemap:i(1463),World:i(555)};s=n(!1,s,o),t.exports=s},1439:function(t,e,i){var o=i(3),n=i(42),s=i(54),r=i(372),a=i(550),l=i(5),c=i(119),h=i(552),d=i(265),u=i(29),p=i(22),f=i(6),y=i(555),v=new o({initialize:function(t){this.scene=t,this.systems=t.sys,this.config=this.getConfig(),this.world,this.add,t.sys.events.once(p.BOOT,this.boot,this),t.sys.events.on(p.START,this.start,this)},boot:function(){this.world=new y(this.scene,this.config),this.add=new a(this.world),this.systems.events.once(p.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new y(this.scene,this.config),this.add=new a(this.world));var t=this.systems.events;l(this.config,"customUpdate",!1)||t.on(p.UPDATE,this.world.update,this.world),t.on(p.POST_UPDATE,this.world.postUpdate,this.world),t.once(p.SHUTDOWN,this.shutdown,this)},enableUpdate:function(){this.systems.events.on(p.UPDATE,this.world.update,this.world)},disableUpdate:function(){this.systems.events.off(p.UPDATE,this.world.update,this.world)},getConfig:function(){var t=this.systems.game.config.physics,e=this.systems.settings.physics;return c(l(e,"arcade",{}),l(t,"arcade",{}))},overlap:function(t,e,i,o,n){return void 0===i&&(i=null),void 0===o&&(o=null),void 0===n&&(n=i),this.world.collideObjects(t,e,i,o,n,!0)},collide:function(t,e,i,o,n){return void 0===i&&(i=null),void 0===o&&(o=null),void 0===n&&(n=i),this.world.collideObjects(t,e,i,o,n,!1)},collideTiles:function(t,e,i,o,n){return this.world.collideTiles(t,e,i,o,n)},overlapTiles:function(t,e,i,o,n){return this.world.overlapTiles(t,e,i,o,n)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(t,e,i,o,n,s){void 0===o&&(o=60);var r=Math.atan2(i-t.y,e-t.x);return t.body.acceleration.setToPolar(r,o),void 0!==n&&void 0!==s&&t.body.maxVelocity.set(n,s),r},accelerateToObject:function(t,e,i,o,n){return this.accelerateTo(t,e.x,e.y,i,o,n)},closest:function(t,e){e||(e=this.world.bodies.entries);for(var i=Number.MAX_VALUE,o=null,n=t.x,s=t.y,a=e.length,l=0;l<a;l++){var c=e[l],h=c.body||c;if(t!==c&&t!==h&&t!==h.gameObject&&t!==h.center){var d=r(n,s,h.center.x,h.center.y);d<i&&(o=c,i=d)}}return o},furthest:function(t,e){e||(e=this.world.bodies.entries);for(var i=-1,o=null,n=t.x,s=t.y,a=e.length,l=0;l<a;l++){var c=e[l],h=c.body||c;if(t!==c&&t!==h&&t!==h.gameObject&&t!==h.center){var d=r(n,s,h.center.x,h.center.y);d>i&&(o=c,i=d)}}return o},moveTo:function(t,e,i,o,n){void 0===o&&(o=60),void 0===n&&(n=0);var r=Math.atan2(i-t.y,e-t.x);return n>0&&(o=s(t.x,t.y,e,i)/(n/1e3)),t.body.velocity.setToPolar(r,o),r},moveToObject:function(t,e,i,o){return this.moveTo(t,e.x,e.y,i,o)},velocityFromAngle:function(t,e,i){return void 0===e&&(e=60),void 0===i&&(i=new f),i.setToPolar(n(t),e)},velocityFromRotation:function(t,e,i){return void 0===e&&(e=60),void 0===i&&(i=new f),i.setToPolar(t,e)},overlapRect:function(t,e,i,o,n,s){return d(this.world,t,e,i,o,n,s)},overlapCirc:function(t,e,i,o,n){return h(this.world,t,e,i,o,n)},shutdown:function(){if(this.world){var t=this.systems.events;t.off(p.UPDATE,this.world.update,this.world),t.off(p.POST_UPDATE,this.world.postUpdate,this.world),t.off(p.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null}},destroy:function(){this.shutdown(),this.scene.sys.events.off(p.START,this.start,this),this.scene=null,this.systems=null}});u.register("ArcadePhysics",v,"arcadePhysics"),t.exports=v},1440:function(t,e){t.exports={setAcceleration:function(t,e){return this.body.acceleration.set(t,e),this},setAccelerationX:function(t){return this.body.acceleration.x=t,this},setAccelerationY:function(t){return this.body.acceleration.y=t,this}}},1441:function(t,e){t.exports={setAngularVelocity:function(t){return this.body.angularVelocity=t,this},setAngularAcceleration:function(t){return this.body.angularAcceleration=t,this},setAngularDrag:function(t){return this.body.angularDrag=t,this}}},1442:function(t,e){t.exports={setBounce:function(t,e){return this.body.bounce.set(t,e),this},setBounceX:function(t){return this.body.bounce.x=t,this},setBounceY:function(t){return this.body.bounce.y=t,this},setCollideWorldBounds:function(t,e,i){return this.body.setCollideWorldBounds(t,e,i),this}}},1443:function(t,e){t.exports={setDebug:function(t,e,i){return this.debugShowBody=t,this.debugShowVelocity=e,this.debugBodyColor=i,this},setDebugBodyColor:function(t){return this.body.debugBodyColor=t,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(t){this.body.debugShowBody=t}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(t){this.body.debugShowVelocity=t}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(t){this.body.debugBodyColor=t}}}},1444:function(t,e){t.exports={setDrag:function(t,e){return this.body.drag.set(t,e),this},setDragX:function(t){return this.body.drag.x=t,this},setDragY:function(t){return this.body.drag.y=t,this},setDamping:function(t){return this.body.useDamping=t,this}}},1445:function(t,e){var i={enableBody:function(t,e,i,o,n){return t&&this.body.reset(e,i),o&&(this.body.gameObject.active=!0),n&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(t,e){return void 0===t&&(t=!1),void 0===e&&(e=!1),this.body.stop(),this.body.enable=!1,t&&(this.body.gameObject.active=!1),e&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}};t.exports=i},1446:function(t,e){t.exports={setFriction:function(t,e){return this.body.friction.set(t,e),this},setFrictionX:function(t){return this.body.friction.x=t,this},setFrictionY:function(t){return this.body.friction.y=t,this}}},1447:function(t,e){t.exports={setGravity:function(t,e){return this.body.gravity.set(t,e),this},setGravityX:function(t){return this.body.gravity.x=t,this},setGravityY:function(t){return this.body.gravity.y=t,this}}},1448:function(t,e){var i={setImmovable:function(t){return void 0===t&&(t=!0),this.body.immovable=t,this}};t.exports=i},1449:function(t,e){t.exports={setMass:function(t){return this.body.mass=t,this}}},1450:function(t,e){var i={setPushable:function(t){return void 0===t&&(t=!0),this.body.pushable=t,this}};t.exports=i},1451:function(t,e){t.exports={setOffset:function(t,e){return this.body.setOffset(t,e),this},setSize:function(t,e,i){return this.body.setSize(t,e,i),this},setBodySize:function(t,e,i){return this.body.setSize(t,e,i),this},setCircle:function(t,e,i){return this.body.setCircle(t,e,i),this}}},1452:function(t,e){t.exports={setVelocity:function(t,e){return this.body.setVelocity(t,e),this},setVelocityX:function(t){return this.body.setVelocityX(t),this},setVelocityY:function(t){return this.body.setVelocityY(t),this},setMaxVelocity:function(t,e){return this.body.maxVelocity.set(t,e),this}}},1453:function(t,e){t.exports="collide"},1454:function(t,e){t.exports="overlap"},1455:function(t,e){t.exports="pause"},1456:function(t,e){t.exports="resume"},1457:function(t,e){t.exports="tilecollide"},1458:function(t,e){t.exports="tileoverlap"},1459:function(t,e){t.exports="worldbounds"},1460:function(t,e){t.exports="worldstep"},1461:function(t,e){var i,o,n,s,r,a,l,c,h,d,u,p,f,y,v,g,m,b=function(){return d&&v&&o.blocked.right?(i.processX(-m,l,!1,!0),1):h&&g&&o.blocked.left?(i.processX(m,l,!0),1):f&&g&&i.blocked.right?(o.processX(-m,c,!1,!0),2):p&&v&&i.blocked.left?(o.processX(m,c,!0),2):0},x=function(t){if(n&&s)m*=.5,0===t||3===t?(i.processX(m,r),o.processX(-m,a)):(i.processX(-m,r),o.processX(m,a));else if(n&&!s)0===t||3===t?i.processX(m,l,!0):i.processX(-m,l,!1,!0);else if(!n&&s)0===t||3===t?o.processX(-m,c,!1,!0):o.processX(m,c,!0);else{var e=.5*m;0===t?y?(i.processX(m,0,!0),o.processX(0,null,!1,!0)):f?(i.processX(e,0,!0),o.processX(-e,0,!1,!0)):(i.processX(e,o.velocity.x,!0),o.processX(-e,null,!1,!0)):1===t?u?(i.processX(0,null,!1,!0),o.processX(m,0,!0)):d?(i.processX(-e,0,!1,!0),o.processX(e,0,!0)):(i.processX(-e,null,!1,!0),o.processX(e,i.velocity.x,!0)):2===t?y?(i.processX(-m,0,!1,!0),o.processX(0,null,!0)):p?(i.processX(-e,0,!1,!0),o.processX(e,0,!0)):(i.processX(-e,o.velocity.x,!1,!0),o.processX(e,null,!0)):3===t&&(u?(i.processX(0,null,!0),o.processX(-m,0,!1,!0)):h?(i.processX(e,0,!0),o.processX(-e,0,!1,!0)):(i.processX(e,o.velocity.y,!0),o.processX(-e,null,!1,!0)))}return!0};t.exports={BlockCheck:b,Check:function(){var t=i.velocity.x,e=o.velocity.x,n=Math.sqrt(e*e*o.mass/i.mass)*(e>0?1:-1),s=Math.sqrt(t*t*i.mass/o.mass)*(t>0?1:-1),l=.5*(n+s);return s-=l,r=l+(n-=l)*i.bounce.x,a=l+s*o.bounce.x,h&&g?x(0):p&&v?x(1):d&&v?x(2):!(!f||!g)&&x(3)},Set:function(t,e,r){o=e;var a=(i=t).velocity.x,x=o.velocity.x;return n=i.pushable,h=i._dx<0,d=i._dx>0,u=0===i._dx,v=Math.abs(i.right-o.x)<=Math.abs(o.right-i.x),l=x-a*i.bounce.x,s=o.pushable,p=o._dx<0,f=o._dx>0,y=0===o._dx,g=!v,c=a-x*o.bounce.x,m=Math.abs(r),b()},Run:x,RunImmovableBody1:function(t){1===t?o.velocity.x=0:v?o.processX(m,c,!0):o.processX(-m,c,!1,!0),i.moves&&(o.y+=(i.y-i.prev.y)*i.friction.y,o._dy=o.y-o.prev.y)},RunImmovableBody2:function(t){2===t?i.velocity.x=0:g?i.processX(m,l,!0):i.processX(-m,l,!1,!0),o.moves&&(i.y+=(o.y-o.prev.y)*o.friction.y,i._dy=i.y-i.prev.y)}}},1462:function(t,e){var i,o,n,s,r,a,l,c,h,d,u,p,f,y,v,g,m,b=function(){return d&&v&&o.blocked.down?(i.processY(-m,l,!1,!0),1):h&&g&&o.blocked.up?(i.processY(m,l,!0),1):f&&g&&i.blocked.down?(o.processY(-m,c,!1,!0),2):p&&v&&i.blocked.up?(o.processY(m,c,!0),2):0},x=function(t){if(n&&s)m*=.5,0===t||3===t?(i.processY(m,r),o.processY(-m,a)):(i.processY(-m,r),o.processY(m,a));else if(n&&!s)0===t||3===t?i.processY(m,l,!0):i.processY(-m,l,!1,!0);else if(!n&&s)0===t||3===t?o.processY(-m,c,!1,!0):o.processY(m,c,!0);else{var e=.5*m;0===t?y?(i.processY(m,0,!0),o.processY(0,null,!1,!0)):f?(i.processY(e,0,!0),o.processY(-e,0,!1,!0)):(i.processY(e,o.velocity.y,!0),o.processY(-e,null,!1,!0)):1===t?u?(i.processY(0,null,!1,!0),o.processY(m,0,!0)):d?(i.processY(-e,0,!1,!0),o.processY(e,0,!0)):(i.processY(-e,null,!1,!0),o.processY(e,i.velocity.y,!0)):2===t?y?(i.processY(-m,0,!1,!0),o.processY(0,null,!0)):p?(i.processY(-e,0,!1,!0),o.processY(e,0,!0)):(i.processY(-e,o.velocity.y,!1,!0),o.processY(e,null,!0)):3===t&&(u?(i.processY(0,null,!0),o.processY(-m,0,!1,!0)):h?(i.processY(e,0,!0),o.processY(-e,0,!1,!0)):(i.processY(e,o.velocity.y,!0),o.processY(-e,null,!1,!0)))}return!0};t.exports={BlockCheck:b,Check:function(){var t=i.velocity.y,e=o.velocity.y,n=Math.sqrt(e*e*o.mass/i.mass)*(e>0?1:-1),s=Math.sqrt(t*t*i.mass/o.mass)*(t>0?1:-1),l=.5*(n+s);return s-=l,r=l+(n-=l)*i.bounce.y,a=l+s*o.bounce.y,h&&g?x(0):p&&v?x(1):d&&v?x(2):!(!f||!g)&&x(3)},Set:function(t,e,r){o=e;var a=(i=t).velocity.y,x=o.velocity.y;return n=i.pushable,h=i._dy<0,d=i._dy>0,u=0===i._dy,v=Math.abs(i.bottom-o.y)<=Math.abs(o.bottom-i.y),l=x-a*i.bounce.y,s=o.pushable,p=o._dy<0,f=o._dy>0,y=0===o._dy,g=!v,c=a-x*o.bounce.y,m=Math.abs(r),b()},Run:x,RunImmovableBody1:function(t){1===t?o.velocity.y=0:v?o.processY(m,c,!0):o.processY(-m,c,!1,!0),i.moves&&(o.x+=(i.x-i.prev.x)*i.friction.x,o._dx=o.x-o.prev.x)},RunImmovableBody2:function(t){2===t?i.velocity.y=0:g?i.processY(m,l,!0):i.processY(-m,l,!1,!0),o.moves&&(i.x+=(o.x-o.prev.x)*o.friction.x,i._dx=i.x-i.prev.x)}}},1463:function(t,e,i){var o={ProcessTileCallbacks:i(558),ProcessTileSeparationX:i(561),ProcessTileSeparationY:i(563),SeparateTile:i(559),TileCheckX:i(560),TileCheckY:i(562),TileIntersectsBody:i(270)};t.exports=o},1464:function(t,e,i){t.exports={BodyBounds:i(567),Components:i(131),Events:i(172),Factory:i(569),MatterGameObject:i(570),Image:i(571),Matter:i(276),MatterPhysics:i(1494),PolyDecomp:i(568),Sprite:i(572),TileBody:i(275),PhysicsEditorParser:i(271),PhysicsJSONParser:i(272),PointerConstraint:i(573),World:i(577)}},1465:function(t,e){t.exports={setBounce:function(t){return this.body.restitution=t,this}}},1466:function(t,e){var i={setCollisionCategory:function(t){return this.body.collisionFilter.category=t,this},setCollisionGroup:function(t){return this.body.collisionFilter.group=t,this},setCollidesWith:function(t){var e=0;if(Array.isArray(t))for(var i=0;i<t.length;i++)e|=t[i];else e=t;return this.body.collisionFilter.mask=e,this},setOnCollide:function(t){return this.body.onCollideCallback=t,this},setOnCollideEnd:function(t){return this.body.onCollideEndCallback=t,this},setOnCollideActive:function(t){return this.body.onCollideActiveCallback=t,this},setOnCollideWith:function(t,e){Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var o=t[i].hasOwnProperty("body")?t[i].body:t[i];this.body.setOnCollideWith(o,e)}return this}};t.exports=i},1467:function(t,e,i){var o=i(31),n={applyForce:function(t){return this._tempVec2.set(this.body.position.x,this.body.position.y),o.applyForce(this.body,this._tempVec2,t),this},applyForceFrom:function(t,e){return o.applyForce(this.body,t,e),this},thrust:function(t){var e=this.body.angle;return this._tempVec2.set(t*Math.cos(e),t*Math.sin(e)),o.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function(t){var e=this.body.angle-Math.PI/2;return this._tempVec2.set(t*Math.cos(e),t*Math.sin(e)),o.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function(t){var e=this.body.angle+Math.PI/2;return this._tempVec2.set(t*Math.cos(e),t*Math.sin(e)),o.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function(t){var e=this.body.angle-Math.PI;return this._tempVec2.set(t*Math.cos(e),t*Math.sin(e)),o.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}};t.exports=n},1468:function(t,e){var i={setFriction:function(t,e,i){return this.body.friction=t,void 0!==e&&(this.body.frictionAir=e),void 0!==i&&(this.body.frictionStatic=i),this},setFrictionAir:function(t){return this.body.frictionAir=t,this},setFrictionStatic:function(t){return this.body.frictionStatic=t,this}};t.exports=i},1469:function(t,e){t.exports={setIgnoreGravity:function(t){return this.body.ignoreGravity=t,this}}},1470:function(t,e,i){var o=i(31),n=i(6),s={setMass:function(t){return o.setMass(this.body,t),this},setDensity:function(t){return o.setDensity(this.body,t),this},centerOfMass:{get:function(){return new n(this.body.centerOfMass.x,this.body.centerOfMass.y)}}};t.exports=s},1471:function(t,e){t.exports={setSensor:function(t){return this.body.isSensor=t,this},isSensor:function(){return this.body.isSensor}}},1472:function(t,e,i){var o=i(58),n=i(31),s=i(107),r=i(5),a=i(271),l=i(272),c=i(37),h={setRectangle:function(t,e,i){return this.setBody({type:"rectangle",width:t,height:e},i)},setCircle:function(t,e){return this.setBody({type:"circle",radius:t},e)},setPolygon:function(t,e,i){return this.setBody({type:"polygon",sides:e,radius:t},i)},setTrapezoid:function(t,e,i,o){return this.setBody({type:"trapezoid",width:t,height:e,slope:i},o)},setExistingBody:function(t,e){void 0===e&&(e=!0),this.body&&this.world.remove(this.body,!0),this.body=t;for(var i=0;i<t.parts.length;i++)t.parts[i].gameObject=this;var o=this;if(t.destroy=function(){o.world.remove(o.body,!0),o.body.gameObject=null},e&&(this.world.has(t)&&this.world.remove(t,!0),this.world.add(t)),this._originComponent){var n=t.render.sprite.xOffset,r=t.render.sprite.yOffset,a=t.centerOfMass.x,l=t.centerOfMass.y;if(s(a,.5)&&s(l,.5))this.setOrigin(n+.5,r+.5);else{var c=t.centerOffset.x,h=t.centerOffset.y;this.setOrigin(n+c/this.displayWidth,r+h/this.displayHeight)}}return this},setBody:function(t,e){if(!t)return this;var i;"string"==typeof t&&(t={type:t});var s=r(t,"type","rectangle"),h=r(t,"x",this._tempVec2.x),d=r(t,"y",this._tempVec2.y),u=r(t,"width",this.width),p=r(t,"height",this.height);switch(s){case"rectangle":i=o.rectangle(h,d,u,p,e);break;case"circle":var f=r(t,"radius",Math.max(u,p)/2),y=r(t,"maxSides",25);i=o.circle(h,d,f,e,y);break;case"trapezoid":var v=r(t,"slope",.5);i=o.trapezoid(h,d,u,p,v,e);break;case"polygon":var g=r(t,"sides",5),m=r(t,"radius",Math.max(u,p)/2);i=o.polygon(h,d,g,m,e);break;case"fromVertices":case"fromVerts":var b=r(t,"verts",null);if(b)if("string"==typeof b&&(b=c.fromPath(b)),this.body&&!this.body.hasOwnProperty("temp"))n.setVertices(this.body,b),i=this.body;else{var x=r(t,"flagInternal",!1),C=r(t,"removeCollinear",.01),w=r(t,"minimumArea",10);i=o.fromVertices(h,d,b,e,x,C,w)}break;case"fromPhysicsEditor":i=a.parseBody(h,d,t,e);break;case"fromPhysicsTracer":i=l.parseBody(h,d,t,e)}return i&&this.setExistingBody(i,t.addToWorld),this}};t.exports=h},1473:function(t,e,i){var o=i(172),n=i(103),s=i(104),r={setToSleep:function(){return n.set(this.body,!0),this},setAwake:function(){return n.set(this.body,!1),this},setSleepThreshold:function(t){return void 0===t&&(t=60),this.body.sleepThreshold=t,this},setSleepEvents:function(t,e){return this.setSleepStartEvent(t),this.setSleepEndEvent(e),this},setSleepStartEvent:function(t){if(t){var e=this.world;s.on(this.body,"sleepStart",(function(t){e.emit(o.SLEEP_START,t,this)}))}else s.off(this.body,"sleepStart");return this},setSleepEndEvent:function(t){if(t){var e=this.world;s.on(this.body,"sleepEnd",(function(t){e.emit(o.SLEEP_END,t,this)}))}else s.off(this.body,"sleepEnd");return this}};t.exports=r},1474:function(t,e){t.exports="afteradd"},1475:function(t,e){t.exports="afterremove"},1476:function(t,e){t.exports="afterupdate"},1477:function(t,e){t.exports="beforeadd"},1478:function(t,e){t.exports="beforeremove"},1479:function(t,e){t.exports="beforeupdate"},1480:function(t,e){t.exports="collisionactive"},1481:function(t,e){t.exports="collisionend"},1482:function(t,e){t.exports="collisionstart"},1483:function(t,e){t.exports="dragend"},1484:function(t,e){t.exports="drag"},1485:function(t,e){t.exports="dragstart"},1486:function(t,e){t.exports="pause"},1487:function(t,e){t.exports="resume"},1488:function(t,e){t.exports="sleepend"},1489:function(t,e){t.exports="sleepstart"},1490:function(t,e,i){var o=i(31),n={setStatic:function(t){return o.setStatic(this.body,t),this},isStatic:function(){return this.body.isStatic}};t.exports=n},1491:function(t,e,i){var o=i(31),n=i(17),s=i(189),r=i(190),a={x:{get:function(){return this.body.position.x},set:function(t){this._tempVec2.set(t,this.y),o.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(t){this._tempVec2.set(this.x,t),o.setPosition(this.body,this._tempVec2)}},scaleX:{get:function(){return this._scaleX},set:function(t){var e=1/this._scaleX,i=1/this._scaleY;this._scaleX=t,0===this._scaleX?this.renderFlags&=-5:this.renderFlags|=4,o.scale(this.body,e,i),o.scale(this.body,t,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(t){var e=1/this._scaleX,i=1/this._scaleY;this._scaleY=t,0===this._scaleY?this.renderFlags&=-5:this.renderFlags|=4,o.scale(this.body,e,i),o.scale(this.body,this._scaleX,t)}},angle:{get:function(){return r(this.body.angle*n.RAD_TO_DEG)},set:function(t){this.rotation=r(t)*n.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(t){this._rotation=s(t),o.setAngle(this.body,this._rotation)}},setPosition:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._tempVec2.set(t,e),o.setPosition(this.body,this._tempVec2),this},setRotation:function(t){return void 0===t&&(t=0),this._rotation=s(t),o.setAngle(this.body,t),this},setFixedRotation:function(){return o.setInertia(this.body,1/0),this},setAngle:function(t){return void 0===t&&(t=0),this.angle=t,o.setAngle(this.body,this.rotation),this},setScale:function(t,e,i){void 0===t&&(t=1),void 0===e&&(e=t);var n=1/this._scaleX,s=1/this._scaleY;return this._scaleX=t,this._scaleY=e,o.scale(this.body,n,s,i),o.scale(this.body,t,e,i),this}};t.exports=a},1492:function(t,e,i){var o=i(31),n={setAngularVelocity:function(t){return o.setAngularVelocity(this.body,t),this},setVelocityX:function(t){return this._tempVec2.set(t,this.body.velocity.y),o.setVelocity(this.body,this._tempVec2),this},setVelocityY:function(t){return this._tempVec2.set(this.body.velocity.x,t),o.setVelocity(this.body,this._tempVec2),this},setVelocity:function(t,e){return this._tempVec2.set(t,e),o.setVelocity(this.body,this._tempVec2),this}};t.exports=n},1493:function(t,e,i){var o={};t.exports=o;var n=i(79),s=i(25);o.create=function(t){return s.extend({extended:!1,narrowDetections:0,narrowphaseTests:0,narrowReuse:0,narrowReuseCount:0,midphaseTests:0,broadphaseTests:0,narrowEff:1e-4,midEff:1e-4,broadEff:1e-4,collisions:0,buckets:0,bodies:0,pairs:0},!1,t)},o.reset=function(t){t.extended&&(t.narrowDetections=0,t.narrowphaseTests=0,t.narrowReuse=0,t.narrowReuseCount=0,t.midphaseTests=0,t.broadphaseTests=0,t.narrowEff=0,t.midEff=0,t.broadEff=0,t.collisions=0,t.buckets=0,t.pairs=0,t.bodies=0)},o.update=function(t,e){if(t.extended){var i=e.world,o=n.allBodies(i);t.collisions=t.narrowDetections,t.pairs=e.pairs.list.length,t.bodies=o.length,t.midEff=(t.narrowDetections/(t.midphaseTests||1)).toFixed(2),t.narrowEff=(t.narrowDetections/(t.narrowphaseTests||1)).toFixed(2),t.broadEff=(1-t.broadphaseTests/(o.length||1)).toFixed(2),t.narrowReuse=(t.narrowReuseCount/(t.narrowphaseTests||1)).toFixed(2)}}},1494:function(t,e,i){var o=i(105),n=i(171),s=i(58),r=i(31),a=i(567),l=i(47),c=i(3),h=i(79),d=i(273),u=i(90),p=i(173),f=i(54),y=i(569),v=i(5),g=i(9),m=i(279),b=i(1495),x=i(1496),C=i(574),w=i(1497),S=i(119),B=i(132),A=i(280),_=i(277),T=i(29),O=i(575),M=i(281),P=i(174),k=i(22),E=i(274),I=i(46),D=i(37),V=i(577),R=new c({initialize:function(t){this.scene=t,this.systems=t.sys,this.config=this.getConfig(),this.world,this.add,this.bodyBounds,this.body=r,this.composite=h,this.detector=p,this.grid=m,this.pair=B,this.pairs=A,this.query=O,this.resolver=M,this.sat=P,this.constraint=u,this.bodies=s,this.composites=d,this.axes=n,this.bounds=l,this.svg=E,this.vector=I,this.vertices=D,this.verts=D,this._tempVec2=I.create(),g(this.config,"plugins.collisionevents",!0)&&this.enableCollisionEventsPlugin(),g(this.config,"plugins.attractors",!1)&&this.enableAttractorPlugin(),g(this.config,"plugins.wrap",!1)&&this.enableWrapPlugin(),M._restingThresh=g(this.config,"restingThresh",4),M._restingThreshTangent=g(this.config,"restingThreshTangent",6),M._positionDampen=g(this.config,"positionDampen",.9),M._positionWarming=g(this.config,"positionWarming",.8),M._frictionNormalMultiplier=g(this.config,"frictionNormalMultiplier",5),t.sys.events.once(k.BOOT,this.boot,this),t.sys.events.on(k.START,this.start,this)},boot:function(){this.world=new V(this.scene,this.config),this.add=new y(this.world),this.bodyBounds=new a,this.systems.events.once(k.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new V(this.scene,this.config),this.add=new y(this.world));var t=this.systems.events;t.on(k.UPDATE,this.world.update,this.world),t.on(k.POST_UPDATE,this.world.postUpdate,this.world),t.once(k.SHUTDOWN,this.shutdown,this)},getConfig:function(){var t=this.systems.game.config.physics,e=this.systems.settings.physics;return S(v(e,"matter",{}),v(t,"matter",{}))},enableAttractorPlugin:function(){return _.register(b),_.use(C,b),this},enableWrapPlugin:function(){return _.register(w),_.use(C,w),this},enableCollisionEventsPlugin:function(){return _.register(x),_.use(C,x),this},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function(t,e){this.world.step(t,e)},containsPoint:function(t,e,i){t=this.getMatterBodies(t);var o=I.create(e,i);return O.point(t,o).length>0},intersectPoint:function(t,e,i){i=this.getMatterBodies(i);var o=I.create(t,e),n=[];return O.point(i,o).forEach((function(t){-1===n.indexOf(t)&&n.push(t)})),n},intersectRect:function(t,e,i,o,n,s){void 0===n&&(n=!1),s=this.getMatterBodies(s);var r={min:{x:t,y:e},max:{x:t+i,y:e+o}},a=[];return O.region(s,r,n).forEach((function(t){-1===a.indexOf(t)&&a.push(t)})),a},intersectRay:function(t,e,i,o,n,s){void 0===n&&(n=1),s=this.getMatterBodies(s);for(var r=[],a=O.ray(s,I.create(t,e),I.create(i,o),n),l=0;l<a.length;l++)r.push(a[l].body);return r},intersectBody:function(t,e){e=this.getMatterBodies(e);for(var i=[],o=O.collides(t,e),n=0;n<o.length;n++){var s=o[n];s.bodyA===t?i.push(s.bodyB):i.push(s.bodyA)}return i},overlap:function(t,e,i,o,n){void 0===i&&(i=null),void 0===o&&(o=null),void 0===n&&(n=i),Array.isArray(t)||(t=[t]),t=this.getMatterBodies(t),e=this.getMatterBodies(e);for(var s=!1,r=0;r<t.length;r++)for(var a=t[r],l=O.collides(a,e),c=0;c<l.length;c++){var h=l[c],d=h.bodyA.id===a.id?h.bodyB:h.bodyA;if(!o||o.call(n,a,d,h))if(s=!0,i)i.call(n,a,d,h);else if(!o)return!0}return s},setCollisionCategory:function(t,e){return(t=this.getMatterBodies(t)).forEach((function(t){t.collisionFilter.category=e})),this},setCollisionGroup:function(t,e){return(t=this.getMatterBodies(t)).forEach((function(t){t.collisionFilter.group=e})),this},setCollidesWith:function(t,e){t=this.getMatterBodies(t);var i=0;if(Array.isArray(e))for(var o=0;o<e.length;o++)i|=e[o];else i=e;return t.forEach((function(t){t.collisionFilter.mask=i})),this},getMatterBodies:function(t){if(!t)return this.world.getAllBodies();Array.isArray(t)||(t=[t]);for(var e=[],i=0;i<t.length;i++){var o=t[i].hasOwnProperty("body")?t[i].body:t[i];e.push(o)}return e},setVelocity:function(t,e,i){t=this.getMatterBodies(t);var o=this._tempVec2;return o.x=e,o.y=i,t.forEach((function(t){r.setVelocity(t,o)})),this},setVelocityX:function(t,e){t=this.getMatterBodies(t);var i=this._tempVec2;return i.x=e,t.forEach((function(t){i.y=t.velocity.y,r.setVelocity(t,i)})),this},setVelocityY:function(t,e){t=this.getMatterBodies(t);var i=this._tempVec2;return i.y=e,t.forEach((function(t){i.x=t.velocity.x,r.setVelocity(t,i)})),this},setAngularVelocity:function(t,e){return(t=this.getMatterBodies(t)).forEach((function(t){r.setAngularVelocity(t,e)})),this},applyForce:function(t,e){t=this.getMatterBodies(t);var i=this._tempVec2;return t.forEach((function(t){i.x=t.position.x,i.y=t.position.y,r.applyForce(t,i,e)})),this},applyForceFromPosition:function(t,e,i,o){t=this.getMatterBodies(t);var n=this._tempVec2;return t.forEach((function(t){void 0===o&&(o=t.angle),n.x=i*Math.cos(o),n.y=i*Math.sin(o),r.applyForce(t,e,n)})),this},applyForceFromAngle:function(t,e,i){t=this.getMatterBodies(t);var o=this._tempVec2;return t.forEach((function(t){void 0===i&&(i=t.angle),o.x=e*Math.cos(i),o.y=e*Math.sin(i),r.applyForce(t,{x:t.position.x,y:t.position.y},o)})),this},getConstraintLength:function(t){var e=t.pointA.x,i=t.pointA.y,o=t.pointB.x,n=t.pointB.y;return t.bodyA&&(e+=t.bodyA.position.x,i+=t.bodyA.position.y),t.bodyB&&(o+=t.bodyB.position.x,n+=t.bodyB.position.y),f(e,i,o,n)},alignBody:function(t,e,i,n){var s;switch(t=t.hasOwnProperty("body")?t.body:t,n){case o.TOP_LEFT:case o.LEFT_TOP:s=this.bodyBounds.getTopLeft(t,e,i);break;case o.TOP_CENTER:s=this.bodyBounds.getTopCenter(t,e,i);break;case o.TOP_RIGHT:case o.RIGHT_TOP:s=this.bodyBounds.getTopRight(t,e,i);break;case o.LEFT_CENTER:s=this.bodyBounds.getLeftCenter(t,e,i);break;case o.CENTER:s=this.bodyBounds.getCenter(t,e,i);break;case o.RIGHT_CENTER:s=this.bodyBounds.getRightCenter(t,e,i);break;case o.LEFT_BOTTOM:case o.BOTTOM_LEFT:s=this.bodyBounds.getBottomLeft(t,e,i);break;case o.BOTTOM_CENTER:s=this.bodyBounds.getBottomCenter(t,e,i);break;case o.BOTTOM_RIGHT:case o.RIGHT_BOTTOM:s=this.bodyBounds.getBottomRight(t,e,i)}return s&&r.setPosition(t,s),this},shutdown:function(){var t=this.systems.events;this.world&&(t.off(k.UPDATE,this.world.update,this.world),t.off(k.POST_UPDATE,this.world.postUpdate,this.world)),t.off(k.SHUTDOWN,this.shutdown,this),this.add&&this.add.destroy(),this.world&&this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(k.START,this.start,this),this.scene=null,this.systems=null}});T.register("MatterPhysics",R,"matterPhysics"),t.exports=R},1495:function(t,e,i){var o=i(276),n={name:"matter-attractors",version:"0.1.7",for:"matter-js@^0.14.2",silent:!0,install:function(t){t.after("Body.create",(function(){n.Body.init(this)})),t.before("Engine.update",(function(t){n.Engine.update(t)}))},Body:{init:function(t){t.plugin.attractors=t.plugin.attractors||[]}},Engine:{update:function(t){for(var e=o.Composite.allBodies(t.world),i=0;i<e.length;i++){var n=e[i],s=n.plugin.attractors;if(s&&s.length>0)for(var r=0;r<e.length;r++){var a=e[r];if(i!==r)for(var l=0;l<s.length;l++){var c=s[l],h=c;o.Common.isFunction(c)&&(h=c(n,a)),h&&o.Body.applyForce(a,a.position,h)}}}}},Attractors:{gravityConstant:.001,gravity:function(t,e){var i=o.Vector.sub(e.position,t.position),s=o.Vector.magnitudeSquared(i)||1e-4,r=o.Vector.normalise(i),a=-n.Attractors.gravityConstant*(t.mass*e.mass/s),l=o.Vector.mult(r,a);o.Body.applyForce(t,t.position,o.Vector.neg(l)),o.Body.applyForce(e,e.position,l)}}};t.exports=n},1496:function(t,e){t.exports={name:"matter-collision-events",version:"0.1.6",for:"matter-js@^0.14.2",silent:!0,install:function(t){t.after("Engine.create",(function(){t.Events.on(this,"collisionStart",(function(e){e.pairs.map((function(e){var i=e.bodyA,o=e.bodyB;i.gameObject&&i.gameObject.emit("collide",i,o,e),o.gameObject&&o.gameObject.emit("collide",o,i,e),t.Events.trigger(i,"onCollide",{pair:e}),t.Events.trigger(o,"onCollide",{pair:e}),i.onCollideCallback&&i.onCollideCallback(e),o.onCollideCallback&&o.onCollideCallback(e),i.onCollideWith[o.id]&&i.onCollideWith[o.id](o,e),o.onCollideWith[i.id]&&o.onCollideWith[i.id](i,e)}))})),t.Events.on(this,"collisionActive",(function(e){e.pairs.map((function(e){var i=e.bodyA,o=e.bodyB;i.gameObject&&i.gameObject.emit("collideActive",i,o,e),o.gameObject&&o.gameObject.emit("collideActive",o,i,e),t.Events.trigger(i,"onCollideActive",{pair:e}),t.Events.trigger(o,"onCollideActive",{pair:e}),i.onCollideActiveCallback&&i.onCollideActiveCallback(e),o.onCollideActiveCallback&&o.onCollideActiveCallback(e)}))})),t.Events.on(this,"collisionEnd",(function(e){e.pairs.map((function(e){var i=e.bodyA,o=e.bodyB;i.gameObject&&i.gameObject.emit("collideEnd",i,o,e),o.gameObject&&o.gameObject.emit("collideEnd",o,i,e),t.Events.trigger(i,"onCollideEnd",{pair:e}),t.Events.trigger(o,"onCollideEnd",{pair:e}),i.onCollideEndCallback&&i.onCollideEndCallback(e),o.onCollideEndCallback&&o.onCollideEndCallback(e)}))}))}))}}},1497:function(t,e,i){var o=i(276),n={name:"matter-wrap",version:"0.1.4",for:"matter-js@^0.14.2",silent:!0,install:function(t){t.after("Engine.update",(function(){n.Engine.update(this)}))},Engine:{update:function(t){for(var e=t.world,i=o.Composite.allBodies(e),s=o.Composite.allComposites(e),r=0;r<i.length;r+=1){var a=i[r];a.plugin.wrap&&n.Body.wrap(a,a.plugin.wrap)}for(r=0;r<s.length;r+=1){var l=s[r];l.plugin.wrap&&n.Composite.wrap(l,l.plugin.wrap)}}},Bounds:{wrap:function(t,e){var i=null,o=null;if(void 0!==e.min.x&&void 0!==e.max.x&&(t.min.x>e.max.x?i=e.min.x-t.max.x:t.max.x<e.min.x&&(i=e.max.x-t.min.x)),void 0!==e.min.y&&void 0!==e.max.y&&(t.min.y>e.max.y?o=e.min.y-t.max.y:t.max.y<e.min.y&&(o=e.max.y-t.min.y)),null!==i||null!==o)return{x:i||0,y:o||0}}},Body:{wrap:function(t,e){var i=n.Bounds.wrap(t.bounds,e);return i&&o.Body.translate(t,i),i}},Composite:{bounds:function(t){for(var e=o.Composite.allBodies(t),i=[],n=0;n<e.length;n+=1){var s=e[n];i.push(s.bounds.min,s.bounds.max)}return o.Bounds.create(i)},wrap:function(t,e){var i=n.Bounds.wrap(n.Composite.bounds(t),e);return i&&o.Composite.translate(t,i),i}}};t.exports=n},170:function(t,e,i){var o=i(3),n=i(264),s=i(67),r=new o({Extends:s,Mixins:[n.Acceleration,n.Angular,n.Bounce,n.Debug,n.Drag,n.Enable,n.Friction,n.Gravity,n.Immovable,n.Mass,n.Pushable,n.Size,n.Velocity],initialize:function(t,e,i,o,n){s.call(this,t,e,i,o,n),this.body=null}});t.exports=r},171:function(t,e,i){var o={};t.exports=o;var n=i(46),s=i(25);o.fromVertices=function(t){for(var e={},i=0;i<t.length;i++){var o=(i+1)%t.length,r=n.normalise({x:t[o].y-t[i].y,y:t[i].x-t[o].x}),a=0===r.y?1/0:r.x/r.y;e[a=a.toFixed(3).toString()]=r}return s.values(e)},o.rotate=function(t,e){if(0!==e)for(var i=Math.cos(e),o=Math.sin(e),n=0;n<t.length;n++){var s,r=t[n];s=r.x*i-r.y*o,r.y=r.x*o+r.y*i,r.x=s}}},172:function(t,e,i){t.exports={AFTER_ADD:i(1474),AFTER_REMOVE:i(1475),AFTER_UPDATE:i(1476),BEFORE_ADD:i(1477),BEFORE_REMOVE:i(1478),BEFORE_UPDATE:i(1479),COLLISION_ACTIVE:i(1480),COLLISION_END:i(1481),COLLISION_START:i(1482),DRAG_END:i(1483),DRAG:i(1484),DRAG_START:i(1485),PAUSE:i(1486),RESUME:i(1487),SLEEP_END:i(1488),SLEEP_START:i(1489)}},173:function(t,e,i){var o={};t.exports=o;var n=i(174),s=i(132),r=i(47);o.collisions=function(t,e){for(var i=[],a=e.pairs.table,l=e.metrics,c=0;c<t.length;c++){var h=t[c][0],d=t[c][1];if((!h.isStatic&&!h.isSleeping||!d.isStatic&&!d.isSleeping)&&o.canCollide(h.collisionFilter,d.collisionFilter)&&(l.midphaseTests+=1,r.overlaps(h.bounds,d.bounds)))for(var u=h.parts.length>1?1:0;u<h.parts.length;u++)for(var p=h.parts[u],f=d.parts.length>1?1:0;f<d.parts.length;f++){var y=d.parts[f];if(p===h&&y===d||r.overlaps(p.bounds,y.bounds)){var v,g=a[s.id(p,y)];v=g&&g.isActive?g.collision:null;var m=n.collides(p,y,v);l.narrowphaseTests+=1,m.reused&&(l.narrowReuseCount+=1),m.collided&&(i.push(m),l.narrowDetections+=1)}}}return i},o.canCollide=function(t,e){return t.group===e.group&&0!==t.group?t.group>0:0!=(t.mask&e.category)&&0!=(e.mask&t.category)}},174:function(t,e,i){var o={};t.exports=o;var n=i(37),s=i(46);o.collides=function(t,e,i){var r,a,l,c,h=!1;if(i){var d=t.parent,u=e.parent,p=d.speed*d.speed+d.angularSpeed*d.angularSpeed+u.speed*u.speed+u.angularSpeed*u.angularSpeed;h=i&&i.collided&&p<.2,c=i}else c={collided:!1,bodyA:t,bodyB:e};if(i&&h){var f=c.axisBody,y=f===t?e:t,v=[f.axes[i.axisNumber]];if(l=o._overlapAxes(f.vertices,y.vertices,v),c.reused=!0,l.overlap<=0)return c.collided=!1,c}else{if((r=o._overlapAxes(t.vertices,e.vertices,t.axes)).overlap<=0)return c.collided=!1,c;if((a=o._overlapAxes(e.vertices,t.vertices,e.axes)).overlap<=0)return c.collided=!1,c;r.overlap<a.overlap?(l=r,c.axisBody=t):(l=a,c.axisBody=e),c.axisNumber=l.axisNumber}c.bodyA=t.id<e.id?t:e,c.bodyB=t.id<e.id?e:t,c.collided=!0,c.depth=l.overlap,c.parentA=c.bodyA.parent,c.parentB=c.bodyB.parent,t=c.bodyA,e=c.bodyB,s.dot(l.axis,s.sub(e.position,t.position))<0?c.normal={x:l.axis.x,y:l.axis.y}:c.normal={x:-l.axis.x,y:-l.axis.y},c.tangent=s.perp(c.normal),c.penetration=c.penetration||{},c.penetration.x=c.normal.x*c.depth,c.penetration.y=c.normal.y*c.depth;var g=o._findSupports(t,e,c.normal),m=[];if(n.contains(t.vertices,g[0])&&m.push(g[0]),n.contains(t.vertices,g[1])&&m.push(g[1]),m.length<2){var b=o._findSupports(e,t,s.neg(c.normal));n.contains(e.vertices,b[0])&&m.push(b[0]),m.length<2&&n.contains(e.vertices,b[1])&&m.push(b[1])}return m.length<1&&(m=[g[0]]),c.supports=m,c},o._overlapAxes=function(t,e,i){for(var n,r,a=s._temp[0],l=s._temp[1],c={overlap:Number.MAX_VALUE},h=0;h<i.length;h++){if(r=i[h],o._projectToAxis(a,t,r),o._projectToAxis(l,e,r),(n=Math.min(a.max-l.min,l.max-a.min))<=0)return c.overlap=n,c;n<c.overlap&&(c.overlap=n,c.axis=r,c.axisNumber=h)}return c},o._projectToAxis=function(t,e,i){for(var o=s.dot(e[0],i),n=o,r=1;r<e.length;r+=1){var a=s.dot(e[r],i);a>n?n=a:a<o&&(o=a)}t.min=o,t.max=n},o._findSupports=function(t,e,i){for(var o,n,r,a,l=Number.MAX_VALUE,c=s._temp[0],h=e.vertices,d=t.position,u=0;u<h.length;u++)n=h[u],c.x=n.x-d.x,c.y=n.y-d.y,(o=-s.dot(i,c))<l&&(l=o,r=n);return n=h[r.index-1>=0?r.index-1:h.length-1],c.x=n.x-d.x,c.y=n.y-d.y,l=-s.dot(i,c),a=n,n=h[(r.index+1)%h.length],c.x=n.x-d.x,c.y=n.y-d.y,(o=-s.dot(i,c))<l&&(a=n),[r,a]}},25:function(t,e){var i={};t.exports=i,function(){i._nextId=0,i._seed=0,i._nowStartTime=+new Date,i.extend=function(t,e){var o,n;"boolean"==typeof e?(o=2,n=e):(o=1,n=!0);for(var s=o;s<arguments.length;s++){var r=arguments[s];if(r)for(var a in r)n&&r[a]&&r[a].constructor===Object?t[a]&&t[a].constructor!==Object?t[a]=r[a]:(t[a]=t[a]||{},i.extend(t[a],n,r[a])):t[a]=r[a]}return t},i.clone=function(t,e){return i.extend({},e,t)},i.keys=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var i in t)e.push(i);return e},i.values=function(t){var e=[];if(Object.keys){for(var i=Object.keys(t),o=0;o<i.length;o++)e.push(t[i[o]]);return e}for(var n in t)e.push(t[n]);return e},i.get=function(t,e,i,o){e=e.split(".").slice(i,o);for(var n=0;n<e.length;n+=1)t=t[e[n]];return t},i.set=function(t,e,o,n,s){var r=e.split(".").slice(n,s);return i.get(t,e,0,-1)[r[r.length-1]]=o,o},i.shuffle=function(t){for(var e=t.length-1;e>0;e--){var o=Math.floor(i.random()*(e+1)),n=t[e];t[e]=t[o],t[o]=n}return t},i.choose=function(t){return t[Math.floor(i.random()*t.length)]},i.isElement=function(t){return"undefined"!=typeof HTMLElement?t instanceof HTMLElement:!!(t&&t.nodeType&&t.nodeName)},i.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},i.isFunction=function(t){return"function"==typeof t},i.isPlainObject=function(t){return"object"==typeof t&&t.constructor===Object},i.isString=function(t){return"[object String]"===Object.prototype.toString.call(t)},i.clamp=function(t,e,i){return t<e?e:t>i?i:t},i.sign=function(t){return t<0?-1:1},i.now=function(){if("undefined"!=typeof window&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return new Date-i._nowStartTime},i.random=function(e,i){return i=void 0!==i?i:1,(e=void 0!==e?e:0)+t()*(i-e)};var t=function(){return i._seed=(9301*i._seed+49297)%233280,i._seed/233280};i.colorToNumber=function(t){return 3==(t=t.replace("#","")).length&&(t=t.charAt(0)+t.charAt(0)+t.charAt(1)+t.charAt(1)+t.charAt(2)+t.charAt(2)),parseInt(t,16)},i.logLevel=1,i.log=function(){console&&i.logLevel>0&&i.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},i.info=function(){console&&i.logLevel>0&&i.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},i.warn=function(){console&&i.logLevel>0&&i.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},i.nextId=function(){return i._nextId++},i.indexOf=function(t,e){if(t.indexOf)return t.indexOf(e);for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1},i.map=function(t,e){if(t.map)return t.map(e);for(var i=[],o=0;o<t.length;o+=1)i.push(e(t[o]));return i},i.topologicalSort=function(t){var e=[],o=[],n=[];for(var s in t)o[s]||n[s]||i._topologicalSort(s,o,n,t,e);return e},i._topologicalSort=function(t,e,o,n,s){var r=n[t]||[];o[t]=!0;for(var a=0;a<r.length;a+=1){var l=r[a];o[l]||(e[l]||i._topologicalSort(l,e,o,n,s))}o[t]=!1,e[t]=!0,s.push(t)},i.chain=function(){for(var t=[],e=0;e<arguments.length;e+=1){var i=arguments[e];i._chained?t.push.apply(t,i._chained):t.push(i)}var o=function(){for(var e,i=new Array(arguments.length),o=0,n=arguments.length;o<n;o++)i[o]=arguments[o];for(o=0;o<t.length;o+=1){var s=t[o].apply(e,i);void 0!==s&&(e=s)}return e};return o._chained=t,o},i.chainPathBefore=function(t,e,o){return i.set(t,e,i.chain(o,i.get(t,e)))},i.chainPathAfter=function(t,e,o){return i.set(t,e,i.chain(i.get(t,e),o))}}()},264:function(t,e,i){t.exports={Acceleration:i(1440),Angular:i(1441),Bounce:i(1442),Debug:i(1443),Drag:i(1444),Enable:i(1445),Friction:i(1446),Gravity:i(1447),Immovable:i(1448),Mass:i(1449),OverlapCirc:i(552),OverlapRect:i(265),Pushable:i(1450),Size:i(1451),Velocity:i(1452)}},265:function(t,e){t.exports=function(t,e,i,o,n,s,r){void 0===s&&(s=!0),void 0===r&&(r=!1);var a=[],l=[],c=t.treeMinMax;if(c.minX=e,c.minY=i,c.maxX=e+o,c.maxY=i+n,r&&(l=t.staticTree.search(c)),s&&t.useTree)a=t.tree.search(c);else if(s){var h=t.bodies,d={position:{x:e,y:i},left:e,top:i,right:e+o,bottom:i+n,isCircle:!1},u=t.intersects;h.iterate((function(t){u(t,d)&&a.push(t)}))}return l.concat(a)}},266:function(t,e,i){t.exports={COLLIDE:i(1453),OVERLAP:i(1454),PAUSE:i(1455),RESUME:i(1456),TILE_COLLIDE:i(1457),TILE_OVERLAP:i(1458),WORLD_BOUNDS:i(1459),WORLD_STEP:i(1460)}},267:function(t,e,i){var o=i(70);t.exports=function(t,e,i,n){var s=0,r=t.deltaAbsX()+e.deltaAbsX()+n;return 0===t._dx&&0===e._dx?(t.embedded=!0,e.embedded=!0):t._dx>e._dx?(s=t.right-e.x)>r&&!i||!1===t.checkCollision.right||!1===e.checkCollision.left?s=0:(t.touching.none=!1,t.touching.right=!0,e.touching.none=!1,e.touching.left=!0,e.physicsType!==o.STATIC_BODY||i||(t.blocked.none=!1,t.blocked.right=!0),t.physicsType!==o.STATIC_BODY||i||(e.blocked.none=!1,e.blocked.left=!0)):t._dx<e._dx&&(-(s=t.x-e.width-e.x)>r&&!i||!1===t.checkCollision.left||!1===e.checkCollision.right?s=0:(t.touching.none=!1,t.touching.left=!0,e.touching.none=!1,e.touching.right=!0,e.physicsType!==o.STATIC_BODY||i||(t.blocked.none=!1,t.blocked.left=!0),t.physicsType!==o.STATIC_BODY||i||(e.blocked.none=!1,e.blocked.right=!0))),t.overlapX=s,e.overlapX=s,s}},268:function(t,e,i){var o=i(70);t.exports=function(t,e,i,n){var s=0,r=t.deltaAbsY()+e.deltaAbsY()+n;return 0===t._dy&&0===e._dy?(t.embedded=!0,e.embedded=!0):t._dy>e._dy?(s=t.bottom-e.y)>r&&!i||!1===t.checkCollision.down||!1===e.checkCollision.up?s=0:(t.touching.none=!1,t.touching.down=!0,e.touching.none=!1,e.touching.up=!0,e.physicsType!==o.STATIC_BODY||i||(t.blocked.none=!1,t.blocked.down=!0),t.physicsType!==o.STATIC_BODY||i||(e.blocked.none=!1,e.blocked.up=!0)):t._dy<e._dy&&(-(s=t.y-e.bottom)>r&&!i||!1===t.checkCollision.up||!1===e.checkCollision.down?s=0:(t.touching.none=!1,t.touching.up=!0,e.touching.none=!1,e.touching.down=!0,e.physicsType!==o.STATIC_BODY||i||(t.blocked.none=!1,t.blocked.up=!0),t.physicsType!==o.STATIC_BODY||i||(e.blocked.none=!1,e.blocked.down=!0))),t.overlapY=s,e.overlapY=s,s}},269:function(t,e,i){var o=i(28),n=i(6),s=new n,r=new n;t.exports=function(t,e,i,n,a,l,c){var h=c.tilemapLayer.tilemap._convert.WorldToTileXY;h(t,e,!0,s,l,c);var d=s.x,u=s.y;h(t+i,e+n,!1,r,l,c);var p=Math.ceil(r.x),f=Math.ceil(r.y);return o(d,u,p-d,f-u,a,c)}},270:function(t,e){t.exports=function(t,e){return!(e.right<=t.left||e.bottom<=t.top||e.position.x>=t.right||e.position.y>=t.bottom)}},271:function(t,e,i){var o=i(58),n=i(31),s=i(25),r=i(5),a=i(37),l={parseBody:function(t,e,i,o){void 0===o&&(o={});for(var a=r(i,"fixtures",[]),l=[],c=0;c<a.length;c++)for(var h=this.parseFixture(a[c]),d=0;d<h.length;d++)l.push(h[d]);var u=s.clone(i,!0);s.extend(u,o,!0),delete u.fixtures,delete u.type;var p=n.create(u);return n.setParts(p,l),n.setPosition(p,{x:t,y:e}),p},parseFixture:function(t){var e,i=s.extend({},!1,t);if(delete i.circle,delete i.vertices,t.circle){var n=r(t.circle,"x"),a=r(t.circle,"y"),l=r(t.circle,"radius");e=[o.circle(n,a,l,i)]}else t.vertices&&(e=this.parseVertices(t.vertices,i));return e},parseVertices:function(t,e){void 0===e&&(e={});for(var i=[],r=0;r<t.length;r++)a.clockwiseSort(t[r]),i.push(n.create(s.extend({position:a.centre(t[r]),vertices:t[r]},e)));return o.flagCoincidentParts(i)}};t.exports=l},272:function(t,e,i){var o=i(58),n=i(31),s={parseBody:function(t,e,i,s){var r;void 0===s&&(s={});var a=i.vertices;if(1===a.length)s.vertices=a[0],r=n.create(s),o.flagCoincidentParts(r.parts);else{for(var l=[],c=0;c<a.length;c++){var h=n.create({vertices:a[c]});l.push(h)}o.flagCoincidentParts(l),s.parts=l,r=n.create(s)}return r.label=i.label,n.setPosition(r,{x:t,y:e}),r}};t.exports=s},273:function(t,e,i){var o={};t.exports=o;var n=i(79),s=i(90),r=i(25),a=i(31),l=i(58);o.stack=function(t,e,i,o,s,r,l){for(var c,h=n.create({label:"Stack"}),d=t,u=e,p=0,f=0;f<o;f++){for(var y=0,v=0;v<i;v++){var g=l(d,u,v,f,c,p);if(g){var m=g.bounds.max.y-g.bounds.min.y,b=g.bounds.max.x-g.bounds.min.x;m>y&&(y=m),a.translate(g,{x:.5*b,y:.5*m}),d=g.bounds.max.x+s,n.addBody(h,g),c=g,p+=1}else d+=s}u+=y+r,d=t}return h},o.chain=function(t,e,i,o,a,l){for(var c=t.bodies,h=1;h<c.length;h++){var d=c[h-1],u=c[h],p=d.bounds.max.y-d.bounds.min.y,f=d.bounds.max.x-d.bounds.min.x,y=u.bounds.max.y-u.bounds.min.y,v={bodyA:d,pointA:{x:f*e,y:p*i},bodyB:u,pointB:{x:(u.bounds.max.x-u.bounds.min.x)*o,y:y*a}},g=r.extend(v,l);n.addConstraint(t,s.create(g))}return t.label+=" Chain",t},o.mesh=function(t,e,i,o,a){var l,c,h,d,u,p=t.bodies;for(l=0;l<i;l++){for(c=1;c<e;c++)h=p[c-1+l*e],d=p[c+l*e],n.addConstraint(t,s.create(r.extend({bodyA:h,bodyB:d},a)));if(l>0)for(c=0;c<e;c++)h=p[c+(l-1)*e],d=p[c+l*e],n.addConstraint(t,s.create(r.extend({bodyA:h,bodyB:d},a))),o&&c>0&&(u=p[c-1+(l-1)*e],n.addConstraint(t,s.create(r.extend({bodyA:u,bodyB:d},a)))),o&&c<e-1&&(u=p[c+1+(l-1)*e],n.addConstraint(t,s.create(r.extend({bodyA:u,bodyB:d},a))))}return t.label+=" Mesh",t},o.pyramid=function(t,e,i,n,s,r,l){return o.stack(t,e,i,n,s,r,(function(e,o,r,c,h,d){var u=Math.min(n,Math.ceil(i/2)),p=h?h.bounds.max.x-h.bounds.min.x:0;if(!(c>u||r<(c=u-c)||r>i-1-c))return 1===d&&a.translate(h,{x:(r+(i%2==1?1:-1))*p,y:0}),l(t+(h?r*p:0)+r*s,o,r,c,h,d)}))},o.newtonsCradle=function(t,e,i,o,r){for(var a=n.create({label:"Newtons Cradle"}),c=0;c<i;c++){var h=l.circle(t+c*(1.9*o),e+r,o,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),d=s.create({pointA:{x:t+c*(1.9*o),y:e},bodyB:h});n.addBody(a,h),n.addConstraint(a,d)}return a},o.car=function(t,e,i,o,r){var c=a.nextGroup(!0),h=.5*-i+20,d=.5*i-20,u=n.create({label:"Car"}),p=l.rectangle(t,e,i,o,{collisionFilter:{group:c},chamfer:{radius:.5*o},density:2e-4}),f=l.circle(t+h,e+0,r,{collisionFilter:{group:c},friction:.8}),y=l.circle(t+d,e+0,r,{collisionFilter:{group:c},friction:.8}),v=s.create({bodyB:p,pointB:{x:h,y:0},bodyA:f,stiffness:1,length:0}),g=s.create({bodyB:p,pointB:{x:d,y:0},bodyA:y,stiffness:1,length:0});return n.addBody(u,p),n.addBody(u,f),n.addBody(u,y),n.addConstraint(u,v),n.addConstraint(u,g),u},o.softBody=function(t,e,i,n,s,a,c,h,d,u){d=r.extend({inertia:1/0},d),u=r.extend({stiffness:.2,render:{type:"line",anchors:!1}},u);var p=o.stack(t,e,i,n,s,a,(function(t,e){return l.circle(t,e,h,d)}));return o.mesh(p,i,n,c,u),p.label="Soft Body",p}},274:function(t,e,i){var o={};t.exports=o;i(47);var n=i(25);o.pathToVertices=function(t,e){"undefined"==typeof window||"SVGPathSeg"in window||n.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var i,s,r,a,l,c,h,d,u,p,f,y=[],v=0,g=0,m=0;e=e||15;var b=function(t,e,i){var o=i%2==1&&i>1;if(!u||t!=u.x||e!=u.y){u&&o?(p=u.x,f=u.y):(p=0,f=0);var n={x:p+t,y:f+e};!o&&u||(u=n),y.push(n),g=p+t,m=f+e}},x=function(t){var e=t.pathSegTypeAsLetter.toUpperCase();if("Z"!==e){switch(e){case"M":case"L":case"T":case"C":case"S":case"Q":g=t.x,m=t.y;break;case"H":g=t.x;break;case"V":m=t.y}b(g,m,t.pathSegType)}};for(o._svgPathToAbsolute(t),r=t.getTotalLength(),c=[],i=0;i<t.pathSegList.numberOfItems;i+=1)c.push(t.pathSegList.getItem(i));for(h=c.concat();v<r;){if((l=c[t.getPathSegAtLength(v)])!=d){for(;h.length&&h[0]!=l;)x(h.shift());d=l}switch(l.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":a=t.getPointAtLength(v),b(a.x,a.y,0)}v+=e}for(i=0,s=h.length;i<s;++i)x(h[i]);return y},o._svgPathToAbsolute=function(t){for(var e,i,o,n,s,r,a=t.pathSegList,l=0,c=0,h=a.numberOfItems,d=0;d<h;++d){var u=a.getItem(d),p=u.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(p))"x"in u&&(l=u.x),"y"in u&&(c=u.y);else switch("x1"in u&&(o=l+u.x1),"x2"in u&&(s=l+u.x2),"y1"in u&&(n=c+u.y1),"y2"in u&&(r=c+u.y2),"x"in u&&(l+=u.x),"y"in u&&(c+=u.y),p){case"m":a.replaceItem(t.createSVGPathSegMovetoAbs(l,c),d);break;case"l":a.replaceItem(t.createSVGPathSegLinetoAbs(l,c),d);break;case"h":a.replaceItem(t.createSVGPathSegLinetoHorizontalAbs(l),d);break;case"v":a.replaceItem(t.createSVGPathSegLinetoVerticalAbs(c),d);break;case"c":a.replaceItem(t.createSVGPathSegCurvetoCubicAbs(l,c,o,n,s,r),d);break;case"s":a.replaceItem(t.createSVGPathSegCurvetoCubicSmoothAbs(l,c,s,r),d);break;case"q":a.replaceItem(t.createSVGPathSegCurvetoQuadraticAbs(l,c,o,n),d);break;case"t":a.replaceItem(t.createSVGPathSegCurvetoQuadraticSmoothAbs(l,c),d);break;case"a":a.replaceItem(t.createSVGPathSegArcAbs(l,c,u.r1,u.r2,u.angle,u.largeArcFlag,u.sweepFlag),d);break;case"z":case"Z":l=e,c=i}"M"!=p&&"m"!=p||(e=l,i=c)}}},275:function(t,e,i){var o=i(58),n=i(31),s=i(3),r=i(131),a=i(12),l=i(5),c=i(127),h=i(37),d=new s({Extends:a,Mixins:[r.Bounce,r.Collision,r.Friction,r.Gravity,r.Mass,r.Sensor,r.Sleep,r.Static],initialize:function(t,e,i){a.call(this),this.tile=e,this.world=t,e.physics.matterBody&&e.physics.matterBody.destroy(),e.physics.matterBody=this;var o=l(i,"body",null),n=l(i,"addToWorld",!0);if(o)this.setBody(o,n);else{var s=e.getCollisionGroup();l(s,"objects",[]).length>0?this.setFromTileCollision(i):this.setFromTileRectangle(i)}},setFromTileRectangle:function(t){void 0===t&&(t={}),c(t,"isStatic")||(t.isStatic=!0),c(t,"addToWorld")||(t.addToWorld=!0);var e=this.tile.getBounds(),i=e.x+e.width/2,n=e.y+e.height/2,s=o.rectangle(i,n,e.width,e.height,t);return this.setBody(s,t.addToWorld),this},setFromTileCollision:function(t){void 0===t&&(t={}),c(t,"isStatic")||(t.isStatic=!0),c(t,"addToWorld")||(t.addToWorld=!0);for(var e=this.tile.tilemapLayer.scaleX,i=this.tile.tilemapLayer.scaleY,s=this.tile.getLeft(),r=this.tile.getTop(),a=this.tile.getCollisionGroup(),d=l(a,"objects",[]),u=[],p=0;p<d.length;p++){var f=d[p],y=s+f.x*e,v=r+f.y*i,g=f.width*e,m=f.height*i,b=null;if(f.rectangle)b=o.rectangle(y+g/2,v+m/2,g,m,t);else if(f.ellipse)b=o.circle(y+g/2,v+m/2,g/2,t);else if(f.polygon||f.polyline){var x=(f.polygon?f.polygon:f.polyline).map((function(t){return{x:t.x*e,y:t.y*i}})),C=h.create(x),w=h.centre(C);y+=w.x,v+=w.y,b=o.fromVertices(y,v,C,t)}b&&u.push(b)}return 1===u.length?this.setBody(u[0],t.addToWorld):u.length>1&&(t.parts=u,this.setBody(n.create(t),t.addToWorld)),this},setBody:function(t,e){return void 0===e&&(e=!0),this.body&&this.removeBody(),this.body=t,this.body.gameObject=this,e&&this.world.add(this.body),this},removeBody:function(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function(){this.removeBody(),this.tile.physics.matterBody=void 0,this.removeAllListeners()}});t.exports=d},276:function(t,e,i){var o=i(574);o.Body=i(31),o.Composite=i(79),o.World=i(278),o.Detector=i(173),o.Grid=i(279),o.Pairs=i(280),o.Pair=i(132),o.Query=i(575),o.Resolver=i(281),o.SAT=i(174),o.Constraint=i(90),o.Common=i(25),o.Engine=i(576),o.Events=i(104),o.Sleeping=i(103),o.Plugin=i(277),o.Bodies=i(58),o.Composites=i(273),o.Axes=i(171),o.Bounds=i(47),o.Svg=i(274),o.Vector=i(46),o.Vertices=i(37),o.World.add=o.Composite.add,o.World.remove=o.Composite.remove,o.World.addComposite=o.Composite.addComposite,o.World.addBody=o.Composite.addBody,o.World.addConstraint=o.Composite.addConstraint,o.World.clear=o.Composite.clear,t.exports=o},277:function(t,e,i){var o={};t.exports=o;var n=i(25);o._registry={},o.register=function(t){if(o.isPlugin(t)||n.warn("Plugin.register:",o.toString(t),"does not implement all required fields."),t.name in o._registry){var e=o._registry[t.name],i=o.versionParse(t.version).number,s=o.versionParse(e.version).number;i>s?(n.warn("Plugin.register:",o.toString(e),"was upgraded to",o.toString(t)),o._registry[t.name]=t):i<s?n.warn("Plugin.register:",o.toString(e),"can not be downgraded to",o.toString(t)):t!==e&&n.warn("Plugin.register:",o.toString(t),"is already registered to different plugin object")}else o._registry[t.name]=t;return t},o.resolve=function(t){return o._registry[o.dependencyParse(t).name]},o.toString=function(t){return"string"==typeof t?t:(t.name||"anonymous")+"@"+(t.version||t.range||"0.0.0")},o.isPlugin=function(t){return t&&t.name&&t.version&&t.install},o.isUsed=function(t,e){return t.used.indexOf(e)>-1},o.isFor=function(t,e){var i=t.for&&o.dependencyParse(t.for);return!t.for||e.name===i.name&&o.versionSatisfies(e.version,i.range)},o.use=function(t,e){if(t.uses=(t.uses||[]).concat(e||[]),0!==t.uses.length){for(var i=o.dependencies(t),s=n.topologicalSort(i),r=[],a=0;a<s.length;a+=1)if(s[a]!==t.name){var l=o.resolve(s[a]);l?o.isUsed(t,l.name)||(o.isFor(l,t)||(n.warn("Plugin.use:",o.toString(l),"is for",l.for,"but installed on",o.toString(t)+"."),l._warned=!0),l.install?l.install(t):(n.warn("Plugin.use:",o.toString(l),"does not specify an install function."),l._warned=!0),l._warned?(r.push("🔶 "+o.toString(l)),delete l._warned):r.push("✅ "+o.toString(l)),t.used.push(l.name)):r.push("❌ "+s[a])}r.length>0&&!l.silent&&n.info(r.join("  "))}else n.warn("Plugin.use:",o.toString(t),"does not specify any dependencies to install.")},o.dependencies=function(t,e){var i=o.dependencyParse(t),s=i.name;if(!(s in(e=e||{}))){t=o.resolve(t)||t,e[s]=n.map(t.uses||[],(function(e){o.isPlugin(e)&&o.register(e);var s=o.dependencyParse(e),r=o.resolve(e);return r&&!o.versionSatisfies(r.version,s.range)?(n.warn("Plugin.dependencies:",o.toString(r),"does not satisfy",o.toString(s),"used by",o.toString(i)+"."),r._warned=!0,t._warned=!0):r||(n.warn("Plugin.dependencies:",o.toString(e),"used by",o.toString(i),"could not be resolved."),t._warned=!0),s.name}));for(var r=0;r<e[s].length;r+=1)o.dependencies(e[s][r],e);return e}},o.dependencyParse=function(t){return n.isString(t)?(/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?))?$/.test(t)||n.warn("Plugin.dependencyParse:",t,"is not a valid dependency string."),{name:t.split("@")[0],range:t.split("@")[1]||"*"}):{name:t.name,range:t.range||t.version}},o.versionParse=function(t){/^\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?$/.test(t)||n.warn("Plugin.versionParse:",t,"is not a valid version or range.");var e=t.split("-");t=e[0];var i=isNaN(Number(t[0])),o=i?t.substr(1):t,s=n.map(o.split("."),(function(t){return Number(t)}));return{isRange:i,version:o,range:t,operator:i?t[0]:"",parts:s,prerelease:e[1],number:1e8*s[0]+1e4*s[1]+s[2]}},o.versionSatisfies=function(t,e){e=e||"*";var i=o.versionParse(e),n=i.parts,s=o.versionParse(t),r=s.parts;if(i.isRange){if("*"===i.operator||"*"===t)return!0;if("~"===i.operator)return r[0]===n[0]&&r[1]===n[1]&&r[2]>=n[2];if("^"===i.operator)return n[0]>0?r[0]===n[0]&&s.number>=i.number:n[1]>0?r[1]===n[1]&&r[2]>=n[2]:r[2]===n[2]}return t===e||"*"===t}},278:function(t,e,i){var o={};t.exports=o;var n=i(79),s=(i(90),i(25));o.create=function(t){var e=n.create(),i={label:"World",gravity:{x:0,y:1,scale:.001},bounds:{min:{x:-1/0,y:-1/0},max:{x:1/0,y:1/0}}};return s.extend(e,i,t)}},279:function(t,e,i){var o={};t.exports=o;var n=i(132),s=i(173),r=i(25);o.create=function(t){var e={controller:o,detector:s.collisions,buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return r.extend(e,t)},o.update=function(t,e,i,n){var s,r,a,l,c,h=i.world,d=t.buckets,u=!1,p=i.metrics;for(p.broadphaseTests=0,s=0;s<e.length;s++){var f=e[s];if((!f.isSleeping||n)&&!(f.bounds.max.x<h.bounds.min.x||f.bounds.min.x>h.bounds.max.x||f.bounds.max.y<h.bounds.min.y||f.bounds.min.y>h.bounds.max.y)){var y=o._getRegion(t,f);if(!f.region||y.id!==f.region.id||n){p.broadphaseTests+=1,f.region&&!n||(f.region=y);var v=o._regionUnion(y,f.region);for(r=v.startCol;r<=v.endCol;r++)for(a=v.startRow;a<=v.endRow;a++){l=d[c=o._getBucketId(r,a)];var g=r>=y.startCol&&r<=y.endCol&&a>=y.startRow&&a<=y.endRow,m=r>=f.region.startCol&&r<=f.region.endCol&&a>=f.region.startRow&&a<=f.region.endRow;!g&&m&&m&&l&&o._bucketRemoveBody(t,l,f),(f.region===y||g&&!m||n)&&(l||(l=o._createBucket(d,c)),o._bucketAddBody(t,l,f))}f.region=y,u=!0}}}u&&(t.pairsList=o._createActivePairsList(t))},o.clear=function(t){t.buckets={},t.pairs={},t.pairsList=[]},o._regionUnion=function(t,e){var i=Math.min(t.startCol,e.startCol),n=Math.max(t.endCol,e.endCol),s=Math.min(t.startRow,e.startRow),r=Math.max(t.endRow,e.endRow);return o._createRegion(i,n,s,r)},o._getRegion=function(t,e){var i=e.bounds,n=Math.floor(i.min.x/t.bucketWidth),s=Math.floor(i.max.x/t.bucketWidth),r=Math.floor(i.min.y/t.bucketHeight),a=Math.floor(i.max.y/t.bucketHeight);return o._createRegion(n,s,r,a)},o._createRegion=function(t,e,i,o){return{id:t+","+e+","+i+","+o,startCol:t,endCol:e,startRow:i,endRow:o}},o._getBucketId=function(t,e){return"C"+t+"R"+e},o._createBucket=function(t,e){return t[e]=[]},o._bucketAddBody=function(t,e,i){for(var o=0;o<e.length;o++){var s=e[o];if(!(i.id===s.id||i.isStatic&&s.isStatic)){var r=n.id(i,s),a=t.pairs[r];a?a[2]+=1:t.pairs[r]=[i,s,1]}}e.push(i)},o._bucketRemoveBody=function(t,e,i){e.splice(e.indexOf(i),1);for(var o=0;o<e.length;o++){var s=e[o],r=n.id(i,s),a=t.pairs[r];a&&(a[2]-=1)}},o._createActivePairsList=function(t){var e,i,o=[];e=r.keys(t.pairs);for(var n=0;n<e.length;n++)(i=t.pairs[e[n]])[2]>0?o.push(i):delete t.pairs[e[n]];return o}},28:function(t,e,i){var o=i(5);t.exports=function(t,e,i,n,s,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=r.width),void 0===n&&(n=r.height),s||(s={});var a=o(s,"isNotEmpty",!1),l=o(s,"isColliding",!1),c=o(s,"hasInterestingFace",!1);t<0&&(i+=t,t=0),e<0&&(n+=e,e=0),t+i>r.width&&(i=Math.max(r.width-t,0)),e+n>r.height&&(n=Math.max(r.height-e,0));for(var h=[],d=e;d<e+n;d++)for(var u=t;u<t+i;u++){var p=r.data[d][u];if(null!==p){if(a&&-1===p.index)continue;if(l&&!p.collides)continue;if(c&&!p.hasInterestingFace)continue;h.push(p)}}return h}},280:function(t,e,i){var o={};t.exports=o;var n=i(132),s=i(25);o._pairMaxIdleLife=1e3,o.create=function(t){return s.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},t)},o.update=function(t,e,i){var o,s,r,a,l=t.list,c=t.table,h=t.collisionStart,d=t.collisionEnd,u=t.collisionActive;for(h.length=0,d.length=0,u.length=0,a=0;a<l.length;a++)l[a].confirmedActive=!1;for(a=0;a<e.length;a++)(o=e[a]).collided&&((r=c[s=n.id(o.bodyA,o.bodyB)])?(r.isActive?u.push(r):h.push(r),n.update(r,o,i),r.confirmedActive=!0):(r=n.create(o,i),c[s]=r,h.push(r),l.push(r)));for(a=0;a<l.length;a++)(r=l[a]).isActive&&!r.confirmedActive&&(n.setActive(r,!1,i),d.push(r))},o.removeOld=function(t,e){var i,n,s,r,a=t.list,l=t.table,c=[];for(r=0;r<a.length;r++)(n=(i=a[r]).collision).bodyA.isSleeping||n.bodyB.isSleeping?i.timeUpdated=e:e-i.timeUpdated>o._pairMaxIdleLife&&c.push(r);for(r=0;r<c.length;r++)delete l[(i=a[s=c[r]-r]).id],a.splice(s,1)},o.clear=function(t){return t.table={},t.list.length=0,t.collisionStart.length=0,t.collisionActive.length=0,t.collisionEnd.length=0,t}},281:function(t,e,i){var o={};t.exports=o;var n=i(37),s=i(46),r=i(25),a=i(47);o._restingThresh=4,o._restingThreshTangent=6,o._positionDampen=.9,o._positionWarming=.8,o._frictionNormalMultiplier=5,o.preSolvePosition=function(t){var e,i,o;for(e=0;e<t.length;e++)(i=t[e]).isActive&&(o=i.activeContacts.length,i.collision.parentA.totalContacts+=o,i.collision.parentB.totalContacts+=o)},o.solvePosition=function(t,e,i){var n,s,r,a,l,c,h,d,u,p,f,y,v,g,m,b,x=i*o._positionDampen;for(n=0;n<e.length;n++){var C=e[n];C.previousPositionImpulse.x=C.positionImpulse.x,C.previousPositionImpulse.y=C.positionImpulse.y}for(n=0;n<t.length;n++)(a=t[n]).isActive&&!a.isSensor&&(c=(l=a.collision).parentA,h=l.parentB,d=l.normal,f=c.previousPositionImpulse,y=h.previousPositionImpulse,p=l.penetration,g=y.x-f.x+p.x,m=y.y-f.y+p.y,u=(s=d.x)*g+(r=d.y)*m,a.separation=u,b=(u-a.slop)*x,(c.isStatic||h.isStatic)&&(b*=2),c.isStatic||c.isSleeping||(v=b/c.totalContacts,c.positionImpulse.x+=s*v,c.positionImpulse.y+=r*v),h.isStatic||h.isSleeping||(v=b/h.totalContacts,h.positionImpulse.x-=s*v,h.positionImpulse.y-=r*v))},o.postSolvePosition=function(t){for(var e=0;e<t.length;e++){var i=t[e];if(i.totalContacts=0,0!==i.positionImpulse.x||0!==i.positionImpulse.y){for(var r=0;r<i.parts.length;r++){var l=i.parts[r];n.translate(l.vertices,i.positionImpulse),a.update(l.bounds,l.vertices,i.velocity),l.position.x+=i.positionImpulse.x,l.position.y+=i.positionImpulse.y}i.positionPrev.x+=i.positionImpulse.x,i.positionPrev.y+=i.positionImpulse.y,s.dot(i.positionImpulse,i.velocity)<0?(i.positionImpulse.x=0,i.positionImpulse.y=0):(i.positionImpulse.x*=o._positionWarming,i.positionImpulse.y*=o._positionWarming)}}},o.preSolveVelocity=function(t){var e,i,o,n,r,a,l,c,h,d,u,p,f,y,v=s._temp[0],g=s._temp[1];for(e=0;e<t.length;e++)if((o=t[e]).isActive&&!o.isSensor)for(n=o.activeContacts,a=(r=o.collision).parentA,l=r.parentB,c=r.normal,h=r.tangent,i=0;i<n.length;i++)u=(d=n[i]).vertex,p=d.normalImpulse,f=d.tangentImpulse,0===p&&0===f||(v.x=c.x*p+h.x*f,v.y=c.y*p+h.y*f,a.isStatic||a.isSleeping||(y=s.sub(u,a.position,g),a.positionPrev.x+=v.x*a.inverseMass,a.positionPrev.y+=v.y*a.inverseMass,a.anglePrev+=s.cross(y,v)*a.inverseInertia),l.isStatic||l.isSleeping||(y=s.sub(u,l.position,g),l.positionPrev.x-=v.x*l.inverseMass,l.positionPrev.y-=v.y*l.inverseMass,l.anglePrev-=s.cross(y,v)*l.inverseInertia))},o.solveVelocity=function(t,e){for(var i=e*e,n=s._temp[0],a=s._temp[1],l=s._temp[2],c=s._temp[3],h=s._temp[4],d=s._temp[5],u=0;u<t.length;u++){var p=t[u];if(p.isActive&&!p.isSensor){var f=p.collision,y=f.parentA,v=f.parentB,g=f.normal,m=f.tangent,b=p.activeContacts,x=1/b.length;y.velocity.x=y.position.x-y.positionPrev.x,y.velocity.y=y.position.y-y.positionPrev.y,v.velocity.x=v.position.x-v.positionPrev.x,v.velocity.y=v.position.y-v.positionPrev.y,y.angularVelocity=y.angle-y.anglePrev,v.angularVelocity=v.angle-v.anglePrev;for(var C=0;C<b.length;C++){var w=b[C],S=w.vertex,B=s.sub(S,y.position,a),A=s.sub(S,v.position,l),_=s.add(y.velocity,s.mult(s.perp(B),y.angularVelocity),c),T=s.add(v.velocity,s.mult(s.perp(A),v.angularVelocity),h),O=s.sub(_,T,d),M=s.dot(g,O),P=s.dot(m,O),k=Math.abs(P),E=r.sign(P),I=(1+p.restitution)*M,D=r.clamp(p.separation+M,0,1)*o._frictionNormalMultiplier,V=P,R=1/0;k>p.friction*p.frictionStatic*D*i&&(R=k,V=r.clamp(p.friction*E*i,-R,R));var Y=s.cross(B,g),L=s.cross(A,g),F=x/(y.inverseMass+v.inverseMass+y.inverseInertia*Y*Y+v.inverseInertia*L*L);if(I*=F,V*=F,M<0&&M*M>o._restingThresh*i)w.normalImpulse=0;else{var W=w.normalImpulse;w.normalImpulse=Math.min(w.normalImpulse+I,0),I=w.normalImpulse-W}if(P*P>o._restingThreshTangent*i)w.tangentImpulse=0;else{var X=w.tangentImpulse;w.tangentImpulse=r.clamp(w.tangentImpulse+V,-R,R),V=w.tangentImpulse-X}n.x=g.x*I+m.x*V,n.y=g.y*I+m.y*V,y.isStatic||y.isSleeping||(y.positionPrev.x+=n.x*y.inverseMass,y.positionPrev.y+=n.y*y.inverseMass,y.anglePrev+=s.cross(B,n)*y.inverseInertia),v.isStatic||v.isSleeping||(v.positionPrev.x-=n.x*v.inverseMass,v.positionPrev.y-=n.y*v.inverseMass,v.anglePrev-=s.cross(A,n)*v.inverseInertia)}}}}},31:function(t,e,i){var o={};t.exports=o;var n=i(37),s=i(46),r=i(103),a=i(25),l=i(47),c=i(171);!function(){o._inertiaScale=4,o._nextCollidingGroupId=1,o._nextNonCollidingGroupId=-1,o._nextCategory=1,o.create=function(e){var i={id:a.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},previousPositionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!e.hasOwnProperty("position")&&e.hasOwnProperty("vertices")?e.position=n.centre(e.vertices):e.hasOwnProperty("vertices")||(i.vertices=n.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var o=a.extend(i,e);return t(o,e),o.setOnCollideWith=function(t,e){return e?this.onCollideWith[t.id]=e:delete this.onCollideWith[t.id],this},o},o.nextGroup=function(t){return t?o._nextNonCollidingGroupId--:o._nextCollidingGroupId++},o.nextCategory=function(){return o._nextCategory=o._nextCategory<<1,o._nextCategory};var t=function(t,e){e=e||{},o.set(t,{bounds:t.bounds||l.create(t.vertices),positionPrev:t.positionPrev||s.clone(t.position),anglePrev:t.anglePrev||t.angle,vertices:t.vertices,parts:t.parts||[t],isStatic:t.isStatic,isSleeping:t.isSleeping,parent:t.parent||t});var i=t.bounds;if(n.rotate(t.vertices,t.angle,t.position),c.rotate(t.axes,t.angle),l.update(i,t.vertices,t.velocity),o.set(t,{axes:e.axes||t.axes,area:e.area||t.area,mass:e.mass||t.mass,inertia:e.inertia||t.inertia}),1===t.parts.length){var r=t.centerOfMass,a=t.centerOffset,h=i.max.x-i.min.x,d=i.max.y-i.min.y;r.x=-(i.min.x-t.position.x)/h,r.y=-(i.min.y-t.position.y)/d,a.x=h*r.x,a.y=d*r.y}};o.set=function(t,e,i){var n;for(n in"string"==typeof e&&(n=e,(e={})[n]=i),e)if(Object.prototype.hasOwnProperty.call(e,n))switch(i=e[n],n){case"isStatic":o.setStatic(t,i);break;case"isSleeping":r.set(t,i);break;case"mass":o.setMass(t,i);break;case"density":o.setDensity(t,i);break;case"inertia":o.setInertia(t,i);break;case"vertices":o.setVertices(t,i);break;case"position":o.setPosition(t,i);break;case"angle":o.setAngle(t,i);break;case"velocity":o.setVelocity(t,i);break;case"angularVelocity":o.setAngularVelocity(t,i);break;case"parts":o.setParts(t,i);break;case"centre":o.setCentre(t,i);break;default:t[n]=i}},o.setStatic=function(t,e){for(var i=0;i<t.parts.length;i++){var o=t.parts[i];o.isStatic=e,e?(o._original={restitution:o.restitution,friction:o.friction,mass:o.mass,inertia:o.inertia,density:o.density,inverseMass:o.inverseMass,inverseInertia:o.inverseInertia},o.restitution=0,o.friction=1,o.mass=o.inertia=o.density=1/0,o.inverseMass=o.inverseInertia=0,o.positionPrev.x=o.position.x,o.positionPrev.y=o.position.y,o.anglePrev=o.angle,o.angularVelocity=0,o.speed=0,o.angularSpeed=0,o.motion=0):o._original&&(o.restitution=o._original.restitution,o.friction=o._original.friction,o.mass=o._original.mass,o.inertia=o._original.inertia,o.density=o._original.density,o.inverseMass=o._original.inverseMass,o.inverseInertia=o._original.inverseInertia,o._original=null)}},o.setMass=function(t,e){var i=t.inertia/(t.mass/6);t.inertia=i*(e/6),t.inverseInertia=1/t.inertia,t.mass=e,t.inverseMass=1/t.mass,t.density=t.mass/t.area},o.setDensity=function(t,e){o.setMass(t,e*t.area),t.density=e},o.setInertia=function(t,e){t.inertia=e,t.inverseInertia=1/t.inertia},o.setVertices=function(t,e){e[0].body===t?t.vertices=e:t.vertices=n.create(e,t),t.axes=c.fromVertices(t.vertices),t.area=n.area(t.vertices),o.setMass(t,t.density*t.area);var i=n.centre(t.vertices);n.translate(t.vertices,i,-1),o.setInertia(t,o._inertiaScale*n.inertia(t.vertices,t.mass)),n.translate(t.vertices,t.position),l.update(t.bounds,t.vertices,t.velocity)},o.setParts=function(t,e,i){var s;for(e=e.slice(0),t.parts.length=0,t.parts.push(t),t.parent=t,s=0;s<e.length;s++){var r=e[s];r!==t&&(r.parent=t,t.parts.push(r))}if(1!==t.parts.length){if(i=void 0===i||i){var a=[];for(s=0;s<e.length;s++)a=a.concat(e[s].vertices);n.clockwiseSort(a);var c=n.hull(a),h=n.centre(c);o.setVertices(t,c),n.translate(t.vertices,h)}var d=o._totalProperties(t),u=d.centre.x,p=d.centre.y,f=t.bounds,y=t.centerOfMass,v=t.centerOffset;l.update(f,t.vertices,t.velocity),y.x=-(f.min.x-u)/(f.max.x-f.min.x),y.y=-(f.min.y-p)/(f.max.y-f.min.y),v.x=u,v.y=p,t.area=d.area,t.parent=t,t.position.x=u,t.position.y=p,t.positionPrev.x=u,t.positionPrev.y=p,o.setMass(t,d.mass),o.setInertia(t,d.inertia),o.setPosition(t,d.centre)}},o.setCentre=function(t,e,i){i?(t.positionPrev.x+=e.x,t.positionPrev.y+=e.y,t.position.x+=e.x,t.position.y+=e.y):(t.positionPrev.x=e.x-(t.position.x-t.positionPrev.x),t.positionPrev.y=e.y-(t.position.y-t.positionPrev.y),t.position.x=e.x,t.position.y=e.y)},o.setPosition=function(t,e){var i=s.sub(e,t.position);t.positionPrev.x+=i.x,t.positionPrev.y+=i.y;for(var o=0;o<t.parts.length;o++){var r=t.parts[o];r.position.x+=i.x,r.position.y+=i.y,n.translate(r.vertices,i),l.update(r.bounds,r.vertices,t.velocity)}},o.setAngle=function(t,e){var i=e-t.angle;t.anglePrev+=i;for(var o=0;o<t.parts.length;o++){var r=t.parts[o];r.angle+=i,n.rotate(r.vertices,i,t.position),c.rotate(r.axes,i),l.update(r.bounds,r.vertices,t.velocity),o>0&&s.rotateAbout(r.position,i,t.position,r.position)}},o.setVelocity=function(t,e){t.positionPrev.x=t.position.x-e.x,t.positionPrev.y=t.position.y-e.y,t.velocity.x=e.x,t.velocity.y=e.y,t.speed=s.magnitude(t.velocity)},o.setAngularVelocity=function(t,e){t.anglePrev=t.angle-e,t.angularVelocity=e,t.angularSpeed=Math.abs(t.angularVelocity)},o.translate=function(t,e){o.setPosition(t,s.add(t.position,e))},o.rotate=function(t,e,i){if(i){var n=Math.cos(e),s=Math.sin(e),r=t.position.x-i.x,a=t.position.y-i.y;o.setPosition(t,{x:i.x+(r*n-a*s),y:i.y+(r*s+a*n)}),o.setAngle(t,t.angle+e)}else o.setAngle(t,t.angle+e)},o.scale=function(t,e,i,s){var r=0,a=0;s=s||t.position;for(var h=0;h<t.parts.length;h++){var d=t.parts[h];d.scale.x=e,d.scale.y=i,n.scale(d.vertices,e,i,s),d.axes=c.fromVertices(d.vertices),d.area=n.area(d.vertices),o.setMass(d,t.density*d.area),n.translate(d.vertices,{x:-d.position.x,y:-d.position.y}),o.setInertia(d,o._inertiaScale*n.inertia(d.vertices,d.mass)),n.translate(d.vertices,{x:d.position.x,y:d.position.y}),h>0&&(r+=d.area,a+=d.inertia),d.position.x=s.x+(d.position.x-s.x)*e,d.position.y=s.y+(d.position.y-s.y)*i,l.update(d.bounds,d.vertices,t.velocity)}t.parts.length>1&&(t.area=r,t.isStatic||(o.setMass(t,t.density*r),o.setInertia(t,a))),t.circleRadius&&(e===i?t.circleRadius*=e:t.circleRadius=null)},o.update=function(t,e,i,o){var r=Math.pow(e*i*t.timeScale,2),a=1-t.frictionAir*i*t.timeScale,h=t.position.x-t.positionPrev.x,d=t.position.y-t.positionPrev.y;t.velocity.x=h*a*o+t.force.x/t.mass*r,t.velocity.y=d*a*o+t.force.y/t.mass*r,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.position.x+=t.velocity.x,t.position.y+=t.velocity.y,t.angularVelocity=(t.angle-t.anglePrev)*a*o+t.torque/t.inertia*r,t.anglePrev=t.angle,t.angle+=t.angularVelocity,t.speed=s.magnitude(t.velocity),t.angularSpeed=Math.abs(t.angularVelocity);for(var u=0;u<t.parts.length;u++){var p=t.parts[u];n.translate(p.vertices,t.velocity),u>0&&(p.position.x+=t.velocity.x,p.position.y+=t.velocity.y),0!==t.angularVelocity&&(n.rotate(p.vertices,t.angularVelocity,t.position),c.rotate(p.axes,t.angularVelocity),u>0&&s.rotateAbout(p.position,t.angularVelocity,t.position,p.position)),l.update(p.bounds,p.vertices,t.velocity)}},o.applyForce=function(t,e,i){t.force.x+=i.x,t.force.y+=i.y;var o=e.x-t.position.x,n=e.y-t.position.y;t.torque+=o*i.y-n*i.x},o._totalProperties=function(t){for(var e={mass:0,area:0,inertia:0,centre:{x:0,y:0}},i=1===t.parts.length?0:1;i<t.parts.length;i++){var o=t.parts[i],n=o.mass!==1/0?o.mass:1;e.mass+=n,e.area+=o.area,e.inertia+=o.inertia,e.centre=s.add(e.centre,s.mult(o.position,n))}return e.centre=s.div(e.centre,e.mass),e}}()},37:function(t,e,i){var o={};t.exports=o;var n=i(46),s=i(25);o.create=function(t,e){for(var i=[],o=0;o<t.length;o++){var n=t[o],s={x:n.x,y:n.y,index:o,body:e,isInternal:!1,contact:null,offset:null};s.contact={vertex:s,normalImpulse:0,tangentImpulse:0},i.push(s)}return i},o.fromPath=function(t,e){var i=[];return t.replace(/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/gi,(function(t,e,o){i.push({x:parseFloat(e),y:parseFloat(o)})})),o.create(i,e)},o.centre=function(t){for(var e,i,s,r=o.area(t,!0),a={x:0,y:0},l=0;l<t.length;l++)s=(l+1)%t.length,e=n.cross(t[l],t[s]),i=n.mult(n.add(t[l],t[s]),e),a=n.add(a,i);return n.div(a,6*r)},o.mean=function(t){for(var e={x:0,y:0},i=0;i<t.length;i++)e.x+=t[i].x,e.y+=t[i].y;return n.div(e,t.length)},o.area=function(t,e){for(var i=0,o=t.length-1,n=0;n<t.length;n++)i+=(t[o].x-t[n].x)*(t[o].y+t[n].y),o=n;return e?i/2:Math.abs(i)/2},o.inertia=function(t,e){for(var i,o,s=0,r=0,a=t,l=0;l<a.length;l++)o=(l+1)%a.length,s+=(i=Math.abs(n.cross(a[o],a[l])))*(n.dot(a[o],a[o])+n.dot(a[o],a[l])+n.dot(a[l],a[l])),r+=i;return e/6*(s/r)},o.translate=function(t,e,i){var o;if(i)for(o=0;o<t.length;o++)t[o].x+=e.x*i,t[o].y+=e.y*i;else for(o=0;o<t.length;o++)t[o].x+=e.x,t[o].y+=e.y;return t},o.rotate=function(t,e,i){if(0!==e){for(var o=Math.cos(e),n=Math.sin(e),s=0;s<t.length;s++){var r=t[s],a=r.x-i.x,l=r.y-i.y;r.x=i.x+(a*o-l*n),r.y=i.y+(a*n+l*o)}return t}},o.contains=function(t,e){for(var i=0;i<t.length;i++){var o=t[i],n=t[(i+1)%t.length];if((e.x-o.x)*(n.y-o.y)+(e.y-o.y)*(o.x-n.x)>0)return!1}return!0},o.scale=function(t,e,i,s){if(1===e&&1===i)return t;var r,a;s=s||o.centre(t);for(var l=0;l<t.length;l++)r=t[l],a=n.sub(r,s),t[l].x=s.x+a.x*e,t[l].y=s.y+a.y*i;return t},o.chamfer=function(t,e,i,o,r){e="number"==typeof e?[e]:e||[8],i=void 0!==i?i:-1,o=o||2,r=r||14;for(var a=[],l=0;l<t.length;l++){var c=t[l-1>=0?l-1:t.length-1],h=t[l],d=t[(l+1)%t.length],u=e[l<e.length?l:e.length-1];if(0!==u){var p=n.normalise({x:h.y-c.y,y:c.x-h.x}),f=n.normalise({x:d.y-h.y,y:h.x-d.x}),y=Math.sqrt(2*Math.pow(u,2)),v=n.mult(s.clone(p),u),g=n.normalise(n.mult(n.add(p,f),.5)),m=n.sub(h,n.mult(g,y)),b=i;-1===i&&(b=1.75*Math.pow(u,.32)),(b=s.clamp(b,o,r))%2==1&&(b+=1);for(var x=Math.acos(n.dot(p,f))/b,C=0;C<b;C++)a.push(n.add(n.rotate(v,x*C),m))}else a.push(h)}return a},o.clockwiseSort=function(t){var e=o.mean(t);return t.sort((function(t,i){return n.angle(e,t)-n.angle(e,i)})),t},o.isConvex=function(t){var e,i,o,n,s=0,r=t.length;if(r<3)return null;for(e=0;e<r;e++)if(o=(e+2)%r,n=(t[i=(e+1)%r].x-t[e].x)*(t[o].y-t[i].y),(n-=(t[i].y-t[e].y)*(t[o].x-t[i].x))<0?s|=1:n>0&&(s|=2),3===s)return!1;return 0!==s||null},o.hull=function(t){var e,i,o=[],s=[];for((t=t.slice(0)).sort((function(t,e){var i=t.x-e.x;return 0!==i?i:t.y-e.y})),i=0;i<t.length;i+=1){for(e=t[i];s.length>=2&&n.cross3(s[s.length-2],s[s.length-1],e)<=0;)s.pop();s.push(e)}for(i=t.length-1;i>=0;i-=1){for(e=t[i];o.length>=2&&n.cross3(o[o.length-2],o[o.length-1],e)<=0;)o.pop();o.push(e)}return o.pop(),s.pop(),o.concat(s)}},46:function(t,e){var i={};t.exports=i,i.create=function(t,e){return{x:t||0,y:e||0}},i.clone=function(t){return{x:t.x,y:t.y}},i.magnitude=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},i.magnitudeSquared=function(t){return t.x*t.x+t.y*t.y},i.rotate=function(t,e,i){var o=Math.cos(e),n=Math.sin(e);i||(i={});var s=t.x*o-t.y*n;return i.y=t.x*n+t.y*o,i.x=s,i},i.rotateAbout=function(t,e,i,o){var n=Math.cos(e),s=Math.sin(e);o||(o={});var r=i.x+((t.x-i.x)*n-(t.y-i.y)*s);return o.y=i.y+((t.x-i.x)*s+(t.y-i.y)*n),o.x=r,o},i.normalise=function(t){var e=i.magnitude(t);return 0===e?{x:0,y:0}:{x:t.x/e,y:t.y/e}},i.dot=function(t,e){return t.x*e.x+t.y*e.y},i.cross=function(t,e){return t.x*e.y-t.y*e.x},i.cross3=function(t,e,i){return(e.x-t.x)*(i.y-t.y)-(e.y-t.y)*(i.x-t.x)},i.add=function(t,e,i){return i||(i={}),i.x=t.x+e.x,i.y=t.y+e.y,i},i.sub=function(t,e,i){return i||(i={}),i.x=t.x-e.x,i.y=t.y-e.y,i},i.mult=function(t,e){return{x:t.x*e,y:t.y*e}},i.div=function(t,e){return{x:t.x/e,y:t.y/e}},i.perp=function(t,e){return{x:(e=!0===e?-1:1)*-t.y,y:e*t.x}},i.neg=function(t){return{x:-t.x,y:-t.y}},i.angle=function(t,e){return Math.atan2(e.y-t.y,e.x-t.x)},i._temp=[i.create(),i.create(),i.create(),i.create(),i.create(),i.create()]},47:function(t,e){var i={};t.exports=i,i.create=function(t){var e={min:{x:0,y:0},max:{x:0,y:0}};return t&&i.update(e,t),e},i.update=function(t,e,i){t.min.x=1/0,t.max.x=-1/0,t.min.y=1/0,t.max.y=-1/0;for(var o=0;o<e.length;o++){var n=e[o];n.x>t.max.x&&(t.max.x=n.x),n.x<t.min.x&&(t.min.x=n.x),n.y>t.max.y&&(t.max.y=n.y),n.y<t.min.y&&(t.min.y=n.y)}i&&(i.x>0?t.max.x+=i.x:t.min.x+=i.x,i.y>0?t.max.y+=i.y:t.min.y+=i.y)},i.contains=function(t,e){return e.x>=t.min.x&&e.x<=t.max.x&&e.y>=t.min.y&&e.y<=t.max.y},i.overlaps=function(t,e){return t.min.x<=e.max.x&&t.max.x>=e.min.x&&t.max.y>=e.min.y&&t.min.y<=e.max.y},i.translate=function(t,e){t.min.x+=e.x,t.max.x+=e.x,t.min.y+=e.y,t.max.y+=e.y},i.shift=function(t,e){var i=t.max.x-t.min.x,o=t.max.y-t.min.y;t.min.x=e.x,t.max.x=e.x+i,t.min.y=e.y,t.max.y=e.y+o}},550:function(t,e,i){var o=i(551),n=i(170),s=i(3),r=i(70),a=i(553),l=i(554),c=new s({initialize:function(t){this.world=t,this.scene=t.scene,this.sys=t.scene.sys},collider:function(t,e,i,o,n){return this.world.addCollider(t,e,i,o,n)},overlap:function(t,e,i,o,n){return this.world.addOverlap(t,e,i,o,n)},existing:function(t,e){var i=e?r.STATIC_BODY:r.DYNAMIC_BODY;return this.world.enableBody(t,i),t},staticImage:function(t,e,i,n){var s=new o(this.scene,t,e,i,n);return this.sys.displayList.add(s),this.world.enableBody(s,r.STATIC_BODY),s},image:function(t,e,i,n){var s=new o(this.scene,t,e,i,n);return this.sys.displayList.add(s),this.world.enableBody(s,r.DYNAMIC_BODY),s},staticSprite:function(t,e,i,o){var s=new n(this.scene,t,e,i,o);return this.sys.displayList.add(s),this.sys.updateList.add(s),this.world.enableBody(s,r.STATIC_BODY),s},sprite:function(t,e,i,o){var s=new n(this.scene,t,e,i,o);return this.sys.displayList.add(s),this.sys.updateList.add(s),this.world.enableBody(s,r.DYNAMIC_BODY),s},staticGroup:function(t,e){return this.sys.updateList.add(new l(this.world,this.world.scene,t,e))},group:function(t,e){return this.sys.updateList.add(new a(this.world,this.world.scene,t,e))},destroy:function(){this.world=null,this.scene=null,this.sys=null}});t.exports=c},551:function(t,e,i){var o=i(3),n=i(264),s=i(129),r=new o({Extends:s,Mixins:[n.Acceleration,n.Angular,n.Bounce,n.Debug,n.Drag,n.Enable,n.Friction,n.Gravity,n.Immovable,n.Mass,n.Pushable,n.Size,n.Velocity],initialize:function(t,e,i,o,n){s.call(this,t,e,i,o,n),this.body=null}});t.exports=r},552:function(t,e,i){var o=i(265),n=i(72),s=i(222),r=i(157);t.exports=function(t,e,i,a,l,c){var h=o(t,e-a,i-a,2*a,2*a,l,c);if(0===h.length)return h;for(var d=new n(e,i,a),u=new n,p=[],f=0;f<h.length;f++){var y=h[f];y.isCircle?(u.setTo(y.center.x,y.center.y,y.halfWidth),s(d,u)&&p.push(y)):r(d,y)&&p.push(y)}return p}},553:function(t,e,i){var o=i(170),n=i(3),s=i(70),r=i(5),a=i(128),l=i(10),c=new n({Extends:a,initialize:function(t,e,i,n){if(i||n)if(l(i))n=i,i=null,n.internalCreateCallback=this.createCallbackHandler,n.internalRemoveCallback=this.removeCallbackHandler;else if(Array.isArray(i)&&l(i[0])){n=i[0];var c=this;i.forEach((function(t){t.internalCreateCallback=c.createCallbackHandler,t.internalRemoveCallback=c.removeCallbackHandler})),i=null}else n={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};else n={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};this.world=t,n.classType=r(n,"classType",o),this.physicsType=s.DYNAMIC_BODY,this.defaults={setCollideWorldBounds:r(n,"collideWorldBounds",!1),setBoundsRectangle:r(n,"customBoundsRectangle",null),setAccelerationX:r(n,"accelerationX",0),setAccelerationY:r(n,"accelerationY",0),setAllowDrag:r(n,"allowDrag",!0),setAllowGravity:r(n,"allowGravity",!0),setAllowRotation:r(n,"allowRotation",!0),setBounceX:r(n,"bounceX",0),setBounceY:r(n,"bounceY",0),setDragX:r(n,"dragX",0),setDragY:r(n,"dragY",0),setEnable:r(n,"enable",!0),setGravityX:r(n,"gravityX",0),setGravityY:r(n,"gravityY",0),setFrictionX:r(n,"frictionX",0),setFrictionY:r(n,"frictionY",0),setMaxVelocityX:r(n,"maxVelocityX",1e4),setMaxVelocityY:r(n,"maxVelocityY",1e4),setVelocityX:r(n,"velocityX",0),setVelocityY:r(n,"velocityY",0),setAngularVelocity:r(n,"angularVelocity",0),setAngularAcceleration:r(n,"angularAcceleration",0),setAngularDrag:r(n,"angularDrag",0),setMass:r(n,"mass",1),setImmovable:r(n,"immovable",!1)},a.call(this,e,i,n),this.type="PhysicsGroup"},createCallbackHandler:function(t){t.body||this.world.enableBody(t,s.DYNAMIC_BODY);var e=t.body;for(var i in this.defaults)e[i](this.defaults[i])},removeCallbackHandler:function(t){t.body&&this.world.disableBody(t)},setVelocity:function(t,e,i){void 0===i&&(i=0);for(var o=this.getChildren(),n=0;n<o.length;n++)o[n].body.velocity.set(t+n*i,e+n*i);return this},setVelocityX:function(t,e){void 0===e&&(e=0);for(var i=this.getChildren(),o=0;o<i.length;o++)i[o].body.velocity.x=t+o*e;return this},setVelocityY:function(t,e){void 0===e&&(e=0);for(var i=this.getChildren(),o=0;o<i.length;o++)i[o].body.velocity.y=t+o*e;return this}});t.exports=c},554:function(t,e,i){var o=i(170),n=i(3),s=i(70),r=i(5),a=i(128),l=i(10),c=new n({Extends:a,initialize:function(t,e,i,n){i||n?l(i)?(n=i,i=null,n.internalCreateCallback=this.createCallbackHandler,n.internalRemoveCallback=this.removeCallbackHandler,n.createMultipleCallback=this.createMultipleCallbackHandler,n.classType=r(n,"classType",o)):Array.isArray(i)&&l(i[0])?(n=i,i=null,n.forEach((function(t){t.internalCreateCallback=this.createCallbackHandler,t.internalRemoveCallback=this.removeCallbackHandler,t.createMultipleCallback=this.createMultipleCallbackHandler,t.classType=r(t,"classType",o)}))):n={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler}:n={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:o},this.world=t,this.physicsType=s.STATIC_BODY,a.call(this,e,i,n),this.type="StaticPhysicsGroup"},createCallbackHandler:function(t){t.body||this.world.enableBody(t,s.STATIC_BODY)},removeCallbackHandler:function(t){t.body&&this.world.disableBody(t)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var t=this.children.entries,e=0;e<t.length;e++)t[e].body.reset();return this}});t.exports=c},555:function(t,e,i){var o=i(369),n=i(556),s=i(21),r=i(3),a=i(557),l=i(70),c=i(54),h=i(12),d=i(266),u=i(107),p=i(373),f=i(374),y=i(267),v=i(268),g=i(269),m=i(9),b=i(17),x=i(235),C=i(558),w=i(13),S=i(495),B=i(559),A=i(564),_=i(565),T=i(160),O=i(566),M=i(270),P=i(30),k=i(6),E=i(75),I=new r({Extends:h,initialize:function(t,e){h.call(this),this.scene=t,this.bodies=new T,this.staticBodies=new T,this.pendingDestroy=new T,this.colliders=new x,this.gravity=new k(m(e,"gravity.x",0),m(e,"gravity.y",0)),this.bounds=new w(m(e,"x",0),m(e,"y",0),m(e,"width",t.sys.scale.width),m(e,"height",t.sys.scale.height)),this.checkCollision={up:m(e,"checkCollision.up",!0),down:m(e,"checkCollision.down",!0),left:m(e,"checkCollision.left",!0),right:m(e,"checkCollision.right",!0)},this.fps=m(e,"fps",60),this.fixedStep=m(e,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=m(e,"timeScale",1),this.OVERLAP_BIAS=m(e,"overlapBias",4),this.TILE_BIAS=m(e,"tileBias",16),this.forceX=m(e,"forceX",!1),this.isPaused=m(e,"isPaused",!1),this._total=0,this.drawDebug=m(e,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:m(e,"debugShowBody",!0),debugShowStaticBody:m(e,"debugShowStaticBody",!0),debugShowVelocity:m(e,"debugShowVelocity",!0),bodyDebugColor:m(e,"debugBodyColor",16711935),staticBodyDebugColor:m(e,"debugStaticBodyColor",255),velocityDebugColor:m(e,"debugVelocityColor",65280)},this.maxEntries=m(e,"maxEntries",16),this.useTree=m(e,"useTree",!0),this.tree=new S(this.maxEntries),this.staticTree=new S(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new P,this._tempMatrix2=new P,this.drawDebug&&this.createDebugGraphic()},enable:function(t,e){void 0===e&&(e=l.DYNAMIC_BODY),Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var o=t[i];if(o.isParent)for(var n=o.getChildren(),s=0;s<n.length;s++){var r=n[s];r.isParent?this.enable(r,e):this.enableBody(r,e)}else this.enableBody(o,e)}},enableBody:function(t,e){return void 0===e&&(e=l.DYNAMIC_BODY),t.body||(e===l.DYNAMIC_BODY?t.body=new n(this,t):e===l.STATIC_BODY&&(t.body=new O(this,t))),this.add(t.body),t},add:function(t){return t.physicsType===l.DYNAMIC_BODY?this.bodies.set(t):t.physicsType===l.STATIC_BODY&&(this.staticBodies.set(t),this.staticTree.insert(t)),t.enable=!0,t},disable:function(t){Array.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++){var i=t[e];if(i.isParent)for(var o=i.getChildren(),n=0;n<o.length;n++){var s=o[n];s.isParent?this.disable(s):this.disableBody(s.body)}else this.disableBody(i.body)}},disableBody:function(t){this.remove(t),t.enable=!1},remove:function(t){t.physicsType===l.DYNAMIC_BODY?(this.tree.remove(t),this.bodies.delete(t)):t.physicsType===l.STATIC_BODY&&(this.staticBodies.delete(t),this.staticTree.remove(t))},createDebugGraphic:function(){var t=this.scene.sys.add.graphics({x:0,y:0});return t.setDepth(Number.MAX_VALUE),this.debugGraphic=t,this.drawDebug=!0,t},setBounds:function(t,e,i,o,n,s,r,a){return this.bounds.setTo(t,e,i,o),void 0!==n&&this.setBoundsCollision(n,s,r,a),this},setBoundsCollision:function(t,e,i,o){return void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===i&&(i=!0),void 0===o&&(o=!0),this.checkCollision.left=t,this.checkCollision.right=e,this.checkCollision.up=i,this.checkCollision.down=o,this},pause:function(){return this.isPaused=!0,this.emit(d.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(d.RESUME),this},addCollider:function(t,e,i,o,n){void 0===i&&(i=null),void 0===o&&(o=null),void 0===n&&(n=i);var s=new a(this,!1,t,e,i,o,n);return this.colliders.add(s),s},addOverlap:function(t,e,i,o,n){void 0===i&&(i=null),void 0===o&&(o=null),void 0===n&&(n=i);var s=new a(this,!0,t,e,i,o,n);return this.colliders.add(s),s},removeCollider:function(t){return this.colliders.remove(t),this},setFPS:function(t){return this.fps=t,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(t,e){if(!this.isPaused&&0!==this.bodies.size){var i,o,n=this._frameTime,s=this._frameTimeMS*this.timeScale;this._elapsed+=e;var r=this.bodies.entries,a=this._elapsed>=s;for(this.fixedStep||(n=.001*e,a=!0,this._elapsed=0),i=0;i<r.length;i++)(o=r[i]).enable&&o.preUpdate(a,n);if(a){this._elapsed-=s,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(r));var l=this.colliders.update();for(i=0;i<l.length;i++){var c=l[i];c.active&&c.update()}this.emit(d.WORLD_STEP,n)}for(;this._elapsed>=s;)this._elapsed-=s,this.step(n)}},step:function(t){var e,i,o=this.bodies.entries,n=o.length;for(e=0;e<n;e++)(i=o[e]).enable&&i.update(t);this.useTree&&(this.tree.clear(),this.tree.load(o));var s=this.colliders.update();for(e=0;e<s.length;e++){var r=s[e];r.active&&r.update()}this.emit(d.WORLD_STEP,t),this.stepsLastFrame++},postUpdate:function(){var t,e,i=this.bodies.entries,o=i.length,n=this.bodies,s=this.staticBodies;if(this.stepsLastFrame)for(this.stepsLastFrame=0,t=0;t<o;t++)(e=i[t]).enable&&e.postUpdate();if(this.drawDebug){var r=this.debugGraphic;for(r.clear(),t=0;t<o;t++)(e=i[t]).willDrawDebug()&&e.drawDebug(r);for(o=(i=s.entries).length,t=0;t<o;t++)(e=i[t]).willDrawDebug()&&e.drawDebug(r)}var a=this.pendingDestroy;if(a.size>0){var c=this.tree,h=this.staticTree;for(o=(i=a.entries).length,t=0;t<o;t++)(e=i[t]).physicsType===l.DYNAMIC_BODY?(c.remove(e),n.delete(e)):e.physicsType===l.STATIC_BODY&&(h.remove(e),s.delete(e)),e.world=void 0,e.gameObject=void 0;a.clear()}},updateMotion:function(t,e){t.allowRotation&&this.computeAngularVelocity(t,e),this.computeVelocity(t,e)},computeAngularVelocity:function(t,e){var i=t.angularVelocity,o=t.angularAcceleration,n=t.angularDrag,r=t.maxAngular;o?i+=o*e:t.allowDrag&&n&&(p(i-(n*=e),0,.1)?i-=n:f(i+n,0,.1)?i+=n:i=0);var a=(i=s(i,-r,r))-t.angularVelocity;t.angularVelocity+=a,t.rotation+=t.angularVelocity*e},computeVelocity:function(t,e){var i=t.velocity.x,o=t.acceleration.x,n=t.drag.x,r=t.maxVelocity.x,a=t.velocity.y,l=t.acceleration.y,c=t.drag.y,h=t.maxVelocity.y,d=t.speed,y=t.maxSpeed,v=t.allowDrag,g=t.useDamping;t.allowGravity&&(i+=(this.gravity.x+t.gravity.x)*e,a+=(this.gravity.y+t.gravity.y)*e),o?i+=o*e:v&&n&&(g?(i*=n=Math.pow(n,e),d=Math.sqrt(i*i+a*a),u(d,0,.001)&&(i=0)):p(i-(n*=e),0,.01)?i-=n:f(i+n,0,.01)?i+=n:i=0),l?a+=l*e:v&&c&&(g?(a*=c=Math.pow(c,e),d=Math.sqrt(i*i+a*a),u(d,0,.001)&&(a=0)):p(a-(c*=e),0,.01)?a-=c:f(a+c,0,.01)?a+=c:a=0),i=s(i,-r,r),a=s(a,-h,h),t.velocity.set(i,a),y>-1&&d>y&&(t.velocity.normalize().scale(y),d=y),t.speed=d},separate:function(t,e,i,o,n,s){if(!s&&!t.enable||!e.enable||t.checkCollision.none||e.checkCollision.none||!this.intersects(t,e))return!1;if(i&&!1===i.call(o,t.gameObject,e.gameObject))return!1;if(t.isCircle&&e.isCircle)return this.separateCircle(t,e,n);if(t.isCircle!==e.isCircle){var r=t.isCircle?e:t,a=t.isCircle?t:e,l={x:r.x,y:r.y,right:r.right,bottom:r.bottom},c=a.center;if((c.y<l.y||c.y>l.bottom)&&(c.x<l.x||c.x>l.right))return this.separateCircle(t,e,n)}var h=!1,u=!1;n?(h=A(t,e,n,this.OVERLAP_BIAS),u=_(t,e,n,this.OVERLAP_BIAS)):this.forceX||Math.abs(this.gravity.y+t.gravity.y)<Math.abs(this.gravity.x+t.gravity.x)?(h=A(t,e,n,this.OVERLAP_BIAS),this.intersects(t,e)&&(u=_(t,e,n,this.OVERLAP_BIAS))):(u=_(t,e,n,this.OVERLAP_BIAS),this.intersects(t,e)&&(h=A(t,e,n,this.OVERLAP_BIAS)));var p=h||u;return p&&(n?(t.onOverlap||e.onOverlap)&&this.emit(d.OVERLAP,t.gameObject,e.gameObject,t,e):(t.onCollide||e.onCollide)&&this.emit(d.COLLIDE,t.gameObject,e.gameObject,t,e)),p},separateCircle:function(t,e,i,n){y(t,e,!1,n),v(t,e,!1,n);var s=0;if(t.isCircle!==e.isCircle){var r={x:e.isCircle?t.position.x:e.position.x,y:e.isCircle?t.position.y:e.position.y,right:e.isCircle?t.right:e.right,bottom:e.isCircle?t.bottom:e.bottom},a={x:t.isCircle?t.center.x:e.center.x,y:t.isCircle?t.center.y:e.center.y,radius:t.isCircle?t.halfWidth:e.halfWidth};a.y<r.y?a.x<r.x?s=c(a.x,a.y,r.x,r.y)-a.radius:a.x>r.right&&(s=c(a.x,a.y,r.right,r.y)-a.radius):a.y>r.bottom&&(a.x<r.x?s=c(a.x,a.y,r.x,r.bottom)-a.radius:a.x>r.right&&(s=c(a.x,a.y,r.right,r.bottom)-a.radius)),s*=-1}else s=t.halfWidth+e.halfWidth-c(t.center.x,t.center.y,e.center.x,e.center.y);if(t.overlapR=s,e.overlapR=s,i||0===s||t.immovable&&e.immovable||t.customSeparateX||e.customSeparateX)return 0!==s&&(t.onOverlap||e.onOverlap)&&this.emit(d.OVERLAP,t.gameObject,e.gameObject,t,e),0!==s;var l=t.center.x-e.center.x,h=t.center.y-e.center.y,u=Math.sqrt(Math.pow(l,2)+Math.pow(h,2)),p=(e.center.x-t.center.x)/u||0,f=(e.center.y-t.center.y)/u||0,g=2*(t.velocity.x*p+t.velocity.y*f-e.velocity.x*p-e.velocity.y*f)/(t.mass+e.mass);(t.immovable||e.immovable)&&(g*=2),t.immovable||(t.velocity.x=t.velocity.x-g/t.mass*p,t.velocity.y=t.velocity.y-g/t.mass*f),e.immovable||(e.velocity.x=e.velocity.x+g/e.mass*p,e.velocity.y=e.velocity.y+g/e.mass*f),t.immovable||e.immovable||(s/=2);var m=o(t.center,e.center),x=(s+b.EPSILON)*Math.cos(m),C=(s+b.EPSILON)*Math.sin(m);return t.immovable||(t.x-=x,t.y-=C,t.updateCenter()),e.immovable||(e.x+=x,e.y+=C,e.updateCenter()),t.velocity.x*=t.bounce.x,t.velocity.y*=t.bounce.y,e.velocity.x*=e.bounce.x,e.velocity.y*=e.bounce.y,(t.onCollide||e.onCollide)&&this.emit(d.COLLIDE,t.gameObject,e.gameObject,t,e),!0},intersects:function(t,e){return t!==e&&(t.isCircle||e.isCircle?t.isCircle?e.isCircle?c(t.center.x,t.center.y,e.center.x,e.center.y)<=t.halfWidth+e.halfWidth:this.circleBodyIntersects(t,e):this.circleBodyIntersects(e,t):!(t.right<=e.position.x||t.bottom<=e.position.y||t.position.x>=e.right||t.position.y>=e.bottom))},circleBodyIntersects:function(t,e){var i=s(t.center.x,e.left,e.right),o=s(t.center.y,e.top,e.bottom);return(t.center.x-i)*(t.center.x-i)+(t.center.y-o)*(t.center.y-o)<=t.halfWidth*t.halfWidth},overlap:function(t,e,i,o,n){return void 0===i&&(i=null),void 0===o&&(o=null),void 0===n&&(n=i),this.collideObjects(t,e,i,o,n,!0)},collide:function(t,e,i,o,n){return void 0===i&&(i=null),void 0===o&&(o=null),void 0===n&&(n=i),this.collideObjects(t,e,i,o,n,!1)},collideObjects:function(t,e,i,o,n,s){var r,a;t.isParent&&void 0===t.physicsType&&(t=t.children.entries),e&&e.isParent&&void 0===e.physicsType&&(e=e.children.entries);var l=Array.isArray(t),c=Array.isArray(e);if(this._total=0,l||c)if(!l&&c)for(r=0;r<e.length;r++)this.collideHandler(t,e[r],i,o,n,s);else if(l&&!c)if(e)for(r=0;r<t.length;r++)this.collideHandler(t[r],e,i,o,n,s);else for(r=0;r<t.length;r++){var h=t[r];for(a=r+1;a<t.length;a++)r!==a&&this.collideHandler(h,t[a],i,o,n,s)}else for(r=0;r<t.length;r++)for(a=0;a<e.length;a++)this.collideHandler(t[r],e[a],i,o,n,s);else this.collideHandler(t,e,i,o,n,s);return this._total>0},collideHandler:function(t,e,i,o,n,s){if(void 0===e&&t.isParent)return this.collideGroupVsGroup(t,t,i,o,n,s);if(!t||!e)return!1;if(t.body){if(e.body)return this.collideSpriteVsSprite(t,e,i,o,n,s);if(e.isParent)return this.collideSpriteVsGroup(t,e,i,o,n,s);if(e.isTilemap)return this.collideSpriteVsTilemapLayer(t,e,i,o,n,s)}else if(t.isParent){if(e.body)return this.collideSpriteVsGroup(e,t,i,o,n,s);if(e.isParent)return this.collideGroupVsGroup(t,e,i,o,n,s);if(e.isTilemap)return this.collideGroupVsTilemapLayer(t,e,i,o,n,s)}else if(t.isTilemap){if(e.body)return this.collideSpriteVsTilemapLayer(e,t,i,o,n,s);if(e.isParent)return this.collideGroupVsTilemapLayer(e,t,i,o,n,s)}},collideSpriteVsSprite:function(t,e,i,o,n,s){return!(!t.body||!e.body)&&(this.separate(t.body,e.body,o,n,s)&&(i&&i.call(n,t,e),this._total++),!0)},collideSpriteVsGroup:function(t,e,i,o,n,s){var r,a,c,h=t.body;if(0!==e.length&&h&&h.enable&&!h.checkCollision.none)if(this.useTree||e.physicsType===l.STATIC_BODY){var d=this.treeMinMax;d.minX=h.left,d.minY=h.top,d.maxX=h.right,d.maxY=h.bottom;var u=e.physicsType===l.DYNAMIC_BODY?this.tree.search(d):this.staticTree.search(d);for(a=u.length,r=0;r<a;r++)h!==(c=u[r])&&c.enable&&!c.checkCollision.none&&e.contains(c.gameObject)&&this.separate(h,c,o,n,s,!0)&&(i&&i.call(n,h.gameObject,c.gameObject),this._total++)}else{var p=e.getChildren(),f=e.children.entries.indexOf(t);for(a=p.length,r=0;r<a;r++)(c=p[r].body)&&r!==f&&c.enable&&this.separate(h,c,o,n,s)&&(i&&i.call(n,h.gameObject,c.gameObject),this._total++)}},collideGroupVsTilemapLayer:function(t,e,i,o,n,s){var r=t.getChildren();if(0===r.length)return!1;for(var a=!1,l=0;l<r.length;l++)r[l].body&&this.collideSpriteVsTilemapLayer(r[l],e,i,o,n,s)&&(a=!0);return a},collideTiles:function(t,e,i,o,n){return!(!t.body.enable||0===e.length)&&this.collideSpriteVsTilesHandler(t,e,i,o,n,!1,!1)},overlapTiles:function(t,e,i,o,n){return!(!t.body.enable||0===e.length)&&this.collideSpriteVsTilesHandler(t,e,i,o,n,!0,!1)},collideSpriteVsTilemapLayer:function(t,e,i,o,n,s){var r=t.body;if(!r.enable||r.checkCollision.none)return!1;var a=r.position.x,l=r.position.y,c=r.width,h=r.height,d=e.layer;if(d.tileWidth>d.baseTileWidth){var u=(d.tileWidth-d.baseTileWidth)*e.scaleX;a-=u,c+=u}d.tileHeight>d.baseTileHeight&&(h+=(d.tileHeight-d.baseTileHeight)*e.scaleY);var p=g(a,l,c,h,null,e.scene.cameras.main,e.layer);return 0!==p.length&&this.collideSpriteVsTilesHandler(t,p,i,o,n,s,!0)},collideSpriteVsTilesHandler:function(t,e,i,o,n,s,r){for(var a,l,c=t.body,h={left:0,right:0,top:0,bottom:0},u=!1,p=0;p<e.length;p++){var f=(l=(a=e[p]).tilemapLayer).tileToWorldXY(a.x,a.y);h.left=f.x,h.top=f.y,a.baseHeight!==a.height&&(h.top-=(a.height-a.baseHeight)*l.scaleY),h.right=h.left+a.width*l.scaleX,h.bottom=h.top+a.height*l.scaleY,M(h,c)&&(!o||o.call(n,t,a))&&C(a,t)&&(s||B(p,c,a,h,l,this.TILE_BIAS,r))&&(this._total++,u=!0,i&&i.call(n,t,a),s&&c.onOverlap?this.emit(d.TILE_OVERLAP,t,a,c):c.onCollide&&this.emit(d.TILE_COLLIDE,t,a,c))}return u},collideGroupVsGroup:function(t,e,i,o,n,s){if(0!==t.length&&0!==e.length)for(var r=t.getChildren(),a=0;a<r.length;a++)this.collideSpriteVsGroup(r[a],e,i,o,n,s)},wrap:function(t,e){t.body?this.wrapObject(t,e):t.getChildren?this.wrapArray(t.getChildren(),e):Array.isArray(t)?this.wrapArray(t,e):this.wrapObject(t,e)},wrapArray:function(t,e){for(var i=0;i<t.length;i++)this.wrapObject(t[i],e)},wrapObject:function(t,e){void 0===e&&(e=0),t.x=E(t.x,this.bounds.left-e,this.bounds.right+e),t.y=E(t.y,this.bounds.top-e,this.bounds.bottom+e)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null}});t.exports=I},556:function(t,e,i){var o=i(3),n=i(70),s=i(266),r=i(209),a=i(13),l=i(64),c=i(6),h=new o({initialize:function(t,e){var i=e.displayWidth?e.displayWidth:64,o=e.displayHeight?e.displayHeight:64;this.world=t,this.gameObject=e,this.transform={x:e.x,y:e.y,rotation:e.angle,scaleX:e.scaleX,scaleY:e.scaleY,displayOriginX:e.displayOriginX,displayOriginY:e.displayOriginY},this.debugShowBody=t.defaults.debugShowBody,this.debugShowVelocity=t.defaults.debugShowVelocity,this.debugBodyColor=t.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new c,this.position=new c(e.x-e.scaleX*e.displayOriginX,e.y-e.scaleY*e.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=e.angle,this.preRotation=e.angle,this.width=i,this.height=o,this.sourceWidth=i,this.sourceHeight=o,e.frame&&(this.sourceWidth=e.frame.realWidth,this.sourceHeight=e.frame.realHeight),this.halfWidth=Math.abs(i/2),this.halfHeight=Math.abs(o/2),this.center=new c(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new c,this.newVelocity=new c,this.deltaMax=new c,this.acceleration=new c,this.allowDrag=!0,this.drag=new c,this.allowGravity=!0,this.gravity=new c,this.bounce=new c,this.worldBounce=null,this.customBoundsRectangle=t.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new c(1e4,1e4),this.maxSpeed=-1,this.friction=new c(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=n.FACING_NONE,this.immovable=!1,this.pushable=!0,this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.syncBounds=!1,this.physicsType=n.DYNAMIC_BODY,this._sx=e.scaleX,this._sy=e.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new a},updateBounds:function(){var t=this.gameObject,e=this.transform;if(t.parentContainer){var i=t.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);e.x=i.tx,e.y=i.ty,e.rotation=r(i.rotation),e.scaleX=i.scaleX,e.scaleY=i.scaleY,e.displayOriginX=t.displayOriginX,e.displayOriginY=t.displayOriginY}else e.x=t.x,e.y=t.y,e.rotation=t.angle,e.scaleX=t.scaleX,e.scaleY=t.scaleY,e.displayOriginX=t.displayOriginX,e.displayOriginY=t.displayOriginY;var o=!1;if(this.syncBounds){var n=t.getBounds(this._bounds);this.width=n.width,this.height=n.height,o=!0}else{var s=Math.abs(e.scaleX),a=Math.abs(e.scaleY);this._sx===s&&this._sy===a||(this.width=this.sourceWidth*s,this.height=this.sourceHeight*a,this._sx=s,this._sy=a,o=!0)}o&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var t=this.transform;this.position.x=t.x+t.scaleX*(this.offset.x-t.displayOriginX),this.position.y=t.y+t.scaleY*(this.offset.y-t.displayOriginY),this.updateCenter()},resetFlags:function(t){void 0===t&&(t=!1);var e=this.wasTouching,i=this.touching,o=this.blocked;t?(e.none=!0,e.up=!1,e.down=!1,e.left=!1,e.right=!1):(e.none=i.none,e.up=i.up,e.down=i.down,e.left=i.left,e.right=i.right),i.none=!0,i.up=!1,i.down=!1,i.left=!1,i.right=!1,o.none=!0,o.up=!1,o.down=!1,o.left=!1,o.right=!1,this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(t,e){t&&this.resetFlags(),this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves&&(this.prev.x=this.position.x,this.prev.y=this.position.y,this.prevFrame.x=this.position.x,this.prevFrame.y=this.position.y),t&&this.update(e)},update:function(t){if(this.prev.x=this.position.x,this.prev.y=this.position.y,this.moves){this.world.updateMotion(this,t);var e=this.velocity.x,i=this.velocity.y;this.newVelocity.set(e*t,i*t),this.position.add(this.newVelocity),this.updateCenter(),this.angle=Math.atan2(i,e),this.speed=Math.sqrt(e*e+i*i),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds&&this.world.emit(s.WORLD_BOUNDS,this,this.blocked.up,this.blocked.down,this.blocked.left,this.blocked.right)}this._dx=this.position.x-this.prev.x,this._dy=this.position.y-this.prev.y},postUpdate:function(){var t=this.position.x-this.prevFrame.x,e=this.position.y-this.prevFrame.y;if(this.moves){var i=this.deltaMax.x,o=this.deltaMax.y;0!==i&&0!==t&&(t<0&&t<-i?t=-i:t>0&&t>i&&(t=i)),0!==o&&0!==e&&(e<0&&e<-o?e=-o:e>0&&e>o&&(e=o)),this.gameObject.x+=t,this.gameObject.y+=e}t<0?this.facing=n.FACING_LEFT:t>0&&(this.facing=n.FACING_RIGHT),e<0?this.facing=n.FACING_UP:e>0&&(this.facing=n.FACING_DOWN),this.allowRotation&&(this.gameObject.angle+=this.deltaZ()),this._tx=t,this._ty=e},setBoundsRectangle:function(t){return this.customBoundsRectangle=t||this.world.bounds,this},checkWorldBounds:function(){var t=this.position,e=this.customBoundsRectangle,i=this.world.checkCollision,o=this.worldBounce?-this.worldBounce.x:-this.bounce.x,n=this.worldBounce?-this.worldBounce.y:-this.bounce.y,s=!1;return t.x<e.x&&i.left?(t.x=e.x,this.velocity.x*=o,this.blocked.left=!0,s=!0):this.right>e.right&&i.right&&(t.x=e.right-this.width,this.velocity.x*=o,this.blocked.right=!0,s=!0),t.y<e.y&&i.up?(t.y=e.y,this.velocity.y*=n,this.blocked.up=!0,s=!0):this.bottom>e.bottom&&i.down&&(t.y=e.bottom-this.height,this.velocity.y*=n,this.blocked.down=!0,s=!0),s&&(this.blocked.none=!1,this.updateCenter()),s},setOffset:function(t,e){return void 0===e&&(e=t),this.offset.set(t,e),this},setSize:function(t,e,i){void 0===i&&(i=!0);var o=this.gameObject;if(!t&&o.frame&&(t=o.frame.realWidth),!e&&o.frame&&(e=o.frame.realHeight),this.sourceWidth=t,this.sourceHeight=e,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),i&&o.getCenter){var n=(o.width-t)/2,s=(o.height-e)/2;this.offset.set(n,s)}return this.isCircle=!1,this.radius=0,this},setCircle:function(t,e,i){return void 0===e&&(e=this.offset.x),void 0===i&&(i=this.offset.y),t>0?(this.isCircle=!0,this.radius=t,this.sourceWidth=2*t,this.sourceHeight=2*t,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(e,i),this.updateCenter()):this.isCircle=!1,this},reset:function(t,e){this.stop();var i=this.gameObject;i.setPosition(t,e),i.getTopLeft?i.getTopLeft(this.position):this.position.set(t,e),this.prev.copy(this.position),this.prevFrame.copy(this.position),this.rotation=i.angle,this.preRotation=i.angle,this.updateBounds(),this.updateCenter(),this.resetFlags(!0)},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(t){return t.x=this.x,t.y=this.y,t.right=this.right,t.bottom=this.bottom,t},hitTest:function(t,e){return this.isCircle?this.radius>0&&t>=this.left&&t<=this.right&&e>=this.top&&e<=this.bottom&&(this.center.x-t)*(this.center.x-t)+(this.center.y-e)*(this.center.y-e)<=this.radius*this.radius:l(this,t,e)},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function(){return this._dy>0?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(t){var e=this.position,i=e.x+this.halfWidth,o=e.y+this.halfHeight;this.debugShowBody&&(t.lineStyle(t.defaultStrokeWidth,this.debugBodyColor),this.isCircle?t.strokeCircle(i,o,this.width/2):(this.checkCollision.up&&t.lineBetween(e.x,e.y,e.x+this.width,e.y),this.checkCollision.right&&t.lineBetween(e.x+this.width,e.y,e.x+this.width,e.y+this.height),this.checkCollision.down&&t.lineBetween(e.x,e.y+this.height,e.x+this.width,e.y+this.height),this.checkCollision.left&&t.lineBetween(e.x,e.y,e.x,e.y+this.height))),this.debugShowVelocity&&(t.lineStyle(t.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),t.lineBetween(i,o,i+this.velocity.x/2,o+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setCollideWorldBounds:function(t,e,i,o){void 0===t&&(t=!0),this.collideWorldBounds=t;var n=void 0!==e,s=void 0!==i;return(n||s)&&(this.worldBounce||(this.worldBounce=new c),n&&(this.worldBounce.x=e),s&&(this.worldBounce.y=i)),void 0!==o&&(this.onWorldBounds=o),this},setVelocity:function(t,e){return this.velocity.set(t,e),t=this.velocity.x,e=this.velocity.y,this.speed=Math.sqrt(t*t+e*e),this},setVelocityX:function(t){this.velocity.x=t;var e=t,i=this.velocity.y;return this.speed=Math.sqrt(e*e+i*i),this},setVelocityY:function(t){this.velocity.y=t;var e=this.velocity.x,i=t;return this.speed=Math.sqrt(e*e+i*i),this},setMaxVelocity:function(t,e){return this.maxVelocity.set(t,e),this},setMaxVelocityX:function(t){return this.maxVelocity.x=t,this},setMaxVelocityY:function(t){return this.maxVelocity.y=t,this},setMaxSpeed:function(t){return this.maxSpeed=t,this},setBounce:function(t,e){return this.bounce.set(t,e),this},setBounceX:function(t){return this.bounce.x=t,this},setBounceY:function(t){return this.bounce.y=t,this},setAcceleration:function(t,e){return this.acceleration.set(t,e),this},setAccelerationX:function(t){return this.acceleration.x=t,this},setAccelerationY:function(t){return this.acceleration.y=t,this},setAllowDrag:function(t){return void 0===t&&(t=!0),this.allowDrag=t,this},setAllowGravity:function(t){return void 0===t&&(t=!0),this.allowGravity=t,this},setAllowRotation:function(t){return void 0===t&&(t=!0),this.allowRotation=t,this},setDrag:function(t,e){return this.drag.set(t,e),this},setDamping:function(t){return this.useDamping=t,this},setDragX:function(t){return this.drag.x=t,this},setDragY:function(t){return this.drag.y=t,this},setGravity:function(t,e){return this.gravity.set(t,e),this},setGravityX:function(t){return this.gravity.x=t,this},setGravityY:function(t){return this.gravity.y=t,this},setFriction:function(t,e){return this.friction.set(t,e),this},setFrictionX:function(t){return this.friction.x=t,this},setFrictionY:function(t){return this.friction.y=t,this},setAngularVelocity:function(t){return this.angularVelocity=t,this},setAngularAcceleration:function(t){return this.angularAcceleration=t,this},setAngularDrag:function(t){return this.angularDrag=t,this},setMass:function(t){return this.mass=t,this},setImmovable:function(t){return void 0===t&&(t=!0),this.immovable=t,this},setEnable:function(t){return void 0===t&&(t=!0),this.enable=t,this},processX:function(t,e,i,o){this.x+=t,this.updateCenter(),null!==e&&(this.velocity.x=e);var n=this.blocked;i&&(n.left=!0),o&&(n.right=!0)},processY:function(t,e,i,o){this.y+=t,this.updateCenter(),null!==e&&(this.velocity.y=e);var n=this.blocked;i&&(n.up=!0),o&&(n.down=!0)},x:{get:function(){return this.position.x},set:function(t){this.position.x=t}},y:{get:function(){return this.position.y},set:function(t){this.position.y=t}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});t.exports=h},557:function(t,e,i){var o=new(i(3))({initialize:function(t,e,i,o,n,s,r){this.world=t,this.name="",this.active=!0,this.overlapOnly=e,this.object1=i,this.object2=o,this.collideCallback=n,this.processCallback=s,this.callbackContext=r},setName:function(t){return this.name=t,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});t.exports=o},558:function(t,e){t.exports=function(t,e){return t.collisionCallback?!t.collisionCallback.call(t.collisionCallbackContext,e,t):!t.layer.callbacks[t.index]||!t.layer.callbacks[t.index].callback.call(t.layer.callbacks[t.index].callbackContext,e,t)}},559:function(t,e,i){var o=i(560),n=i(562),s=i(270);t.exports=function(t,e,i,r,a,l,c){var h=r.left,d=r.top,u=r.right,p=r.bottom,f=i.faceLeft||i.faceRight,y=i.faceTop||i.faceBottom;if(c||(f=!0,y=!0),!f&&!y)return!1;var v=0,g=0,m=0,b=1;if(e.deltaAbsX()>e.deltaAbsY()?m=-1:e.deltaAbsX()<e.deltaAbsY()&&(b=-1),0!==e.deltaX()&&0!==e.deltaY()&&f&&y&&(m=Math.min(Math.abs(e.position.x-u),Math.abs(e.right-h)),b=Math.min(Math.abs(e.position.y-p),Math.abs(e.bottom-d))),m<b){if(f&&0!==(v=o(e,i,h,u,l,c))&&!s(r,e))return!0;y&&(g=n(e,i,d,p,l,c))}else{if(y&&0!==(g=n(e,i,d,p,l,c))&&!s(r,e))return!0;f&&(v=o(e,i,h,u,l,c))}return 0!==v||0!==g}},560:function(t,e,i){var o=i(561);t.exports=function(t,e,i,n,s,r){var a=0,l=e.faceLeft,c=e.faceRight,h=e.collideLeft,d=e.collideRight;return r||(l=!0,c=!0,h=!0,d=!0),t.deltaX()<0&&d&&t.checkCollision.left?c&&t.x<n&&(a=t.x-n)<-s&&(a=0):t.deltaX()>0&&h&&t.checkCollision.right&&l&&t.right>i&&(a=t.right-i)>s&&(a=0),0!==a&&(t.customSeparateX?t.overlapX=a:o(t,a)),a}},561:function(t,e){t.exports=function(t,e){e<0?(t.blocked.none=!1,t.blocked.left=!0):e>0&&(t.blocked.none=!1,t.blocked.right=!0),t.position.x-=e,0===t.bounce.x?t.velocity.x=0:t.velocity.x=-t.velocity.x*t.bounce.x}},562:function(t,e,i){var o=i(563);t.exports=function(t,e,i,n,s,r){var a=0,l=e.faceTop,c=e.faceBottom,h=e.collideUp,d=e.collideDown;return r||(l=!0,c=!0,h=!0,d=!0),t.deltaY()<0&&d&&t.checkCollision.up?c&&t.y<n&&(a=t.y-n)<-s&&(a=0):t.deltaY()>0&&h&&t.checkCollision.down&&l&&t.bottom>i&&(a=t.bottom-i)>s&&(a=0),0!==a&&(t.customSeparateY?t.overlapY=a:o(t,a)),a}},563:function(t,e){t.exports=function(t,e){e<0?(t.blocked.none=!1,t.blocked.up=!0):e>0&&(t.blocked.none=!1,t.blocked.down=!0),t.position.y-=e,0===t.bounce.y?t.velocity.y=0:t.velocity.y=-t.velocity.y*t.bounce.y}},564:function(t,e,i){var o=i(267),n=i(1461);t.exports=function(t,e,i,s){var r=o(t,e,i,s),a=t.immovable,l=e.immovable;if(i||0===r||a&&l||t.customSeparateX||e.customSeparateX)return 0!==r||t.embedded&&e.embedded;var c=n.Set(t,e,r);return a||l?(a?n.RunImmovableBody1(c):l&&n.RunImmovableBody2(c),!0):c>0||n.Check()}},565:function(t,e,i){var o=i(268),n=i(1462);t.exports=function(t,e,i,s){var r=o(t,e,i,s),a=t.immovable,l=e.immovable;if(i||0===r||a&&l||t.customSeparateY||e.customSeparateY)return 0!==r||t.embedded&&e.embedded;var c=n.Set(t,e,r);return a||l?(a?n.RunImmovableBody1(c):l&&n.RunImmovableBody2(c),!0):c>0||n.Check()}},566:function(t,e,i){var o=i(73),n=i(3),s=i(70),r=i(64),a=i(6),l=new n({initialize:function(t,e){var i=e.displayWidth?e.displayWidth:64,o=e.displayHeight?e.displayHeight:64;this.world=t,this.gameObject=e,this.debugShowBody=t.defaults.debugShowStaticBody,this.debugBodyColor=t.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new a,this.position=new a(e.x-i*e.originX,e.y-o*e.originY),this.width=i,this.height=o,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new a(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=a.ZERO,this.allowGravity=!1,this.gravity=a.ZERO,this.bounce=a.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.physicsType=s.STATIC_BODY,this._dx=0,this._dy=0},setGameObject:function(t,e){return t&&t!==this.gameObject&&(this.gameObject.body=null,t.body=this,this.gameObject=t),e&&this.updateFromGameObject(),this},updateFromGameObject:function(){this.world.staticTree.remove(this);var t=this.gameObject;return t.getTopLeft(this.position),this.width=t.displayWidth,this.height=t.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(t,e){return void 0===e&&(e=t),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(t,e),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(t,e,i){void 0===i&&(i=!0);var o=this.gameObject;if(!t&&o.frame&&(t=o.frame.realWidth),!e&&o.frame&&(e=o.frame.realHeight),this.world.staticTree.remove(this),this.width=t,this.height=e,this.halfWidth=Math.floor(t/2),this.halfHeight=Math.floor(e/2),i&&o.getCenter){var n=o.displayWidth/2,s=o.displayHeight/2;this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(n-this.halfWidth,s-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y}return this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(t,e,i){return void 0===e&&(e=this.offset.x),void 0===i&&(i=this.offset.y),t>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=t,this.width=2*t,this.height=2*t,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(e,i),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(t,e){var i=this.gameObject;void 0===t&&(t=i.x),void 0===e&&(e=i.y),this.world.staticTree.remove(this),i.setPosition(t,e),i.getTopLeft(this.position),this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(t){return t.x=this.x,t.y=this.y,t.right=this.right,t.bottom=this.bottom,t},hitTest:function(t,e){return this.isCircle?o(this,t,e):r(this,t,e)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(t){var e=this.position,i=e.x+this.halfWidth,o=e.y+this.halfHeight;this.debugShowBody&&(t.lineStyle(t.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?t.strokeCircle(i,o,this.width/2):t.strokeRect(e.x,e.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(t){return t<=0&&(t=.1),this.mass=t,this},x:{get:function(){return this.position.x},set:function(t){this.world.staticTree.remove(this),this.position.x=t,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(t){this.world.staticTree.remove(this),this.position.y=t,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});t.exports=l},567:function(t,e,i){var o=i(3),n=i(6),s=new o({initialize:function(){this.boundsCenter=new n,this.centerDiff=new n},parseBody:function(t){if(!(t=t.hasOwnProperty("body")?t.body:t).hasOwnProperty("bounds")||!t.hasOwnProperty("centerOfMass"))return!1;var e=this.boundsCenter,i=this.centerDiff,o=t.bounds.max.x-t.bounds.min.x,n=t.bounds.max.y-t.bounds.min.y,s=o*t.centerOfMass.x,r=n*t.centerOfMass.y;return e.set(o/2,n/2),i.set(s-e.x,r-e.y),!0},getTopLeft:function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=0),this.parseBody(t)){var o=this.boundsCenter,s=this.centerDiff;return new n(e+o.x+s.x,i+o.y+s.y)}return!1},getTopCenter:function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=0),this.parseBody(t)){var o=this.boundsCenter,s=this.centerDiff;return new n(e+s.x,i+o.y+s.y)}return!1},getTopRight:function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=0),this.parseBody(t)){var o=this.boundsCenter,s=this.centerDiff;return new n(e-(o.x-s.x),i+o.y+s.y)}return!1},getLeftCenter:function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=0),this.parseBody(t)){var o=this.boundsCenter,s=this.centerDiff;return new n(e+o.x+s.x,i+s.y)}return!1},getCenter:function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=0),this.parseBody(t)){var o=this.centerDiff;return new n(e+o.x,i+o.y)}return!1},getRightCenter:function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=0),this.parseBody(t)){var o=this.boundsCenter,s=this.centerDiff;return new n(e-(o.x-s.x),i+s.y)}return!1},getBottomLeft:function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=0),this.parseBody(t)){var o=this.boundsCenter,s=this.centerDiff;return new n(e+o.x+s.x,i-(o.y-s.y))}return!1},getBottomCenter:function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=0),this.parseBody(t)){var o=this.boundsCenter,s=this.centerDiff;return new n(e+s.x,i-(o.y-s.y))}return!1},getBottomRight:function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=0),this.parseBody(t)){var o=this.boundsCenter,s=this.centerDiff;return new n(e-(o.x-s.x),i-(o.y-s.y))}return!1}});t.exports=s},568:function(t,e){function i(t,e,i){i=i||0;var o,n,s,r,a,l,c,h=[0,0];return o=t[1][1]-t[0][1],n=t[0][0]-t[1][0],s=o*t[0][0]+n*t[0][1],r=e[1][1]-e[0][1],a=e[0][0]-e[1][0],l=r*e[0][0]+a*e[0][1],B(c=o*a-r*n,0,i)||(h[0]=(a*s-n*l)/c,h[1]=(o*l-r*s)/c),h}function o(t,e,i,o){var n=e[0]-t[0],s=e[1]-t[1],r=o[0]-i[0],a=o[1]-i[1];if(r*s-a*n==0)return!1;var l=(n*(i[1]-t[1])+s*(t[0]-i[0]))/(r*s-a*n),c=(r*(t[1]-i[1])+a*(i[0]-t[0]))/(a*n-r*s);return l>=0&&l<=1&&c>=0&&c<=1}function n(t,e,i){return(e[0]-t[0])*(i[1]-t[1])-(i[0]-t[0])*(e[1]-t[1])}function s(t,e,i){return n(t,e,i)>0}function r(t,e,i){return n(t,e,i)>=0}function a(t,e,i){return n(t,e,i)<0}function l(t,e,i){return n(t,e,i)<=0}t.exports={decomp:function(t){var e=C(t);return e.length>0?w(t,e):[t]},quickDecomp:function t(e,i,o,n,c,h,d){h=h||100,d=d||0,c=c||25,i=void 0!==i?i:[],o=o||[],n=n||[];var v=[0,0],g=[0,0],m=[0,0],x=0,C=0,w=0,B=0,A=0,_=0,T=0,O=[],M=[],P=e,k=e;if(k.length<3)return i;if(++d>h)return console.warn("quickDecomp: max level ("+h+") reached."),i;for(var E=0;E<e.length;++E)if(y(P,E)){o.push(P[E]),x=C=Number.MAX_VALUE;for(var I=0;I<e.length;++I)s(p(P,E-1),p(P,E),p(P,I))&&l(p(P,E-1),p(P,E),p(P,I-1))&&(m=S(p(P,E-1),p(P,E),p(P,I),p(P,I-1)),a(p(P,E+1),p(P,E),m)&&(w=u(P[E],m))<C&&(C=w,g=m,_=I)),s(p(P,E+1),p(P,E),p(P,I+1))&&l(p(P,E+1),p(P,E),p(P,I))&&(m=S(p(P,E+1),p(P,E),p(P,I),p(P,I+1)),s(p(P,E-1),p(P,E),m)&&(w=u(P[E],m))<x&&(x=w,v=m,A=I));if(_===(A+1)%e.length)m[0]=(g[0]+v[0])/2,m[1]=(g[1]+v[1])/2,n.push(m),E<A?(f(O,P,E,A+1),O.push(m),M.push(m),0!==_&&f(M,P,_,P.length),f(M,P,0,E+1)):(0!==E&&f(O,P,E,P.length),f(O,P,0,A+1),O.push(m),M.push(m),f(M,P,_,E+1));else{if(_>A&&(A+=e.length),B=Number.MAX_VALUE,A<_)return i;for(I=_;I<=A;++I)r(p(P,E-1),p(P,E),p(P,I))&&l(p(P,E+1),p(P,E),p(P,I))&&(w=u(p(P,E),p(P,I)))<B&&b(P,E,I)&&(B=w,T=I%e.length);E<T?(f(O,P,E,T+1),0!==T&&f(M,P,T,k.length),f(M,P,0,E+1)):(0!==E&&f(O,P,E,k.length),f(O,P,0,T+1),f(M,P,T,E+1))}return O.length<M.length?(t(O,i,o,n,c,h,d),t(M,i,o,n,c,h,d)):(t(M,i,o,n,c,h,d),t(O,i,o,n,c,h,d)),i}return i.push(e),i},isSimple:function(t){var e,i=t;for(e=0;e<i.length-1;e++)for(var n=0;n<e-1;n++)if(o(i[e],i[e+1],i[n],i[n+1]))return!1;for(e=1;e<i.length-2;e++)if(o(i[0],i[i.length-1],i[e],i[e+1]))return!1;return!0},removeCollinearPoints:function(t,e){for(var i=0,o=t.length-1;t.length>3&&o>=0;--o)d(p(t,o-1),p(t,o),p(t,o+1),e)&&(t.splice(o%t.length,1),i++);return i},removeDuplicatePoints:function(t,e){for(var i=t.length-1;i>=1;--i)for(var o=t[i],n=i-1;n>=0;--n)A(o,t[n],e)&&t.splice(i,1)},makeCCW:function(t){for(var e=0,i=t,o=1;o<t.length;++o)(i[o][1]<i[e][1]||i[o][1]===i[e][1]&&i[o][0]>i[e][0])&&(e=o);return!s(p(t,e-1),p(t,e),p(t,e+1))&&(function(t){for(var e=[],i=t.length,o=0;o!==i;o++)e.push(t.pop());for(o=0;o!==i;o++)t[o]=e[o]}(t),!0)}};var c=[],h=[];function d(t,e,i,o){if(o){var s=c,r=h;s[0]=e[0]-t[0],s[1]=e[1]-t[1],r[0]=i[0]-e[0],r[1]=i[1]-e[1];var a=s[0]*r[0]+s[1]*r[1],l=Math.sqrt(s[0]*s[0]+s[1]*s[1]),d=Math.sqrt(r[0]*r[0]+r[1]*r[1]);return Math.acos(a/(l*d))<o}return 0===n(t,e,i)}function u(t,e){var i=e[0]-t[0],o=e[1]-t[1];return i*i+o*o}function p(t,e){var i=t.length;return t[e<0?e%i+i:e%i]}function f(t,e,i,o){for(var n=i;n<o;n++)t.push(e[n])}function y(t,e){return a(p(t,e-1),p(t,e),p(t,e+1))}var v=[],g=[];function m(t,e,o){var n,s,a=v,c=g;if(r(p(t,e+1),p(t,e),p(t,o))&&l(p(t,e-1),p(t,e),p(t,o)))return!1;s=u(p(t,e),p(t,o));for(var h=0;h!==t.length;++h)if((h+1)%t.length!==e&&h!==e&&r(p(t,e),p(t,o),p(t,h+1))&&l(p(t,e),p(t,o),p(t,h))&&(a[0]=p(t,e),a[1]=p(t,o),c[0]=p(t,h),c[1]=p(t,h+1),n=i(a,c),u(p(t,e),n)<s))return!1;return!0}function b(t,e,i){for(var n=0;n!==t.length;++n)if(n!==e&&n!==i&&(n+1)%t.length!==e&&(n+1)%t.length!==i&&o(p(t,e),p(t,i),p(t,n),p(t,n+1)))return!1;return!0}function x(t,e,i,o){var n=o||[];if(function(t){t.length=0}(n),e<i)for(var s=e;s<=i;s++)n.push(t[s]);else{for(s=0;s<=i;s++)n.push(t[s]);for(s=e;s<t.length;s++)n.push(t[s])}return n}function C(t){for(var e=[],i=[],o=[],n=[],s=Number.MAX_VALUE,r=0;r<t.length;++r)if(y(t,r))for(var a=0;a<t.length;++a)if(m(t,r,a)){i=C(x(t,r,a,n)),o=C(x(t,a,r,n));for(var l=0;l<o.length;l++)i.push(o[l]);i.length<s&&(e=i,s=i.length,e.push([p(t,r),p(t,a)]))}return e}function w(t,e){if(0===e.length)return[t];if(e instanceof Array&&e.length&&e[0]instanceof Array&&2===e[0].length&&e[0][0]instanceof Array){for(var i=[t],o=0;o<e.length;o++)for(var n=e[o],s=0;s<i.length;s++){var r=w(i[s],n);if(r){i.splice(s,1),i.push(r[0],r[1]);break}}return i}n=e,o=t.indexOf(n[0]),s=t.indexOf(n[1]);return-1!==o&&-1!==s&&[x(t,o,s),x(t,s,o)]}function S(t,e,i,o,n){n=n||0;var s=e[1]-t[1],r=t[0]-e[0],a=s*t[0]+r*t[1],l=o[1]-i[1],c=i[0]-o[0],h=l*i[0]+c*i[1],d=s*c-l*r;return B(d,0,n)?[0,0]:[(c*a-r*h)/d,(s*h-l*a)/d]}function B(t,e,i){return i=i||0,Math.abs(t-e)<=i}function A(t,e,i){return B(t[0],e[0],i)&&B(t[1],e[1],i)}},569:function(t,e,i){var o=i(58),n=i(3),s=i(273),r=i(90),a=i(274),l=i(570),c=i(571),h=i(572),d=i(275),u=i(271),p=i(272),f=i(573),y=i(37),v=new n({initialize:function(t){this.world=t,this.scene=t.scene,this.sys=t.scene.sys},rectangle:function(t,e,i,n,s){var r=o.rectangle(t,e,i,n,s);return this.world.add(r),r},trapezoid:function(t,e,i,n,s,r){var a=o.trapezoid(t,e,i,n,s,r);return this.world.add(a),a},circle:function(t,e,i,n,s){var r=o.circle(t,e,i,n,s);return this.world.add(r),r},polygon:function(t,e,i,n,s){var r=o.polygon(t,e,i,n,s);return this.world.add(r),r},fromVertices:function(t,e,i,n,s,r,a){"string"==typeof i&&(i=y.fromPath(i));var l=o.fromVertices(t,e,i,n,s,r,a);return this.world.add(l),l},fromPhysicsEditor:function(t,e,i,o,n){void 0===n&&(n=!0);var s=u.parseBody(t,e,i,o);return n&&!this.world.has(s)&&this.world.add(s),s},fromSVG:function(t,e,i,n,s,r){void 0===n&&(n=1),void 0===s&&(s={}),void 0===r&&(r=!0);for(var l=i.getElementsByTagName("path"),c=[],h=0;h<l.length;h++){var d=a.pathToVertices(l[h],30);1!==n&&y.scale(d,n,n),c.push(d)}var u=o.fromVertices(t,e,c,s);return r&&this.world.add(u),u},fromJSON:function(t,e,i,o,n){void 0===o&&(o={}),void 0===n&&(n=!0);var s=p.parseBody(t,e,i,o);return s&&n&&this.world.add(s),s},imageStack:function(t,e,i,o,n,r,a,l,h){void 0===a&&(a=0),void 0===l&&(l=0),void 0===h&&(h={});var d=this.world,u=this.sys.displayList;h.addToWorld=!1;var p=s.stack(i,o,n,r,a,l,(function(i,o){var n=new c(d,i,o,t,e,h);return u.add(n),n.body}));return d.add(p),p},stack:function(t,e,i,o,n,r,a){var l=s.stack(t,e,i,o,n,r,a);return this.world.add(l),l},pyramid:function(t,e,i,o,n,r,a){var l=s.pyramid(t,e,i,o,n,r,a);return this.world.add(l),l},chain:function(t,e,i,o,n,r){return s.chain(t,e,i,o,n,r)},mesh:function(t,e,i,o,n){return s.mesh(t,e,i,o,n)},newtonsCradle:function(t,e,i,o,n){var r=s.newtonsCradle(t,e,i,o,n);return this.world.add(r),r},car:function(t,e,i,o,n){var r=s.car(t,e,i,o,n);return this.world.add(r),r},softBody:function(t,e,i,o,n,r,a,l,c,h){var d=s.softBody(t,e,i,o,n,r,a,l,c,h);return this.world.add(d),d},joint:function(t,e,i,o,n){return this.constraint(t,e,i,o,n)},spring:function(t,e,i,o,n){return this.constraint(t,e,i,o,n)},constraint:function(t,e,i,o,n){void 0===o&&(o=1),void 0===n&&(n={}),n.bodyA="body"===t.type?t:t.body,n.bodyB="body"===e.type?e:e.body,isNaN(i)||(n.length=i),n.stiffness=o;var s=r.create(n);return this.world.add(s),s},worldConstraint:function(t,e,i,o){void 0===i&&(i=1),void 0===o&&(o={}),o.bodyB="body"===t.type?t:t.body,isNaN(e)||(o.length=e),o.stiffness=i;var n=r.create(o);return this.world.add(n),n},mouseSpring:function(t){return this.pointerConstraint(t)},pointerConstraint:function(t){void 0===t&&(t={}),t.hasOwnProperty("render")||(t.render={visible:!1});var e=new f(this.scene,this.world,t);return this.world.add(e.constraint),e},image:function(t,e,i,o,n){var s=new c(this.world,t,e,i,o,n);return this.sys.displayList.add(s),s},tileBody:function(t,e){return new d(this.world,t,e)},sprite:function(t,e,i,o,n){var s=new h(this.world,t,e,i,o,n);return this.sys.displayList.add(s),this.sys.updateList.add(s),s},gameObject:function(t,e,i){return l(this.world,t,e,i)},destroy:function(){this.world=null,this.scene=null,this.sys=null}});t.exports=v},570:function(t,e,i){var o=i(131),n=i(5),s=i(6);t.exports=function(t,e,i,r){void 0===i&&(i={}),void 0===r&&(r=!0);var a=e.x,l=e.y;if(e.body={temp:!0,position:{x:a,y:l}},[o.Bounce,o.Collision,o.Force,o.Friction,o.Gravity,o.Mass,o.Sensor,o.SetBody,o.Sleep,o.Static,o.Transform,o.Velocity].forEach((function(t){for(var i in t)(o=t[i]).get&&"function"==typeof o.get||o.set&&"function"==typeof o.set?Object.defineProperty(e,i,{get:t[i].get,set:t[i].set}):Object.defineProperty(e,i,{value:t[i]});var o})),e.world=t,e._tempVec2=new s(a,l),i.hasOwnProperty("type")&&"body"===i.type)e.setExistingBody(i,r);else{var c=n(i,"shape",null);c||(c="rectangle"),i.addToWorld=r,e.setBody(c,i)}return e}},571:function(t,e,i){var o=i(3),n=i(131),s=i(16),r=i(5),a=i(129),l=i(140),c=i(6),h=new o({Extends:a,Mixins:[n.Bounce,n.Collision,n.Force,n.Friction,n.Gravity,n.Mass,n.Sensor,n.SetBody,n.Sleep,n.Static,n.Transform,n.Velocity,l],initialize:function(t,e,i,o,n,a){s.call(this,t.scene,"Image"),this._crop=this.resetCropObject(),this.setTexture(o,n),this.setSizeToFrame(),this.setOrigin(),this.world=t,this._tempVec2=new c(e,i);var l=r(a,"shape",null);l?this.setBody(l,a):this.setRectangle(this.width,this.height,a),this.setPosition(e,i),this.initPipeline()}});t.exports=h},572:function(t,e,i){var o=i(112),n=i(3),s=i(131),r=i(16),a=i(5),l=i(140),c=i(67),h=i(6),d=new n({Extends:c,Mixins:[s.Bounce,s.Collision,s.Force,s.Friction,s.Gravity,s.Mass,s.Sensor,s.SetBody,s.Sleep,s.Static,s.Transform,s.Velocity,l],initialize:function(t,e,i,n,s,l){r.call(this,t.scene,"Sprite"),this._crop=this.resetCropObject(),this.anims=new o(this),this.setTexture(n,s),this.setSizeToFrame(),this.setOrigin(),this.world=t,this._tempVec2=new h(e,i);var c=a(l,"shape",null);c?this.setBody(c,l):this.setRectangle(this.width,this.height,l),this.setPosition(e,i),this.initPipeline()}});t.exports=d},573:function(t,e,i){var o=i(47),n=i(3),s=i(79),r=i(90),a=i(173),l=i(172),c=i(55),h=i(119),d=i(103),u=i(6),p=i(37),f=new n({initialize:function(t,e,i){void 0===i&&(i={});this.scene=t,this.world=e,this.camera=null,this.pointer=null,this.active=!0,this.position=new u,this.body=null,this.part=null,this.constraint=r.create(h(i,{label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}})),this.world.on(l.BEFORE_UPDATE,this.update,this),t.sys.input.on(c.POINTER_DOWN,this.onDown,this),t.sys.input.on(c.POINTER_UP,this.onUp,this)},onDown:function(t){this.pointer||(this.pointer=t,this.camera=t.camera)},onUp:function(t){t===this.pointer&&(this.pointer=null)},getBody:function(t){var e=this.position,i=this.constraint;this.camera.getWorldPoint(t.x,t.y,e);for(var n=s.allBodies(this.world.localWorld),r=0;r<n.length;r++){var c=n[r];if(!c.ignorePointer&&o.contains(c.bounds,e)&&a.canCollide(c.collisionFilter,i.collisionFilter)&&this.hitTestBody(c,e))return this.world.emit(l.DRAG_START,c,this.part,this),!0}return!1},hitTestBody:function(t,e){for(var i=this.constraint,o=t.parts.length,n=o>1?1:0;n<o;n++){var s=t.parts[n];if(p.contains(s.vertices,e))return i.pointA=e,i.pointB={x:e.x-t.position.x,y:e.y-t.position.y},i.bodyB=t,i.angleB=t.angle,d.set(t,!1),this.part=s,this.body=t,!0}return!1},update:function(){var t=this.pointer,e=this.body;if(this.active&&t)if(t.isDown||!e){if(t.isDown){if(!e&&!this.getBody(t))return;e=this.body;var i=this.position,o=this.constraint;this.camera.getWorldPoint(t.x,t.y,i),o.pointA.x=i.x,o.pointA.y=i.y,d.set(e,!1),this.world.emit(l.DRAG,e,this)}}else this.stopDrag();else e&&this.stopDrag()},stopDrag:function(){var t=this.body,e=this.constraint;e.bodyB=null,e.pointB=null,this.pointer=null,this.body=null,this.part=null,t&&this.world.emit(l.DRAG_END,t,this)},destroy:function(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(l.BEFORE_UPDATE,this.update),this.scene.sys.input.off(c.POINTER_DOWN,this.onDown,this),this.scene.sys.input.off(c.POINTER_UP,this.onUp,this)}});t.exports=f},574:function(t,e,i){var o={};t.exports=o;var n=i(277),s=i(25);o.name="matter-js",o.version="0.14.2",o.uses=[],o.used=[],o.use=function(){n.use(o,Array.prototype.slice.call(arguments))},o.before=function(t,e){return t=t.replace(/^Matter./,""),s.chainPathBefore(o,t,e)},o.after=function(t,e){return t=t.replace(/^Matter./,""),s.chainPathAfter(o,t,e)}},575:function(t,e,i){var o={};t.exports=o;var n=i(46),s=i(174),r=i(47),a=i(58),l=i(37);o.collides=function(t,e){for(var i=[],o=0;o<e.length;o++){var n=e[o];if(t!==n&&r.overlaps(n.bounds,t.bounds))for(var a=1===n.parts.length?0:1;a<n.parts.length;a++){var l=n.parts[a];if(r.overlaps(l.bounds,t.bounds)){var c=s.collides(l,t);if(c.collided){i.push(c);break}}}}return i},o.ray=function(t,e,i,s){s=s||1e-100;for(var r=n.angle(e,i),l=n.magnitude(n.sub(e,i)),c=.5*(i.x+e.x),h=.5*(i.y+e.y),d=a.rectangle(c,h,l,s,{angle:r}),u=o.collides(d,t),p=0;p<u.length;p+=1){var f=u[p];f.body=f.bodyB=f.bodyA}return u},o.region=function(t,e,i){for(var o=[],n=0;n<t.length;n++){var s=t[n],a=r.overlaps(s.bounds,e);(a&&!i||!a&&i)&&o.push(s)}return o},o.point=function(t,e){for(var i=[],o=0;o<t.length;o++){var n=t[o];if(r.contains(n.bounds,e))for(var s=1===n.parts.length?0:1;s<n.parts.length;s++){var a=n.parts[s];if(r.contains(a.bounds,e)&&l.contains(a.vertices,e)){i.push(n);break}}}return i}},576:function(t,e,i){var o={};t.exports=o;var n=i(278),s=i(103),r=i(281),a=i(280),l=i(1493),c=i(279),h=i(104),d=i(79),u=i(90),p=i(25),f=i(31);o.create=function(t,e){e=(e=p.isElement(t)?e:t)||{},((t=p.isElement(t)?t:null)||e.render)&&p.warn("Engine.create: engine.render is deprecated (see docs)");var i={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},timing:{timestamp:0,timeScale:1},broadphase:{controller:c}},o=p.extend(i,e);return o.world=e.world||n.create(o.world),o.pairs=a.create(),o.broadphase=o.broadphase.controller.create(o.broadphase),o.metrics=o.metrics||{extended:!1},o.metrics=l.create(o.metrics),o},o.update=function(t,e,i){e=e||1e3/60,i=i||1;var n,c=t.world,p=t.timing,f=t.broadphase,y=[];p.timestamp+=e*p.timeScale;var v={timestamp:p.timestamp};h.trigger(t,"beforeUpdate",v);var g=d.allBodies(c),m=d.allConstraints(c);for(l.reset(t.metrics),t.enableSleeping&&s.update(g,p.timeScale),o._bodiesApplyGravity(g,c.gravity),o._bodiesUpdate(g,e,p.timeScale,i,c.bounds),u.preSolveAll(g),n=0;n<t.constraintIterations;n++)u.solveAll(m,p.timeScale);u.postSolveAll(g),f.controller?(c.isModified&&f.controller.clear(f),f.controller.update(f,g,t,c.isModified),y=f.pairsList):y=g,c.isModified&&d.setModified(c,!1,!1,!0);var b=f.detector(y,t),x=t.pairs,C=p.timestamp;for(a.update(x,b,C),a.removeOld(x,C),t.enableSleeping&&s.afterCollisions(x.list,p.timeScale),x.collisionStart.length>0&&h.trigger(t,"collisionStart",{pairs:x.collisionStart}),r.preSolvePosition(x.list),n=0;n<t.positionIterations;n++)r.solvePosition(x.list,g,p.timeScale);for(r.postSolvePosition(g),u.preSolveAll(g),n=0;n<t.constraintIterations;n++)u.solveAll(m,p.timeScale);for(u.postSolveAll(g),r.preSolveVelocity(x.list),n=0;n<t.velocityIterations;n++)r.solveVelocity(x.list,p.timeScale);return x.collisionActive.length>0&&h.trigger(t,"collisionActive",{pairs:x.collisionActive}),x.collisionEnd.length>0&&h.trigger(t,"collisionEnd",{pairs:x.collisionEnd}),l.update(t.metrics,t),o._bodiesClearForces(g),h.trigger(t,"afterUpdate",v),t},o.merge=function(t,e){if(p.extend(t,e),e.world){t.world=e.world,o.clear(t);for(var i=d.allBodies(t.world),n=0;n<i.length;n++){var r=i[n];s.set(r,!1),r.id=p.nextId()}}},o.clear=function(t){var e=t.world;a.clear(t.pairs);var i=t.broadphase;if(i.controller){var o=d.allBodies(e);i.controller.clear(i),i.controller.update(i,o,t,!0)}},o._bodiesClearForces=function(t){for(var e=0;e<t.length;e++){var i=t[e];i.force.x=0,i.force.y=0,i.torque=0}},o._bodiesApplyGravity=function(t,e){var i=void 0!==e.scale?e.scale:.001;if((0!==e.x||0!==e.y)&&0!==i)for(var o=0;o<t.length;o++){var n=t[o];n.ignoreGravity||n.isStatic||n.isSleeping||(n.force.x+=n.mass*e.x*i*n.gravityScale.x,n.force.y+=n.mass*e.y*i*n.gravityScale.y)}},o._bodiesUpdate=function(t,e,i,o,n){for(var s=0;s<t.length;s++){var r=t[s];r.isStatic||r.isSleeping||f.update(r,e,i,o)}}},577:function(t,e,i){var o=i(58),n=i(31),s=i(3),r=i(25),a=i(79),l=i(576),c=i(12),h=i(172),d=i(5),u=i(9),p=i(31),f=i(104),y=i(275),v=i(278),g=i(46),m=new s({Extends:c,initialize:function(t,e){c.call(this),this.scene=t,this.engine=l.create(e),this.localWorld=this.engine.world;var i=u(e,"gravity",null);i?this.setGravity(i.x,i.y,i.scale):!1===i&&this.setGravity(0,0,0),this.walls={left:null,right:null,top:null,bottom:null},this.enabled=u(e,"enabled",!0),this.correction=u(e,"correction",1),this.getDelta=u(e,"getDelta",this.update60Hz);var o=d(e,"runner",{}),n=d(o,"fps",!1),s=d(o,"fps",60),r=d(o,"delta",1e3/s),a=d(o,"deltaMin",1e3/s),h=d(o,"deltaMax",1e3/(.5*s));n||(s=1e3/r),this.runner={fps:s,correction:d(o,"correction",1),deltaSampleSize:d(o,"deltaSampleSize",60),counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:d(o,"isFixed",!1),delta:r,deltaMin:a,deltaMax:h},this.autoUpdate=u(e,"autoUpdate",!0);var p=u(e,"debug",!1);if(this.drawDebug="object"==typeof p||p,this.debugGraphic,this.debugConfig={showAxes:d(p,"showAxes",!1),showAngleIndicator:d(p,"showAngleIndicator",!1),angleColor:d(p,"angleColor",15208787),showBroadphase:d(p,"showBroadphase",!1),broadphaseColor:d(p,"broadphaseColor",16757760),showBounds:d(p,"showBounds",!1),boundsColor:d(p,"boundsColor",16777215),showVelocity:d(p,"showVelocity",!1),velocityColor:d(p,"velocityColor",44783),showCollisions:d(p,"showCollisions",!1),collisionColor:d(p,"collisionColor",16094476),showSeparations:d(p,"showSeparations",!1),separationColor:d(p,"separationColor",16753920),showBody:d(p,"showBody",!0),showStaticBody:d(p,"showStaticBody",!0),showInternalEdges:d(p,"showInternalEdges",!1),renderFill:d(p,"renderFill",!1),renderLine:d(p,"renderLine",!0),fillColor:d(p,"fillColor",1075465),fillOpacity:d(p,"fillOpacity",1),lineColor:d(p,"lineColor",2678297),lineOpacity:d(p,"lineOpacity",1),lineThickness:d(p,"lineThickness",1),staticFillColor:d(p,"staticFillColor",857979),staticLineColor:d(p,"staticLineColor",1255396),showSleeping:d(p,"showSleeping",!1),staticBodySleepOpacity:d(p,"staticBodySleepOpacity",.7),sleepFillColor:d(p,"sleepFillColor",4605510),sleepLineColor:d(p,"sleepLineColor",10066585),showSensors:d(p,"showSensors",!0),sensorFillColor:d(p,"sensorFillColor",857979),sensorLineColor:d(p,"sensorLineColor",1255396),showPositions:d(p,"showPositions",!0),positionSize:d(p,"positionSize",4),positionColor:d(p,"positionColor",14697178),showJoint:d(p,"showJoint",!0),jointColor:d(p,"jointColor",14737474),jointLineOpacity:d(p,"jointLineOpacity",1),jointLineThickness:d(p,"jointLineThickness",2),pinSize:d(p,"pinSize",4),pinColor:d(p,"pinColor",4382944),springColor:d(p,"springColor",14697184),anchorColor:d(p,"anchorColor",15724527),anchorSize:d(p,"anchorSize",4),showConvexHulls:d(p,"showConvexHulls",!1),hullColor:d(p,"hullColor",14091216)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy(),d(e,"setBounds",!1)){var f=e.setBounds;if("boolean"==typeof f)this.setBounds();else{var y=d(f,"x",0),v=d(f,"y",0),g=d(f,"width",t.sys.scale.width),m=d(f,"height",t.sys.scale.height),b=d(f,"thickness",64),x=d(f,"left",!0),C=d(f,"right",!0),w=d(f,"top",!0),S=d(f,"bottom",!0);this.setBounds(y,v,g,m,b,x,C,w,S)}}},setCompositeRenderStyle:function(t){var e,i,o,n=t.bodies,s=t.constraints,r=t.composites;for(e=0;e<n.length;e++)o=(i=n[e]).render,this.setBodyRenderStyle(i,o.lineColor,o.lineOpacity,o.lineThickness,o.fillColor,o.fillOpacity);for(e=0;e<s.length;e++)o=(i=s[e]).render,this.setConstraintRenderStyle(i,o.lineColor,o.lineOpacity,o.lineThickness,o.pinSize,o.anchorColor,o.anchorSize);for(e=0;e<r.length;e++)i=r[e],this.setCompositeRenderStyle(i);return this},setBodyRenderStyle:function(t,e,i,o,n,s){var r=t.render,a=this.debugConfig;return r?(null==e&&(e=t.isStatic?a.staticLineColor:a.lineColor),null==i&&(i=a.lineOpacity),null==o&&(o=a.lineThickness),null==n&&(n=t.isStatic?a.staticFillColor:a.fillColor),null==s&&(s=a.fillOpacity),!1!==e&&(r.lineColor=e),!1!==i&&(r.lineOpacity=i),!1!==o&&(r.lineThickness=o),!1!==n&&(r.fillColor=n),!1!==s&&(r.fillOpacity=s),this):this},setConstraintRenderStyle:function(t,e,i,o,n,s,r){var a=t.render,l=this.debugConfig;if(!a)return this;if(null==e){var c=a.type;"line"===c?e=l.jointColor:"pin"===c?e=l.pinColor:"spring"===c&&(e=l.springColor)}return null==i&&(i=l.jointLineOpacity),null==o&&(o=l.jointLineThickness),null==n&&(n=l.pinSize),null==s&&(s=l.anchorColor),null==r&&(r=l.anchorSize),!1!==e&&(a.lineColor=e),!1!==i&&(a.lineOpacity=i),!1!==o&&(a.lineThickness=o),!1!==n&&(a.pinSize=n),!1!==s&&(a.anchorColor=s),!1!==r&&(a.anchorSize=r),this},setEventsProxy:function(){var t=this,e=this.engine,i=this.localWorld;this.drawDebug&&(f.on(i,"compositeModified",(function(e){t.setCompositeRenderStyle(e)})),f.on(i,"beforeAdd",(function(e){for(var i=[].concat(e.object),o=0;o<i.length;o++){var n=i[o],s=n.render;"body"===n.type?t.setBodyRenderStyle(n,s.lineColor,s.lineOpacity,s.lineThickness,s.fillColor,s.fillOpacity):"composite"===n.type?t.setCompositeRenderStyle(n):"constraint"===n.type&&t.setConstraintRenderStyle(n,s.lineColor,s.lineOpacity,s.lineThickness,s.pinSize,s.anchorColor,s.anchorSize)}}))),f.on(i,"beforeAdd",(function(e){t.emit(h.BEFORE_ADD,e)})),f.on(i,"afterAdd",(function(e){t.emit(h.AFTER_ADD,e)})),f.on(i,"beforeRemove",(function(e){t.emit(h.BEFORE_REMOVE,e)})),f.on(i,"afterRemove",(function(e){t.emit(h.AFTER_REMOVE,e)})),f.on(e,"beforeUpdate",(function(e){t.emit(h.BEFORE_UPDATE,e)})),f.on(e,"afterUpdate",(function(e){t.emit(h.AFTER_UPDATE,e)})),f.on(e,"collisionStart",(function(e){var i,o,n=e.pairs;n.length>0&&(i=n[0].bodyA,o=n[0].bodyB),t.emit(h.COLLISION_START,e,i,o)})),f.on(e,"collisionActive",(function(e){var i,o,n=e.pairs;n.length>0&&(i=n[0].bodyA,o=n[0].bodyB),t.emit(h.COLLISION_ACTIVE,e,i,o)})),f.on(e,"collisionEnd",(function(e){var i,o,n=e.pairs;n.length>0&&(i=n[0].bodyA,o=n[0].bodyB),t.emit(h.COLLISION_END,e,i,o)}))},setBounds:function(t,e,i,o,n,s,r,a,l){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=this.scene.sys.scale.width),void 0===o&&(o=this.scene.sys.scale.height),void 0===n&&(n=64),void 0===s&&(s=!0),void 0===r&&(r=!0),void 0===a&&(a=!0),void 0===l&&(l=!0),this.updateWall(s,"left",t-n,e-n,n,o+2*n),this.updateWall(r,"right",t+i,e-n,n,o+2*n),this.updateWall(a,"top",t,e-n,i,n),this.updateWall(l,"bottom",t,e+o,i,n),this},updateWall:function(t,e,i,o,n,s){var r=this.walls[e];t?(r&&v.remove(this.localWorld,r),i+=n/2,o+=s/2,this.walls[e]=this.create(i,o,n,s,{isStatic:!0,friction:0,frictionStatic:0})):(r&&v.remove(this.localWorld,r),this.walls[e]=null)},createDebugGraphic:function(){var t=this.scene.sys.add.graphics({x:0,y:0});return t.setDepth(Number.MAX_VALUE),this.debugGraphic=t,this.drawDebug=!0,t},disableGravity:function(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function(t,e,i){return void 0===t&&(t=0),void 0===e&&(e=1),this.localWorld.gravity.x=t,this.localWorld.gravity.y=e,void 0!==i&&(this.localWorld.gravity.scale=i),this},create:function(t,e,i,n,s){var r=o.rectangle(t,e,i,n,s);return v.add(this.localWorld,r),r},add:function(t){return v.add(this.localWorld,t),this},remove:function(t,e){Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var o=t[i],n=o.body?o.body:o;a.remove(this.localWorld,n,e)}return this},removeConstraint:function(t,e){return a.remove(this.localWorld,t,e),this},convertTilemapLayer:function(t,e){var i=t.layer,o=t.getTilesWithin(0,0,i.width,i.height,{isColliding:!0});return this.convertTiles(o,e),this},convertTiles:function(t,e){if(0===t.length)return this;for(var i=0;i<t.length;i++)new y(this,t[i],e);return this},nextGroup:function(t){return p.nextGroup(t)},nextCategory:function(){return p.nextCategory()},pause:function(){return this.enabled=!1,this.emit(h.PAUSE),this},resume:function(){return this.enabled=!0,this.emit(h.RESUME),this},update:function(t,e){if(this.enabled&&this.autoUpdate){var i=this.engine,o=this.runner,n=i.timing,s=this.correction;o.isFixed?e=this.getDelta(t,e):(e=t-o.timePrev||o.delta,o.timePrev=t,o.deltaHistory.push(e),o.deltaHistory=o.deltaHistory.slice(-o.deltaSampleSize),s=(e=(e=(e=Math.min.apply(null,o.deltaHistory))<o.deltaMin?o.deltaMin:e)>o.deltaMax?o.deltaMax:e)/o.delta,o.delta=e),0!==o.timeScalePrev&&(s*=n.timeScale/o.timeScalePrev),0===n.timeScale&&(s=0),o.timeScalePrev=n.timeScale,o.correction=s,o.frameCounter+=1,t-o.counterTimestamp>=1e3&&(o.fps=o.frameCounter*((t-o.counterTimestamp)/1e3),o.counterTimestamp=t,o.frameCounter=0),l.update(i,e,s)}},step:function(t,e){l.update(this.engine,t,e)},update60Hz:function(){return 1e3/60},update30Hz:function(){return 1e3/30},has:function(t){var e=t.hasOwnProperty("body")?t.body:t;return null!==a.get(this.localWorld,e.id,e.type)},getAllBodies:function(){return a.allBodies(this.localWorld)},getAllConstraints:function(){return a.allConstraints(this.localWorld)},getAllComposites:function(){return a.allComposites(this.localWorld)},postUpdate:function(){if(this.drawDebug){var t=this.debugConfig,e=this.engine,i=this.debugGraphic,o=a.allBodies(this.localWorld);this.debugGraphic.clear(),t.showBroadphase&&e.broadphase.controller&&this.renderGrid(e.broadphase,i,t.broadphaseColor,.5),t.showBounds&&this.renderBodyBounds(o,i,t.boundsColor,.5),(t.showBody||t.showStaticBody)&&this.renderBodies(o),t.showJoint&&this.renderJoints(),(t.showAxes||t.showAngleIndicator)&&this.renderBodyAxes(o,i,t.showAxes,t.angleColor,.5),t.showVelocity&&this.renderBodyVelocity(o,i,t.velocityColor,1,2),t.showSeparations&&this.renderSeparations(e.pairs.list,i,t.separationColor),t.showCollisions&&this.renderCollisions(e.pairs.list,i,t.collisionColor)}},renderGrid:function(t,e,i,o){e.lineStyle(1,i,o);for(var n=r.keys(t.buckets),s=0;s<n.length;s++){var a=n[s];if(!(t.buckets[a].length<2)){var l=a.split(/C|R/);e.strokeRect(parseInt(l[1],10)*t.bucketWidth,parseInt(l[2],10)*t.bucketHeight,t.bucketWidth,t.bucketHeight)}}return this},renderSeparations:function(t,e,i){e.lineStyle(1,i,1);for(var o=0;o<t.length;o++){var n=t[o];if(n.isActive){var s=n.collision,r=s.bodyA,a=s.bodyB,l=r.position,c=a.position,h=s.penetration,d=r.isStatic||a.isStatic?1:4;a.isStatic&&(d=0),e.lineBetween(c.x,c.y,c.x-h.x*d,c.y-h.y*d),d=r.isStatic||a.isStatic?1:4,r.isStatic&&(d=0),e.lineBetween(l.x,l.y,l.x-h.x*d,l.y-h.y*d)}}return this},renderCollisions:function(t,e,i){var o,n;for(e.lineStyle(1,i,.5),e.fillStyle(i,1),o=0;o<t.length;o++)if((n=t[o]).isActive)for(var s=0;s<n.activeContacts.length;s++){var r=n.activeContacts[s].vertex;e.fillRect(r.x-2,r.y-2,5,5)}for(o=0;o<t.length;o++)if((n=t[o]).isActive){var a=n.collision,l=n.activeContacts;if(l.length>0){var c=l[0].vertex.x,h=l[0].vertex.y;2===l.length&&(c=(l[0].vertex.x+l[1].vertex.x)/2,h=(l[0].vertex.y+l[1].vertex.y)/2),a.bodyB===a.supports[0].body||a.bodyA.isStatic?e.lineBetween(c-8*a.normal.x,h-8*a.normal.y,c,h):e.lineBetween(c+8*a.normal.x,h+8*a.normal.y,c,h)}}return this},renderBodyBounds:function(t,e,i,o){e.lineStyle(1,i,o);for(var n=0;n<t.length;n++){var s=t[n];if(s.render.visible){var r=s.bounds;if(r)e.strokeRect(r.min.x,r.min.y,r.max.x-r.min.x,r.max.y-r.min.y);else for(var a=s.parts,l=a.length>1?1:0;l<a.length;l++){var c=a[l];e.strokeRect(c.bounds.min.x,c.bounds.min.y,c.bounds.max.x-c.bounds.min.x,c.bounds.max.y-c.bounds.min.y)}}}return this},renderBodyAxes:function(t,e,i,o,n){e.lineStyle(1,o,n);for(var s=0;s<t.length;s++){var r,a,l,c=t[s],h=c.parts;if(c.render.visible)if(i)for(a=h.length>1?1:0;a<h.length;a++)for(r=h[a],l=0;l<r.axes.length;l++){var d=r.axes[l];e.lineBetween(r.position.x,r.position.y,r.position.x+20*d.x,r.position.y+20*d.y)}else for(a=h.length>1?1:0;a<h.length;a++)for(r=h[a],l=0;l<r.axes.length;l++)e.lineBetween(r.position.x,r.position.y,(r.vertices[0].x+r.vertices[r.vertices.length-1].x)/2,(r.vertices[0].y+r.vertices[r.vertices.length-1].y)/2)}return this},renderBodyVelocity:function(t,e,i,o,n){e.lineStyle(n,i,o);for(var s=0;s<t.length;s++){var r=t[s];r.render.visible&&e.lineBetween(r.position.x,r.position.y,r.position.x+2*(r.position.x-r.positionPrev.x),r.position.y+2*(r.position.y-r.positionPrev.y))}return this},renderBodies:function(t){for(var e=this.debugGraphic,i=this.debugConfig,o=i.showBody,n=i.showStaticBody,s=i.showSleeping,r=i.showInternalEdges,a=i.showConvexHulls,l=i.renderFill,c=i.renderLine,h=i.staticBodySleepOpacity,d=i.sleepFillColor,u=i.sleepLineColor,p=i.hullColor,f=0;f<t.length;f++){var y=t[f];if(y.render.visible&&((n||!y.isStatic)&&(o||y.isStatic))){var v=y.render.lineColor,g=y.render.lineOpacity,m=y.render.lineThickness,b=y.render.fillColor,x=y.render.fillOpacity;s&&y.isSleeping&&(y.isStatic?(g*=h,x*=h):(v=u,b=d)),l||(b=null),c||(v=null),this.renderBody(y,e,r,v,g,m,b,x);var C=y.parts.length;a&&C>1&&this.renderConvexHull(y,e,p,m)}}},renderBody:function(t,e,i,o,n,s,r,a){void 0===o&&(o=null),void 0===n&&(n=null),void 0===s&&(s=1),void 0===r&&(r=null),void 0===a&&(a=null);for(var l=this.debugConfig,c=l.sensorFillColor,h=l.sensorLineColor,d=t.parts,u=d.length,p=u>1?1:0;p<u;p++){var f=d[p],y=f.render,v=y.opacity;if(y.visible&&0!==v&&(!f.isSensor||l.showSensors)){var g=f.circleRadius;if(e.beginPath(),f.isSensor?(null!==r&&e.fillStyle(c,a*v),null!==o&&e.lineStyle(s,h,n*v)):(null!==r&&e.fillStyle(r,a*v),null!==o&&e.lineStyle(s,o,n*v)),g)e.arc(f.position.x,f.position.y,g,0,2*Math.PI);else{var m=f.vertices,b=m.length;e.moveTo(m[0].x,m[0].y);for(var x=1;x<b;x++){var C=m[x];if(!m[x-1].isInternal||i?e.lineTo(C.x,C.y):e.moveTo(C.x,C.y),x<b&&C.isInternal&&!i){var w=(x+1)%b;e.moveTo(m[w].x,m[w].y)}}e.closePath()}null!==r&&e.fillPath(),null!==o&&e.strokePath()}}if(l.showPositions&&!t.isStatic){var S=t.position.x,B=t.position.y,A=Math.ceil(l.positionSize/2);e.fillStyle(l.positionColor,1),e.fillRect(S-A,B-A,l.positionSize,l.positionSize)}return this},renderConvexHull:function(t,e,i,o){if(void 0===o&&(o=1),t.parts.length>1){var n=t.vertices;e.lineStyle(o,i),e.beginPath(),e.moveTo(n[0].x,n[0].y);for(var s=1;s<n.length;s++)e.lineTo(n[s].x,n[s].y);e.lineTo(n[0].x,n[0].y),e.strokePath()}return this},renderJoints:function(){for(var t=this.debugGraphic,e=a.allConstraints(this.localWorld),i=0;i<e.length;i++){var o=e[i].render,n=o.lineColor,s=o.lineOpacity,r=o.lineThickness,l=o.pinSize,c=o.anchorColor,h=o.anchorSize;this.renderConstraint(e[i],t,n,s,r,l,c,h)}},renderConstraint:function(t,e,i,o,n,s,a,l){var c=t.render;if(!c.visible||!t.pointA||!t.pointB)return this;e.lineStyle(n,i,o);var h,d,u=t.bodyA,p=t.bodyB;if(h=u?g.add(u.position,t.pointA):t.pointA,"pin"===c.type)e.strokeCircle(h.x,h.y,s);else{if(d=p?g.add(p.position,t.pointB):t.pointB,e.beginPath(),e.moveTo(h.x,h.y),"spring"===c.type)for(var f,y=g.sub(d,h),v=g.perp(g.normalise(y)),m=Math.ceil(r.clamp(t.length/5,12,20)),b=1;b<m;b+=1)f=b%2==0?1:-1,e.lineTo(h.x+y.x*(b/m)+v.x*f*4,h.y+y.y*(b/m)+v.y*f*4);e.lineTo(d.x,d.y)}return e.strokePath(),c.anchors&&l>0&&(e.fillStyle(a),e.fillCircle(h.x,h.y,l),e.fillCircle(d.x,d.y,l)),this},resetCollisionIDs:function(){return n._nextCollidingGroupId=1,n._nextNonCollidingGroupId=-1,n._nextCategory=1,this},shutdown:function(){f.off(this.engine),this.removeAllListeners(),v.clear(this.localWorld,!1),l.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function(){this.shutdown()}});t.exports=m},58:function(t,e,i){var o={};t.exports=o;var n=i(37),s=i(25),r=i(31),a=i(47),l=i(46),c=i(568);o.rectangle=function(t,e,i,o,a){a=a||{};var l={label:"Rectangle Body",position:{x:t,y:e},vertices:n.fromPath("L 0 0 L "+i+" 0 L "+i+" "+o+" L 0 "+o)};if(a.chamfer){var c=a.chamfer;l.vertices=n.chamfer(l.vertices,c.radius,c.quality,c.qualityMin,c.qualityMax),delete a.chamfer}return r.create(s.extend({},l,a))},o.trapezoid=function(t,e,i,o,a,l){l=l||{};var c,h=i*(a*=.5),d=h+(1-2*a)*i,u=d+h;c=a<.5?"L 0 0 L "+h+" "+-o+" L "+d+" "+-o+" L "+u+" 0":"L 0 0 L "+d+" "+-o+" L "+u+" 0";var p={label:"Trapezoid Body",position:{x:t,y:e},vertices:n.fromPath(c)};if(l.chamfer){var f=l.chamfer;p.vertices=n.chamfer(p.vertices,f.radius,f.quality,f.qualityMin,f.qualityMax),delete l.chamfer}return r.create(s.extend({},p,l))},o.circle=function(t,e,i,n,r){n=n||{};var a={label:"Circle Body",circleRadius:i};r=r||25;var l=Math.ceil(Math.max(10,Math.min(r,i)));return l%2==1&&(l+=1),o.polygon(t,e,l,i,s.extend({},a,n))},o.polygon=function(t,e,i,a,l){if(l=l||{},i<3)return o.circle(t,e,a,l);for(var c=2*Math.PI/i,h="",d=.5*c,u=0;u<i;u+=1){var p=d+u*c,f=Math.cos(p)*a,y=Math.sin(p)*a;h+="L "+f.toFixed(3)+" "+y.toFixed(3)+" "}var v={label:"Polygon Body",position:{x:t,y:e},vertices:n.fromPath(h)};if(l.chamfer){var g=l.chamfer;v.vertices=n.chamfer(v.vertices,g.radius,g.quality,g.qualityMin,g.qualityMax),delete l.chamfer}return r.create(s.extend({},v,l))},o.fromVertices=function(t,e,i,a,l,h,d){var u,p,f,y,v,g;for(a=a||{},p=[],l=void 0!==l&&l,h=void 0!==h?h:.01,d=void 0!==d?d:10,c||s.warn("Bodies.fromVertices: poly-decomp.js required. Could not decompose vertices. Fallback to convex hull."),s.isArray(i[0])||(i=[i]),g=0;g<i.length;g+=1)if(y=i[g],(f=n.isConvex(y))||!c)y=f?n.clockwiseSort(y):n.hull(y),p.push({position:{x:t,y:e},vertices:y});else{var m=y.map((function(t){return[t.x,t.y]}));c.makeCCW(m),!1!==h&&c.removeCollinearPoints(m,h);var b=c.quickDecomp(m);for(v=0;v<b.length;v++){var x=b[v].map((function(t){return{x:t[0],y:t[1]}}));d>0&&n.area(x)<d||p.push({position:n.centre(x),vertices:x})}}for(v=0;v<p.length;v++)p[v]=r.create(s.extend(p[v],a));return l&&o.flagCoincidentParts(p,5),p.length>1?(u=r.create(s.extend({parts:p.slice(0)},a)),r.setPosition(u,{x:t,y:e}),u):p[0]},o.flagCoincidentParts=function(t,e){void 0===e&&(e=5);for(var i=0;i<t.length;i++)for(var o=t[i],n=i+1;n<t.length;n++){var s=t[n];if(a.overlaps(o.bounds,s.bounds))for(var r=o.vertices,c=s.vertices,h=0;h<o.vertices.length;h++)for(var d=0;d<s.vertices.length;d++){var u=l.magnitudeSquared(l.sub(r[(h+1)%r.length],c[d])),p=l.magnitudeSquared(l.sub(r[h],c[(d+1)%c.length]));u<e&&p<e&&(r[h].isInternal=!0,c[d].isInternal=!0)}}return t}},70:function(t,e){t.exports={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14}},79:function(t,e,i){var o={};t.exports=o;var n=i(104),s=i(25),r=i(47),a=i(31);o.create=function(t){return s.extend({id:s.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{}},t)},o.setModified=function(t,e,i,s){if(n.trigger(t,"compositeModified",t),t.isModified=e,i&&t.parent&&o.setModified(t.parent,e,i,s),s)for(var r=0;r<t.composites.length;r++){var a=t.composites[r];o.setModified(a,e,i,s)}},o.add=function(t,e){var i=[].concat(e);n.trigger(t,"beforeAdd",{object:e});for(var r=0;r<i.length;r++){var a=i[r];switch(a.type){case"body":if(a.parent!==a){s.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}o.addBody(t,a);break;case"constraint":o.addConstraint(t,a);break;case"composite":o.addComposite(t,a);break;case"mouseConstraint":o.addConstraint(t,a.constraint)}}return n.trigger(t,"afterAdd",{object:e}),t},o.remove=function(t,e,i){var s=[].concat(e);n.trigger(t,"beforeRemove",{object:e});for(var r=0;r<s.length;r++){var a=s[r];switch(a.type){case"body":o.removeBody(t,a,i);break;case"constraint":o.removeConstraint(t,a,i);break;case"composite":o.removeComposite(t,a,i);break;case"mouseConstraint":o.removeConstraint(t,a.constraint)}}return n.trigger(t,"afterRemove",{object:e}),t},o.addComposite=function(t,e){return t.composites.push(e),e.parent=t,o.setModified(t,!0,!0,!1),t},o.removeComposite=function(t,e,i){var n=t.composites.indexOf(e);if(-1!==n&&(o.removeCompositeAt(t,n),o.setModified(t,!0,!0,!1)),i)for(var s=0;s<t.composites.length;s++)o.removeComposite(t.composites[s],e,!0);return t},o.removeCompositeAt=function(t,e){return t.composites.splice(e,1),o.setModified(t,!0,!0,!1),t},o.addBody=function(t,e){return t.bodies.push(e),o.setModified(t,!0,!0,!1),t},o.removeBody=function(t,e,i){var n=t.bodies.indexOf(e);if(-1!==n&&(o.removeBodyAt(t,n),o.setModified(t,!0,!0,!1)),i)for(var s=0;s<t.composites.length;s++)o.removeBody(t.composites[s],e,!0);return t},o.removeBodyAt=function(t,e){return t.bodies.splice(e,1),o.setModified(t,!0,!0,!1),t},o.addConstraint=function(t,e){return t.constraints.push(e),o.setModified(t,!0,!0,!1),t},o.removeConstraint=function(t,e,i){var n=t.constraints.indexOf(e);if(-1!==n&&o.removeConstraintAt(t,n),i)for(var s=0;s<t.composites.length;s++)o.removeConstraint(t.composites[s],e,!0);return t},o.removeConstraintAt=function(t,e){return t.constraints.splice(e,1),o.setModified(t,!0,!0,!1),t},o.clear=function(t,e,i){if(i)for(var n=0;n<t.composites.length;n++)o.clear(t.composites[n],e,!0);return e?t.bodies=t.bodies.filter((function(t){return t.isStatic})):t.bodies.length=0,t.constraints.length=0,t.composites.length=0,o.setModified(t,!0,!0,!1),t},o.allBodies=function(t){for(var e=[].concat(t.bodies),i=0;i<t.composites.length;i++)e=e.concat(o.allBodies(t.composites[i]));return e},o.allConstraints=function(t){for(var e=[].concat(t.constraints),i=0;i<t.composites.length;i++)e=e.concat(o.allConstraints(t.composites[i]));return e},o.allComposites=function(t){for(var e=[].concat(t.composites),i=0;i<t.composites.length;i++)e=e.concat(o.allComposites(t.composites[i]));return e},o.get=function(t,e,i){var n,s;switch(i){case"body":n=o.allBodies(t);break;case"constraint":n=o.allConstraints(t);break;case"composite":n=o.allComposites(t).concat(t)}return n?0===(s=n.filter((function(t){return t.id.toString()===e.toString()}))).length?null:s[0]:null},o.move=function(t,e,i){return o.remove(t,e),o.add(i,e),t},o.rebase=function(t){for(var e=o.allBodies(t).concat(o.allConstraints(t)).concat(o.allComposites(t)),i=0;i<e.length;i++)e[i].id=s.nextId();return o.setModified(t,!0,!0,!1),t},o.translate=function(t,e,i){for(var n=i?o.allBodies(t):t.bodies,s=0;s<n.length;s++)a.translate(n[s],e);return o.setModified(t,!0,!0,!1),t},o.rotate=function(t,e,i,n){for(var s=Math.cos(e),r=Math.sin(e),l=n?o.allBodies(t):t.bodies,c=0;c<l.length;c++){var h=l[c],d=h.position.x-i.x,u=h.position.y-i.y;a.setPosition(h,{x:i.x+(d*s-u*r),y:i.y+(d*r+u*s)}),a.rotate(h,e)}return o.setModified(t,!0,!0,!1),t},o.scale=function(t,e,i,n,s){for(var r=s?o.allBodies(t):t.bodies,l=0;l<r.length;l++){var c=r[l],h=c.position.x-n.x,d=c.position.y-n.y;a.setPosition(c,{x:n.x+h*e,y:n.y+d*i}),a.scale(c,e,i)}return o.setModified(t,!0,!0,!1),t},o.bounds=function(t){for(var e=o.allBodies(t),i=[],n=0;n<e.length;n+=1){var s=e[n];i.push(s.bounds.min,s.bounds.max)}return r.create(i)}},90:function(t,e,i){var o={};t.exports=o;var n=i(37),s=i(46),r=i(103),a=i(47),l=i(171),c=i(25);o._warming=.4,o._torqueDampen=1,o._minLength=1e-6,o.create=function(t){var e=t;e.bodyA&&!e.pointA&&(e.pointA={x:0,y:0}),e.bodyB&&!e.pointB&&(e.pointB={x:0,y:0});var i=e.bodyA?s.add(e.bodyA.position,e.pointA):e.pointA,o=e.bodyB?s.add(e.bodyB.position,e.pointB):e.pointB,n=s.magnitude(s.sub(i,o));e.length=void 0!==e.length?e.length:n,e.id=e.id||c.nextId(),e.label=e.label||"Constraint",e.type="constraint",e.stiffness=e.stiffness||(e.length>0?1:.7),e.damping=e.damping||0,e.angularStiffness=e.angularStiffness||0,e.angleA=e.bodyA?e.bodyA.angle:e.angleA,e.angleB=e.bodyB?e.bodyB.angle:e.angleB,e.plugin={};var r={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return 0===e.length&&e.stiffness>.1?(r.type="pin",r.anchors=!1):e.stiffness<.9&&(r.type="spring"),e.render=c.extend(r,e.render),e},o.preSolveAll=function(t){for(var e=0;e<t.length;e+=1){var i=t[e],o=i.constraintImpulse;i.isStatic||0===o.x&&0===o.y&&0===o.angle||(i.position.x+=o.x,i.position.y+=o.y,i.angle+=o.angle)}},o.solveAll=function(t,e){for(var i=0;i<t.length;i+=1){var n=t[i],s=!n.bodyA||n.bodyA&&n.bodyA.isStatic,r=!n.bodyB||n.bodyB&&n.bodyB.isStatic;(s||r)&&o.solve(t[i],e)}for(i=0;i<t.length;i+=1)s=!(n=t[i]).bodyA||n.bodyA&&n.bodyA.isStatic,r=!n.bodyB||n.bodyB&&n.bodyB.isStatic,s||r||o.solve(t[i],e)},o.solve=function(t,e){var i=t.bodyA,n=t.bodyB,r=t.pointA,a=t.pointB;if(i||n){i&&!i.isStatic&&(s.rotate(r,i.angle-t.angleA,r),t.angleA=i.angle),n&&!n.isStatic&&(s.rotate(a,n.angle-t.angleB,a),t.angleB=n.angle);var l=r,c=a;if(i&&(l=s.add(i.position,r)),n&&(c=s.add(n.position,a)),l&&c){var h=s.sub(l,c),d=s.magnitude(h);d<o._minLength&&(d=o._minLength);var u,p,f,y,v,g=(d-t.length)/d,m=t.stiffness<1?t.stiffness*e:t.stiffness,b=s.mult(h,g*m),x=(i?i.inverseMass:0)+(n?n.inverseMass:0),C=x+((i?i.inverseInertia:0)+(n?n.inverseInertia:0));if(t.damping){var w=s.create();f=s.div(h,d),v=s.sub(n&&s.sub(n.position,n.positionPrev)||w,i&&s.sub(i.position,i.positionPrev)||w),y=s.dot(f,v)}i&&!i.isStatic&&(p=i.inverseMass/x,i.constraintImpulse.x-=b.x*p,i.constraintImpulse.y-=b.y*p,i.position.x-=b.x*p,i.position.y-=b.y*p,t.damping&&(i.positionPrev.x-=t.damping*f.x*y*p,i.positionPrev.y-=t.damping*f.y*y*p),u=s.cross(r,b)/C*o._torqueDampen*i.inverseInertia*(1-t.angularStiffness),i.constraintImpulse.angle-=u,i.angle-=u),n&&!n.isStatic&&(p=n.inverseMass/x,n.constraintImpulse.x+=b.x*p,n.constraintImpulse.y+=b.y*p,n.position.x+=b.x*p,n.position.y+=b.y*p,t.damping&&(n.positionPrev.x+=t.damping*f.x*y*p,n.positionPrev.y+=t.damping*f.y*y*p),u=s.cross(a,b)/C*o._torqueDampen*n.inverseInertia*(1-t.angularStiffness),n.constraintImpulse.angle+=u,n.angle+=u)}}},o.postSolveAll=function(t){for(var e=0;e<t.length;e++){var i=t[e],c=i.constraintImpulse;if(!(i.isStatic||0===c.x&&0===c.y&&0===c.angle)){r.set(i,!1);for(var h=0;h<i.parts.length;h++){var d=i.parts[h];n.translate(d.vertices,c),h>0&&(d.position.x+=c.x,d.position.y+=c.y),0!==c.angle&&(n.rotate(d.vertices,c.angle,i.position),l.rotate(d.axes,c.angle),h>0&&s.rotateAbout(d.position,c.angle,i.position,d.position)),a.update(d.bounds,d.vertices,i.velocity)}c.angle*=o._warming,c.x*=o._warming,c.y*=o._warming}}},o.pointAWorld=function(t){return{x:(t.bodyA?t.bodyA.position.x:0)+t.pointA.x,y:(t.bodyA?t.bodyA.position.y:0)+t.pointA.y}},o.pointBWorld=function(t){return{x:(t.bodyB?t.bodyB.position.x:0)+t.pointB.x,y:(t.bodyB?t.bodyB.position.y:0)+t.pointB.y}}}}]);