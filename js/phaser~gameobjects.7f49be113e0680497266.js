/*! For license information please see phaser~gameobjects.7f49be113e0680497266.js.LICENSE.txt */
(self.webpackChunk_agogpixel_phaser3_project_starter=self.webpackChunk_agogpixel_phaser3_project_starter||[]).push([[989],{90062:(t,e,i)=>{var s=i(87626),r=i(7973);t.exports=function(t,e,i){e.x=r(i,"x",0),e.y=r(i,"y",0),e.depth=r(i,"depth",0),e.flipX=r(i,"flipX",!1),e.flipY=r(i,"flipY",!1);var n=r(i,"scale",null);"number"==typeof n?e.setScale(n):null!==n&&(e.scaleX=r(n,"x",1),e.scaleY=r(n,"y",1));var a=r(i,"scrollFactor",null);"number"==typeof a?e.setScrollFactor(a):null!==a&&(e.scrollFactorX=r(a,"x",1),e.scrollFactorY=r(a,"y",1)),e.rotation=r(i,"rotation",0);var h=r(i,"angle",null);null!==h&&(e.angle=h),e.alpha=r(i,"alpha",1);var o=r(i,"origin",null);if("number"==typeof o)e.setOrigin(o);else if(null!==o){var l=r(o,"x",.5),d=r(o,"y",.5);e.setOrigin(l,d)}return e.blendMode=r(i,"blendMode",s.NORMAL),e.visible=r(i,"visible",!0),r(i,"add",!0)&&t.sys.displayList.add(e),e.preUpdate&&t.sys.updateList.add(e),e}},38596:(t,e,i)=>{var s=i(7973);t.exports=function(t,e){var i=s(e,"anims",null);if(null===i)return t;if("string"==typeof i)t.anims.play(i);else if("object"==typeof i){var r=t.anims,n=s(i,"key",void 0);if(n){var a=s(i,"startFrame",void 0),h=s(i,"delay",0),o=s(i,"repeat",0),l=s(i,"repeatDelay",0),d=s(i,"yoyo",!1),u=s(i,"play",!1),c=s(i,"delayedPlay",0),p={key:n,delay:h,repeat:o,repeatDelay:l,yoyo:d,startFrame:a};u?r.play(p):c>0?r.playAfterDelay(p,c):r.load(p)}}return t}},96656:(t,e,i)=>{var s=i(69186),r=i(49469),n=i(46236),a=i(99370),h=i(12063),o=i(46414),l=new s({Extends:r,initialize:function(t){r.call(this,t),this.sortChildrenFlag=!1,this.scene=t,this.systems=t.sys,this.events=t.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(h.BOOT,this.boot,this),this.events.on(h.START,this.start,this)},boot:function(){this.events.once(h.DESTROY,this.destroy,this)},addChildCallback:function(t){t.displayList&&t.displayList!==this&&t.removeFromDisplayList(),t.displayList||(this.queueDepthSort(),t.displayList=this,t.emit(a.ADDED_TO_SCENE,t,this.scene),this.events.emit(h.ADDED_TO_SCENE,t,this.scene))},removeChildCallback:function(t){this.queueDepthSort(),t.displayList=null,t.emit(a.REMOVED_FROM_SCENE,t,this.scene),this.events.emit(h.REMOVED_FROM_SCENE,t,this.scene)},start:function(){this.events.once(h.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(o(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(t,e){return t._depth-e._depth},getChildren:function(){return this.list},shutdown:function(){for(var t=this.list,e=t.length;e--;)t[e].destroy(!0);t.length=0,this.events.off(h.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(h.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});n.register("DisplayList",l,"displayList"),t.exports=l},66007:(t,e,i)=>{var s=i(69186),r=i(48547),n=i(46236),a=i(12063),h=new s({Extends:r,initialize:function(t){r.call(this),this.checkQueue=!0,this.scene=t,this.systems=t.sys,t.sys.events.once(a.BOOT,this.boot,this),t.sys.events.on(a.START,this.start,this)},boot:function(){this.systems.events.once(a.DESTROY,this.destroy,this)},start:function(){var t=this.systems.events;t.on(a.PRE_UPDATE,this.update,this),t.on(a.UPDATE,this.sceneUpdate,this),t.once(a.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(t,e){for(var i=this._active,s=i.length,r=0;r<s;r++){var n=i[r];n.active&&n.preUpdate.call(n,t,e)}},shutdown:function(){for(var t=this._active.length;t--;)this._active[t].destroy(!0);for(t=this._pending.length;t--;)this._pending[t].destroy(!0);for(t=this._destroy.length;t--;)this._destroy[t].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var e=this.systems.events;e.off(a.PRE_UPDATE,this.update,this),e.off(a.UPDATE,this.sceneUpdate,this),e.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(a.START,this.start,this),this.scene=null,this.systems=null}});n.register("UpdateList",h,"updateList"),t.exports=h},83162:t=>{t.exports=function(t,e,i,s,r,n,a,h,o,l,d,u,c,p,f){var v=i.x-e.displayOriginX+r,g=i.y-e.displayOriginY+n,m=v+i.w,y=g+i.h,x=a.getXRound(v,g,h),T=a.getYRound(v,g,h),w=a.getXRound(v,y,h),S=a.getYRound(v,y,h),b=a.getXRound(m,y,h),_=a.getYRound(m,y,h),L=a.getXRound(m,g,h),C=a.getYRound(m,g,h);t.batchQuad(e,x,T,w,S,b,_,L,C,s.u0,s.v0,s.u1,s.v1,o,l,d,u,c,p,f)}},90178:t=>{t.exports=function(t,e,i,s){if(void 0===i&&(i=!1),void 0===s)return{local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0};var r,n,a,h=t.text,o=h.length,l=t.maxWidth,d=t.wordWrapCharCode,u=Number.MAX_VALUE,c=Number.MAX_VALUE,p=0,f=0,v=t.fontData.chars,g=t.fontData.lineHeight,m=t.letterSpacing,y=0,x=0,T=0,w=null,S=t._align,b=0,_=0,L=t.fontSize/t.fontData.size,C=L*t.scaleX,E=L*t.scaleY,F=null,A=0,R=[],k=Number.MAX_VALUE,P=0,M=0,O=0,B=[],D=[],Y=null;if(l>0){for(r=0;r<o;r++)if(10!==(T=h.charCodeAt(r))){if(w=v[T]){if(null!==F)var X=w.kerning[A];T===d?null!==Y&&(B.push({word:Y.word,i:Y.i,x:Y.x*C,y:Y.y*E,w:Y.w*C,h:Y.h*E,cr:!1}),Y=null):(null===Y&&(Y={word:"",i:r,x:y,y:x,w:0,h:g,cr:!1}),Y.word=Y.word.concat(h[r]),Y.w+=w.xOffset+w.xAdvance+(void 0!==X?X:0)),y+=w.xAdvance+m,F=w,A=T}}else null!==Y&&(B.push({word:Y.word,i:Y.i,x:Y.x*C,y:Y.y*E,w:Y.w*C,h:Y.h*E,cr:!0}),Y=null),y=0,x+=g,F=null;var W;null!==Y&&B.push({word:Y.word,i:Y.i,x:Y.x*C,y:Y.y*E,w:Y.w*C,h:Y.h*E,cr:!1}),y=0,x=0,F=null,A=0;var I=0,z=[];for(r=0;r<B.length;r++){var V=B[r],G=V.x,U=V.x+V.w;W&&(I=G-(G-(W.x+W.w)+W.w),W=null),G-I>l||U-I>l?(z.push(V.i-1),V.cr?(z.push(V.i+V.word.length),I=0,W=null):W=V):V.cr&&(z.push(V.i+V.word.length),I=0,W=null)}for(r=z.length-1;r>=0;r--)n=h,a=z[r],"\n",h=n.substr(0,a)+"\n"+n.substr(a+1);s.wrappedText=h,o=h.length,B=[],Y=null}var N=0;for(r=0;r<o;r++)if(10!==(T=h.charCodeAt(r))){if(w=v[T]){if(b=y,_=x,null!==F){var H=w.kerning[A];b+=void 0!==H?H:0}u>b&&(u=b),c>_&&(c=_);var j=b+w.xAdvance,K=_+g;p<j&&(p=j),f<K&&(f=K);var Z=w.xOffset+w.xAdvance+(void 0!==H?H:0);T===d?null!==Y&&(B.push({word:Y.word,i:Y.i,x:Y.x*C,y:Y.y*E,w:Y.w*C,h:Y.h*E}),Y=null):(null===Y&&(Y={word:"",i:N,x:y,y:x,w:0,h:g}),Y.word=Y.word.concat(h[r]),Y.w+=Z),D.push({i:N,char:h[r],code:T,x:(w.xOffset+y)*L,y:(w.yOffset+x)*L,w:w.width*L,h:w.height*L,t:x*L,r:j*L,b:g*L,line:M,glyph:w}),y+=w.xAdvance+m,F=w,A=T,O=j*L,N++}}else null!==Y&&(B.push({word:Y.word,i:Y.i,x:Y.x*C,y:Y.y*E,w:Y.w*C,h:Y.h*E}),Y=null),y=0,x+=g,F=null,R[M]=O,O>P&&(P=O),O<k&&(k=O),M++,O=0;if(null!==Y&&B.push({word:Y.word,i:Y.i,x:Y.x*C,y:Y.y*E,w:Y.w*C,h:Y.h*E}),R[M]=O,O>P&&(P=O),O<k&&(k=O),S>0)for(var q=0;q<D.length;q++){var J=D[q];if(1===S){var Q=(P-R[J.line])/2;J.x+=Q,J.r+=Q}else if(2===S){var $=P-R[J.line];J.x+=$,J.r+=$}}var tt=s.local,et=s.global,it=s.lines;return tt.x=u*L,tt.y=c*L,tt.width=p*L,tt.height=f*L,et.x=t.x-t._displayOriginX+u*C,et.y=t.y-t._displayOriginY+c*E,et.width=p*C,et.height=f*E,it.shortest=k,it.longest=P,it.lengths=R,e&&(tt.x=Math.ceil(tt.x),tt.y=Math.ceil(tt.y),tt.width=Math.ceil(tt.width),tt.height=Math.ceil(tt.height),et.x=Math.ceil(et.x),et.y=Math.ceil(et.y),et.width=Math.ceil(et.width),et.height=Math.ceil(et.height),it.shortest=Math.ceil(k),it.longest=Math.ceil(P)),i&&(t._displayOriginX=t.originX*tt.width,t._displayOriginY=t.originY*tt.height,et.x=t.x-t._displayOriginX*t.scaleX,et.y=t.y-t._displayOriginY*t.scaleY,e&&(et.x=Math.ceil(et.x),et.y=Math.ceil(et.y))),s.words=B,s.characters=D,s.lines.height=g,s.scale=L,s.scaleX=t.scaleX,s.scaleY=t.scaleY,s}},88537:(t,e,i)=>{var s=i(95634);t.exports=function(t,e,i,r,n,a,h){var o=t.sys.textures.get(i),l=o.get(r),d=t.sys.cache.xml.get(n);if(l&&d){var u=s(d,l,a,h,o);return t.sys.cache.bitmapFont.add(e,{data:u,texture:i,frame:r,fromAtlas:!0}),!0}return!1}},56189:(t,e,i)=>{var s=i(76076);t.exports=function(t,e){var i=e.width,r=e.height,n=Math.floor(i/2),a=Math.floor(r/2),h=s(e,"chars","");if(""!==h){var o=s(e,"image",""),l=t.sys.textures.getFrame(o),d=l.cutX,u=l.cutY,c=l.source.width,p=l.source.height,f=s(e,"offset.x",0),v=s(e,"offset.y",0),g=s(e,"spacing.x",0),m=s(e,"spacing.y",0),y=s(e,"lineSpacing",0),x=s(e,"charsPerRow",null);null===x&&(x=c/i)>h.length&&(x=h.length);for(var T=f,w=v,S={retroFont:!0,font:o,size:i,lineHeight:r+y,chars:{}},b=0,_=0;_<h.length;_++){var L=h.charCodeAt(_),C=(d+T)/c,E=(u+w)/p,F=(d+T+i)/c,A=(u+w+r)/p;S.chars[L]={x:T,y:w,width:i,height:r,centerX:n,centerY:a,xOffset:0,yOffset:0,xAdvance:i,data:{},kerning:{},u0:C,v0:E,u1:F,v1:A},++b===x?(b=0,T=f,w+=r+m):T+=i+g}return{data:S,frame:null,texture:o}}}},95634:t=>{function e(t,e){return parseInt(t.getAttribute(e),10)}t.exports=function(t,i,s,r,n){void 0===s&&(s=0),void 0===r&&(r=0);var a=i.cutX,h=i.cutY,o=i.source.width,l=i.source.height,d=i.sourceIndex,u={},c=t.getElementsByTagName("info")[0],p=t.getElementsByTagName("common")[0];u.font=c.getAttribute("face"),u.size=e(c,"size"),u.lineHeight=e(p,"lineHeight")+r,u.chars={};var f=t.getElementsByTagName("char"),v=void 0!==i&&i.trimmed;if(v)var g=i.height,m=i.width;for(var y=0;y<f.length;y++){var x=f[y],T=e(x,"id"),w=String.fromCharCode(T),S=e(x,"x"),b=e(x,"y"),_=e(x,"width"),L=e(x,"height");v&&(S<m&&(m=S),b<g&&(g=b)),v&&0!==g&&0!==m&&(S-=i.x,b-=i.y);var C=(a+S)/o,E=(h+b)/l,F=(a+S+_)/o,A=(h+b+L)/l;if(u.chars[T]={x:S,y:b,width:_,height:L,centerX:Math.floor(_/2),centerY:Math.floor(L/2),xOffset:e(x,"xoffset"),yOffset:e(x,"yoffset"),xAdvance:e(x,"xadvance")+s,data:{},kerning:{},u0:C,v0:E,u1:F,v1:A},n&&0!==_&&0!==L){var R=n.add(w,d,S,b,_,L);R&&R.setUVs(_,L,C,E,F,A)}}var k=t.getElementsByTagName("kerning");for(y=0;y<k.length;y++){var P=k[y],M=e(P,"first"),O=e(P,"second"),B=e(P,"amount");u.chars[O].kerning[M]=B}return u}},32751:(t,e,i)=>{var s=i(57790),r=i(72646),n={Parse:i(56189)};n=r(!1,n,s),t.exports=n},57790:t=>{t.exports={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:"ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789\"(),-.' ",TEXT_SET7:"AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW\")28FLRX-'39",TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:"ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'\"?!",TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,\"-+!?()':;0123456789"}},92871:(t,e,i)=>{var s=i(74797),r=i(69186),n=i(78887),a=new r({Extends:s,Mixins:[n],initialize:function(t,e,i,r,n,a,h){s.call(this,t,e,i,r,n,a,h),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(t,e){return this.cropWidth=t,this.cropHeight=e,this},setDisplayCallback:function(t){return this.displayCallback=t,this},setScrollX:function(t){return this.scrollX=t,this},setScrollY:function(t){return this.scrollY=t,this}});t.exports=a},5528:(t,e,i)=>{var s=i(14437);t.exports=function(t,e,i,r){var n=e._text,a=n.length,h=t.currentContext;if(0!==a&&s(t,h,e,i,r)){i.addToRenderList(e);var o=e.fromAtlas?e.frame:e.texture.frames.__BASE,l=e.displayCallback,d=e.callbackData,u=e.fontData.chars,c=e.fontData.lineHeight,p=e._letterSpacing,f=0,v=0,g=0,m=null,y=0,x=0,T=0,w=0,S=0,b=0,_=null,L=0,C=e.frame.source.image,E=o.cutX,F=o.cutY,A=0,R=0,k=e._fontSize/e.fontData.size,P=e._align,M=0,O=0;e.getTextBounds(!1);var B=e._bounds.lines;1===P?O=(B.longest-B.lengths[0])/2:2===P&&(O=B.longest-B.lengths[0]),h.translate(-e.displayOriginX,-e.displayOriginY);var D=i.roundPixels;e.cropWidth>0&&e.cropHeight>0&&(h.beginPath(),h.rect(0,0,e.cropWidth,e.cropHeight),h.clip());for(var Y=0;Y<a;Y++)if(R=k,A=0,10!==(g=n.charCodeAt(Y))){if(m=u[g]){if(y=E+m.x,x=F+m.y,T=m.width,w=m.height,S=m.xOffset+f-e.scrollX,b=m.yOffset+v-e.scrollY,null!==_){var X=m.kerning[L];S+=void 0!==X?X:0}if(l){d.index=Y,d.charCode=g,d.x=S,d.y=b,d.scale=R,d.rotation=A,d.data=m.data;var W=l(d);S=W.x,b=W.y,R=W.scale,A=W.rotation}S*=R,b*=R,S+=O,f+=m.xAdvance+p,_=m,L=g,0!==T&&0!==w&&32!==g&&(D&&(S=Math.round(S),b=Math.round(b)),h.save(),h.translate(S,b),h.rotate(A),h.scale(R,R),h.drawImage(C,y,x,T,w,0,0,T,w),h.restore())}}else M++,1===P?O=(B.longest-B.lengths[M])/2:2===P&&(O=B.longest-B.lengths[M]),f=0,v+=c,_=null;h.restore()}}},78739:(t,e,i)=>{var s=i(92871),r=i(90062),n=i(78757),a=i(7973);n.register("dynamicBitmapText",(function(t,e){void 0===t&&(t={});var i=a(t,"font",""),n=a(t,"text",""),h=a(t,"size",!1),o=new s(this.scene,0,0,i,n,h);return void 0!==e&&(t.add=e),r(this.scene,o,t),o}))},61798:(t,e,i)=>{var s=i(92871);i(66642).register("dynamicBitmapText",(function(t,e,i,r,n){return this.displayList.add(new s(this.scene,t,e,i,r,n))}))},78887:(t,e,i)=>{var s=i(45733),r=i(45733);s=i(75537),r=i(5528),t.exports={renderWebGL:s,renderCanvas:r}},75537:(t,e,i)=>{var s=i(3142),r=i(9329),n=i(64564),a=new r;t.exports=function(t,e,i,r){var h=e.text,o=h.length;if(0!==o){i.addToRenderList(e);var l=t.pipelines.set(e.pipeline,e),d=s(e,i,r),u=d.sprite,c=d.calc,p=a,f=e.cropWidth>0||e.cropHeight>0;f&&(l.flush(),t.pushScissor(c.tx,c.ty,e.cropWidth*c.scaleX,e.cropHeight*c.scaleY));var v,g,m=e.frame.glTexture,y=e.tintFill,x=n.getTintAppendFloatAlpha(e.tintTopLeft,i.alpha*e._alphaTL),T=n.getTintAppendFloatAlpha(e.tintTopRight,i.alpha*e._alphaTR),w=n.getTintAppendFloatAlpha(e.tintBottomLeft,i.alpha*e._alphaBL),S=n.getTintAppendFloatAlpha(e.tintBottomRight,i.alpha*e._alphaBR),b=l.setGameObject(e),_=0,L=0,C=0,E=0,F=e.letterSpacing,A=0,R=0,k=e.scrollX,P=e.scrollY,M=e.fontData,O=M.chars,B=M.lineHeight,D=e.fontSize/M.size,Y=0,X=e._align,W=0,I=0,z=e.getTextBounds(!1);e.maxWidth>0&&(o=(h=z.wrappedText).length);var V=e._bounds.lines;1===X?I=(V.longest-V.lengths[0])/2:2===X&&(I=V.longest-V.lengths[0]);var G=i.roundPixels,U=e.displayCallback,N=e.callbackData;t.pipelines.preBatch(e);for(var H=0;H<o;H++)if(10!==(C=h.charCodeAt(H))){if(v=O[C]){A=v.width,R=v.height;var j=v.xOffset+_-k,K=v.yOffset+L-P;if(null!==g){var Z=v.kerning[E];j+=void 0!==Z?Z:0}if(_+=v.xAdvance+F,g=v,E=C,0!==A&&0!==R&&32!==C){if(D=e.fontSize/e.fontData.size,Y=0,U){N.color=0,N.tint.topLeft=x,N.tint.topRight=T,N.tint.bottomLeft=w,N.tint.bottomRight=S,N.index=H,N.charCode=C,N.x=j,N.y=K,N.scale=D,N.rotation=Y,N.data=v.data;var q=U(N);j=q.x,K=q.y,D=q.scale,Y=q.rotation,q.color?(x=q.color,T=q.color,w=q.color,S=q.color):(x=q.tint.topLeft,T=q.tint.topRight,w=q.tint.bottomLeft,S=q.tint.bottomRight),x=n.getTintAppendFloatAlpha(x,i.alpha*e._alphaTL),T=n.getTintAppendFloatAlpha(T,i.alpha*e._alphaTR),w=n.getTintAppendFloatAlpha(w,i.alpha*e._alphaBL),S=n.getTintAppendFloatAlpha(S,i.alpha*e._alphaBR)}j*=D,K*=D,j-=e.displayOriginX,K-=e.displayOriginY,j+=I,p.applyITRS(j,K,Y,D,D),c.multiply(p,u);var J=v.u0,Q=v.v0,$=v.u1,tt=v.v1,et=A,it=R,st=u.e,rt=u.f,nt=it*u.c+u.e,at=it*u.d+u.f,ht=et*u.a+it*u.c+u.e,ot=et*u.b+it*u.d+u.f,lt=et*u.a+u.e,dt=et*u.b+u.f;G&&(st=Math.round(st),rt=Math.round(rt),nt=Math.round(nt),at=Math.round(at),ht=Math.round(ht),ot=Math.round(ot),lt=Math.round(lt),dt=Math.round(dt)),l.batchQuad(e,st,rt,nt,at,ht,ot,lt,dt,J,Q,$,tt,x,T,w,S,y,m,b)}}}else W++,1===X?I=(V.longest-V.lengths[W])/2:2===X&&(I=V.longest-V.lengths[W]),_=0,L+=B,g=null;f&&(l.flush(),t.popScissor()),t.pipelines.postBatch(e)}}},74797:(t,e,i)=>{var s=i(69186),r=i(2543),n=i(19506),a=i(38236),h=i(90178),o=i(88537),l=i(95634),d=i(75380),u=i(17459),c=new s({Extends:a,Mixins:[n.Alpha,n.BlendMode,n.Depth,n.Mask,n.Origin,n.Pipeline,n.ScrollFactor,n.Texture,n.Tint,n.Transform,n.Visible,u],initialize:function(t,e,i,s,r,n,o){void 0===r&&(r=""),void 0===o&&(o=0),a.call(this,t,"BitmapText"),this.font=s;var l=this.scene.sys.cache.bitmapFont.get(s);l||console.warn("Invalid BitmapText key: "+s),this.fontData=l.data,this._text="",this._fontSize=n||this.fontData.size,this._letterSpacing=0,this._align=o,this._bounds=h(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=l.fromAtlas,this.setTexture(l.texture,l.frame),this.setPosition(e,i),this.setOrigin(0,0),this.initPipeline(),this.setText(r)},setLeftAlign:function(){return this._align=c.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=c.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=c.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(t){return this._fontSize=t,this._dirty=!0,this},setLetterSpacing:function(t){return void 0===t&&(t=0),this._letterSpacing=t,this._dirty=!0,this},setText:function(t){return t||0===t||(t=""),Array.isArray(t)&&(t=t.join("\n")),t!==this.text&&(this._text=t.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(t,e,i,s){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=.5),this.dropShadowX=t,this.dropShadowY=e,this.dropShadowColor=i,this.dropShadowAlpha=s,this},setCharacterTint:function(t,e,i,s,n,a,h){void 0===t&&(t=0),void 0===e&&(e=1),void 0===i&&(i=!1),void 0===s&&(s=-1),void 0===n&&(n=s,a=s,h=s);var o=this.text.length;-1===e&&(e=o),t<0&&(t=o+t),t=r(t,0,o-1);for(var l=r(t+e,t,o),d=this.charColors,u=t;u<l;u++){var c=d[u];if(-1===s)d[u]=null;else{var p=i?1:0;c?(c.tintEffect=p,c.tintTL=s,c.tintTR=n,c.tintBL=a,c.tintBR=h):d[u]={tintEffect:p,tintTL:s,tintTR:n,tintBL:a,tintBR:h}}}return this},setWordTint:function(t,e,i,s,r,n,a){void 0===e&&(e=1);for(var h=this.getTextBounds().words,o="number"==typeof t,l=0,d=0;d<h.length;d++){var u=h[d];if((o&&d===t||!o&&u.word===t)&&(this.setCharacterTint(u.i,u.word.length,i,s,r,n,a),++l===e))return this}return this},getTextBounds:function(t){var e=this._bounds;return(this._dirty||t||this.scaleX!==e.scaleX||this.scaleY!==e.scaleY)&&(h(this,t,!0,e),this._dirty=!1),e},getCharacterAt:function(t,e,i){for(var s=this.getLocalPoint(t,e,null,i),r=this.getTextBounds().characters,n=new d,a=0;a<r.length;a++){var h=r[a];if(n.setTo(h.x,h.t,h.r-h.x,h.b),n.contains(s.x,s.y))return h}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(t,e,i){if(void 0===e&&(e=this._fontSize),void 0===i&&(i=this._align),t!==this.font){var s=this.scene.sys.cache.bitmapFont.get(t);s&&(this.font=t,this.fontData=s.data,this._fontSize=e,this._align=i,this.fromAtlas=!0===s.fromAtlas,this.setTexture(s.texture,s.frame),h(this,!1,!0,this._bounds))}return this},setMaxWidth:function(t,e){return this._maxWidth=t,this._dirty=!0,void 0!==e&&(this.wordWrapCharCode=e),this},align:{set:function(t){this._align=t,this._dirty=!0},get:function(){return this._align}},text:{set:function(t){this.setText(t)},get:function(){return this._text}},fontSize:{set:function(t){this._fontSize=t,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(t){this._letterSpacing=t,this._dirty=!0},get:function(){return this._letterSpacing}},maxWidth:{set:function(t){this._maxWidth=t,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},toJSON:function(){var t=n.ToJSON(this),e={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,align:this.align};return t.data=e,t},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});c.ALIGN_LEFT=0,c.ALIGN_CENTER=1,c.ALIGN_RIGHT=2,c.ParseFromAtlas=o,c.ParseXMLBitmapFont=l,t.exports=c},39005:(t,e,i)=>{var s=i(14437);t.exports=function(t,e,i,r){var n=e._text,a=n.length,h=t.currentContext;if(0!==a&&s(t,h,e,i,r)){i.addToRenderList(e);var o=e.fromAtlas?e.frame:e.texture.frames.__BASE,l=e.fontData.chars,d=e.fontData.lineHeight,u=e._letterSpacing,c=0,p=0,f=0,v=null,g=0,m=0,y=0,x=0,T=0,w=0,S=null,b=0,_=o.source.image,L=o.cutX,C=o.cutY,E=e._fontSize/e.fontData.size,F=e._align,A=0,R=0,k=e.getTextBounds(!1);e.maxWidth>0&&(a=(n=k.wrappedText).length);var P=e._bounds.lines;1===F?R=(P.longest-P.lengths[0])/2:2===F&&(R=P.longest-P.lengths[0]),h.translate(-e.displayOriginX,-e.displayOriginY);for(var M=i.roundPixels,O=0;O<a;O++)if(10!==(f=n.charCodeAt(O))){if(v=l[f]){if(g=L+v.x,m=C+v.y,y=v.width,x=v.height,T=v.xOffset+c,w=v.yOffset+p,null!==S){var B=v.kerning[b];T+=void 0!==B?B:0}T*=E,w*=E,T+=R,c+=v.xAdvance+u,S=v,b=f,0!==y&&0!==x&&32!==f&&(M&&(T=Math.round(T),w=Math.round(w)),h.save(),h.translate(T,w),h.scale(E,E),h.drawImage(_,g,m,y,x,0,0,y,x),h.restore())}}else A++,1===F?R=(P.longest-P.lengths[A])/2:2===F&&(R=P.longest-P.lengths[A]),c=0,p+=d,S=null;h.restore()}}},46292:(t,e,i)=>{var s=i(74797),r=i(90062),n=i(78757),a=i(7973),h=i(76076);n.register("bitmapText",(function(t,e){void 0===t&&(t={});var i=h(t,"font",""),n=a(t,"text",""),o=a(t,"size",!1),l=h(t,"align",0),d=new s(this.scene,0,0,i,n,o,l);return void 0!==e&&(t.add=e),r(this.scene,d,t),d}))},93676:(t,e,i)=>{var s=i(74797);i(66642).register("bitmapText",(function(t,e,i,r,n,a){return this.displayList.add(new s(this.scene,t,e,i,r,n,a))}))},17459:(t,e,i)=>{var s=i(45733),r=i(45733);s=i(35158),r=i(39005),t.exports={renderWebGL:s,renderCanvas:r}},35158:(t,e,i)=>{var s=i(83162),r=i(3142),n=i(64564);t.exports=function(t,e,i,a){if(0!==e._text.length){i.addToRenderList(e);var h,o,l,d=t.pipelines.set(e.pipeline,e),u=r(e,i,a).calc,c=i.roundPixels,p=i.alpha,f=e.charColors,v=e.tintFill,g=n.getTintAppendFloatAlpha,m=g(e.tintTopLeft,p*e._alphaTL),y=g(e.tintTopRight,p*e._alphaTR),x=g(e.tintBottomLeft,p*e._alphaBL),T=g(e.tintBottomRight,p*e._alphaBR),w=e.frame.glTexture,S=d.setGameObject(e),b=e.getTextBounds(!1).characters,_=e.dropShadowX,L=e.dropShadowY,C=0!==_||0!==L;if(t.pipelines.preBatch(e),C){var E=e.dropShadowColor,F=e.dropShadowAlpha,A=g(E,p*F*e._alphaTL),R=g(E,p*F*e._alphaTR),k=g(E,p*F*e._alphaBL),P=g(E,p*F*e._alphaBR);for(h=0;h<b.length;h++)l=(o=b[h]).glyph,32!==o.code&&0!==l.width&&0!==l.height&&s(d,e,o,l,_,L,u,c,A,R,k,P,1,w,S)}for(h=0;h<b.length;h++)if(l=(o=b[h]).glyph,32!==o.code&&0!==l.width&&0!==l.height)if(f[o.i]){var M=f[o.i],O=M.tintEffect,B=g(M.tintTL,p*e._alphaTL),D=g(M.tintTR,p*e._alphaTR),Y=g(M.tintBL,p*e._alphaBL),X=g(M.tintBR,p*e._alphaBR);s(d,e,o,l,0,0,u,c,B,D,Y,X,O,w,S)}else s(d,e,o,l,0,0,u,c,m,y,x,T,v,w,S);t.pipelines.postBatch(e)}}},16330:(t,e,i)=>{var s=i(37580),r=i(45594),n=i(69186),a=i(19506),h=i(79175),o=i(38236),l=i(49469),d=new n({Extends:o,Mixins:[a.Alpha,a.BlendMode,a.Depth,a.Mask,a.Pipeline,a.ScrollFactor,a.Size,a.Texture,a.Transform,a.Visible,s],initialize:function(t,e,i,s,r){o.call(this,t,"Blitter"),this.setTexture(s,r),this.setPosition(e,i),this.initPipeline(),this.children=new l,this.renderList=[],this.dirty=!1},create:function(t,e,i,s,n){void 0===s&&(s=!0),void 0===n&&(n=this.children.length),void 0===i?i=this.frame:i instanceof h||(i=this.texture.get(i));var a=new r(this,t,e,i,s);return this.children.addAt(a,n,!1),this.dirty=!0,a},createFromCallback:function(t,e,i,s){for(var r=this.createMultiple(e,i,s),n=0;n<r.length;n++){var a=r[n];t.call(this,a,n)}return r},createMultiple:function(t,e,i){void 0===e&&(e=this.frame.name),void 0===i&&(i=!0),Array.isArray(e)||(e=[e]);var s=[],r=this;return e.forEach((function(e){for(var n=0;n<t;n++)s.push(r.create(0,0,e,i))})),s},childCanRender:function(t){return t.visible&&t.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});t.exports=d},51644:t=>{t.exports=function(t,e,i,s){var r=e.getRenderList();if(0!==r.length){var n=t.currentContext,a=i.alpha*e.alpha;if(0!==a){i.addToRenderList(e),n.globalCompositeOperation=t.blendModes[e.blendMode],n.imageSmoothingEnabled=!(!t.antialias||e.frame.source.scaleMode);var h=e.x-i.scrollX*e.scrollFactorX,o=e.y-i.scrollY*e.scrollFactorY;n.save(),s&&s.copyToContext(n);for(var l=i.roundPixels,d=0;d<r.length;d++){var u=r[d],c=u.flipX||u.flipY,p=u.frame,f=p.canvasData,v=p.x,g=p.y,m=1,y=1,x=u.alpha*a;0!==x&&(n.globalAlpha=x,c?(u.flipX&&(m=-1,v-=f.width),u.flipY&&(y=-1,g-=f.height),n.save(),n.translate(u.x+h,u.y+o),n.scale(m,y),n.drawImage(p.source.image,f.x,f.y,f.width,f.height,v,g,f.width,f.height),n.restore()):(l&&(v=Math.round(v),g=Math.round(g)),n.drawImage(p.source.image,f.x,f.y,f.width,f.height,v+u.x+h,g+u.y+o,f.width,f.height)))}n.restore()}}}},79679:(t,e,i)=>{var s=i(16330),r=i(90062),n=i(78757),a=i(7973);n.register("blitter",(function(t,e){void 0===t&&(t={});var i=a(t,"key",null),n=a(t,"frame",null),h=new s(this.scene,0,0,i,n);return void 0!==e&&(t.add=e),r(this.scene,h,t),h}))},38564:(t,e,i)=>{var s=i(16330);i(66642).register("blitter",(function(t,e,i,r){return this.displayList.add(new s(this.scene,t,e,i,r))}))},37580:(t,e,i)=>{var s=i(45733),r=i(45733);s=i(60619),r=i(51644),t.exports={renderWebGL:s,renderCanvas:r}},60619:(t,e,i)=>{var s=i(9329),r=i(64564),n=new s;t.exports=function(t,e,i,s){var a=e.getRenderList();if(0!==a.length){var h=i.alpha*e.alpha;if(0!==h){i.addToRenderList(e);var o=t.pipelines.set(this.pipeline,e),l=i.scrollX*e.scrollFactorX,d=i.scrollY*e.scrollFactorY,u=n.copyFrom(i.matrix);s&&(u.multiplyWithOffset(s,-l,-d),l=0,d=0);var c=e.x-l,p=e.y-d,f=-1,v=i.roundPixels;t.pipelines.preBatch(e);for(var g=0;g<a.length;g++){var m=a[g],y=m.frame,x=m.alpha*h;if(0!==x){var T=y.width,w=y.height,S=c+m.x+y.x,b=p+m.y+y.y;m.flipX&&(T*=-1,S+=y.width),m.flipY&&(w*=-1,b+=y.height);var _=S+T,L=b+w,C=u.getX(S,b),E=u.getY(S,b),F=u.getX(_,L),A=u.getY(_,L),R=r.getTintAppendFloatAlpha(m.tint,x);if(y.sourceIndex!==f){var k=o.setGameObject(e,y);f=y.sourceIndex}v&&(C=Math.round(C),E=Math.round(E),F=Math.round(F),A=Math.round(A)),o.batchQuad(e,C,E,C,A,F,A,F,E,y.u0,y.v0,y.u1,y.v1,R,R,R,R,!1,y.glTexture,k)&&(f=-1)}}t.pipelines.postBatch(e)}}}},45594:(t,e,i)=>{var s=i(69186),r=i(79175),n=new s({initialize:function(t,e,i,s,r){this.parent=t,this.x=e,this.y=i,this.frame=s,this.data={},this.tint=16777215,this._visible=r,this._alpha=1,this.flipX=!1,this.flipY=!1},setFrame:function(t){return void 0===t?this.frame=this.parent.frame:t instanceof r&&t.texture===this.parent.texture?this.frame=t:this.frame=this.parent.texture.get(t),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(t,e,i){return this.x=t,this.y=e,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,i&&this.setFrame(i),this},setPosition:function(t,e){return this.x=t,this.y=e,this},setFlipX:function(t){return this.flipX=t,this},setFlipY:function(t){return this.flipY=t,this},setFlip:function(t,e){return this.flipX=t,this.flipY=e,this},setVisible:function(t){return this.visible=t,this},setAlpha:function(t){return this.alpha=t,this},setTint:function(t){return this.tint=t,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(t){this.parent.dirty|=this._visible!==t,this._visible=t}},alpha:{get:function(){return this._alpha},set:function(t){this.parent.dirty|=this._alpha>0!=t>0,this._alpha=t}}});t.exports=n},22675:(t,e,i)=>{var s=i(47205),r=i(87626),n=i(69186),a=i(19506),h=i(99370),o=i(38236),l=i(75380),d=i(1449),u=i(20822),c=i(17321),p=new n({Extends:o,Mixins:[a.AlphaSingle,a.BlendMode,a.ComputedSize,a.Depth,a.Mask,a.Pipeline,a.Transform,a.Visible,d],initialize:function(t,e,i,s){o.call(this,t,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new a.TransformMatrix,this.tempTransformMatrix=new a.TransformMatrix,this._sortKey="",this._sysEvents=t.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPipeline(),this.setPosition(e,i),this.clearAlpha(),this.setBlendMode(r.SKIP_CHECK),s&&this.add(s)},originX:{get:function(){return.5}},originY:{get:function(){return.5}},displayOriginX:{get:function(){return.5*this.width}},displayOriginY:{get:function(){return.5*this.height}},setExclusive:function(t){return void 0===t&&(t=!0),this.exclusive=t,this},getBounds:function(t){if(void 0===t&&(t=new l),t.setTo(this.x,this.y,0,0),this.parentContainer){var e=this.parentContainer.getBoundsTransformMatrix().transformPoint(this.x,this.y);t.setTo(e.x,e.y,0,0)}if(this.list.length>0){var i=this.list,s=new l,r=!1;t.setEmpty();for(var n=0;n<i.length;n++){var a=i[n];a.getBounds&&(a.getBounds(s),r?u(s,t,t):(t.setTo(s.x,s.y,s.width,s.height),r=!0))}}return t},addHandler:function(t){t.once(h.DESTROY,this.remove,this),this.exclusive&&(t.parentContainer&&t.parentContainer.remove(t),t.removeFromDisplayList(),t.parentContainer=this)},removeHandler:function(t){t.off(h.DESTROY,this.remove),this.exclusive&&(t.parentContainer=null,t.addToDisplayList())},pointToContainer:function(t,e){void 0===e&&(e=new c),this.parentContainer?this.parentContainer.pointToContainer(t,e):e=new c(t.x,t.y);var i=this.tempTransformMatrix;return i.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),i.invert(),i.transformPoint(t.x,t.y,e),e},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(t){return s.Add(this.list,t,this.maxSize,this.addHandler,this),this},addAt:function(t,e){return s.AddAt(this.list,t,e,this.maxSize,this.addHandler,this),this},getAt:function(t){return this.list[t]},getIndex:function(t){return this.list.indexOf(t)},sort:function(t,e){return t?(void 0===e&&(e=function(e,i){return e[t]-i[t]}),s.StableSort(this.list,e),this):this},getByName:function(t){return s.GetFirst(this.list,"name",t)},getRandom:function(t,e){return s.GetRandom(this.list,t,e)},getFirst:function(t,e,i,r){return s.GetFirst(this.list,t,e,i,r)},getAll:function(t,e,i,r){return s.GetAll(this.list,t,e,i,r)},count:function(t,e,i,r){return s.CountAllMatching(this.list,t,e,i,r)},swap:function(t,e){return s.Swap(this.list,t,e),this},moveTo:function(t,e){return s.MoveTo(this.list,t,e),this},moveAbove:function(t,e){return s.MoveAbove(this.list,t,e),this},moveBelow:function(t,e){return s.MoveBelow(this.list,t,e),this},remove:function(t,e){var i=s.Remove(this.list,t,this.removeHandler,this);if(e&&i){Array.isArray(i)||(i=[i]);for(var r=0;r<i.length;r++)i[r].destroy()}return this},removeAt:function(t,e){var i=s.RemoveAt(this.list,t,this.removeHandler,this);return e&&i&&i.destroy(),this},removeBetween:function(t,e,i){var r=s.RemoveBetween(this.list,t,e,this.removeHandler,this);if(i)for(var n=0;n<r.length;n++)r[n].destroy();return this},removeAll:function(t){var e=s.RemoveBetween(this.list,0,this.list.length,this.removeHandler,this);if(t)for(var i=0;i<e.length;i++)e[i].destroy();return this},bringToTop:function(t){return s.BringToTop(this.list,t),this},sendToBack:function(t){return s.SendToBack(this.list,t),this},moveUp:function(t){return s.MoveUp(this.list,t),this},moveDown:function(t){return s.MoveDown(this.list,t),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return s.Shuffle(this.list),this},replace:function(t,e,i){return s.Replace(this.list,t,e)&&(this.addHandler(e),this.removeHandler(t),i&&t.destroy()),this},exists:function(t){return this.list.indexOf(t)>-1},setAll:function(t,e,i,r){return s.SetAll(this.list,t,e,i,r),this},each:function(t,e){var i,s=[null],r=this.list.slice(),n=r.length;for(i=2;i<arguments.length;i++)s.push(arguments[i]);for(i=0;i<n;i++)s[0]=r[i],t.apply(e,s);return this},iterate:function(t,e){var i,s=[null];for(i=2;i<arguments.length;i++)s.push(arguments[i]);for(i=0;i<this.list.length;i++)s[0]=this.list[i],t.apply(e,s);return this},setScrollFactor:function(t,e,i){return void 0===e&&(e=t),void 0===i&&(i=!1),this.scrollFactorX=t,this.scrollFactorY=e,i&&(s.SetAll(this.list,"scrollFactorX",t),s.SetAll(this.list,"scrollFactorY",e)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[]}});t.exports=p},4168:t=>{t.exports=function(t,e,i,s){i.addToRenderList(e);var r=e.list;if(0!==r.length){var n=e.localTransform;s?(n.loadIdentity(),n.multiply(s),n.translate(e.x,e.y),n.rotate(e.rotation),n.scale(e.scaleX,e.scaleY)):n.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY);var a=-1!==e.blendMode;a||t.setBlendMode(0);var h=e._alpha,o=e.scrollFactorX,l=e.scrollFactorY;e.mask&&e.mask.preRenderCanvas(t,null,i);for(var d=0;d<r.length;d++){var u=r[d];if(u.willRender(i)){var c=u.alpha,p=u.scrollFactorX,f=u.scrollFactorY;a||u.blendMode===t.currentBlendMode||t.setBlendMode(u.blendMode),u.setScrollFactor(p*o,f*l),u.setAlpha(c*h),u.renderCanvas(t,u,i,n),u.setAlpha(c),u.setScrollFactor(p,f)}}e.mask&&e.mask.postRenderCanvas(t)}}},92359:(t,e,i)=>{var s=i(90062),r=i(22675),n=i(78757),a=i(7973);n.register("container",(function(t,e){void 0===t&&(t={});var i=a(t,"x",0),n=a(t,"y",0),h=a(t,"children",null),o=new r(this.scene,i,n,h);return void 0!==e&&(t.add=e),s(this.scene,o,t),o}))},51273:(t,e,i)=>{var s=i(22675);i(66642).register("container",(function(t,e,i){return this.displayList.add(new s(this.scene,t,e,i))}))},1449:(t,e,i)=>{var s=i(45733),r=i(45733);s=i(58784),r=i(4168),t.exports={renderWebGL:s,renderCanvas:r}},58784:t=>{t.exports=function(t,e,i,s){i.addToRenderList(e);var r=e.list,n=r.length;if(0!==n){var a=e.localTransform;s?(a.loadIdentity(),a.multiply(s),a.translate(e.x,e.y),a.rotate(e.rotation),a.scale(e.scaleX,e.scaleY)):a.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),t.pipelines.preBatch(e);var h=-1!==e.blendMode;h||t.setBlendMode(0);for(var o=e.alpha,l=e.scrollFactorX,d=e.scrollFactorY,u=0;u<n;u++){var c=r[u];if(c.willRender(i)){var p,f,v,g;if(void 0!==c.alphaTopLeft)p=c.alphaTopLeft,f=c.alphaTopRight,v=c.alphaBottomLeft,g=c.alphaBottomRight;else{var m=c.alpha;p=m,f=m,v=m,g=m}var y=c.scrollFactorX,x=c.scrollFactorY;h||c.blendMode===t.currentBlendMode||t.setBlendMode(c.blendMode);var T=c.mask;T&&T.preRenderWebGL(t,c,i);var w=c.type;w!==t.currentType&&(t.newType=!0,t.currentType=w),t.nextTypeMatch=u<n-1&&r[u+1].type===t.currentType,c.setScrollFactor(y*l,x*d),c.setAlpha(p*o,f*o,v*o,g*o),c.renderWebGL(t,c,i,a),c.setAlpha(p,f,v,g),c.setScrollFactor(y,x),T&&T.postRenderWebGL(t,i),t.newType=!1}}t.pipelines.postBatch(e)}}},46350:t=>{t.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},17605:(t,e,i)=>{var s=i(69186),r=i(19506),n=i(86e3),a=i(38236),h=i(53013),o=i(20662),l=i(12063),d=i(37254),u=new s({Extends:a,Mixins:[r.AlphaSingle,r.BlendMode,r.Depth,r.Origin,r.ScrollFactor,r.Transform,r.Visible,n],initialize:function(t,e,i,s,r,n){a.call(this,t,"DOMElement"),this.parent=t.sys.game.domContainer,this.cache=t.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new d,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(e,i),"string"==typeof s?"#"===s[0]?this.setElement(s.substr(1),r,n):this.createElement(s,r,n):s&&this.setElement(s,r,n),t.sys.events.on(l.SLEEP,this.handleSceneEvent,this),t.sys.events.on(l.WAKE,this.handleSceneEvent,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},handleSceneEvent:function(t){var e=this.node,i=e.style;e&&(i.display=t.settings.visible?"block":"none")},setSkew:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.skewX=t,this.skewY=e,this},setPerspective:function(t){return this.parent.style.perspective=t+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(t){this.parent.style.perspective=t+"px"}},addListener:function(t){if(this.node){t=t.split(" ");for(var e=0;e<t.length;e++)this.node.addEventListener(t[e],this.handler,!1)}return this},removeListener:function(t){if(this.node){t=t.split(" ");for(var e=0;e<t.length;e++)this.node.removeEventListener(t[e],this.handler)}return this},dispatchNativeEvent:function(t){this.emit(t.type,t)},createElement:function(t,e,i){return this.setElement(document.createElement(t),e,i)},setElement:function(t,e,i){var s;if(this.removeElement(),"string"==typeof t?("#"===t[0]&&(t=t.substr(1)),s=document.getElementById(t)):"object"==typeof t&&1===t.nodeType&&(s=t),!s)return this;if(this.node=s,e&&h(e))for(var r in e)s.style[r]=e[r];else"string"==typeof e&&(s.style=e);return s.style.zIndex="0",s.style.display="inline",s.style.position="absolute",s.phaser=this,this.parent&&this.parent.appendChild(s),i&&(s.innerText=i),this.updateSize()},createFromCache:function(t,e){var i=this.cache.get(t);return i&&this.createFromHTML(i,e),this},createFromHTML:function(t,e){void 0===e&&(e="div"),this.removeElement();var i=document.createElement(e);return this.node=i,i.style.zIndex="0",i.style.display="inline",i.style.position="absolute",i.phaser=this,this.parent&&this.parent.appendChild(i),i.innerHTML=t,this.updateSize()},removeElement:function(){return this.node&&(o(this.node),this.node=null),this},updateSize:function(){var t=this.node,e=t.getBoundingClientRect();return this.width=t.clientWidth,this.height=t.clientHeight,this.displayWidth=e.width||0,this.displayHeight=e.height||0,this},getChildByProperty:function(t,e){if(this.node)for(var i=this.node.querySelectorAll("*"),s=0;s<i.length;s++)if(i[s][t]===e)return i[s];return null},getChildByID:function(t){return this.getChildByProperty("id",t)},getChildByName:function(t){return this.getChildByProperty("name",t)},setClassName:function(t){return this.node&&(this.node.className=t,this.updateSize()),this},setText:function(t){return this.node&&(this.node.innerText=t,this.updateSize()),this},setHTML:function(t){return this.node&&(this.node.innerHTML=t,this.updateSize()),this},preUpdate:function(){var t=this.parentContainer,e=this.node;e&&t&&!t.willRender()&&(e.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(l.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(l.WAKE,this.handleSceneEvent,this)}});t.exports=u},85199:(t,e,i)=>{var s=i(46350),r=i(38236),n=i(9329),a=new n,h=new n,o=new n;t.exports=function(t,e,i,n){if(e.node){var l=e.node.style,d=e.scene.sys.settings;if(!l||!d.visible||r.RENDER_MASK!==e.renderFlags||0!==e.cameraFilter&&e.cameraFilter&i.id||e.parentContainer&&!e.parentContainer.willRender())l.display="none";else{var u=e.parentContainer,c=i.alpha*e.alpha;u&&(c*=u.alpha);var p=a,f=h,v=o,g=0,m=0,y="0%",x="0%";n?(g=e.width*e.scaleX*e.originX,m=e.height*e.scaleY*e.originY,f.applyITRS(e.x-g,e.y-m,e.rotation,e.scaleX,e.scaleY),p.copyFrom(i.matrix),p.multiplyWithOffset(n,-i.scrollX*e.scrollFactorX,-i.scrollY*e.scrollFactorY),f.e=e.x-g,f.f=e.y-m,p.multiply(f,v)):(g=e.width*e.originX,m=e.height*e.originY,f.applyITRS(e.x-g,e.y-m,e.rotation,e.scaleX,e.scaleY),p.copyFrom(i.matrix),y=100*e.originX+"%",x=100*e.originY+"%",f.e-=i.scrollX*e.scrollFactorX,f.f-=i.scrollY*e.scrollFactorY,p.multiply(f,v)),e.transformOnly||(l.display="block",l.opacity=c,l.zIndex=e._depth,l.pointerEvents=e.pointerEvents,l.mixBlendMode=s[e._blendMode]),l.transform=v.getCSSMatrix()+" skew("+e.skewX+"rad, "+e.skewY+"rad) rotate3d("+e.rotate3d.x+","+e.rotate3d.y+","+e.rotate3d.z+","+e.rotate3d.w+e.rotate3dAngle+")",l.transformOrigin=y+" "+x}}}},23123:(t,e,i)=>{var s=i(17605);i(66642).register("dom",(function(t,e,i,r,n){var a=new s(this.scene,t,e,i,r,n);return this.displayList.add(a),a}))},86e3:(t,e,i)=>{var s=i(45733),r=i(45733);s=i(85199),r=i(85199),t.exports={renderWebGL:s,renderCanvas:r}},28655:(t,e,i)=>{var s=i(69186),r=i(19506),n=i(38236),a=i(44590),h=new s({Extends:n,Mixins:[r.Alpha,r.BlendMode,r.Depth,r.Flip,r.Origin,r.ScrollFactor,r.Size,r.Texture,r.Tint,r.Transform,r.Visible,a],initialize:function(t){n.call(this,t,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});t.exports=h},29175:()=>{},70221:(t,e,i)=>{var s=i(28655);i(66642).register("extern",(function(){var t=new s(this.scene);return this.displayList.add(t),t}))},44590:(t,e,i)=>{var s=i(45733),r=i(45733);s=i(21819),r=i(29175),t.exports={renderWebGL:s,renderCanvas:r}},21819:(t,e,i)=>{var s=i(3142);t.exports=function(t,e,i,r){t.pipelines.clear();var n=s(e,i,r).calc;e.render.call(e,t,i,n),t.pipelines.rebind()}},15972:t=>{t.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},19613:(t,e,i)=>{var s=i(43929),r=i(69186),n=i(15972),a=i(95057),h=i(13006),o=i(59764),l=i(50231),d=i(99285),u=i(10125),c=i(27589),p=i(50663),f=i(81385),v=i(38236),g=i(25738),m=i(76076),y=i(80925),x=i(71906),T=new r({Extends:v,Mixins:[a,h,o,l,d,c,p,u,x],initialize:function(t,e){var i=m(e,"x",0),s=m(e,"y",0);v.call(this,t,"Graphics"),this.setPosition(i,s),this.initPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.setDefaultStyles(e)},setDefaultStyles:function(t){return m(t,"lineStyle",null)&&(this.defaultStrokeWidth=m(t,"lineStyle.width",1),this.defaultStrokeColor=m(t,"lineStyle.color",16777215),this.defaultStrokeAlpha=m(t,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),m(t,"fillStyle",null)&&(this.defaultFillColor=m(t,"fillStyle.color",16777215),this.defaultFillAlpha=m(t,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(t,e,i){return void 0===i&&(i=1),this.commandBuffer.push(n.LINE_STYLE,t,e,i),this._lineWidth=t,this},fillStyle:function(t,e){return void 0===e&&(e=1),this.commandBuffer.push(n.FILL_STYLE,t,e),this},fillGradientStyle:function(t,e,i,s,r,a,h,o){return void 0===r&&(r=1),void 0===a&&(a=r),void 0===h&&(h=r),void 0===o&&(o=r),this.commandBuffer.push(n.GRADIENT_FILL_STYLE,r,a,h,o,t,e,i,s),this},lineGradientStyle:function(t,e,i,s,r,a){return void 0===a&&(a=1),this.commandBuffer.push(n.GRADIENT_LINE_STYLE,t,a,e,i,s,r),this},beginPath:function(){return this.commandBuffer.push(n.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(n.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(n.FILL_PATH),this},fill:function(){return this.commandBuffer.push(n.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(n.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(n.STROKE_PATH),this},fillCircleShape:function(t){return this.fillCircle(t.x,t.y,t.radius)},strokeCircleShape:function(t){return this.strokeCircle(t.x,t.y,t.radius)},fillCircle:function(t,e,i){return this.beginPath(),this.arc(t,e,i,0,y.PI2),this.fillPath(),this},strokeCircle:function(t,e,i){return this.beginPath(),this.arc(t,e,i,0,y.PI2),this.strokePath(),this},fillRectShape:function(t){return this.fillRect(t.x,t.y,t.width,t.height)},strokeRectShape:function(t){return this.strokeRect(t.x,t.y,t.width,t.height)},fillRect:function(t,e,i,s){return this.commandBuffer.push(n.FILL_RECT,t,e,i,s),this},strokeRect:function(t,e,i,s){var r=this._lineWidth/2,n=t-r,a=t+r;return this.beginPath(),this.moveTo(t,e),this.lineTo(t,e+s),this.strokePath(),this.beginPath(),this.moveTo(t+i,e),this.lineTo(t+i,e+s),this.strokePath(),this.beginPath(),this.moveTo(n,e),this.lineTo(a+i,e),this.strokePath(),this.beginPath(),this.moveTo(n,e+s),this.lineTo(a+i,e+s),this.strokePath(),this},fillRoundedRect:function(t,e,i,s,r){void 0===r&&(r=20);var n=r,a=r,h=r,o=r;return"number"!=typeof r&&(n=g(r,"tl",20),a=g(r,"tr",20),h=g(r,"bl",20),o=g(r,"br",20)),this.beginPath(),this.moveTo(t+n,e),this.lineTo(t+i-a,e),this.arc(t+i-a,e+a,a,-y.TAU,0),this.lineTo(t+i,e+s-o),this.arc(t+i-o,e+s-o,o,0,y.TAU),this.lineTo(t+h,e+s),this.arc(t+h,e+s-h,h,y.TAU,Math.PI),this.lineTo(t,e+n),this.arc(t+n,e+n,n,-Math.PI,-y.TAU),this.fillPath(),this},strokeRoundedRect:function(t,e,i,s,r){void 0===r&&(r=20);var n=r,a=r,h=r,o=r;return"number"!=typeof r&&(n=g(r,"tl",20),a=g(r,"tr",20),h=g(r,"bl",20),o=g(r,"br",20)),this.beginPath(),this.moveTo(t+n,e),this.lineTo(t+i-a,e),this.moveTo(t+i-a,e),this.arc(t+i-a,e+a,a,-y.TAU,0),this.lineTo(t+i,e+s-o),this.moveTo(t+i,e+s-o),this.arc(t+i-o,e+s-o,o,0,y.TAU),this.lineTo(t+h,e+s),this.moveTo(t+h,e+s),this.arc(t+h,e+s-h,h,y.TAU,Math.PI),this.lineTo(t,e+n),this.moveTo(t,e+n),this.arc(t+n,e+n,n,-Math.PI,-y.TAU),this.strokePath(),this},fillPointShape:function(t,e){return this.fillPoint(t.x,t.y,e)},fillPoint:function(t,e,i){return!i||i<1?i=1:(t-=i/2,e-=i/2),this.commandBuffer.push(n.FILL_RECT,t,e,i,i),this},fillTriangleShape:function(t){return this.fillTriangle(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)},strokeTriangleShape:function(t){return this.strokeTriangle(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)},fillTriangle:function(t,e,i,s,r,a){return this.commandBuffer.push(n.FILL_TRIANGLE,t,e,i,s,r,a),this},strokeTriangle:function(t,e,i,s,r,a){return this.commandBuffer.push(n.STROKE_TRIANGLE,t,e,i,s,r,a),this},strokeLineShape:function(t){return this.lineBetween(t.x1,t.y1,t.x2,t.y2)},lineBetween:function(t,e,i,s){return this.beginPath(),this.moveTo(t,e),this.lineTo(i,s),this.strokePath(),this},lineTo:function(t,e){return this.commandBuffer.push(n.LINE_TO,t,e),this},moveTo:function(t,e){return this.commandBuffer.push(n.MOVE_TO,t,e),this},strokePoints:function(t,e,i,s){void 0===e&&(e=!1),void 0===i&&(i=!1),void 0===s&&(s=t.length),this.beginPath(),this.moveTo(t[0].x,t[0].y);for(var r=1;r<s;r++)this.lineTo(t[r].x,t[r].y);return e&&this.lineTo(t[0].x,t[0].y),i&&this.closePath(),this.strokePath(),this},fillPoints:function(t,e,i,s){void 0===e&&(e=!1),void 0===i&&(i=!1),void 0===s&&(s=t.length),this.beginPath(),this.moveTo(t[0].x,t[0].y);for(var r=1;r<s;r++)this.lineTo(t[r].x,t[r].y);return e&&this.lineTo(t[0].x,t[0].y),i&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(t,e){void 0===e&&(e=32);var i=t.getPoints(e);return this.strokePoints(i,!0)},strokeEllipse:function(t,e,i,s,r){void 0===r&&(r=32);var n=new f(t,e,i,s).getPoints(r);return this.strokePoints(n,!0)},fillEllipseShape:function(t,e){void 0===e&&(e=32);var i=t.getPoints(e);return this.fillPoints(i,!0)},fillEllipse:function(t,e,i,s,r){void 0===r&&(r=32);var n=new f(t,e,i,s).getPoints(r);return this.fillPoints(n,!0)},arc:function(t,e,i,s,r,a,h){return void 0===a&&(a=!1),void 0===h&&(h=0),this.commandBuffer.push(n.ARC,t,e,i,s,r,a,h),this},slice:function(t,e,i,s,r,a,h){return void 0===a&&(a=!1),void 0===h&&(h=0),this.commandBuffer.push(n.BEGIN_PATH),this.commandBuffer.push(n.MOVE_TO,t,e),this.commandBuffer.push(n.ARC,t,e,i,s,r,a,h),this.commandBuffer.push(n.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(n.SAVE),this},restore:function(){return this.commandBuffer.push(n.RESTORE),this},translateCanvas:function(t,e){return this.commandBuffer.push(n.TRANSLATE,t,e),this},scaleCanvas:function(t,e){return this.commandBuffer.push(n.SCALE,t,e),this},rotateCanvas:function(t){return this.commandBuffer.push(n.ROTATE,t),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(t,e,i){var s,r,n=this.scene.sys,a=n.game.renderer;if(void 0===e&&(e=n.scale.width),void 0===i&&(i=n.scale.height),T.TargetCamera.setScene(this.scene),T.TargetCamera.setViewport(0,0,e,i),T.TargetCamera.scrollX=this.x,T.TargetCamera.scrollY=this.y,"string"==typeof t)if(n.textures.exists(t)){var h=(s=n.textures.get(t)).getSourceImage();h instanceof HTMLCanvasElement&&(r=h.getContext("2d"))}else r=(s=n.textures.createCanvas(t,e,i)).getSourceImage().getContext("2d");else t instanceof HTMLCanvasElement&&(r=t.getContext("2d"));return r&&(this.renderCanvas(a,this,T.TargetCamera,null,r,!1),s&&s.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});T.TargetCamera=new s,t.exports=T},95930:(t,e,i)=>{var s=i(15972),r=i(14437);t.exports=function(t,e,i,n,a,h){var o=e.commandBuffer,l=o.length,d=a||t.currentContext;if(0!==l&&r(t,d,e,i,n)){i.addToRenderList(e);var u=1,c=1,p=0,f=0,v=1,g=0,m=0,y=0;d.beginPath();for(var x=0;x<l;++x)switch(o[x]){case s.ARC:d.arc(o[x+1],o[x+2],o[x+3],o[x+4],o[x+5],o[x+6]),x+=7;break;case s.LINE_STYLE:v=o[x+1],p=o[x+2],u=o[x+3],g=(16711680&p)>>>16,m=(65280&p)>>>8,y=255&p,d.strokeStyle="rgba("+g+","+m+","+y+","+u+")",d.lineWidth=v,x+=3;break;case s.FILL_STYLE:f=o[x+1],c=o[x+2],g=(16711680&f)>>>16,m=(65280&f)>>>8,y=255&f,d.fillStyle="rgba("+g+","+m+","+y+","+c+")",x+=2;break;case s.BEGIN_PATH:d.beginPath();break;case s.CLOSE_PATH:d.closePath();break;case s.FILL_PATH:h||d.fill();break;case s.STROKE_PATH:h||d.stroke();break;case s.FILL_RECT:h?d.rect(o[x+1],o[x+2],o[x+3],o[x+4]):d.fillRect(o[x+1],o[x+2],o[x+3],o[x+4]),x+=4;break;case s.FILL_TRIANGLE:d.beginPath(),d.moveTo(o[x+1],o[x+2]),d.lineTo(o[x+3],o[x+4]),d.lineTo(o[x+5],o[x+6]),d.closePath(),h||d.fill(),x+=6;break;case s.STROKE_TRIANGLE:d.beginPath(),d.moveTo(o[x+1],o[x+2]),d.lineTo(o[x+3],o[x+4]),d.lineTo(o[x+5],o[x+6]),d.closePath(),h||d.stroke(),x+=6;break;case s.LINE_TO:d.lineTo(o[x+1],o[x+2]),x+=2;break;case s.MOVE_TO:d.moveTo(o[x+1],o[x+2]),x+=2;break;case s.LINE_FX_TO:d.lineTo(o[x+1],o[x+2]),x+=5;break;case s.MOVE_FX_TO:d.moveTo(o[x+1],o[x+2]),x+=5;break;case s.SAVE:d.save();break;case s.RESTORE:d.restore();break;case s.TRANSLATE:d.translate(o[x+1],o[x+2]),x+=2;break;case s.SCALE:d.scale(o[x+1],o[x+2]),x+=2;break;case s.ROTATE:d.rotate(o[x+1]),x+=1;break;case s.GRADIENT_FILL_STYLE:x+=5;break;case s.GRADIENT_LINE_STYLE:x+=6}d.restore()}}},2923:(t,e,i)=>{var s=i(78757),r=i(19613);s.register("graphics",(function(t,e){void 0===t&&(t={}),void 0!==e&&(t.add=e);var i=new r(this.scene,t);return t.add&&this.scene.sys.displayList.add(i),i}))},4268:(t,e,i)=>{var s=i(19613);i(66642).register("graphics",(function(t){return this.displayList.add(new s(this.scene,t))}))},71906:(t,e,i)=>{var s=i(45733),r=i(45733);s=i(3484),i(95930),r=i(95930),t.exports={renderWebGL:s,renderCanvas:r}},3484:(t,e,i)=>{var s=i(15972),r=i(3142),n=i(9329),a=i(64564),h=function(t,e,i){this.x=t,this.y=e,this.width=i},o=function(t,e,i){this.points=[],this.pointsLength=1,this.points[0]=new h(t,e,i)},l=[],d=new n;t.exports=function(t,e,i,n){if(0!==e.commandBuffer.length){i.addToRenderList(e);var u=t.pipelines.set(e.pipeline,e);t.pipelines.preBatch(e);for(var c=r(e,i,n).calc,p=d.loadIdentity(),f=e.commandBuffer,v=i.alpha*e.alpha,g=1,m=u.fillTint,y=u.strokeTint,x=0,T=0,w=0,S=2*Math.PI,b=[],_=0,L=!0,C=null,E=a.getTintAppendFloatAlpha,F=0;F<f.length;F++)switch(f[F]){case s.BEGIN_PATH:b.length=0,C=null,L=!0;break;case s.CLOSE_PATH:L=!1,C&&C.points.length&&C.points.push(C.points[0]);break;case s.FILL_PATH:for(_=0;_<b.length;_++)u.batchFillPath(b[_].points,p,c);break;case s.STROKE_PATH:for(_=0;_<b.length;_++)u.batchStrokePath(b[_].points,g,L,p,c);break;case s.LINE_STYLE:g=f[++F];var A=E(f[++F],f[++F]*v);y.TL=A,y.TR=A,y.BL=A,y.BR=A;break;case s.FILL_STYLE:var R=E(f[++F],f[++F]*v);m.TL=R,m.TR=R,m.BL=R,m.BR=R;break;case s.GRADIENT_FILL_STYLE:var k=f[++F]*v,P=f[++F]*v,M=f[++F]*v,O=f[++F]*v;m.TL=E(f[++F],k),m.TR=E(f[++F],P),m.BL=E(f[++F],M),m.BR=E(f[++F],O);break;case s.GRADIENT_LINE_STYLE:g=f[++F];var B=f[++F]*v;y.TL=E(f[++F],B),y.TR=E(f[++F],B),y.BL=E(f[++F],B),y.BR=E(f[++F],B);break;case s.ARC:var D=0,Y=f[++F],X=f[++F],W=f[++F],I=f[++F],z=f[++F],V=f[++F],G=f[++F];for(z-=I,V?z<-S?z=-S:z>0&&(z=z%S-S):z>S?z=S:z<0&&(z=S+z%S),null===C&&(C=new o(Y+Math.cos(I)*W,X+Math.sin(I)*W,g),b.push(C),D+=.01);D<1+G;)w=z*D+I,x=Y+Math.cos(w)*W,T=X+Math.sin(w)*W,C.points.push(new h(x,T,g)),D+=.01;w=z+I,x=Y+Math.cos(w)*W,T=X+Math.sin(w)*W,C.points.push(new h(x,T,g));break;case s.FILL_RECT:u.batchFillRect(f[++F],f[++F],f[++F],f[++F],p,c);break;case s.FILL_TRIANGLE:u.batchFillTriangle(f[++F],f[++F],f[++F],f[++F],f[++F],f[++F],p,c);break;case s.STROKE_TRIANGLE:u.batchStrokeTriangle(f[++F],f[++F],f[++F],f[++F],f[++F],f[++F],g,p,c);break;case s.LINE_TO:null!==C?C.points.push(new h(f[++F],f[++F],g)):(C=new o(f[++F],f[++F],g),b.push(C));break;case s.MOVE_TO:C=new o(f[++F],f[++F],g),b.push(C);break;case s.SAVE:l.push(p.copyToArray());break;case s.RESTORE:p.copyFromArray(l.pop());break;case s.TRANSLATE:Y=f[++F],X=f[++F],p.translate(Y,X);break;case s.SCALE:Y=f[++F],X=f[++F],p.scale(Y,X);break;case s.ROTATE:p.rotate(f[++F])}t.pipelines.postBatch(e)}}},57736:(t,e,i)=>{var s=i(78757),r=i(84262);s.register("group",(function(t){return new r(this.scene,null,t)}))},97058:(t,e,i)=>{var s=i(84262);i(66642).register("group",(function(t,e){return this.updateList.add(new s(this.scene,t,e))}))},16836:(t,e,i)=>{var s=i(90062),r=i(78757),n=i(7973),a=i(86479);r.register("image",(function(t,e){void 0===t&&(t={});var i=n(t,"key",null),r=n(t,"frame",null),h=new a(this.scene,0,0,i,r);return void 0!==e&&(t.add=e),s(this.scene,h,t),h}))},48950:(t,e,i)=>{var s=i(86479);i(66642).register("image",(function(t,e,i,r){return this.displayList.add(new s(this.scene,t,e,i,r))}))},70363:(t,e,i)=>{var s={Events:i(99370),DisplayList:i(96656),GameObjectCreator:i(78757),GameObjectFactory:i(66642),UpdateList:i(66007),Components:i(19506),GetCalcMatrix:i(3142),BuildGameObject:i(90062),BuildGameObjectAnimation:i(38596),GameObject:i(38236),BitmapText:i(74797),Blitter:i(16330),Bob:i(45594),Container:i(22675),DOMElement:i(17605),DynamicBitmapText:i(92871),Extern:i(28655),Graphics:i(19613),Group:i(84262),Image:i(86479),Layer:i(61218),Particles:i(42854),PathFollower:i(5985),RenderTexture:i(131),RetroFont:i(32751),Rope:i(12374),Sprite:i(38590),Text:i(77546),GetTextSize:i(83799),MeasureText:i(32800),TextStyle:i(22849),TileSprite:i(99191),Zone:i(64043),Video:i(50295),Shape:i(56098),Arc:i(59226),Curve:i(98435),Ellipse:i(12419),Grid:i(35308),IsoBox:i(84376),IsoTriangle:i(81863),Line:i(9417),Polygon:i(64195),Rectangle:i(41231),Star:i(49231),Triangle:i(28913),Factories:{Blitter:i(38564),Container:i(51273),DOMElement:i(23123),DynamicBitmapText:i(61798),Extern:i(70221),Graphics:i(4268),Group:i(97058),Image:i(48950),Layer:i(73297),Particles:i(65419),PathFollower:i(7859),RenderTexture:i(35346),Rope:i(56014),Sprite:i(82364),StaticBitmapText:i(93676),Text:i(33979),TileSprite:i(8175),Zone:i(59037),Video:i(36235),Arc:i(10555),Curve:i(84653),Ellipse:i(16110),Grid:i(8098),IsoBox:i(25669),IsoTriangle:i(45151),Line:i(31059),Polygon:i(42182),Rectangle:i(98971),Star:i(35612),Triangle:i(79904)},Creators:{Blitter:i(79679),Container:i(92359),DynamicBitmapText:i(78739),Graphics:i(2923),Group:i(57736),Image:i(16836),Layer:i(37351),Particles:i(12495),RenderTexture:i(34387),Rope:i(95039),Sprite:i(29525),StaticBitmapText:i(46292),Text:i(53912),TileSprite:i(24249),Zone:i(42309),Video:i(22775)}};s.Shader=i(33568),s.Mesh=i(17669),s.PointLight=i(76669),s.Factories.Shader=i(89775),s.Factories.Mesh=i(56051),s.Factories.PointLight=i(991),s.Creators.Shader=i(5517),s.Creators.Mesh=i(12850),s.Creators.PointLight=i(62439),s.Light=i(46122),s.LightsManager=i(81879),s.LightsPlugin=i(60194),t.exports=s},61218:(t,e,i)=>{var s=i(87626),r=i(69186),n=i(19506),a=i(20847),h=i(92941),o=i(26729),l=i(99370),d=i(49469),u=i(13313),c=i(12063),p=i(46414),f=new r({Extends:d,Mixins:[n.AlphaSingle,n.BlendMode,n.Depth,n.Mask,n.Pipeline,n.Visible,o,u],initialize:function(t,e){d.call(this,t),o.call(this),this.scene=t,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=t.sys,this.events=t.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPipeline(),this.clearAlpha(),this.setBlendMode(s.SKIP_CHECK),e&&this.add(e),t.sys.queueDepthSort()},setActive:function(t){return this.active=t,this},setName:function(t){return this.name=t,this},setState:function(t){return this.state=t,this},setDataEnabled:function(){return this.data||(this.data=new h(this)),this},setData:function(t,e){return this.data||(this.data=new h(this)),this.data.set(t,e),this},incData:function(t,e){return this.data||(this.data=new h(this)),this.data.inc(t,e),this},toggleData:function(t){return this.data||(this.data=new h(this)),this.data.toggle(t),this},getData:function(t){return this.data||(this.data=new h(this)),this.data.get(t)},setInteractive:function(){return this},disableInteractive:function(){return this},removeInteractive:function(){return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return a(this)},willRender:function(t){return!(15!==this.renderFlags||0===this.list.length||0!==this.cameraFilter&&this.cameraFilter&t.id)},getIndexList:function(){for(var t=this,e=this.parentContainer,i=[];e&&(i.unshift(e.getIndex(t)),t=e,e.parentContainer);)e=e.parentContainer;return i.unshift(this.displayList.getIndex(t)),i},addChildCallback:function(t){t.displayList&&t.displayList!==this&&t.removeFromDisplayList(),t.displayList||(this.queueDepthSort(),t.displayList=this,t.emit(l.ADDED_TO_SCENE,t,this.scene),this.events.emit(c.ADDED_TO_SCENE,t,this.scene))},removeChildCallback:function(t){this.queueDepthSort(),t.displayList=null,t.emit(l.REMOVED_FROM_SCENE,t,this.scene),this.events.emit(c.REMOVED_FROM_SCENE,t,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(p(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(t,e){return t._depth-e._depth},getChildren:function(){return this.list},destroy:function(){if(this.scene&&!this.ignoreDestroy){this.emit(l.DESTROY,this);for(var t=this.list.length;t--;)this.list[t].destroy();this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});t.exports=f},88619:t=>{t.exports=function(t,e,i){var s=e.list;if(0!==s.length){e.depthSort();var r=-1!==e.blendMode;r||t.setBlendMode(0);var n=e._alpha;e.mask&&e.mask.preRenderCanvas(t,null,i);for(var a=0;a<s.length;a++){var h=s[a];if(h.willRender(i)){var o=h.alpha;r||h.blendMode===t.currentBlendMode||t.setBlendMode(h.blendMode),h.setAlpha(o*n),h.renderCanvas(t,h,i),h.setAlpha(o)}}e.mask&&e.mask.postRenderCanvas(t)}}},37351:(t,e,i)=>{var s=i(90062),r=i(61218),n=i(78757),a=i(7973);n.register("layer",(function(t,e){void 0===t&&(t={});var i=a(t,"children",null),n=new r(this.scene,i);return void 0!==e&&(t.add=e),s(this.scene,n,t),n}))},73297:(t,e,i)=>{var s=i(61218);i(66642).register("layer",(function(t){return this.displayList.add(new s(this.scene,t))}))},13313:(t,e,i)=>{var s=i(45733),r=i(45733);s=i(40349),r=i(88619),t.exports={renderWebGL:s,renderCanvas:r}},40349:t=>{t.exports=function(t,e,i){var s=e.list,r=s.length;if(0!==r){e.depthSort(),t.pipelines.preBatch(e);var n=-1!==e.blendMode;n||t.setBlendMode(0);for(var a=e.alpha,h=0;h<r;h++){var o=s[h];if(o.willRender(i)){var l,d,u,c;if(void 0!==o.alphaTopLeft)l=o.alphaTopLeft,d=o.alphaTopRight,u=o.alphaBottomLeft,c=o.alphaBottomRight;else{var p=o.alpha;l=p,d=p,u=p,c=p}n||o.blendMode===t.currentBlendMode||t.setBlendMode(o.blendMode);var f=o.mask;f&&f.preRenderWebGL(t,o,i);var v=o.type;v!==t.currentType&&(t.newType=!0,t.currentType=v),t.nextTypeMatch=h<r-1&&s[h+1].type===t.currentType,o.setAlpha(l*a,d*a,u*a,c*a),o.renderWebGL(t,o,i),o.setAlpha(l,d,u,c),f&&f.postRenderWebGL(t,i),t.newType=!1}}t.pipelines.postBatch(e)}}},46122:(t,e,i)=>{var s=i(38459),r=i(69186),n=i(19506),a=i(33332),h=i(64564),o=new r({Extends:s,Mixins:[n.ScrollFactor,n.Visible],initialize:function(t,e,i,r,n,h,o){s.call(this,t,e,i),this.color=new a(r,n,h),this.intensity=o,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1)},willRender:function(t){return!(o.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id)},setColor:function(t){var e=h.getFloatsFromUintRGB(t);return this.color.set(e[0],e[1],e[2]),this},setIntensity:function(t){return this.intensity=t,this},setRadius:function(t){return this.radius=t,this}});o.RENDER_MASK=15,t.exports=o},81879:(t,e,i)=>{var s=i(10882),r=i(69186),n=i(76914),a=i(46122),h=i(76669),o=i(33332),l=i(28088),d=i(46414),u=i(64564),c=new r({initialize:function(){this.lights=[],this.ambientColor=new o(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(t,e,i,s,r,n){return this.systems.displayList.add(new h(this.scene,t,e,i,s,r,n))},enable:function(){return-1===this.maxLights&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(t){for(var e=this.lights,i=t.worldView,r=[],a=0;a<e.length;a++){var h=e[a];h.willRender(t)&&s(h,i)&&r.push({light:h,distance:n(h.x,h.y,i.centerX,i.centerY)})}return r.length>this.maxLights&&(d(r,this.sortByDistance),r=r.slice(0,this.maxLights)),this.visibleLights=r.length,r},sortByDistance:function(t,e){return t.distance>=e.distance},setAmbientColor:function(t){var e=u.getFloatsFromUintRGB(t);return this.ambientColor.set(e[0],e[1],e[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(t,e,i,s,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=128),void 0===s&&(s=16777215),void 0===r&&(r=1);var n=u.getFloatsFromUintRGB(s),h=new a(t,e,i,n[0],n[1],n[2],r);return this.lights.push(h),h},removeLight:function(t){var e=this.lights.indexOf(t);return e>=0&&l(this.lights,e),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});t.exports=c},60194:(t,e,i)=>{var s=i(69186),r=i(81879),n=i(46236),a=i(12063),h=new s({Extends:r,initialize:function(t){this.scene=t,this.systems=t.sys,t.sys.settings.isBooted||t.sys.events.once(a.BOOT,this.boot,this),r.call(this)},boot:function(){var t=this.systems.events;t.on(a.SHUTDOWN,this.shutdown,this),t.on(a.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});n.register("LightsPlugin",h,"lights"),t.exports=h},17669:(t,e,i)=>{var s=i(69186),r=i(19506),n=i(23407),a=i(45934),h=i(38236),o=i(27092),l=i(69750),d=i(3142),u=i(54259),c=i(47362),p=i(46414),f=i(33736),v=i(45978),g=new s({Extends:h,Mixins:[r.AlphaSingle,r.BlendMode,r.Depth,r.Mask,r.Pipeline,r.Size,r.Texture,r.Transform,r.Visible,r.ScrollFactor,c],initialize:function(t,e,i,s,r,n,a,o,l,d,c,p){void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s="__WHITE"),h.call(this,t,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new f,this.modelScale=new f(1,1,1),this.modelRotation=new f,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new u,this.viewPosition=new f,this.viewMatrix=new u,this.projectionMatrix=new u,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1;var v=t.sys.renderer;this.setPosition(e,i),this.setTexture(s,r),this.setSize(v.width,v.height),this.initPipeline(),this.setPerspective(v.width,v.height),n&&this.addVertices(n,a,o,l,d,c,p)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(t){return this.viewPosition.addScale(f.LEFT,t),this.dirtyCache[10]=1,this},panY:function(t){return this.viewPosition.y+=f.DOWN.y*t,this.dirtyCache[10]=1,this},panZ:function(t){return this.viewPosition.z+=t,this.dirtyCache[10]=1,this},setPerspective:function(t,e,i,s,r){return void 0===i&&(i=45),void 0===s&&(s=.01),void 0===r&&(r=1e3),this.projectionMatrix.perspective(n(i),t/e,s,r),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(t,e,i,s){return void 0===t&&(t=this.scene.sys.renderer.getAspectRatio()),void 0===e&&(e=1),void 0===i&&(i=-1e3),void 0===s&&(s=1e3),this.projectionMatrix.ortho(-t,t,-e,e,i,s),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach((function(t){t.destroy()})),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(t,e,i,s,r,n,a,h,o){var d=this.scene.sys.cache.obj.get(t);return d&&l(d,this,e,i,s,r,n,a,h,o),this},sortByDepth:function(t,e){return t.depth-e.depth},depthSort:function(){return p(this.faces,this.sortByDepth),this},addVertex:function(t,e,i,s,r,n,a){var h=new v(t,e,i,s,r,n,a);return this.vertices.push(h),h},addFace:function(t,e,i){var s=new a(t,e,i);return this.faces.push(s),this.dirtyCache[9]=-1,s},addVertices:function(t,e,i,s,r,n,a){var h=o(t,e,i,s,r,n,a);return h&&(this.faces=this.faces.concat(h.faces),this.vertices=this.vertices.concat(h.vertices)),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(t){return this.faces[t]},getFaceAt:function(t,e,i){void 0===i&&(i=this.scene.sys.cameras.main);for(var s=d(this,i).calc,r=this.faces,n=[],a=0;a<r.length;a++){var h=r[a];h.contains(t,e,s)&&n.push(h)}return p(n,this.sortByDepth)},setDebug:function(t,e){return this.debugGraphic=t,this.debugCallback=t||e?e||this.renderDebug:null,this},isDirty:function(){var t=this.modelPosition,e=this.modelRotation,i=this.modelScale,s=this.dirtyCache,r=t.x,n=t.y,a=t.z,h=e.x,o=e.y,l=e.z,d=i.x,u=i.y,c=i.z,p=this.getFaceCount(),f=s[0],v=s[1],g=s[2],m=s[3],y=s[4],x=s[5],T=s[6],w=s[7],S=s[8],b=s[9];return s[0]=r,s[1]=n,s[2]=a,s[3]=h,s[4]=o,s[5]=l,s[6]=d,s[7]=u,s[8]=c,s[9]=p,f!==r||v!==n||g!==a||m!==h||y!==o||x!==l||T!==d||w!==u||S!==c||b!==p},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var t=this.dirtyCache;if(this.ignoreDirtyCache||t[10]||this.isDirty()){var e=this.width,i=this.height,s=this.viewMatrix,r=this.viewPosition;t[10]&&(s.identity(),s.translate(r),s.invert(),t[10]=0);var n=this.transformMatrix;n.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var a=r.z,h=this.faces,o=0;o<h.length;o++)h[o].transformCoordinatesLocal(n,e,i,a);this.depthSort()}},renderDebug:function(t,e){for(var i=t.debugGraphic,s=0;s<e.length;s++){var r=e[s],n=r.vertex1.tx,a=r.vertex1.ty,h=r.vertex2.tx,o=r.vertex2.ty,l=r.vertex3.tx,d=r.vertex3.ty;i.strokeTriangle(n,a,h,o,l,d)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null}});t.exports=g},45164:t=>{t.exports=function(){}},12850:(t,e,i)=>{var s=i(90062),r=i(78757),n=i(7973),a=i(76076),h=i(17669);r.register("mesh",(function(t,e){void 0===t&&(t={});var i=n(t,"key",null),r=n(t,"frame",null),o=a(t,"vertices",[]),l=a(t,"uvs",[]),d=a(t,"indicies",[]),u=a(t,"containsZ",!1),c=a(t,"normals",[]),p=a(t,"colors",16777215),f=a(t,"alphas",1),v=new h(this.scene,0,0,i,r,o,l,d,u,c,p,f);return void 0!==e&&(t.add=e),s(this.scene,v,t),v}))},56051:(t,e,i)=>{var s=i(17669);i(66642).register("mesh",(function(t,e,i,r,n,a,h,o,l,d,u){return this.displayList.add(new s(this.scene,t,e,i,r,n,a,h,o,l,d,u))}))},47362:(t,e,i)=>{var s=i(45733),r=i(45733);s=i(80073),r=i(45164),t.exports={renderWebGL:s,renderCanvas:r}},80073:(t,e,i)=>{var s=i(3142);t.exports=function(t,e,i,r){var n=e.faces,a=n.length;if(0!==a){i.addToRenderList(e);var h=t.pipelines.set(e.pipeline,e),o=s(e,i,r).calc,l=h.setGameObject(e),d=h.vertexViewF32,u=h.vertexViewU32,c=h.vertexCount*h.currentShader.vertexComponentCount-1,p=e.tintFill,f=[],v=e.debugCallback,g=o.a,m=o.b,y=o.c,x=o.d,T=o.e,w=o.f,S=e.viewPosition.z,b=e.hideCCW,_=i.roundPixels,L=i.alpha*e.alpha,C=0;t.pipelines.preBatch(e);for(var E=0;E<a;E++){var F=n[E];F.isInView(i,b,S,L,g,m,y,x,T,w,_)&&(h.shouldFlush(3)&&(h.flush(),c=0),c=F.load(d,u,c,l,p),C++,h.vertexCount+=3,v&&f.push(F))}e.totalFrame+=C,v&&v.call(e,e,f),t.pipelines.postBatch(e)}}},79948:(t,e,i)=>{var s=i(69186),r=i(62193),n=i(17232),a=i(25738),h=i(6704),o=new s({initialize:function(t,e,i,s){void 0===s&&(s=!1),this.propertyKey=e,this.propertyValue=i,this.defaultValue=i,this.steps=0,this.counter=0,this.start=0,this.end=0,this.ease,this.emitOnly=s,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.loadConfig(t)},loadConfig:function(t,e){void 0===t&&(t={}),e&&(this.propertyKey=e),this.propertyValue=a(t,this.propertyKey,this.defaultValue),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return this.propertyValue},onChange:function(t){return this.propertyValue=t,this.setMethods()},setMethods:function(){var t=this.propertyValue,e=typeof t;if(this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,"number"===e)this.onEmit=this.staticValueEmit,this.onUpdate=this.staticValueUpdate;else if(Array.isArray(t))this.onEmit=this.randomStaticValueEmit;else if("function"===e)this.emitOnly?this.onEmit=t:this.onUpdate=t;else if("object"===e&&this.hasBoth(t,"start","end")){this.start=t.start,this.end=t.end;var i=this.has(t,"random");if(i&&(this.onEmit=this.randomRangedValueEmit),this.has(t,"steps"))this.steps=t.steps,this.counter=this.start,this.onEmit=this.steppedEmit;else{var s=this.has(t,"ease")?t.ease:"Linear";this.ease=n(s,t.easeParams),i||(this.onEmit=this.easedValueEmit),this.onUpdate=this.easeValueUpdate}}else if("object"===e&&this.hasBoth(t,"min","max"))this.start=t.min,this.end=t.max,this.onEmit=this.randomRangedValueEmit;else if("object"===e&&this.has(t,"random")){var r=t.random;Array.isArray(r)&&(this.start=r[0],this.end=r[1]),this.onEmit=this.randomRangedValueEmit}else"object"===e&&this.hasEither(t,"onEmit","onUpdate")&&(this.has(t,"onEmit")&&(this.onEmit=t.onEmit),this.has(t,"onUpdate")&&(this.onUpdate=t.onUpdate));return this},has:function(t,e){return t.hasOwnProperty(e)},hasBoth:function(t,e,i){return t.hasOwnProperty(e)&&t.hasOwnProperty(i)},hasEither:function(t,e,i){return t.hasOwnProperty(e)||t.hasOwnProperty(i)},defaultEmit:function(t,e,i){return i},defaultUpdate:function(t,e,i,s){return s},staticValueEmit:function(){return this.propertyValue},staticValueUpdate:function(){return this.propertyValue},randomStaticValueEmit:function(){var t=Math.floor(Math.random()*this.propertyValue.length);return this.propertyValue[t]},randomRangedValueEmit:function(t,e){var i=r(this.start,this.end);return t&&t.data[e]&&(t.data[e].min=i),i},steppedEmit:function(){var t=this.counter,e=this.counter+(this.end-this.start)/this.steps;return this.counter=h(e,this.start,this.end),t},easedValueEmit:function(t,e){if(t&&t.data[e]){var i=t.data[e];i.min=this.start,i.max=this.end}return this.start},easeValueUpdate:function(t,e,i){var s=t.data[e];return(s.max-s.min)*this.ease(i)+s.min}});t.exports=o},76285:(t,e,i)=>{var s=i(69186),r=i(25738),n=new s({initialize:function(t,e,i,s,n){if("object"==typeof t){var a=t;t=r(a,"x",0),e=r(a,"y",0),i=r(a,"power",0),s=r(a,"epsilon",100),n=r(a,"gravity",50)}else void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=100),void 0===n&&(n=50);this.x=t,this.y=e,this.active=!0,this._gravity=n,this._power=0,this._epsilon=0,this.power=i,this.epsilon=s},update:function(t,e){var i=this.x-t.x,s=this.y-t.y,r=i*i+s*s;if(0!==r){var n=Math.sqrt(r);r<this._epsilon&&(r=this._epsilon);var a=this._power*e/(r*n)*100;t.velocityX+=i*a,t.velocityY+=s*a}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(t){this._epsilon=t*t}},power:{get:function(){return this._power/this._gravity},set:function(t){this._power=t*this._gravity}},gravity:{get:function(){return this._gravity},set:function(t){var e=this.power;this._gravity=t,this.power=e}}});t.exports=n},8501:(t,e,i)=>{var s=i(69186),r=i(23407),n=i(76914),a=new s({initialize:function(t){this.emitter=t,this.frame=null,this.x=0,this.y=0,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215,current:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1}}},isAlive:function(){return this.lifeCurrent>0},resetPosition:function(){this.x=0,this.y=0},fire:function(t,e){var i=this.emitter;this.frame=i.getFrame(),i.emitZone&&i.emitZone.getPoint(this),this.x+=void 0===t?i.x.onEmit(this,"x"):t,this.y+=void 0===e?i.y.onEmit(this,"y"):e,this.life=i.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0;var s=i.speedX.onEmit(this,"speedX"),a=i.speedY?i.speedY.onEmit(this,"speedY"):s;if(i.radial){var h=r(i.angle.onEmit(this,"angle"));this.velocityX=Math.cos(h)*Math.abs(s),this.velocityY=Math.sin(h)*Math.abs(a)}else if(i.moveTo){var o=i.moveToX.onEmit(this,"moveToX"),l=i.moveToY?i.moveToY.onEmit(this,"moveToY"):o,d=Math.atan2(l-this.y,o-this.x),u=n(this.x,this.y,o,l)/(this.life/1e3);this.velocityX=Math.cos(d)*u,this.velocityY=Math.sin(d)*u}else this.velocityX=s,this.velocityY=a;i.acceleration&&(this.accelerationX=i.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=i.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=i.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=i.maxVelocityY.onEmit(this,"maxVelocityY"),this.delayCurrent=i.delay.onEmit(this,"delay"),this.scaleX=i.scaleX.onEmit(this,"scaleX"),this.scaleY=i.scaleY?i.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=i.rotate.onEmit(this,"rotate"),this.rotation=r(this.angle),this.bounce=i.bounce.onEmit(this,"bounce"),this.alpha=i.alpha.onEmit(this,"alpha"),this.tint=i.tint.onEmit(this,"tint")},computeVelocity:function(t,e,i,s){var r=this.velocityX,n=this.velocityY,a=this.accelerationX,h=this.accelerationY,o=this.maxVelocityX,l=this.maxVelocityY;r+=t.gravityX*i,n+=t.gravityY*i,a&&(r+=a*i),h&&(n+=h*i),r>o?r=o:r<-o&&(r=-o),n>l?n=l:n<-l&&(n=-l),this.velocityX=r,this.velocityY=n;for(var d=0;d<s.length;d++)s[d].update(this,e,i)},checkBounds:function(t){var e=t.bounds,i=-this.bounce;this.x<e.x&&t.collideLeft?(this.x=e.x,this.velocityX*=i):this.x>e.right&&t.collideRight&&(this.x=e.right,this.velocityX*=i),this.y<e.y&&t.collideTop?(this.y=e.y,this.velocityY*=i):this.y>e.bottom&&t.collideBottom&&(this.y=e.bottom,this.velocityY*=i)},update:function(t,e,i){if(this.delayCurrent>0)return this.delayCurrent-=t,!1;var s=this.emitter,n=1-this.lifeCurrent/this.life;return this.lifeT=n,this.computeVelocity(s,t,e,i),this.x+=this.velocityX*e,this.y+=this.velocityY*e,s.bounds&&this.checkBounds(s),s.deathZone&&s.deathZone.willKill(this)?(this.lifeCurrent=0,!0):(this.scaleX=s.scaleX.onUpdate(this,"scaleX",n,this.scaleX),s.scaleY?this.scaleY=s.scaleY.onUpdate(this,"scaleY",n,this.scaleY):this.scaleY=this.scaleX,this.angle=s.rotate.onUpdate(this,"rotate",n,this.angle),this.rotation=r(this.angle),this.alpha=s.alpha.onUpdate(this,"alpha",n,this.alpha),this.tint=s.tint.onUpdate(this,"tint",n,this.tint),this.lifeCurrent-=t,this.lifeCurrent<=0)}});t.exports=a},32470:(t,e,i)=>{var s=i(87626),r=i(69186),n=i(19506),a=i(79919),h=i(38466),o=i(79948),l=i(25738),d=i(88829),u=i(86908),c=i(60419),p=i(8501),f=i(52372),v=i(75380),g=i(46414),m=i(17321),y=i(6704),x=new r({Mixins:[n.BlendMode,n.Mask,n.ScrollFactor,n.Visible],initialize:function(t,e){this.manager=t,this.texture=t.texture,this.frames=[t.defaultFrame],this.defaultFrame=t.defaultFrame,this.configFastMap=["active","blendMode","collideBottom","collideLeft","collideRight","collideTop","deathCallback","deathCallbackScope","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxParticles","name","on","particleBringToTop","particleClass","radial","timeScale","trackVisible","visible"],this.configOpMap=["accelerationX","accelerationY","angle","alpha","bounce","delay","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],this.name="",this.particleClass=p,this.x=new o(e,"x",0,!0),this.y=new o(e,"y",0,!0),this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.accelerationX=new o(e,"accelerationX",0,!0),this.accelerationY=new o(e,"accelerationY",0,!0),this.maxVelocityX=new o(e,"maxVelocityX",1e4,!0),this.maxVelocityY=new o(e,"maxVelocityY",1e4,!0),this.speedX=new o(e,"speedX",0,!0),this.speedY=new o(e,"speedY",0,!0),this.moveTo=!1,this.moveToX=new o(e,"moveToX",0,!0),this.moveToY=new o(e,"moveToY",0,!0),this.bounce=new o(e,"bounce",0,!0),this.scaleX=new o(e,"scaleX",1),this.scaleY=new o(e,"scaleY",1),this.tint=new o(e,"tint",16777215),this.alpha=new o(e,"alpha",1),this.lifespan=new o(e,"lifespan",1e3,!0),this.angle=new o(e,"angle",{min:0,max:360},!0),this.rotate=new o(e,"rotate",0),this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.quantity=new o(e,"quantity",1,!0),this.delay=new o(e,"delay",0,!0),this.frequency=0,this.on=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZone=null,this.deathZone=null,this.bounds=null,this.collideLeft=!0,this.collideRight=!0,this.collideTop=!0,this.collideBottom=!0,this.active=!0,this.visible=!0,this.blendMode=s.NORMAL,this.follow=null,this.followOffset=new m,this.trackVisible=!1,this.currentFrame=0,this.randomFrame=!0,this.frameQuantity=1,this.dead=[],this.alive=[],this._counter=0,this._frameCounter=0,e&&this.fromJSON(e)},fromJSON:function(t){if(!t)return this;var e=0,i="";for(e=0;e<this.configFastMap.length;e++)i=this.configFastMap[e],c(t,i)&&(this[i]=l(t,i));for(e=0;e<this.configOpMap.length;e++)i=this.configOpMap[e],c(t,i)&&this[i].loadConfig(t);if(this.acceleration=0!==this.accelerationX.propertyValue||0!==this.accelerationY.propertyValue,this.moveTo=0!==this.moveToX.propertyValue||0!==this.moveToY.propertyValue,c(t,"speed")&&(this.speedX.loadConfig(t,"speed"),this.speedY=null),(u(t,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),c(t,"scale")&&(this.scaleX.loadConfig(t,"scale"),this.scaleY=null),c(t,"callbackScope")){var s=l(t,"callbackScope",null);this.emitCallbackScope=s,this.deathCallbackScope=s}return c(t,"emitZone")&&this.setEmitZone(t.emitZone),c(t,"deathZone")&&this.setDeathZone(t.deathZone),c(t,"bounds")&&this.setBounds(t.bounds),c(t,"followOffset")&&this.followOffset.setFromObject(l(t,"followOffset",0)),c(t,"frame")&&this.setFrame(t.frame),c(t,"reserve")&&this.reserve(t.reserve),this},toJSON:function(t){void 0===t&&(t={});var e=0,i="";for(e=0;e<this.configFastMap.length;e++)t[i=this.configFastMap[e]]=this[i];for(e=0;e<this.configOpMap.length;e++)this[i=this.configOpMap[e]]&&(t[i]=this[i].toJSON());return this.speedY||(delete t.speedX,t.speed=this.speedX.toJSON()),this.scaleY||(delete t.scaleX,t.scale=this.scaleX.toJSON()),t},startFollow:function(t,e,i,s){return void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=!1),this.follow=t,this.followOffset.set(e,i),this.trackVisible=s,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){if(1===this.frames.length)return this.defaultFrame;if(this.randomFrame)return d(this.frames);var t=this.frames[this.currentFrame];return this._frameCounter++,this._frameCounter===this.frameQuantity&&(this._frameCounter=0,this.currentFrame=y(this.currentFrame+1,0,this._frameLength)),t},setFrame:function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=1),this.randomFrame=e,this.frameQuantity=i,this.currentFrame=0,this._frameCounter=0;var s=typeof t;if(Array.isArray(t)||"string"===s||"number"===s)this.manager.setEmitterFrames(t,this);else if("object"===s){var r=t;(t=l(r,"frames",null))&&this.manager.setEmitterFrames(t,this);var n=l(r,"cycle",!1);this.randomFrame=!n,this.frameQuantity=l(r,"quantity",i)}return this._frameLength=this.frames.length,1===this._frameLength&&(this.frameQuantity=1,this.randomFrame=!1),this},setRadial:function(t){return void 0===t&&(t=!0),this.radial=t,this},setPosition:function(t,e){return this.x.onChange(t),this.y.onChange(e),this},setBounds:function(t,e,i,s){if("object"==typeof t){var r=t;t=r.x,e=r.y,i=c(r,"w")?r.w:r.width,s=c(r,"h")?r.h:r.height}return this.bounds?this.bounds.setTo(t,e,i,s):this.bounds=new v(t,e,i,s),this},setSpeedX:function(t){return this.speedX.onChange(t),this.radial=!1,this},setSpeedY:function(t){return this.speedY&&(this.speedY.onChange(t),this.radial=!1),this},setSpeed:function(t){return this.speedX.onChange(t),this.speedY=null,this.radial=!0,this},setScaleX:function(t){return this.scaleX.onChange(t),this},setScaleY:function(t){return this.scaleY.onChange(t),this},setScale:function(t){return this.scaleX.onChange(t),this.scaleY=null,this},setGravityX:function(t){return this.gravityX=t,this},setGravityY:function(t){return this.gravityY=t,this},setGravity:function(t,e){return this.gravityX=t,this.gravityY=e,this},setAlpha:function(t){return this.alpha.onChange(t),this},setTint:function(t){return this.tint.onChange(t),this},setEmitterAngle:function(t){return this.angle.onChange(t),this},setAngle:function(t){return this.angle.onChange(t),this},setLifespan:function(t){return this.lifespan.onChange(t),this},setQuantity:function(t){return this.quantity.onChange(t),this},setFrequency:function(t,e){return this.frequency=t,this._counter=0,e&&this.quantity.onChange(e),this},setEmitZone:function(t){if(void 0===t)this.emitZone=null;else{var e=l(t,"type","random"),i=l(t,"source",null);switch(e){case"random":this.emitZone=new f(i);break;case"edge":var s=l(t,"quantity",1),r=l(t,"stepRate",0),n=l(t,"yoyo",!1),a=l(t,"seamless",!0);this.emitZone=new h(i,s,r,n,a)}}return this},setDeathZone:function(t){if(void 0===t)this.deathZone=null;else{var e=l(t,"type","onEnter"),i=l(t,"source",null);if(i&&"function"==typeof i.contains){var s="onEnter"===e;this.deathZone=new a(i,s)}}return this},reserve:function(t){for(var e=this.dead,i=0;i<t;i++)e.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()===this.maxParticles},onParticleEmit:function(t,e){return void 0===t?(this.emitCallback=null,this.emitCallbackScope=null):"function"==typeof t&&(this.emitCallback=t,e&&(this.emitCallbackScope=e)),this},onParticleDeath:function(t,e){return void 0===t?(this.deathCallback=null,this.deathCallbackScope=null):"function"==typeof t&&(this.deathCallback=t,e&&(this.deathCallbackScope=e)),this},killAll:function(){for(var t=this.dead,e=this.alive;e.length>0;)t.push(e.pop());return this},forEachAlive:function(t,e){for(var i=this.alive,s=i.length,r=0;r<s;++r)t.call(e,i[r],this);return this},forEachDead:function(t,e){for(var i=this.dead,s=i.length,r=0;r<s;++r)t.call(e,i[r],this);return this},start:function(){return this.on=!0,this._counter=0,this},stop:function(){return this.on=!1,this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},remove:function(){return this.manager.removeEmitter(this),this},depthSort:function(){return g(this.alive,this.depthSortCallback),this},flow:function(t,e){return void 0===e&&(e=1),this.frequency=t,this.quantity.onChange(e),this.start()},explode:function(t,e,i){return this.frequency=-1,this.emitParticle(t,e,i)},emitParticleAt:function(t,e,i){return this.emitParticle(i,t,e)},emitParticle:function(t,e,i){if(!this.atLimit()){void 0===t&&(t=this.quantity.onEmit());for(var s=this.dead,r=this.follow?this.follow.x+this.followOffset.x:e,n=this.follow?this.follow.y+this.followOffset.y:i,a=0;a<t;a++){var h=s.pop();if(h||(h=new this.particleClass(this)),h.fire(r,n),this.particleBringToTop?this.alive.push(h):this.alive.unshift(h),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,h,this),this.atLimit())break}return h}},preUpdate:function(t,e){var i=(e*=this.timeScale)/1e3;this.trackVisible&&(this.visible=this.follow.visible);var s=this.manager.getProcessors(),r=this.alive,n=this.dead,a=0,h=[],o=r.length;for(a=0;a<o;a++){var l=r[a];l.update(e,i,s)&&h.push({index:a,particle:l})}if((o=h.length)>0){var d=this.deathCallback,u=this.deathCallbackScope;for(a=o-1;a>=0;a--){var c=h[a];r.splice(c.index,1),n.push(c.particle),d&&d.call(u,c.particle),c.particle.resetPosition()}}this.on&&(0===this.frequency?this.emitParticle():this.frequency>0&&(this._counter-=e,this._counter<=0&&(this.emitParticle(),this._counter=this.frequency-Math.abs(this._counter))))},depthSortCallback:function(t,e){return t.y-e.y}});t.exports=x},81404:(t,e,i)=>{var s=i(69186),r=i(19506),n=i(38236),a=i(76285),h=i(49469),o=i(32470),l=i(31890),d=new s({Extends:n,Mixins:[r.Depth,r.Mask,r.Pipeline,r.Transform,r.Visible,l],initialize:function(t,e,i,s){if(n.call(this,t,"ParticleEmitterManager"),this.blendMode=-1,this.timeScale=1,this.texture=null,this.frame=null,this.frameNames=[],null===i||"object"!=typeof i&&!Array.isArray(i)||(s=i,i=null),this.setTexture(e,i),this.initPipeline(),this.emitters=new h(this),this.wells=new h(this),s){Array.isArray(s)||(s=[s]);for(var r=0;r<s.length;r++)this.createEmitter(s[r])}},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setTexture:function(t,e){return this.texture=this.scene.sys.textures.get(t),this.setFrame(e)},setFrame:function(t){this.frame=this.texture.get(t);var e=this.texture.getFramesFromTextureSource(this.frame.sourceIndex),i=[];return e.forEach((function(t){i.push(t.name)})),this.frameNames=i,this.defaultFrame=this.frame,this},setEmitterFrames:function(t,e){Array.isArray(t)||(t=[t]);var i=e.frames;i.length=0;for(var s=0;s<t.length;s++){var r=t[s];-1!==this.frameNames.indexOf(r)&&i.push(this.texture.get(r))}return i.length>0?e.defaultFrame=i[0]:e.defaultFrame=this.defaultFrame,this},addEmitter:function(t){return this.emitters.add(t)},createEmitter:function(t){return this.addEmitter(new o(this,t))},removeEmitter:function(t){return this.emitters.remove(t,!0)},addGravityWell:function(t){return this.wells.add(t)},createGravityWell:function(t){return this.addGravityWell(new a(t))},emitParticle:function(t,e,i){for(var s=this.emitters.list,r=0;r<s.length;r++){var n=s[r];n.active&&n.emitParticle(t,e,i)}return this},emitParticleAt:function(t,e,i){return this.emitParticle(i,t,e)},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},getProcessors:function(){return this.wells.getAll("active",!0)},preUpdate:function(t,e){e*=this.timeScale;for(var i=this.emitters.list,s=0;s<i.length;s++){var r=i[s];r.active&&r.preUpdate(t,e)}},setAlpha:function(){},setScrollFactor:function(){},setBlendMode:function(){}});t.exports=d},56367:(t,e,i)=>{var s=i(9329),r=new s,n=new s,a=new s,h=new s;t.exports=function(t,e,i,s){var o=e.emitters.list,l=o.length;if(0!==l){var d=r.copyFrom(i.matrix),u=n,c=a,p=h;s?(p.loadIdentity(),p.multiply(s),p.translate(e.x,e.y),p.rotate(e.rotation),p.scale(e.scaleX,e.scaleY)):p.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY);for(var f=t.currentContext,v=i.roundPixels,g=0;g<l;g++){var m=o[g],y=m.alive,x=y.length;if(m.visible&&0!==x){i.addToRenderList(m);var T=m.scrollFactorX,w=m.scrollFactorY;f.save(),f.globalCompositeOperation=t.blendModes[m.blendMode];for(var S=0;S<x;S++){var b=y[S],_=b.alpha*i.alpha;if(!(_<=0)){c.applyITRS(b.x,b.y,b.rotation,b.scaleX,b.scaleY),d.copyFrom(i.matrix),d.multiplyWithOffset(p,-i.scrollX*T,-i.scrollY*w),c.e=b.x,c.f=b.y,d.multiply(c,u);var L=b.frame,C=L.canvasData,E=-L.halfWidth,F=-L.halfHeight;f.globalAlpha=_,f.save(),u.setToContext(f),v&&(E=Math.round(E),F=Math.round(F)),f.imageSmoothingEnabled=!(!t.antialias||L.source.scaleMode),f.drawImage(L.source.image,C.x,C.y,C.width,C.height,E,F,C.width,C.height),f.restore()}}f.restore()}}}}},12495:(t,e,i)=>{var s=i(78757),r=i(7973),n=i(25738),a=i(81404);s.register("particles",(function(t,e){void 0===t&&(t={});var i=r(t,"key",null),s=r(t,"frame",null),h=n(t,"emitters",null),o=new a(this.scene,i,s,h);return void 0!==e&&(t.add=e),n(t,"add",!1)?this.displayList.add(o):this.updateList.add(o),o}))},65419:(t,e,i)=>{var s=i(66642),r=i(81404);s.register("particles",(function(t,e,i){return this.displayList.add(new r(this.scene,t,e,i))}))},31890:(t,e,i)=>{var s=i(45733),r=i(45733);s=i(99281),r=i(56367),t.exports={renderWebGL:s,renderCanvas:r}},99281:(t,e,i)=>{var s=i(9329),r=i(64564),n=new s,a=new s,h=new s,o=new s;t.exports=function(t,e,i,s){var l=e.emitters.list,d=l.length;if(0!==d){var u=t.pipelines.set(e.pipeline),c=n,p=a,f=h,v=o;s?(v.loadIdentity(),v.multiply(s),v.translate(e.x,e.y),v.rotate(e.rotation),v.scale(e.scaleX,e.scaleY)):v.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY);var g=i.roundPixels,m=e.defaultFrame.glTexture,y=r.getTintAppendFloatAlpha,x=u.setGameObject(e,e.defaultFrame);t.pipelines.preBatch(e);for(var T=0;T<d;T++){var w=l[T],S=w.alive,b=S.length;if(w.visible&&0!==b){i.addToRenderList(w);var _=w.scrollFactorX,L=w.scrollFactorY;t.setBlendMode(w.blendMode),w.mask&&(w.mask.preRenderWebGL(t,w,i),t.pipelines.set(e.pipeline));for(var C=0;C<b;C++){var E=S[C],F=E.alpha*i.alpha;if(!(F<=0)){f.applyITRS(E.x,E.y,E.rotation,E.scaleX,E.scaleY),c.copyFrom(i.matrix),c.multiplyWithOffset(v,-i.scrollX*_,-i.scrollY*L),f.e=E.x,f.f=E.y,c.multiply(f,p);var A=E.frame,R=-A.halfWidth,k=-A.halfHeight,P=R+A.width,M=k+A.height,O=p.getXRound(R,k,g),B=p.getYRound(R,k,g),D=p.getXRound(R,M,g),Y=p.getYRound(R,M,g),X=p.getXRound(P,M,g),W=p.getYRound(P,M,g),I=p.getXRound(P,k,g),z=p.getYRound(P,k,g),V=y(E.tint,F);u.batchQuad(w,O,B,D,Y,X,W,I,z,A.u0,A.v0,A.u1,A.v1,V,V,V,V,0,m,x)}}w.mask&&w.mask.postRenderWebGL(t,i)}}t.pipelines.postBatch(e)}}},42854:(t,e,i)=>{t.exports={EmitterOp:i(79948),GravityWell:i(76285),Particle:i(8501),ParticleEmitter:i(32470),ParticleEmitterManager:i(81404),Zones:i(79136)}},79919:(t,e,i)=>{var s=new(i(69186))({initialize:function(t,e){this.source=t,this.killOnEnter=e},willKill:function(t){var e=this.source.contains(t.x,t.y);return e&&this.killOnEnter||!e&&!this.killOnEnter}});t.exports=s},38466:(t,e,i)=>{var s=new(i(69186))({initialize:function(t,e,i,s,r){void 0===s&&(s=!1),void 0===r&&(r=!0),this.source=t,this.points=[],this.quantity=e,this.stepRate=i,this.yoyo=s,this.counter=-1,this.seamless=r,this._length=0,this._direction=0,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var t=this.points[0],e=this.points[this.points.length-1];t.x===e.x&&t.y===e.y&&this.points.pop()}var i=this._length;return this._length=this.points.length,this._length<i&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(t){return this.source=t,this.updateSource()},getPoint:function(t){0===this._direction?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,-1===this.counter&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var e=this.points[this.counter];e&&(t.x=e.x,t.y=e.y)}});t.exports=s},52372:(t,e,i)=>{var s=i(69186),r=i(17321),n=new s({initialize:function(t){this.source=t,this._tempVec=new r},getPoint:function(t){var e=this._tempVec;this.source.getRandomPoint(e),t.x=e.x,t.y=e.y}});t.exports=n},79136:(t,e,i)=>{t.exports={DeathZone:i(79919),EdgeZone:i(38466),RandomZone:i(52372)}},5985:(t,e,i)=>{var s=i(69186),r=i(19506),n=i(38590),a=new s({Extends:n,Mixins:[r.PathFollower],initialize:function(t,e,i,s,r,a){n.call(this,t,i,s,r,a),this.path=e},preUpdate:function(t,e){this.anims.update(t,e),this.pathUpdate(t)}});t.exports=a},7859:(t,e,i)=>{var s=i(66642),r=i(5985);s.register("follower",(function(t,e,i,s,n){var a=new r(this.scene,t,e,i,s,n);return this.displayList.add(a),this.updateList.add(a),a}))},76669:(t,e,i)=>{var s=i(69186),r=i(19506),n=i(38236),a=i(57284),h=i(46098),o=i(35054),l=new s({Extends:n,Mixins:[r.AlphaSingle,r.BlendMode,r.Depth,r.GetBounds,r.Mask,r.Pipeline,r.ScrollFactor,r.Transform,r.Visible,o],initialize:function(t,e,i,s,r,o,l){void 0===s&&(s=16777215),void 0===r&&(r=128),void 0===o&&(o=1),void 0===l&&(l=.1),n.call(this,t,"PointLight"),this.initPipeline(h.POINTLIGHT_PIPELINE),this.setPosition(e,i),this.color=a(s),this.intensity=o,this.attenuation=l,this.width=2*r,this.height=2*r,this._radius=r},radius:{get:function(){return this._radius},set:function(t){this._radius=t,this.width=2*t,this.height=2*t}},originX:{get:function(){return.5}},originY:{get:function(){return.5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});t.exports=l},62439:(t,e,i)=>{var s=i(90062),r=i(78757),n=i(7973),a=i(76669);r.register("pointlight",(function(t,e){void 0===t&&(t={});var i=n(t,"color",16777215),r=n(t,"radius",128),h=n(t,"intensity",1),o=n(t,"attenuation",.1),l=new a(this.scene,0,0,i,r,h,o);return void 0!==e&&(t.add=e),s(this.scene,l,t),l}))},991:(t,e,i)=>{var s=i(66642),r=i(76669);s.register("pointlight",(function(t,e,i,s,n,a){return this.displayList.add(new r(this.scene,t,e,i,s,n,a))}))},35054:(t,e,i)=>{var s=i(45733),r=i(45733);s=i(63575),t.exports={renderWebGL:s,renderCanvas:r}},63575:(t,e,i)=>{var s=i(3142);t.exports=function(t,e,i,r){i.addToRenderList(e);var n=t.pipelines.set(e.pipeline),a=s(e,i,r).calc,h=e.width,o=e.height,l=-e._radius,d=-e._radius,u=l+h,c=d+o,p=a.getX(0,0),f=a.getY(0,0),v=a.getX(l,d),g=a.getY(l,d),m=a.getX(l,c),y=a.getY(l,c),x=a.getX(u,c),T=a.getY(u,c),w=a.getX(u,d),S=a.getY(u,d);t.pipelines.preBatch(e),n.batchPointLight(e,i,v,g,m,y,x,T,w,S,p,f),t.pipelines.postBatch(e)}},131:(t,e,i)=>{var s=i(87626),r=i(43929),n=i(55579),a=i(69186),h=i(19506),o=i(11318),l=i(79175),d=i(38236),u=i(45733),c=i(46098),p=i(67454),f=i(50666),v=i(64564),g=i(61004),m=new a({Extends:d,Mixins:[h.Alpha,h.BlendMode,h.ComputedSize,h.Crop,h.Depth,h.Flip,h.GetBounds,h.Mask,h.Origin,h.Pipeline,h.ScrollFactor,h.Tint,h.Transform,h.Visible,p],initialize:function(t,e,i,s,a,h,l){void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=32),void 0===a&&(a=32),d.call(this,t,"RenderTexture"),this.renderer=t.sys.renderer,this.textureManager=t.sys.textures,this.globalTint=16777215,this.globalAlpha=1,this.canvas=null,this.dirty=!1,this._crop=this.resetCropObject(),this.texture=null,this.frame=null,this._saved=!1,void 0===h?(this.canvas=n.create2D(this,s,a),this.texture=t.sys.textures.addCanvas(g(),this.canvas),this.frame=this.texture.get()):(this.texture=t.sys.textures.get(h),this.frame=this.texture.get(l),this.canvas=this.frame.source.image,this._saved=!0,this.dirty=!0,this.width=this.frame.cutWidth,this.height=this.frame.cutHeight),this.context=this.canvas.getContext("2d"),this._eraseMode=!1,this.camera=new r(0,0,s,a),this.renderTarget=null;var p=this.renderer;p?p.type===o.WEBGL?(this.drawGameObject=this.batchGameObjectWebGL,this.renderTarget=new f(p,s,a,1,0,!1)):p.type===o.CANVAS&&(this.drawGameObject=this.batchGameObjectCanvas):this.drawGameObject=u,this.camera.setScene(t),this.setPosition(e,i),void 0===h&&this.setSize(s,a),this.setOrigin(0,0),this.initPipeline(c.SINGLE_PIPELINE)},setSize:function(t,e){return this.resize(t,e)},resize:function(t,e){void 0===e&&(e=t);var i=this.frame;if(t!==this.width||e!==this.height){if("__BASE"===i.name){this.canvas.width=t,this.canvas.height=e,this.texture.width=t,this.texture.height=e;var s=this.renderTarget;s&&(s.resize(t,e),i.glTexture=s.texture,i.source.isRenderTexture=!0,i.source.isGLTexture=!0,i.source.glTexture=s.texture),this.camera.setSize(t,e),i.source.width=t,i.source.height=e,i.setSize(t,e),this.width=t,this.height=e}}else{var r=this.texture.getSourceImage();i.cutX+t>r.width&&(t=r.width-i.cutX),i.cutY+e>r.height&&(e=r.height-i.cutY),i.setSize(t,e,i.cutX,i.cutY)}this.updateDisplayOrigin();var n=this.input;return n&&!n.customHitArea&&(n.hitArea.width=t,n.hitArea.height=e),this},setGlobalTint:function(t){return this.globalTint=t,this},setGlobalAlpha:function(t){return this.globalAlpha=t,this},saveTexture:function(t){return this.textureManager.renameTexture(this.texture.key,t),this._saved=!0,this.texture},fill:function(t,e,i,s,r,n){var a=this.frame,h=this.camera,o=this.renderer;void 0===e&&(e=1),void 0===i&&(i=0),void 0===s&&(s=0),void 0===r&&(r=a.cutWidth),void 0===n&&(n=a.cutHeight);var l=(t>>16&255)/255,d=(t>>8&255)/255,u=(255&t)/255,c=this.renderTarget;if(h.preRender(),c){c.bind(!0);var p=this.pipeline;p.manager.set(p);var f=c.width,g=c.height,m=o.width/f,y=o.height/g;p.drawFillRect(i*m,s*y,r*m,n*y,v.getTintFromFloats(u,d,l,1),e),c.unbind(!0)}else{var x=this.context;o.setContext(x),x.fillStyle="rgba("+l+","+d+","+u+","+e+")",x.fillRect(i+a.cutX,s+a.cutY,r,n),o.setContext()}return this.dirty=!0,this},clear:function(){if(this.dirty){var t=this.renderTarget;if(t)t.clear();else{var e=this.context;e.save(),e.setTransform(1,0,0,1,0,0),e.clearRect(this.frame.cutX,this.frame.cutY,this.frame.cutWidth,this.frame.cutHeight),e.restore()}this.dirty=!1}return this},erase:function(t,e,i){return this._eraseMode=!0,this.draw(t,e,i,1,16777215),this._eraseMode=!1,this},draw:function(t,e,i,s,r){return this.beginDraw(),this.batchDraw(t,e,i,s,r),this.endDraw(),this},drawFrame:function(t,e,i,s,r,n){return this.beginDraw(),this.batchDrawFrame(t,e,i,s,r,n),this.endDraw(),this},beginDraw:function(){var t=this.camera,e=this.renderer,i=this.renderTarget;return t.preRender(),i?e.beginCapture(i.width,i.height):e.setContext(this.context),this},batchDraw:function(t,e,i,s,r){return void 0===s&&(s=this.globalAlpha),r=void 0===r?(this.globalTint>>16)+(65280&this.globalTint)+((255&this.globalTint)<<16):(r>>16)+(65280&r)+((255&r)<<16),Array.isArray(t)||(t=[t]),this.batchList(t,e,i,s,r),this},batchDrawFrame:function(t,e,i,s,r,n){void 0===i&&(i=0),void 0===s&&(s=0),void 0===r&&(r=this.globalAlpha),n=void 0===n?(this.globalTint>>16)+(65280&this.globalTint)+((255&this.globalTint)<<16):(n>>16)+(65280&n)+((255&n)<<16);var a=this.textureManager.getFrame(t,e);return a&&(this.renderTarget?this.pipeline.batchTextureFrame(a,i,s,n,r,this.camera.matrix,null):this.batchTextureFrame(a,i+this.frame.cutX,s+this.frame.cutY,r,n)),this},endDraw:function(t){void 0===t&&(t=this._eraseMode);var e=this.renderer,i=this.renderTarget;if(i){var s=e.endCapture();e.pipelines.setUtility().blitFrame(s,i,1,!1,!1,t),e.resetScissor(),e.resetViewport()}else e.setContext();return this.dirty=!0,this},batchList:function(t,e,i,s,r){for(var n=0;n<t.length;n++){var a=t[n];a&&a!==this&&(a.renderWebGL||a.renderCanvas?this.drawGameObject(a,e,i):a.isParent||a.list?this.batchGroup(a.getChildren(),e,i):"string"==typeof a?this.batchTextureFrameKey(a,null,e,i,s,r):a instanceof l?this.batchTextureFrame(a,e,i,s,r):Array.isArray(a)&&this.batchList(a,e,i,s,r))}},batchGroup:function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0),e+=this.frame.cutX,i+=this.frame.cutY;for(var s=0;s<t.length;s++){var r=t[s];if(r.willRender(this.camera)){var n=r.x+e,a=r.y+i;this.drawGameObject(r,n,a)}}},batchGameObjectWebGL:function(t,e,i){void 0===e&&(e=t.x),void 0===i&&(i=t.y);var s=t.x,r=t.y;t.setPosition(e+this.frame.cutX,i+this.frame.cutY),t.renderDirect?t.renderDirect(this.renderer,t,this.camera):t.renderWebGL(this.renderer,t,this.camera),t.setPosition(s,r)},batchGameObjectCanvas:function(t,e,i){void 0===e&&(e=t.x),void 0===i&&(i=t.y);var r=t.x,n=t.y;if(this._eraseMode){var a=t.blendMode;t.blendMode=s.ERASE}t.setPosition(e+this.frame.cutX,i+this.frame.cutY),t.renderCanvas(this.renderer,t,this.camera,null),t.setPosition(r,n),this._eraseMode&&(t.blendMode=a)},batchTextureFrameKey:function(t,e,i,s,r,n){var a=this.textureManager.getFrame(t,e);a&&this.batchTextureFrame(a,i,s,r,n)},batchTextureFrame:function(t,e,i,s,r){if(void 0===e&&(e=0),void 0===i&&(i=0),e+=this.frame.cutX,i+=this.frame.cutY,this.renderTarget)this.pipeline.batchTextureFrame(t,e,i,r,s,this.camera.matrix,null);else{var n=this.context,a=t.canvasData,h=t.source.image,o=this.camera.matrix;n.save(),n.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",n.globalAlpha=s,o.setToContext(n),n.drawImage(h,a.x,a.y,a.width,a.height,e,i,a.width,a.height),n.restore()}},snapshotArea:function(t,e,i,s,r,n,a){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,r,!1,t,e,i,s,n,a):this.renderer.snapshotCanvas(this.canvas,r,!1,t,e,i,s,n,a),this},snapshot:function(t,e,i){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,t,!1,0,0,this.width,this.height,e,i):this.renderer.snapshotCanvas(this.canvas,t,!1,0,0,this.width,this.height,e,i),this},snapshotPixel:function(t,e,i){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,i,!0,t,e):this.renderer.snapshotCanvas(this.canvas,i,!0,t,e),this},preDestroy:function(){this._saved||(n.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.texture.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.texture=null)}});t.exports=m},11721:t=>{t.exports=function(t,e,i,s){i.addToRenderList(e),t.batchSprite(e,e.frame,i,s)}},34387:(t,e,i)=>{var s=i(90062),r=i(78757),n=i(7973),a=i(131);r.register("renderTexture",(function(t,e){void 0===t&&(t={});var i=n(t,"x",0),r=n(t,"y",0),h=n(t,"width",32),o=n(t,"height",32),l=n(t,"key",void 0),d=n(t,"frame",void 0),u=new a(this.scene,i,r,h,o,l,d);return void 0!==e&&(t.add=e),s(this.scene,u,t),u}))},35346:(t,e,i)=>{var s=i(66642),r=i(131);s.register("renderTexture",(function(t,e,i,s,n,a){return this.displayList.add(new r(this.scene,t,e,i,s,n,a))}))},67454:(t,e,i)=>{var s=i(45733),r=i(45733);s=i(49988),r=i(11721),t.exports={renderWebGL:s,renderCanvas:r}},49988:(t,e,i)=>{var s=i(64564);t.exports=function(t,e,i,r){i.addToRenderList(e);var n=i.alpha,a=e.renderTarget,h=a.width,o=a.height,l=s.getTintAppendFloatAlpha,d=t.pipelines.set(e.pipeline),u=d.setTexture2D(a.texture);t.pipelines.preBatch(e),d.batchTexture(e,a.texture,h,o,e.x,e.y,h,o,e.scaleX,e.scaleY,e.rotation,e.flipX,!e.flipY,e.scrollFactorX,e.scrollFactorY,e.displayOriginX,e.displayOriginY,0,0,h,o,l(e.tintTopLeft,n*e._alphaTL),l(e.tintTopRight,n*e._alphaTR),l(e.tintBottomLeft,n*e._alphaBL),l(e.tintBottomRight,n*e._alphaBR),e.tintFill,0,0,i,r,!0,u),t.resetTextures(),t.pipelines.postBatch(e)}},12374:(t,e,i)=>{var s=i(56579),r=i(69186),n=i(19506),a=i(38236),h=i(46098),o=i(37507),l=i(17321),d=new r({Extends:a,Mixins:[n.AlphaSingle,n.BlendMode,n.Depth,n.Flip,n.Mask,n.Pipeline,n.Size,n.Texture,n.Transform,n.Visible,n.ScrollFactor,o],initialize:function(t,e,i,r,n,o,d,u,c){void 0===r&&(r="__DEFAULT"),void 0===o&&(o=2),void 0===d&&(d=!0),a.call(this,t,"Rope"),this.anims=new s(this),this.points=o,this.vertices,this.uv,this.colors,this.alphas,this.tintFill="__DEFAULT"===r,this.dirty=!1,this.horizontal=d,this._flipX=!1,this._flipY=!1,this._perp=new l,this.debugCallback=null,this.debugGraphic=null,this.setTexture(r,n),this.setPosition(e,i),this.setSizeToFrame(),this.initPipeline(h.ROPE_PIPELINE),Array.isArray(o)&&this.resizeArrays(o.length),this.setPoints(o,u,c),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(t,e){var i=this.anims.currentFrame;this.anims.update(t,e),this.anims.currentFrame!==i&&(this.updateUVs(),this.updateVertices())},play:function(t,e,i){return this.anims.play(t,e,i),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(t,e,i){return void 0===t&&(t=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(t,e,i))},setVertical:function(t,e,i){return void 0===t&&(t=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(t,e,i)):this},setTintFill:function(t){return void 0===t&&(t=!1),this.tintFill=t,this},setAlphas:function(t,e){var i=this.points.length;if(i<1)return this;var s,r=this.alphas;void 0===t?t=[1]:Array.isArray(t)||void 0!==e||(t=[t]);var n=0;if(void 0!==e)for(s=0;s<i;s++)r[n=2*s]=t,r[n+1]=e;else if(t.length===i)for(s=0;s<i;s++)r[n=2*s]=t[s],r[n+1]=t[s];else{var a=t[0];for(s=0;s<i;s++)n=2*s,t.length>n&&(a=t[n]),r[n]=a,t.length>n+1&&(a=t[n+1]),r[n+1]=a}return this},setColors:function(t){var e=this.points.length;if(e<1)return this;var i,s=this.colors;void 0===t?t=[16777215]:Array.isArray(t)||(t=[t]);var r=0;if(t.length===e)for(i=0;i<e;i++)s[r=2*i]=t[i],s[r+1]=t[i];else{var n=t[0];for(i=0;i<e;i++)r=2*i,t.length>r&&(n=t[r]),s[r]=n,t.length>r+1&&(n=t[r+1]),s[r+1]=n}return this},setPoints:function(t,e,i){if(void 0===t&&(t=2),"number"==typeof t){var s,r,n,a=t;if(a<2&&(a=2),t=[],this.horizontal)for(n=-this.frame.halfWidth,r=this.frame.width/(a-1),s=0;s<a;s++)t.push({x:n+s*r,y:0});else for(n=-this.frame.halfHeight,r=this.frame.height/(a-1),s=0;s<a;s++)t.push({x:0,y:n+s*r})}var h=t.length,o=this.points.length;return h<1?(console.warn("Rope: Not enough points given"),this):(1===h&&(t.unshift({x:0,y:0}),h++),o!==h&&this.resizeArrays(h),this.points=t,this.updateUVs(),null!=e&&this.setColors(e),null!=i&&this.setAlphas(i),this)},updateUVs:function(){for(var t=this.uv,e=this.points.length,i=this.frame.u0,s=this.frame.v0,r=this.frame.u1,n=this.frame.v1,a=(r-i)/(e-1),h=(n-s)/(e-1),o=0;o<e;o++){var l,d,u,c,p=4*o;this.horizontal?(this._flipX?(l=r-o*a,u=r-o*a):(l=i+o*a,u=i+o*a),this._flipY?(d=n,c=s):(d=s,c=n)):(this._flipX?(l=i,u=r):(l=r,u=i),this._flipY?(d=n-o*h,c=n-o*h):(d=s+o*h,c=s+o*h)),t[p+0]=l,t[p+1]=d,t[p+2]=u,t[p+3]=c}return this},resizeArrays:function(t){var e=this.colors,i=this.alphas;this.vertices=new Float32Array(4*t),this.uv=new Float32Array(4*t),e=new Uint32Array(2*t),i=new Float32Array(2*t);for(var s=0;s<2*t;s++)e[s]=16777215,i[s]=1;return this.colors=e,this.alphas=i,this.dirty=!0,this},updateVertices:function(){var t=this._perp,e=this.points,i=this.vertices,s=e.length;if(this.dirty=!1,!(s<1)){for(var r,n=e[0],a=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,h=0;h<s;h++){var o=e[h],l=4*h;r=h<s-1?e[h+1]:o,t.x=r.y-n.y,t.y=-(r.x-n.x);var d=t.length();t.x/=d,t.y/=d,t.x*=a,t.y*=a,i[l]=o.x+t.x,i[l+1]=o.y+t.y,i[l+2]=o.x-t.x,i[l+3]=o.y-t.y,n=o}return this}},setDebug:function(t,e){return this.debugGraphic=t,this.debugCallback=t||e?e||this.renderDebugVerts:null,this},renderDebugVerts:function(t,e,i){var s=t.debugGraphic,r=i[0],n=i[1],a=i[2],h=i[3];s.lineBetween(r,n,a,h);for(var o=4;o<e;o+=4){var l=i[o+0],d=i[o+1],u=i[o+2],c=i[o+3];s.lineBetween(r,n,l,d),s.lineBetween(a,h,u,c),s.lineBetween(a,h,l,d),s.lineBetween(l,d,u,c),r=l,n=d,a=u,h=c}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(t){return this._flipX=t,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(t){return this._flipY=t,this.updateUVs()}}});t.exports=d},61059:t=>{t.exports=function(){}},95039:(t,e,i)=>{var s=i(90062),r=i(78757),n=i(7973),a=i(76076),h=i(12374);r.register("rope",(function(t,e){void 0===t&&(t={});var i=n(t,"key",null),r=n(t,"frame",null),o=n(t,"horizontal",!0),l=a(t,"points",void 0),d=a(t,"colors",void 0),u=a(t,"alphas",void 0),c=new h(this.scene,0,0,i,r,l,o,d,u);return void 0!==e&&(t.add=e),s(this.scene,c,t),t.add||this.updateList.add(c),c}))},56014:(t,e,i)=>{var s=i(12374);i(66642).register("rope",(function(t,e,i,r,n,a,h,o){return this.displayList.add(new s(this.scene,t,e,i,r,n,a,h,o))}))},37507:(t,e,i)=>{var s=i(45733),r=i(45733);s=i(29839),r=i(61059),t.exports={renderWebGL:s,renderCanvas:r}},29839:(t,e,i)=>{var s=i(3142),r=i(64564);t.exports=function(t,e,i,n){i.addToRenderList(e);var a=t.pipelines.set(e.pipeline,e),h=s(e,i,n).calc,o=e.vertices,l=e.uv,d=e.colors,u=e.alphas,c=e.alpha,p=r.getTintAppendFloatAlpha,f=i.roundPixels,v=o.length,g=Math.floor(.5*v);a.flush(),t.pipelines.preBatch(e);var m=a.setGameObject(e),y=a.vertexViewF32,x=a.vertexViewU32,T=a.vertexCount*a.currentShader.vertexComponentCount-1,w=0,S=e.tintFill;e.dirty&&e.updateVertices();for(var b=e.debugCallback,_=[],L=0;L<v;L+=2){var C=o[L+0],E=o[L+1],F=C*h.a+E*h.c+h.e,A=C*h.b+E*h.d+h.f;f&&(F=Math.round(F),A=Math.round(A)),y[++T]=F,y[++T]=A,y[++T]=l[L+0],y[++T]=l[L+1],y[++T]=m,y[++T]=S,x[++T]=p(d[w],i.alpha*(u[w]*c)),w++,b&&(_[L+0]=F,_[L+1]=A)}b&&b.call(e,e,v,_),a.vertexCount+=g,t.pipelines.postBatch(e)}},33568:(t,e,i)=>{var s=i(69186),r=i(19506),n=i(38236),a=i(25738),h=i(72646),o=i(65157),l=i(63723),d=i(9329),u=new s({Extends:n,Mixins:[r.ComputedSize,r.Depth,r.GetBounds,r.Mask,r.Origin,r.ScrollFactor,r.Transform,r.Visible,l],initialize:function(t,e,i,s,r,a,h,o){void 0===i&&(i=0),void 0===s&&(s=0),void 0===r&&(r=128),void 0===a&&(a=128),n.call(this,t,"Shader"),this.blendMode=-1,this.shader;var l=t.sys.renderer;this.renderer=l,this.gl=l.gl,this.vertexData=new ArrayBuffer(2*Float32Array.BYTES_PER_ELEMENT*6),this.vertexBuffer=l.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new d,this._tempMatrix2=new d,this._tempMatrix3=new d,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=l.width,this._rendererHeight=l.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(i,s),this.setSize(r,a),this.setOrigin(.5,.5),this.setShader(e,h,o)},willRender:function(t){return!!this.renderToTexture||!(n.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id)},setRenderToTexture:function(t,e){if(void 0===e&&(e=!1),!this.renderToTexture){var i=this.width,s=this.height,r=this.renderer;this.glTexture=r.createTextureFromSource(null,i,s,0),this.glTexture.flipY=e,this.framebuffer=r.createFramebuffer(i,s,this.glTexture,!1),this._rendererWidth=i,this._rendererHeight=s,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),t&&(this.texture=this.scene.sys.textures.addGLTexture(t,this.glTexture,i,s))}return this.shader&&(r.pipelines.clear(),this.load(),this.flush(),r.pipelines.rebind()),this},setShader:function(t,e,i){if(void 0===e&&(e=[]),"string"==typeof t){var s=this.scene.sys.cache.shader;if(!s.has(t))return console.warn("Shader missing: "+t),this;this.shader=s.get(t)}else this.shader=t;var r=this.gl,n=this.renderer;this.program&&r.deleteProgram(this.program);var a=n.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);r.uniformMatrix4fv(r.getUniformLocation(a,"uViewMatrix"),!1,this.viewMatrix),r.uniformMatrix4fv(r.getUniformLocation(a,"uProjectionMatrix"),!1,this.projectionMatrix),r.uniform2f(r.getUniformLocation(a,"uResolution"),this.width,this.height),this.program=a;var o=new Date,l={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[o.getFullYear(),o.getMonth(),o.getDate(),60*o.getHours()*60+60*o.getMinutes()+o.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=h(!0,{},this.shader.uniforms,l):this.uniforms=l;for(var d=0;d<4;d++)e[d]&&this.setSampler2D("iChannel"+d,e[d],d,i);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(t){return this.pointer=t,this},projOrtho:function(t,e,i,s){var r=1/(t-e),n=1/(i-s),a=this.projectionMatrix;a[0]=-2*r,a[5]=-2*n,a[10]=-.001,a[12]=(t+e)*r,a[13]=(s+i)*n,a[14]=-0;var h=this.program,o=this.gl;this.renderer.setProgram(h),o.uniformMatrix4fv(o.getUniformLocation(h,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=e,this._rendererHeight=i},initUniforms:function(){var t=this.gl,e=this.renderer.glFuncMap,i=this.program;for(var s in this._textureCount=0,this.uniforms){var r=this.uniforms[s],n=r.type,a=e[n];r.uniformLocation=t.getUniformLocation(i,s),"sampler2D"!==n&&(r.glMatrix=a.matrix,r.glValueLength=a.length,r.glFunc=a.func)}},setSampler2DBuffer:function(t,e,i,s,r,n){void 0===r&&(r=0),void 0===n&&(n={});var a=this.uniforms[t];return a.value=e,n.width=i,n.height=s,a.textureData=n,this._textureCount=r,this.initSampler2D(a),this},setSampler2D:function(t,e,i,s){void 0===i&&(i=0);var r=this.scene.sys.textures;if(r.exists(e)){var n=r.getFrame(e);if(n.glTexture&&n.glTexture.isRenderTexture)return this.setSampler2DBuffer(t,n.glTexture,n.width,n.height,i,s);var a=this.uniforms[t],h=n.source;a.textureKey=e,a.source=h.image,a.value=n.glTexture,h.isGLTexture&&(s||(s={}),s.width=h.width,s.height=h.height),s&&(a.textureData=s),this._textureCount=i,this.initSampler2D(a)}return this},setUniform:function(t,e){return o(this.uniforms,t,e),this},getUniform:function(t){return a(this.uniforms,t,null)},setChannel0:function(t,e){return this.setSampler2D("iChannel0",t,0,e)},setChannel1:function(t,e){return this.setSampler2D("iChannel1",t,1,e)},setChannel2:function(t,e){return this.setSampler2D("iChannel2",t,2,e)},setChannel3:function(t,e){return this.setSampler2D("iChannel3",t,3,e)},initSampler2D:function(t){if(t.value){var e=this.gl;e.activeTexture(e.TEXTURE0+this._textureCount),e.bindTexture(e.TEXTURE_2D,t.value);var i=t.textureData;if(i&&!t.value.isRenderTexture){var s=e[a(i,"magFilter","linear").toUpperCase()],r=e[a(i,"minFilter","linear").toUpperCase()],n=e[a(i,"wrapS","repeat").toUpperCase()],h=e[a(i,"wrapT","repeat").toUpperCase()],o=e[a(i,"format","rgba").toUpperCase()];if(i.repeat&&(n=e.REPEAT,h=e.REPEAT),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!!i.flipY),i.width){var l=a(i,"width",512),d=a(i,"height",2),u=a(i,"border",0);e.texImage2D(e.TEXTURE_2D,0,o,l,d,u,o,e.UNSIGNED_BYTE,null)}else e.texImage2D(e.TEXTURE_2D,0,o,e.RGBA,e.UNSIGNED_BYTE,t.source);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,s),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,h)}this.renderer.setProgram(this.program),e.uniform1i(t.uniformLocation,this._textureCount),this._textureCount++}},syncUniforms:function(){var t,e,i,s,r,n=this.gl,a=this.uniforms,h=0;for(var o in a)i=(t=a[o]).glFunc,e=t.glValueLength,s=t.uniformLocation,null!==(r=t.value)&&(1===e?t.glMatrix?i.call(n,s,t.transpose,r):i.call(n,s,r):2===e?i.call(n,s,r.x,r.y):3===e?i.call(n,s,r.x,r.y,r.z):4===e?i.call(n,s,r.x,r.y,r.z,r.w):"sampler2D"===t.type&&(n.activeTexture(n.TEXTURE0+h),n.bindTexture(n.TEXTURE_2D,r),n.uniform1i(s,h),h++))},load:function(t){var e=this.gl,i=this.width,s=this.height,r=this.renderer,n=this.program,a=this.viewMatrix;if(!this.renderToTexture){var h=-this._displayOriginX,o=-this._displayOriginY;a[0]=t[0],a[1]=t[1],a[4]=t[2],a[5]=t[3],a[8]=t[4],a[9]=t[5],a[12]=a[0]*h+a[4]*o,a[13]=a[1]*h+a[5]*o}e.useProgram(n),e.uniformMatrix4fv(e.getUniformLocation(n,"uViewMatrix"),!1,a),e.uniform2f(e.getUniformLocation(n,"uResolution"),this.width,this.height);var l=this.uniforms,d=l.resolution;d.value.x=i,d.value.y=s,l.time.value=r.game.loop.getDuration();var u=this.pointer;if(u){var c=l.mouse,p=u.x/i,f=1-u.y/s;c.value.x=p.toFixed(2),c.value.y=f.toFixed(2)}this.syncUniforms()},flush:function(){var t=this.width,e=this.height,i=this.program,s=this.gl,r=this.vertexBuffer,n=this.renderer,a=2*Float32Array.BYTES_PER_ELEMENT;this.renderToTexture&&(n.setFramebuffer(this.framebuffer),s.clearColor(0,0,0,0),s.clear(s.COLOR_BUFFER_BIT)),s.bindBuffer(s.ARRAY_BUFFER,r);var h=s.getAttribLocation(i,"inPosition");-1!==h&&(s.enableVertexAttribArray(h),s.vertexAttribPointer(h,2,s.FLOAT,!1,a,0));var o=this.vertexViewF32;o[3]=e,o[4]=t,o[5]=e,o[8]=t,o[9]=e,o[10]=t,s.bufferSubData(s.ARRAY_BUFFER,0,this.bytes.subarray(0,6*a)),s.drawArrays(s.TRIANGLES,0,6),this.renderToTexture&&n.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},preDestroy:function(){var t=this.gl;t.deleteProgram(this.program),t.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(this.renderer.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null)}});t.exports=u},64012:t=>{t.exports=function(){}},5517:(t,e,i)=>{var s=i(90062),r=i(78757),n=i(7973),a=i(33568);r.register("shader",(function(t,e){void 0===t&&(t={});var i=n(t,"key",null),r=n(t,"x",0),h=n(t,"y",0),o=n(t,"width",128),l=n(t,"height",128),d=new a(this.scene,i,r,h,o,l);return void 0!==e&&(t.add=e),s(this.scene,d,t),d}))},89775:(t,e,i)=>{var s=i(33568);i(66642).register("shader",(function(t,e,i,r,n,a,h){return this.displayList.add(new s(this.scene,t,e,i,r,n,a,h))}))},63723:(t,e,i)=>{var s=i(45733),r=i(45733);s=i(47989),r=i(64012),t.exports={renderWebGL:s,renderCanvas:r}},47989:(t,e,i)=>{var s=i(3142);t.exports=function(t,e,i,r){if(e.shader){if(i.addToRenderList(e),t.pipelines.clear(),e.renderToTexture)e.load(),e.flush();else{var n=s(e,i,r).calc;t.width===e._rendererWidth&&t.height===e._rendererHeight||e.projOrtho(0,t.width,t.height,0),e.load(n.matrix),e.flush()}t.pipelines.rebind()}}},83131:(t,e,i)=>{var s=i(64564);t.exports=function(t,e,i,r,n,a){for(var h=s.getTintAppendFloatAlpha(i.fillColor,i.fillAlpha*r),o=i.pathData,l=i.pathIndexes,d=0;d<l.length;d+=3){var u=2*l[d],c=2*l[d+1],p=2*l[d+2],f=o[u+0]-n,v=o[u+1]-a,g=o[c+0]-n,m=o[c+1]-a,y=o[p+0]-n,x=o[p+1]-a,T=e.getX(f,v),w=e.getY(f,v),S=e.getX(g,m),b=e.getY(g,m),_=e.getX(y,x),L=e.getY(y,x);t.batchTri(i,T,w,S,b,_,L,0,0,1,1,h,h,h,2)}}},42236:t=>{t.exports=function(t,e,i,s){var r=i||e.fillColor,n=s||e.fillAlpha,a=(16711680&r)>>>16,h=(65280&r)>>>8,o=255&r;t.fillStyle="rgba("+a+","+h+","+o+","+n+")"}},54092:t=>{t.exports=function(t,e,i,s){var r=i||e.strokeColor,n=s||e.strokeAlpha,a=(16711680&r)>>>16,h=(65280&r)>>>8,o=255&r;t.strokeStyle="rgba("+a+","+h+","+o+","+n+")",t.lineWidth=e.lineWidth}},56098:(t,e,i)=>{var s=i(69186),r=i(19506),n=i(38236),a=i(97501),h=new s({Extends:n,Mixins:[r.AlphaSingle,r.BlendMode,r.Depth,r.GetBounds,r.Mask,r.Origin,r.Pipeline,r.ScrollFactor,r.Transform,r.Visible],initialize:function(t,e,i){void 0===e&&(e="Shape"),n.call(this,t,e),this.geom=i,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new a,this.width=0,this.height=0,this.initPipeline()},setFillStyle:function(t,e){return void 0===e&&(e=1),void 0===t?this.isFilled=!1:(this.fillColor=t,this.fillAlpha=e,this.isFilled=!0),this},setStrokeStyle:function(t,e,i){return void 0===i&&(i=1),void 0===t?this.isStroked=!1:(this.lineWidth=t,this.strokeColor=e,this.strokeAlpha=i,this.isStroked=!0),this},setClosePath:function(t){return this.closePath=t,this},setSize:function(t,e){return this.width=t,this.height=e,this},setDisplaySize:function(t,e){return this.displayWidth=t,this.displayHeight=e,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(t){this.scaleX=t/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(t){this.scaleY=t/this.height}}});t.exports=h},29980:(t,e,i)=>{var s=i(64564);t.exports=function(t,e,i,r,n){var a=t.strokeTint,h=s.getTintAppendFloatAlpha(e.strokeColor,e.strokeAlpha*i);a.TL=h,a.TR=h,a.BL=h,a.BR=h;var o=e.pathData,l=o.length-1,d=e.lineWidth,u=d/2,c=o[0]-r,p=o[1]-n;e.closePath||(l-=2);for(var f=2;f<l;f+=2){var v=o[f]-r,g=o[f+1]-n;t.batchLine(c,p,v,g,u,u,d,f-2,!!e.closePath&&f===l-1),c=v,p=g}}},59226:(t,e,i)=>{var s=i(37141),r=i(69186),n=i(23407),a=i(64634),h=i(38459),o=i(80925),l=i(56098),d=new r({Extends:l,Mixins:[s],initialize:function(t,e,i,s,r,n,a,o,d){void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=128),void 0===r&&(r=0),void 0===n&&(n=360),void 0===a&&(a=!1),l.call(this,t,"Arc",new h(0,0,s)),this._startAngle=r,this._endAngle=n,this._anticlockwise=a,this._iterations=.01,this.setPosition(e,i);var u=2*this.geom.radius;this.setSize(u,u),void 0!==o&&this.setFillStyle(o,d),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(t){this._iterations=t,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(t){this.geom.radius=t;var e=2*t;this.setSize(e,e),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(t){this._startAngle=t,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(t){this._endAngle=t,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(t){this._anticlockwise=t,this.updateData()}},setRadius:function(t){return this.radius=t,this},setIterations:function(t){return void 0===t&&(t=.01),this.iterations=t,this},setStartAngle:function(t,e){return this._startAngle=t,void 0!==e&&(this._anticlockwise=e),this.updateData()},setEndAngle:function(t,e){return this._endAngle=t,void 0!==e&&(this._anticlockwise=e),this.updateData()},updateData:function(){var t=this._iterations,e=t,i=this.geom.radius,s=n(this._startAngle),r=n(this._endAngle),h=i,l=i;r-=s,this._anticlockwise?r<-o.PI2?r=-o.PI2:r>0&&(r=-o.PI2+r%o.PI2):r>o.PI2?r=o.PI2:r<0&&(r=o.PI2+r%o.PI2);for(var d,u=[h+Math.cos(s)*i,l+Math.sin(s)*i];e<1;)d=r*e+s,u.push(h+Math.cos(d)*i,l+Math.sin(d)*i),e+=t;return d=r+s,u.push(h+Math.cos(d)*i,l+Math.sin(d)*i),u.push(h+Math.cos(s)*i,l+Math.sin(s)*i),this.pathIndexes=a(u),this.pathData=u,this}});t.exports=d},45089:(t,e,i)=>{var s=i(23407),r=i(42236),n=i(54092),a=i(14437);t.exports=function(t,e,i,h){i.addToRenderList(e);var o=t.currentContext;if(a(t,o,e,i,h)){var l=e.radius;o.beginPath(),o.arc(l-e.originX*(2*l),l-e.originY*(2*l),l,s(e._startAngle),s(e._endAngle),e.anticlockwise),e.closePath&&o.closePath(),e.isFilled&&(r(o,e),o.fill()),e.isStroked&&(n(o,e),o.stroke()),o.restore()}}},10555:(t,e,i)=>{var s=i(59226),r=i(66642);r.register("arc",(function(t,e,i,r,n,a,h,o){return this.displayList.add(new s(this.scene,t,e,i,r,n,a,h,o))})),r.register("circle",(function(t,e,i,r,n){return this.displayList.add(new s(this.scene,t,e,i,0,360,!1,r,n))}))},37141:(t,e,i)=>{var s=i(45733),r=i(45733);s=i(35901),r=i(45089),t.exports={renderWebGL:s,renderCanvas:r}},35901:(t,e,i)=>{var s=i(3142),r=i(83131),n=i(29980);t.exports=function(t,e,i,a){i.addToRenderList(e);var h=t.pipelines.set(e.pipeline),o=s(e,i,a),l=h.calcMatrix.copyFrom(o.calc),d=e._displayOriginX,u=e._displayOriginY,c=i.alpha*e.alpha;t.pipelines.preBatch(e),e.isFilled&&r(h,l,e,c,d,u),e.isStroked&&n(h,e,c,d,u),t.pipelines.postBatch(e)}},98435:(t,e,i)=>{var s=i(69186),r=i(65444),n=i(64634),a=i(75380),h=i(56098),o=new s({Extends:h,Mixins:[r],initialize:function(t,e,i,s,r,n){void 0===e&&(e=0),void 0===i&&(i=0),h.call(this,t,"Curve",s),this._smoothness=32,this._curveBounds=new a,this.closePath=!1,this.setPosition(e,i),void 0!==r&&this.setFillStyle(r,n),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(t){this._smoothness=t,this.updateData()}},setSmoothness:function(t){return this._smoothness=t,this.updateData()},updateData:function(){var t=this._curveBounds,e=this._smoothness;this.geom.getBounds(t,e),this.setSize(t.width,t.height),this.updateDisplayOrigin();for(var i=[],s=this.geom.getPoints(e),r=0;r<s.length;r++)i.push(s[r].x,s[r].y);return i.push(s[0].x,s[0].y),this.pathIndexes=n(i),this.pathData=i,this}});t.exports=o},26704:(t,e,i)=>{var s=i(42236),r=i(54092),n=i(14437);t.exports=function(t,e,i,a){i.addToRenderList(e);var h=t.currentContext;if(n(t,h,e,i,a)){var o=e._displayOriginX+e._curveBounds.x,l=e._displayOriginY+e._curveBounds.y,d=e.pathData,u=d.length-1,c=d[0]-o,p=d[1]-l;h.beginPath(),h.moveTo(c,p),e.closePath||(u-=2);for(var f=2;f<u;f+=2){var v=d[f]-o,g=d[f+1]-l;h.lineTo(v,g)}e.closePath&&h.closePath(),e.isFilled&&(s(h,e),h.fill()),e.isStroked&&(r(h,e),h.stroke()),h.restore()}}},84653:(t,e,i)=>{var s=i(66642),r=i(98435);s.register("curve",(function(t,e,i,s,n){return this.displayList.add(new r(this.scene,t,e,i,s,n))}))},65444:(t,e,i)=>{var s=i(45733),r=i(45733);s=i(42010),r=i(26704),t.exports={renderWebGL:s,renderCanvas:r}},42010:(t,e,i)=>{var s=i(83131),r=i(3142),n=i(29980);t.exports=function(t,e,i,a){i.addToRenderList(e);var h=t.pipelines.set(e.pipeline),o=r(e,i,a),l=h.calcMatrix.copyFrom(o.calc),d=e._displayOriginX+e._curveBounds.x,u=e._displayOriginY+e._curveBounds.y,c=i.alpha*e.alpha;t.pipelines.preBatch(e),e.isFilled&&s(h,l,e,c,d,u),e.isStroked&&n(h,e,c,d,u),t.pipelines.postBatch(e)}},12419:(t,e,i)=>{var s=i(69186),r=i(64634),n=i(52234),a=i(81385),h=i(56098),o=new s({Extends:h,Mixins:[n],initialize:function(t,e,i,s,r,n,o){void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=128),void 0===r&&(r=128),h.call(this,t,"Ellipse",new a(s/2,r/2,s,r)),this._smoothness=64,this.setPosition(e,i),this.width=s,this.height=r,void 0!==n&&this.setFillStyle(n,o),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(t){this._smoothness=t,this.updateData()}},setSize:function(t,e){return this.width=t,this.height=e,this.geom.setPosition(t/2,e/2),this.geom.setSize(t,e),this.updateData()},setSmoothness:function(t){return this._smoothness=t,this.updateData()},updateData:function(){for(var t=[],e=this.geom.getPoints(this._smoothness),i=0;i<e.length;i++)t.push(e[i].x,e[i].y);return t.push(e[0].x,e[0].y),this.pathIndexes=r(t),this.pathData=t,this}});t.exports=o},84915:(t,e,i)=>{var s=i(42236),r=i(54092),n=i(14437);t.exports=function(t,e,i,a){i.addToRenderList(e);var h=t.currentContext;if(n(t,h,e,i,a)){var o=e._displayOriginX,l=e._displayOriginY,d=e.pathData,u=d.length-1,c=d[0]-o,p=d[1]-l;h.beginPath(),h.moveTo(c,p),e.closePath||(u-=2);for(var f=2;f<u;f+=2){var v=d[f]-o,g=d[f+1]-l;h.lineTo(v,g)}h.closePath(),e.isFilled&&(s(h,e),h.fill()),e.isStroked&&(r(h,e),h.stroke()),h.restore()}}},16110:(t,e,i)=>{var s=i(12419);i(66642).register("ellipse",(function(t,e,i,r,n,a){return this.displayList.add(new s(this.scene,t,e,i,r,n,a))}))},52234:(t,e,i)=>{var s=i(45733),r=i(45733);s=i(15161),r=i(84915),t.exports={renderWebGL:s,renderCanvas:r}},15161:(t,e,i)=>{var s=i(83131),r=i(3142),n=i(29980);t.exports=function(t,e,i,a){i.addToRenderList(e);var h=t.pipelines.set(e.pipeline),o=r(e,i,a),l=h.calcMatrix.copyFrom(o.calc),d=e._displayOriginX,u=e._displayOriginY,c=i.alpha*e.alpha;t.pipelines.preBatch(e),e.isFilled&&s(h,l,e,c,d,u),e.isStroked&&n(h,e,c,d,u),t.pipelines.postBatch(e)}},35308:(t,e,i)=>{var s=i(69186),r=i(56098),n=i(20888),a=new s({Extends:r,Mixins:[n],initialize:function(t,e,i,s,n,a,h,o,l,d,u){void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=128),void 0===n&&(n=128),void 0===a&&(a=32),void 0===h&&(h=32),r.call(this,t,"Grid",null),this.cellWidth=a,this.cellHeight=h,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(e,i),this.setSize(s,n),this.setFillStyle(o,l),void 0!==d&&this.setOutlineStyle(d,u),this.updateDisplayOrigin()},setFillStyle:function(t,e){return void 0===e&&(e=1),void 0===t?this.showCells=!1:(this.fillColor=t,this.fillAlpha=e,this.showCells=!0),this},setAltFillStyle:function(t,e){return void 0===e&&(e=1),void 0===t?this.showAltCells=!1:(this.altFillColor=t,this.altFillAlpha=e,this.showAltCells=!0),this},setOutlineStyle:function(t,e){return void 0===e&&(e=1),void 0===t?this.showOutline=!1:(this.outlineFillColor=t,this.outlineFillAlpha=e,this.showOutline=!0),this}});t.exports=a},7921:(t,e,i)=>{var s=i(42236),r=i(54092),n=i(14437);t.exports=function(t,e,i,a){i.addToRenderList(e);var h=t.currentContext;if(n(t,h,e,i,a)){var o=-e._displayOriginX,l=-e._displayOriginY,d=i.alpha*e.alpha,u=e.width,c=e.height,p=e.cellWidth,f=e.cellHeight,v=Math.ceil(u/p),g=Math.ceil(c/f),m=p,y=f,x=p-(v*p-u),T=f-(g*f-c),w=e.showCells,S=e.showAltCells,b=e.showOutline,_=0,L=0,C=0,E=0,F=0;if(b&&(m--,y--,x===p&&x--,T===f&&T--),w&&e.fillAlpha>0)for(s(h,e),L=0;L<g;L++)for(S&&(C=L%2),_=0;_<v;_++)S&&C?C=0:(C++,E=_<v-1?m:x,F=L<g-1?y:T,h.fillRect(o+_*p,l+L*f,E,F));if(S&&e.altFillAlpha>0)for(s(h,e,e.altFillColor,e.altFillAlpha*d),L=0;L<g;L++)for(S&&(C=L%2),_=0;_<v;_++)!S||C?(C=0,E=_<v-1?m:x,F=L<g-1?y:T,h.fillRect(o+_*p,l+L*f,E,F)):C=1;if(b&&e.outlineFillAlpha>0){for(r(h,e,e.outlineFillColor,e.outlineFillAlpha*d),_=1;_<v;_++){var A=_*p;h.beginPath(),h.moveTo(A+o,l),h.lineTo(A+o,c+l),h.stroke()}for(L=1;L<g;L++){var R=L*f;h.beginPath(),h.moveTo(o,R+l),h.lineTo(o+u,R+l),h.stroke()}}h.restore()}}},8098:(t,e,i)=>{var s=i(66642),r=i(35308);s.register("grid",(function(t,e,i,s,n,a,h,o,l,d){return this.displayList.add(new r(this.scene,t,e,i,s,n,a,h,o,l,d))}))},20888:(t,e,i)=>{var s=i(45733),r=i(45733);s=i(15301),r=i(7921),t.exports={renderWebGL:s,renderCanvas:r}},15301:(t,e,i)=>{var s=i(3142),r=i(64564);t.exports=function(t,e,i,n){i.addToRenderList(e);var a=t.pipelines.set(e.pipeline),h=s(e,i,n);a.calcMatrix.copyFrom(h.calc).translate(-e._displayOriginX,-e._displayOriginY);var o,l,d=i.alpha*e.alpha,u=e.width,c=e.height,p=e.cellWidth,f=e.cellHeight,v=Math.ceil(u/p),g=Math.ceil(c/f),m=p,y=f,x=p-(v*p-u),T=f-(g*f-c),w=e.showCells,S=e.showAltCells,b=e.showOutline,_=0,L=0,C=0,E=0,F=0;if(b&&(m--,y--,x===p&&x--,T===f&&T--),t.pipelines.preBatch(e),w&&e.fillAlpha>0)for(o=a.fillTint,l=r.getTintAppendFloatAlpha(e.fillColor,e.fillAlpha*d),o.TL=l,o.TR=l,o.BL=l,o.BR=l,L=0;L<g;L++)for(S&&(C=L%2),_=0;_<v;_++)S&&C?C=0:(C++,E=_<v-1?m:x,F=L<g-1?y:T,a.batchFillRect(_*p,L*f,E,F));if(S&&e.altFillAlpha>0)for(o=a.fillTint,l=r.getTintAppendFloatAlpha(e.altFillColor,e.altFillAlpha*d),o.TL=l,o.TR=l,o.BL=l,o.BR=l,L=0;L<g;L++)for(S&&(C=L%2),_=0;_<v;_++)!S||C?(C=0,E=_<v-1?m:x,F=L<g-1?y:T,a.batchFillRect(_*p,L*f,E,F)):C=1;if(b&&e.outlineFillAlpha>0){var A=a.strokeTint,R=r.getTintAppendFloatAlpha(e.outlineFillColor,e.outlineFillAlpha*d);for(A.TL=R,A.TR=R,A.BL=R,A.BR=R,_=1;_<v;_++){var k=_*p;a.batchLine(k,0,k,c,1,1,1,0,!1)}for(L=1;L<g;L++){var P=L*f;a.batchLine(0,P,u,P,1,1,1,0,!1)}}t.pipelines.postBatch(e)}},84376:(t,e,i)=>{var s=i(59479),r=i(69186),n=i(56098),a=new r({Extends:n,Mixins:[s],initialize:function(t,e,i,s,r,a,h,o){void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=48),void 0===r&&(r=32),void 0===a&&(a=15658734),void 0===h&&(h=10066329),void 0===o&&(o=13421772),n.call(this,t,"IsoBox",null),this.projection=4,this.fillTop=a,this.fillLeft=h,this.fillRight=o,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(e,i),this.setSize(s,r),this.updateDisplayOrigin()},setProjection:function(t){return this.projection=t,this},setFaces:function(t,e,i){return void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===i&&(i=!0),this.showTop=t,this.showLeft=e,this.showRight=i,this},setFillStyle:function(t,e,i){return this.fillTop=t,this.fillLeft=e,this.fillRight=i,this.isFilled=!0,this}});t.exports=a},95901:(t,e,i)=>{var s=i(42236),r=i(14437);t.exports=function(t,e,i,n){i.addToRenderList(e);var a=t.currentContext;if(r(t,a,e,i,n)&&e.isFilled){var h=e.width,o=e.height,l=h/2,d=h/e.projection;e.showTop&&(s(a,e,e.fillTop),a.beginPath(),a.moveTo(-l,-o),a.lineTo(0,-d-o),a.lineTo(l,-o),a.lineTo(l,-1),a.lineTo(0,d-1),a.lineTo(-l,-1),a.lineTo(-l,-o),a.fill()),e.showLeft&&(s(a,e,e.fillLeft),a.beginPath(),a.moveTo(-l,0),a.lineTo(0,d),a.lineTo(0,d-o),a.lineTo(-l,-o),a.lineTo(-l,0),a.fill()),e.showRight&&(s(a,e,e.fillRight),a.beginPath(),a.moveTo(l,0),a.lineTo(0,d),a.lineTo(0,d-o),a.lineTo(l,-o),a.lineTo(l,0),a.fill()),a.restore()}}},25669:(t,e,i)=>{var s=i(66642),r=i(84376);s.register("isobox",(function(t,e,i,s,n,a,h){return this.displayList.add(new r(this.scene,t,e,i,s,n,a,h))}))},59479:(t,e,i)=>{var s=i(45733),r=i(45733);s=i(41674),r=i(95901),t.exports={renderWebGL:s,renderCanvas:r}},41674:(t,e,i)=>{var s=i(3142),r=i(64564);t.exports=function(t,e,i,n){i.addToRenderList(e);var a,h,o,l,d,u,c,p,f,v=t.pipelines.set(e.pipeline),g=s(e,i,n),m=v.calcMatrix.copyFrom(g.calc),y=e.width,x=e.height,T=y/2,w=y/e.projection,S=i.alpha*e.alpha;e.isFilled&&(t.pipelines.preBatch(e),e.showTop&&(a=r.getTintAppendFloatAlpha(e.fillTop,S),h=m.getX(-T,-x),o=m.getY(-T,-x),l=m.getX(0,-w-x),d=m.getY(0,-w-x),u=m.getX(T,-x),c=m.getY(T,-x),p=m.getX(0,w-x),f=m.getY(0,w-x),v.batchQuad(e,h,o,l,d,u,c,p,f,0,0,1,1,a,a,a,a,2)),e.showLeft&&(a=r.getTintAppendFloatAlpha(e.fillLeft,S),h=m.getX(-T,0),o=m.getY(-T,0),l=m.getX(0,w),d=m.getY(0,w),u=m.getX(0,w-x),c=m.getY(0,w-x),p=m.getX(-T,-x),f=m.getY(-T,-x),v.batchQuad(e,h,o,l,d,u,c,p,f,0,0,1,1,a,a,a,a,2)),e.showRight&&(a=r.getTintAppendFloatAlpha(e.fillRight,S),h=m.getX(T,0),o=m.getY(T,0),l=m.getX(0,w),d=m.getY(0,w),u=m.getX(0,w-x),c=m.getY(0,w-x),p=m.getX(T,-x),f=m.getY(T,-x),v.batchQuad(e,h,o,l,d,u,c,p,f,0,0,1,1,a,a,a,a,2)),t.pipelines.postBatch(e))}},81863:(t,e,i)=>{var s=i(69186),r=i(30349),n=i(56098),a=new s({Extends:n,Mixins:[r],initialize:function(t,e,i,s,r,a,h,o,l){void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=48),void 0===r&&(r=32),void 0===a&&(a=!1),void 0===h&&(h=15658734),void 0===o&&(o=10066329),void 0===l&&(l=13421772),n.call(this,t,"IsoTriangle",null),this.projection=4,this.fillTop=h,this.fillLeft=o,this.fillRight=l,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=a,this.isFilled=!0,this.setPosition(e,i),this.setSize(s,r),this.updateDisplayOrigin()},setProjection:function(t){return this.projection=t,this},setReversed:function(t){return this.isReversed=t,this},setFaces:function(t,e,i){return void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===i&&(i=!0),this.showTop=t,this.showLeft=e,this.showRight=i,this},setFillStyle:function(t,e,i){return this.fillTop=t,this.fillLeft=e,this.fillRight=i,this.isFilled=!0,this}});t.exports=a},37514:(t,e,i)=>{var s=i(42236),r=i(14437);t.exports=function(t,e,i,n){i.addToRenderList(e);var a=t.currentContext;if(r(t,a,e,i,n)&&e.isFilled){var h=e.width,o=e.height,l=h/2,d=h/e.projection,u=e.isReversed;e.showTop&&u&&(s(a,e,e.fillTop),a.beginPath(),a.moveTo(-l,-o),a.lineTo(0,-d-o),a.lineTo(l,-o),a.lineTo(0,d-o),a.fill()),e.showLeft&&(s(a,e,e.fillLeft),a.beginPath(),u?(a.moveTo(-l,-o),a.lineTo(0,d),a.lineTo(0,d-o)):(a.moveTo(-l,0),a.lineTo(0,d),a.lineTo(0,d-o)),a.fill()),e.showRight&&(s(a,e,e.fillRight),a.beginPath(),u?(a.moveTo(l,-o),a.lineTo(0,d),a.lineTo(0,d-o)):(a.moveTo(l,0),a.lineTo(0,d),a.lineTo(0,d-o)),a.fill()),a.restore()}}},45151:(t,e,i)=>{var s=i(66642),r=i(81863);s.register("isotriangle",(function(t,e,i,s,n,a,h,o){return this.displayList.add(new r(this.scene,t,e,i,s,n,a,h,o))}))},30349:(t,e,i)=>{var s=i(45733),r=i(45733);s=i(31874),r=i(37514),t.exports={renderWebGL:s,renderCanvas:r}},31874:(t,e,i)=>{var s=i(3142),r=i(64564);t.exports=function(t,e,i,n){i.addToRenderList(e);var a=t.pipelines.set(e.pipeline),h=s(e,i,n),o=a.calcMatrix.copyFrom(h.calc),l=e.width,d=e.height,u=l/2,c=l/e.projection,p=e.isReversed,f=i.alpha*e.alpha;if(e.isFilled){var v,g,m,y,x,T,w;if(t.pipelines.preBatch(e),e.showTop&&p){v=r.getTintAppendFloatAlpha(e.fillTop,f),g=o.getX(-u,-d),m=o.getY(-u,-d),y=o.getX(0,-c-d),x=o.getY(0,-c-d),T=o.getX(u,-d),w=o.getY(u,-d);var S=o.getX(0,c-d),b=o.getY(0,c-d);a.batchQuad(e,g,m,y,x,T,w,S,b,0,0,1,1,v,v,v,v,2)}e.showLeft&&(v=r.getTintAppendFloatAlpha(e.fillLeft,f),p?(g=o.getX(-u,-d),m=o.getY(-u,-d),y=o.getX(0,c),x=o.getY(0,c),T=o.getX(0,c-d),w=o.getY(0,c-d)):(g=o.getX(-u,0),m=o.getY(-u,0),y=o.getX(0,c),x=o.getY(0,c),T=o.getX(0,c-d),w=o.getY(0,c-d)),a.batchTri(e,g,m,y,x,T,w,0,0,1,1,v,v,v,2)),e.showRight&&(v=r.getTintAppendFloatAlpha(e.fillRight,f),p?(g=o.getX(u,-d),m=o.getY(u,-d),y=o.getX(0,c),x=o.getY(0,c),T=o.getX(0,c-d),w=o.getY(0,c-d)):(g=o.getX(u,0),m=o.getY(u,0),y=o.getX(0,c),x=o.getY(0,c),T=o.getX(0,c-d),w=o.getY(0,c-d)),a.batchTri(e,g,m,y,x,T,w,0,0,1,1,v,v,v,2)),t.pipelines.postBatch(e)}}},9417:(t,e,i)=>{var s=i(69186),r=i(56098),n=i(97501),a=i(15091),h=new s({Extends:r,Mixins:[a],initialize:function(t,e,i,s,a,h,o,l,d){void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=0),void 0===a&&(a=0),void 0===h&&(h=128),void 0===o&&(o=0),r.call(this,t,"Line",new n(s,a,h,o));var u=Math.max(1,this.geom.right-this.geom.left),c=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(e,i),this.setSize(u,c),void 0!==l&&this.setStrokeStyle(1,l,d),this.updateDisplayOrigin()},setLineWidth:function(t,e){return void 0===e&&(e=t),this._startWidth=t,this._endWidth=e,this.lineWidth=t,this},setTo:function(t,e,i,s){return this.geom.setTo(t,e,i,s),this}});t.exports=h},49506:(t,e,i)=>{var s=i(54092),r=i(14437);t.exports=function(t,e,i,n){i.addToRenderList(e);var a=t.currentContext;if(r(t,a,e,i,n)){var h=e._displayOriginX,o=e._displayOriginY;e.isStroked&&(s(a,e),a.beginPath(),a.moveTo(e.geom.x1-h,e.geom.y1-o),a.lineTo(e.geom.x2-h,e.geom.y2-o),a.stroke()),a.restore()}}},31059:(t,e,i)=>{var s=i(66642),r=i(9417);s.register("line",(function(t,e,i,s,n,a,h,o){return this.displayList.add(new r(this.scene,t,e,i,s,n,a,h,o))}))},15091:(t,e,i)=>{var s=i(45733),r=i(45733);s=i(38918),r=i(49506),t.exports={renderWebGL:s,renderCanvas:r}},38918:(t,e,i)=>{var s=i(3142),r=i(64564);t.exports=function(t,e,i,n){i.addToRenderList(e);var a=t.pipelines.set(e.pipeline),h=s(e,i,n);a.calcMatrix.copyFrom(h.calc);var o=e._displayOriginX,l=e._displayOriginY,d=i.alpha*e.alpha;if(t.pipelines.preBatch(e),e.isStroked){var u=a.strokeTint,c=r.getTintAppendFloatAlpha(e.strokeColor,e.strokeAlpha*d);u.TL=c,u.TR=c,u.BL=c,u.BR=c;var p=e._startWidth,f=e._endWidth;a.batchLine(e.geom.x1-o,e.geom.y1-l,e.geom.x2-o,e.geom.y2-l,p,f,1,0,!1,h.sprite,h.camera)}t.pipelines.postBatch(e)}},64195:(t,e,i)=>{var s=i(69038),r=i(69186),n=i(64634),a=i(92594),h=i(77816),o=i(56098),l=i(63037),d=new r({Extends:o,Mixins:[s],initialize:function(t,e,i,s,r,n){void 0===e&&(e=0),void 0===i&&(i=0),o.call(this,t,"Polygon",new h(s));var l=a(this.geom);this.setPosition(e,i),this.setSize(l.width,l.height),void 0!==r&&this.setFillStyle(r,n),this.updateDisplayOrigin(),this.updateData()},smooth:function(t){void 0===t&&(t=1);for(var e=0;e<t;e++)l(this.geom);return this.updateData()},updateData:function(){for(var t=[],e=this.geom.points,i=0;i<e.length;i++)t.push(e[i].x,e[i].y);return t.push(e[0].x,e[0].y),this.pathIndexes=n(t),this.pathData=t,this}});t.exports=d},29239:(t,e,i)=>{var s=i(42236),r=i(54092),n=i(14437);t.exports=function(t,e,i,a){i.addToRenderList(e);var h=t.currentContext;if(n(t,h,e,i,a)){var o=e._displayOriginX,l=e._displayOriginY,d=e.pathData,u=d.length-1,c=d[0]-o,p=d[1]-l;h.beginPath(),h.moveTo(c,p),e.closePath||(u-=2);for(var f=2;f<u;f+=2){var v=d[f]-o,g=d[f+1]-l;h.lineTo(v,g)}h.closePath(),e.isFilled&&(s(h,e),h.fill()),e.isStroked&&(r(h,e),h.stroke()),h.restore()}}},42182:(t,e,i)=>{var s=i(66642),r=i(64195);s.register("polygon",(function(t,e,i,s,n){return this.displayList.add(new r(this.scene,t,e,i,s,n))}))},69038:(t,e,i)=>{var s=i(45733),r=i(45733);s=i(15270),r=i(29239),t.exports={renderWebGL:s,renderCanvas:r}},15270:(t,e,i)=>{var s=i(83131),r=i(3142),n=i(29980);t.exports=function(t,e,i,a){i.addToRenderList(e);var h=t.pipelines.set(e.pipeline),o=r(e,i,a),l=h.calcMatrix.copyFrom(o.calc),d=e._displayOriginX,u=e._displayOriginY,c=i.alpha*e.alpha;t.pipelines.preBatch(e),e.isFilled&&s(h,l,e,c,d,u),e.isStroked&&n(h,e,c,d,u),t.pipelines.postBatch(e)}},41231:(t,e,i)=>{var s=i(69186),r=i(75380),n=i(56098),a=i(56603),h=new s({Extends:n,Mixins:[a],initialize:function(t,e,i,s,a,h,o){void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=128),void 0===a&&(a=128),n.call(this,t,"Rectangle",new r(0,0,s,a)),this.setPosition(e,i),this.setSize(s,a),void 0!==h&&this.setFillStyle(h,o),this.updateDisplayOrigin(),this.updateData()},setSize:function(t,e){return this.width=t,this.height=e,this.geom.setSize(t,e),this.updateData(),this},updateData:function(){var t=[],e=this.geom,i=this._tempLine;return e.getLineA(i),t.push(i.x1,i.y1,i.x2,i.y2),e.getLineB(i),t.push(i.x2,i.y2),e.getLineC(i),t.push(i.x2,i.y2),e.getLineD(i),t.push(i.x2,i.y2),this.pathData=t,this}});t.exports=h},24586:(t,e,i)=>{var s=i(42236),r=i(54092),n=i(14437);t.exports=function(t,e,i,a){i.addToRenderList(e);var h=t.currentContext;if(n(t,h,e,i,a)){var o=e._displayOriginX,l=e._displayOriginY;e.isFilled&&(s(h,e),h.fillRect(-o,-l,e.width,e.height)),e.isStroked&&(r(h,e),h.beginPath(),h.rect(-o,-l,e.width,e.height),h.stroke()),h.restore()}}},98971:(t,e,i)=>{var s=i(66642),r=i(41231);s.register("rectangle",(function(t,e,i,s,n,a){return this.displayList.add(new r(this.scene,t,e,i,s,n,a))}))},56603:(t,e,i)=>{var s=i(45733),r=i(45733);s=i(68162),r=i(24586),t.exports={renderWebGL:s,renderCanvas:r}},68162:(t,e,i)=>{var s=i(3142),r=i(29980),n=i(64564);t.exports=function(t,e,i,a){i.addToRenderList(e);var h=t.pipelines.set(e.pipeline),o=s(e,i,a);h.calcMatrix.copyFrom(o.calc);var l=e._displayOriginX,d=e._displayOriginY,u=i.alpha*e.alpha;if(t.pipelines.preBatch(e),e.isFilled){var c=h.fillTint,p=n.getTintAppendFloatAlpha(e.fillColor,e.fillAlpha*u);c.TL=p,c.TR=p,c.BL=p,c.BR=p,h.batchFillRect(-l,-d,e.width,e.height)}e.isStroked&&r(h,e,u,l,d),t.pipelines.postBatch(e)}},49231:(t,e,i)=>{var s=i(61975),r=i(69186),n=i(64634),a=i(56098),h=new r({Extends:a,Mixins:[s],initialize:function(t,e,i,s,r,n,h,o){void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=5),void 0===r&&(r=32),void 0===n&&(n=64),a.call(this,t,"Star",null),this._points=s,this._innerRadius=r,this._outerRadius=n,this.setPosition(e,i),this.setSize(2*n,2*n),void 0!==h&&this.setFillStyle(h,o),this.updateDisplayOrigin(),this.updateData()},setPoints:function(t){return this._points=t,this.updateData()},setInnerRadius:function(t){return this._innerRadius=t,this.updateData()},setOuterRadius:function(t){return this._outerRadius=t,this.updateData()},points:{get:function(){return this._points},set:function(t){this._points=t,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(t){this._innerRadius=t,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(t){this._outerRadius=t,this.updateData()}},updateData:function(){var t=[],e=this._points,i=this._innerRadius,s=this._outerRadius,r=Math.PI/2*3,a=Math.PI/e,h=s,o=s;t.push(h,o+-s);for(var l=0;l<e;l++)t.push(h+Math.cos(r)*s,o+Math.sin(r)*s),r+=a,t.push(h+Math.cos(r)*i,o+Math.sin(r)*i),r+=a;return t.push(h,o+-s),this.pathIndexes=n(t),this.pathData=t,this}});t.exports=h},54817:(t,e,i)=>{var s=i(42236),r=i(54092),n=i(14437);t.exports=function(t,e,i,a){i.addToRenderList(e);var h=t.currentContext;if(n(t,h,e,i,a)){var o=e._displayOriginX,l=e._displayOriginY,d=e.pathData,u=d.length-1,c=d[0]-o,p=d[1]-l;h.beginPath(),h.moveTo(c,p),e.closePath||(u-=2);for(var f=2;f<u;f+=2){var v=d[f]-o,g=d[f+1]-l;h.lineTo(v,g)}h.closePath(),e.isFilled&&(s(h,e),h.fill()),e.isStroked&&(r(h,e),h.stroke()),h.restore()}}},35612:(t,e,i)=>{var s=i(49231);i(66642).register("star",(function(t,e,i,r,n,a,h){return this.displayList.add(new s(this.scene,t,e,i,r,n,a,h))}))},61975:(t,e,i)=>{var s=i(45733),r=i(45733);s=i(34945),r=i(54817),t.exports={renderWebGL:s,renderCanvas:r}},34945:(t,e,i)=>{var s=i(83131),r=i(3142),n=i(29980);t.exports=function(t,e,i,a){i.addToRenderList(e);var h=t.pipelines.set(e.pipeline),o=r(e,i,a),l=h.calcMatrix.copyFrom(o.calc),d=e._displayOriginX,u=e._displayOriginY,c=i.alpha*e.alpha;t.pipelines.preBatch(e),e.isFilled&&s(h,l,e,c,d,u),e.isStroked&&n(h,e,c,d,u),t.pipelines.postBatch(e)}},28913:(t,e,i)=>{var s=i(69186),r=i(56098),n=i(82671),a=i(63808),h=new s({Extends:r,Mixins:[a],initialize:function(t,e,i,s,a,h,o,l,d,u,c){void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=0),void 0===a&&(a=128),void 0===h&&(h=64),void 0===o&&(o=0),void 0===l&&(l=128),void 0===d&&(d=128),r.call(this,t,"Triangle",new n(s,a,h,o,l,d));var p=this.geom.right-this.geom.left,f=this.geom.bottom-this.geom.top;this.setPosition(e,i),this.setSize(p,f),void 0!==u&&this.setFillStyle(u,c),this.updateDisplayOrigin(),this.updateData()},setTo:function(t,e,i,s,r,n){return this.geom.setTo(t,e,i,s,r,n),this.updateData()},updateData:function(){var t=[],e=this.geom,i=this._tempLine;return e.getLineA(i),t.push(i.x1,i.y1,i.x2,i.y2),e.getLineB(i),t.push(i.x2,i.y2),e.getLineC(i),t.push(i.x2,i.y2),this.pathData=t,this}});t.exports=h},56841:(t,e,i)=>{var s=i(42236),r=i(54092),n=i(14437);t.exports=function(t,e,i,a){i.addToRenderList(e);var h=t.currentContext;if(n(t,h,e,i,a)){var o=e._displayOriginX,l=e._displayOriginY,d=e.geom.x1-o,u=e.geom.y1-l,c=e.geom.x2-o,p=e.geom.y2-l,f=e.geom.x3-o,v=e.geom.y3-l;h.beginPath(),h.moveTo(d,u),h.lineTo(c,p),h.lineTo(f,v),h.closePath(),e.isFilled&&(s(h,e),h.fill()),e.isStroked&&(r(h,e),h.stroke()),h.restore()}}},79904:(t,e,i)=>{var s=i(66642),r=i(28913);s.register("triangle",(function(t,e,i,s,n,a,h,o,l,d){return this.displayList.add(new r(this.scene,t,e,i,s,n,a,h,o,l,d))}))},63808:(t,e,i)=>{var s=i(45733),r=i(45733);s=i(84805),r=i(56841),t.exports={renderWebGL:s,renderCanvas:r}},84805:(t,e,i)=>{var s=i(3142),r=i(29980),n=i(64564);t.exports=function(t,e,i,a){i.addToRenderList(e);var h=t.pipelines.set(e.pipeline),o=s(e,i,a);h.calcMatrix.copyFrom(o.calc);var l=e._displayOriginX,d=e._displayOriginY,u=i.alpha*e.alpha;if(t.pipelines.preBatch(e),e.isFilled){var c=h.fillTint,p=n.getTintAppendFloatAlpha(e.fillColor,e.fillAlpha*u);c.TL=p,c.TR=p,c.BL=p,c.BR=p;var f=e.geom.x1-l,v=e.geom.y1-d,g=e.geom.x2-l,m=e.geom.y2-d,y=e.geom.x3-l,x=e.geom.y3-d;h.batchFillTriangle(f,v,g,m,y,x,o.sprite,o.camera)}e.isStroked&&r(h,e,u,l,d),t.pipelines.postBatch(e)}},29525:(t,e,i)=>{var s=i(90062),r=i(38596),n=i(78757),a=i(7973),h=i(38590);n.register("sprite",(function(t,e){void 0===t&&(t={});var i=a(t,"key",null),n=a(t,"frame",null),o=new h(this.scene,0,0,i,n);return void 0!==e&&(t.add=e),s(this.scene,o,t),r(o,t),o}))},82364:(t,e,i)=>{var s=i(66642),r=i(38590);s.register("sprite",(function(t,e,i,s){var n=new r(this.scene,t,e,i,s);return this.displayList.add(n),n}))},83799:t=>{t.exports=function(t,e,i){var s=t.canvas,r=t.context,n=t.style,a=[],h=0,o=i.length;n.maxLines>0&&n.maxLines<i.length&&(o=n.maxLines),n.syncFont(s,r);for(var l=0;l<o;l++){var d=n.strokeThickness;d+=r.measureText(i[l]).width,n.wordWrap&&(d-=r.measureText(" ").width),a[l]=Math.ceil(d),h=Math.max(h,a[l])}var u=e.fontSize+n.strokeThickness,c=u*o,p=t.lineSpacing;return o>1&&(c+=p*(o-1)),{width:h,height:c,lines:o,lineWidths:a,lineSpacing:p,lineHeight:u}}},32800:(t,e,i)=>{var s=i(55579);t.exports=function(t){var e=s.create(this),i=e.getContext("2d");t.syncFont(e,i);var r=i.measureText(t.testString);if("actualBoundingBoxAscent"in r){var n=r.actualBoundingBoxAscent,a=r.actualBoundingBoxDescent;return s.remove(e),{ascent:n,descent:a,fontSize:n+a}}var h=Math.ceil(r.width*t.baselineX),o=h,l=2*o;o=o*t.baselineY|0,e.width=h,e.height=l,i.fillStyle="#f00",i.fillRect(0,0,h,l),i.font=t._font,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(t.testString,0,o);var d={ascent:0,descent:0,fontSize:0},u=i.getImageData(0,0,h,l);if(!u)return d.ascent=o,d.descent=o+6,d.fontSize=d.ascent+d.descent,s.remove(e),d;var c,p,f=u.data,v=f.length,g=4*h,m=0,y=!1;for(c=0;c<o;c++){for(p=0;p<g;p+=4)if(255!==f[m+p]){y=!0;break}if(y)break;m+=g}for(d.ascent=o-c,m=v-g,y=!1,c=l;c>o;c--){for(p=0;p<g;p+=4)if(255!==f[m+p]){y=!0;break}if(y)break;m-=g}return d.descent=c-o,d.fontSize=d.ascent+d.descent,s.remove(e),d}},77546:(t,e,i)=>{var s=i(21778),r=i(55579),n=i(69186),a=i(19506),h=i(24496),o=i(38236),l=i(83799),d=i(76076),u=i(20662),c=i(61128),p=i(22849),f=new n({Extends:o,Mixins:[a.Alpha,a.BlendMode,a.ComputedSize,a.Crop,a.Depth,a.Flip,a.GetBounds,a.Mask,a.Origin,a.Pipeline,a.ScrollFactor,a.Tint,a.Transform,a.Visible,c],initialize:function(t,e,i,s,n){void 0===e&&(e=0),void 0===i&&(i=0),o.call(this,t,"Text"),this.renderer=t.sys.renderer,this.setPosition(e,i),this.setOrigin(0,0),this.initPipeline(),this.canvas=r.create(this),this.context=this.canvas.getContext("2d"),this.style=new p(this,n),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.dirty=!1,0===this.style.resolution&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(s),n&&n.padding&&this.setPadding(n.padding),n&&n.lineSpacing&&this.setLineSpacing(n.lineSpacing),t.sys.game.events.on(h.CONTEXT_RESTORED,(function(){this.dirty=!0}),this)},initRTL:function(){this.style.rtl&&(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",s(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function(t){var e=this.style;if(e.wordWrapCallback){var i=e.wordWrapCallback.call(e.wordWrapCallbackScope,t,this);return Array.isArray(i)&&(i=i.join("\n")),i}return e.wordWrapWidth?e.wordWrapUseAdvanced?this.advancedWordWrap(t,this.context,this.style.wordWrapWidth):this.basicWordWrap(t,this.context,this.style.wordWrapWidth):t},advancedWordWrap:function(t,e,i){for(var s="",r=t.replace(/ +/gi," ").split(this.splitRegExp),n=r.length,a=0;a<n;a++){var h=r[a],o="";if(h=h.replace(/^ *|\s*$/gi,""),e.measureText(h).width<i)s+=h+"\n";else{for(var l=i,d=h.split(" "),u=0;u<d.length;u++){var c=d[u],p=c+" ",f=e.measureText(p).width;if(f>l){if(0===u){for(var v=p;v.length&&(v=v.slice(0,-1),!((f=e.measureText(v).width)<=l)););if(!v.length)throw new Error("This text's wordWrapWidth setting is less than a single character!");var g=c.substr(v.length);d[u]=g,o+=v}var m=d[u].length?u:u+1,y=d.slice(m).join(" ").replace(/[ \n]*$/gi,"");r[a+1]=y+" "+(r[a+1]||""),n=r.length;break}o+=p,l-=f}s+=o.replace(/[ \n]*$/gi,"")+"\n"}}return s.replace(/[\s|\n]*$/gi,"")},basicWordWrap:function(t,e,i){for(var s="",r=t.split(this.splitRegExp),n=r.length-1,a=e.measureText(" ").width,h=0;h<=n;h++){for(var o=i,l=r[h].split(" "),d=l.length-1,u=0;u<=d;u++){var c=l[u],p=e.measureText(c).width,f=p;u<d&&(f+=a),f>o&&u>0&&(s+="\n",o=i),s+=c,u<d?(s+=" ",o-=f):o-=p}h<n&&(s+="\n")}return s},getWrappedText:function(t){return void 0===t&&(t=this._text),this.style.syncFont(this.canvas,this.context),this.runWordWrap(t).split(this.splitRegExp)},setText:function(t){return t||0===t||(t=""),Array.isArray(t)&&(t=t.join("\n")),t!==this._text&&(this._text=t.toString(),this.updateText()),this},setStyle:function(t){return this.style.setStyle(t)},setFont:function(t){return this.style.setFont(t)},setFontFamily:function(t){return this.style.setFontFamily(t)},setFontSize:function(t){return this.style.setFontSize(t)},setFontStyle:function(t){return this.style.setFontStyle(t)},setFixedSize:function(t,e){return this.style.setFixedSize(t,e)},setBackgroundColor:function(t){return this.style.setBackgroundColor(t)},setFill:function(t){return this.style.setFill(t)},setColor:function(t){return this.style.setColor(t)},setStroke:function(t,e){return this.style.setStroke(t,e)},setShadow:function(t,e,i,s,r,n){return this.style.setShadow(t,e,i,s,r,n)},setShadowOffset:function(t,e){return this.style.setShadowOffset(t,e)},setShadowColor:function(t){return this.style.setShadowColor(t)},setShadowBlur:function(t){return this.style.setShadowBlur(t)},setShadowStroke:function(t){return this.style.setShadowStroke(t)},setShadowFill:function(t){return this.style.setShadowFill(t)},setWordWrapWidth:function(t,e){return this.style.setWordWrapWidth(t,e)},setWordWrapCallback:function(t,e){return this.style.setWordWrapCallback(t,e)},setAlign:function(t){return this.style.setAlign(t)},setResolution:function(t){return this.style.setResolution(t)},setLineSpacing:function(t){return this.lineSpacing=t,this.updateText()},setPadding:function(t,e,i,s){if("object"==typeof t){var r=t,n=d(r,"x",null);null!==n?(t=n,i=n):(t=d(r,"left",0),i=d(r,"right",t));var a=d(r,"y",null);null!==a?(e=a,s=a):(e=d(r,"top",0),s=d(r,"bottom",e))}else void 0===t&&(t=0),void 0===e&&(e=t),void 0===i&&(i=t),void 0===s&&(s=e);return this.padding.left=t,this.padding.top=e,this.padding.right=i,this.padding.bottom=s,this.updateText()},setMaxLines:function(t){return this.style.setMaxLines(t)},updateText:function(){var t=this.canvas,e=this.context,i=this.style,s=i.resolution,r=i.metrics;i.syncFont(t,e);var n=this._text;(i.wordWrapWidth||i.wordWrapCallback)&&(n=this.runWordWrap(this._text));var a,h=n.split(this.splitRegExp),o=l(this,r,h),d=this.padding;0===i.fixedWidth?(this.width=o.width+d.left+d.right,a=o.width):(this.width=i.fixedWidth,(a=this.width-d.left-d.right)<o.width&&(a=o.width)),0===i.fixedHeight?this.height=o.height+d.top+d.bottom:this.height=i.fixedHeight;var u,c,p=this.width,f=this.height;this.updateDisplayOrigin(),p*=s,f*=s,p=Math.max(p,1),f=Math.max(f,1),t.width!==p||t.height!==f?(t.width=p,t.height=f,this.frame.setSize(p,f),i.syncFont(t,e)):e.clearRect(0,0,p,f),e.save(),e.scale(s,s),i.backgroundColor&&(e.fillStyle=i.backgroundColor,e.fillRect(0,0,p,f)),i.syncStyle(t,e),e.textBaseline="alphabetic",e.translate(d.left,d.top);for(var v=0;v<o.lines;v++){if(u=i.strokeThickness/2,c=i.strokeThickness/2+v*o.lineHeight+r.ascent,v>0&&(c+=o.lineSpacing*v),i.rtl)u=p-u;else if("right"===i.align)u+=a-o.lineWidths[v];else if("center"===i.align)u+=(a-o.lineWidths[v])/2;else if("justify"===i.align&&o.lineWidths[v]/o.width>=.85){var g=o.width-o.lineWidths[v],m=e.measureText(" ").width,y=h[v].trim(),x=y.split(" ");g+=(h[v].length-y.length)*m;for(var T=Math.floor(g/m),w=0;T>0;)x[w]+=" ",w=(w+1)%(x.length-1||1),--T;h[v]=x.join(" ")}this.autoRound&&(u=Math.round(u),c=Math.round(c)),i.strokeThickness&&(this.style.syncShadow(e,i.shadowStroke),e.strokeText(h[v],u,c)),i.color&&(this.style.syncShadow(e,i.shadowFill),e.fillText(h[v],u,c))}e.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(t,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var S=this.input;return S&&!S.customHitArea&&(S.hitArea.width=this.width,S.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(t){this.setText(t)}},toJSON:function(){var t=a.ToJSON(this),e={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return t.data=e,t},preDestroy:function(){this.style.rtl&&u(this.canvas),r.remove(this.canvas),this.texture.destroy()}});t.exports=f},50059:t=>{t.exports=function(t,e,i,s){0!==e.width&&0!==e.height&&(i.addToRenderList(e),t.batchSprite(e,e.frame,i,s))}},53912:(t,e,i)=>{var s=i(90062),r=i(78757),n=i(7973),a=i(77546);r.register("text",(function(t,e){void 0===t&&(t={});var i=n(t,"text",""),r=n(t,"style",null),h=n(t,"padding",null);null!==h&&(r.padding=h);var o=new a(this.scene,0,0,i,r);return void 0!==e&&(t.add=e),s(this.scene,o,t),o.autoRound=n(t,"autoRound",!0),o.resolution=n(t,"resolution",1),o}))},33979:(t,e,i)=>{var s=i(77546);i(66642).register("text",(function(t,e,i,r){return this.displayList.add(new s(this.scene,t,e,i,r))}))},61128:(t,e,i)=>{var s=i(45733),r=i(45733);s=i(64651),r=i(50059),t.exports={renderWebGL:s,renderCanvas:r}},22849:(t,e,i)=>{var s=i(69186),r=i(7973),n=i(76076),a=i(32800),h={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|Mqgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},o=new s({initialize:function(t,e){this.parent=t,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(e,!1,!0);var i=n(e,"metrics",!1);this.metrics=i?{ascent:n(i,"ascent",0),descent:n(i,"descent",0),fontSize:n(i,"fontSize",0)}:a(this)},setStyle:function(t,e,i){for(var s in void 0===e&&(e=!0),void 0===i&&(i=!1),t&&t.hasOwnProperty("fontSize")&&"number"==typeof t.fontSize&&(t.fontSize=t.fontSize.toString()+"px"),h){var a=i?h[s][1]:this[s];this[s]="wordWrapCallback"===s||"wordWrapCallbackScope"===s?n(t,h[s][0],a):r(t,h[s][0],a)}var o=n(t,"font",null);null!==o&&this.setFont(o,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var l=n(t,"fill",null);return null!==l&&(this.color=l),e?this.update(!0):this.parent},syncFont:function(t,e){e.font=this._font},syncStyle:function(t,e){e.textBaseline="alphabetic",e.fillStyle=this.color,e.strokeStyle=this.stroke,e.lineWidth=this.strokeThickness,e.lineCap="round",e.lineJoin="round"},syncShadow:function(t,e){e?(t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur):(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowColor=0,t.shadowBlur=0)},update:function(t){return t&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=a(this)),this.parent.updateText()},setFont:function(t,e){void 0===e&&(e=!0);var i=t,s="",r="";if("string"!=typeof t)i=n(t,"fontFamily","Courier"),s=n(t,"fontSize","16px"),r=n(t,"fontStyle","");else{var a=t.split(" "),h=0;r=a.length>2?a[h++]:"",s=a[h++]||"16px",i=a[h++]||"Courier"}return i===this.fontFamily&&s===this.fontSize&&r===this.fontStyle||(this.fontFamily=i,this.fontSize=s,this.fontStyle=r,e&&this.update(!0)),this.parent},setFontFamily:function(t){return this.fontFamily!==t&&(this.fontFamily=t,this.update(!0)),this.parent},setFontStyle:function(t){return this.fontStyle!==t&&(this.fontStyle=t,this.update(!0)),this.parent},setFontSize:function(t){return"number"==typeof t&&(t=t.toString()+"px"),this.fontSize!==t&&(this.fontSize=t,this.update(!0)),this.parent},setTestString:function(t){return this.testString=t,this.update(!0)},setFixedSize:function(t,e){return this.fixedWidth=t,this.fixedHeight=e,t&&(this.parent.width=t),e&&(this.parent.height=e),this.update(!1)},setBackgroundColor:function(t){return this.backgroundColor=t,this.update(!1)},setFill:function(t){return this.color=t,this.update(!1)},setColor:function(t){return this.color=t,this.update(!1)},setResolution:function(t){return this.resolution=t,this.update(!1)},setStroke:function(t,e){return void 0===e&&(e=this.strokeThickness),void 0===t&&0!==this.strokeThickness?(this.strokeThickness=0,this.update(!0)):this.stroke===t&&this.strokeThickness===e||(this.stroke=t,this.strokeThickness=e,this.update(!0)),this.parent},setShadow:function(t,e,i,s,r,n){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i="#000"),void 0===s&&(s=0),void 0===r&&(r=!1),void 0===n&&(n=!0),this.shadowOffsetX=t,this.shadowOffsetY=e,this.shadowColor=i,this.shadowBlur=s,this.shadowStroke=r,this.shadowFill=n,this.update(!1)},setShadowOffset:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.shadowOffsetX=t,this.shadowOffsetY=e,this.update(!1)},setShadowColor:function(t){return void 0===t&&(t="#000"),this.shadowColor=t,this.update(!1)},setShadowBlur:function(t){return void 0===t&&(t=0),this.shadowBlur=t,this.update(!1)},setShadowStroke:function(t){return this.shadowStroke=t,this.update(!1)},setShadowFill:function(t){return this.shadowFill=t,this.update(!1)},setWordWrapWidth:function(t,e){return void 0===e&&(e=!1),this.wordWrapWidth=t,this.wordWrapUseAdvanced=e,this.update(!1)},setWordWrapCallback:function(t,e){return void 0===e&&(e=null),this.wordWrapCallback=t,this.wordWrapCallbackScope=e,this.update(!1)},setAlign:function(t){return void 0===t&&(t="left"),this.align=t,this.update(!1)},setMaxLines:function(t){return void 0===t&&(t=0),this.maxLines=t,this.update(!1)},getTextMetrics:function(){var t=this.metrics;return{ascent:t.ascent,descent:t.descent,fontSize:t.fontSize}},toJSON:function(){var t={};for(var e in h)t[e]=this[e];return t.metrics=this.getTextMetrics(),t},destroy:function(){this.parent=void 0}});t.exports=o},64651:(t,e,i)=>{var s=i(64564);t.exports=function(t,e,i,r){if(0!==e.width&&0!==e.height){i.addToRenderList(e);var n=e.frame,a=n.width,h=n.height,o=s.getTintAppendFloatAlpha,l=t.pipelines.set(e.pipeline,e),d=l.setTexture2D(n.glTexture,e);t.pipelines.preBatch(e),l.batchTexture(e,n.glTexture,a,h,e.x,e.y,a/e.style.resolution,h/e.style.resolution,e.scaleX,e.scaleY,e.rotation,e.flipX,e.flipY,e.scrollFactorX,e.scrollFactorY,e.displayOriginX,e.displayOriginY,0,0,a,h,o(e.tintTopLeft,i.alpha*e._alphaTL),o(e.tintTopRight,i.alpha*e._alphaTR),o(e.tintBottomLeft,i.alpha*e._alphaBL),o(e.tintBottomRight,i.alpha*e._alphaBR),e.tintFill,0,0,i,r,!1,d),t.pipelines.postBatch(e)}}},99191:(t,e,i)=>{var s=i(55579),r=i(69186),n=i(19506),a=i(24496),h=i(38236),o=i(19865),l=i(83468),d=i(27579),u=i(17321),c=new r({Extends:h,Mixins:[n.Alpha,n.BlendMode,n.ComputedSize,n.Crop,n.Depth,n.Flip,n.GetBounds,n.Mask,n.Origin,n.Pipeline,n.ScrollFactor,n.Tint,n.Transform,n.Visible,d],initialize:function(t,e,i,r,n,l,d){var c=t.sys.renderer;h.call(this,t,"TileSprite");var p=t.sys.textures.get(l),f=p.get(d);r&&n?(r=Math.floor(r),n=Math.floor(n)):(r=f.width,n=f.height),this._tilePosition=new u,this._tileScale=new u(1,1),this.dirty=!1,this.renderer=c,this.canvas=s.create(this,r,n),this.context=this.canvas.getContext("2d"),this.displayTexture=p,this.displayFrame=f,this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.potWidth=o(f.width),this.potHeight=o(f.height),this.fillCanvas=s.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d"),this.fillPattern=null,this.setPosition(e,i),this.setSize(r,n),this.setFrame(d),this.setOriginFromFrame(),this.initPipeline(),t.sys.game.events.on(a.CONTEXT_RESTORED,(function(t){if(t){var e=t.gl;this.dirty=!0,this.fillPattern=null,this.fillPattern=t.createTexture2D(0,e.LINEAR,e.LINEAR,e.REPEAT,e.REPEAT,e.RGBA,this.fillCanvas,this.potWidth,this.potHeight)}}),this)},setTexture:function(t,e){return this.displayTexture=this.scene.sys.textures.get(t),this.setFrame(e)},setFrame:function(t){var e=this.displayTexture.get(t);return this.potWidth=o(e.width),this.potHeight=o(e.height),this.canvas.width=0,e.cutWidth&&e.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this.displayFrame=e,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(t,e){return void 0!==t&&(this.tilePositionX=t),void 0!==e&&(this.tilePositionY=e),this},setTileScale:function(t,e){return void 0===t&&(t=this.tileScaleX),void 0===e&&(e=t),this.tileScaleX=t,this.tileScaleY=e,this},updateTileTexture:function(){if(this.dirty&&this.renderer){var t=this.displayFrame;if(t.source.isRenderTexture||t.source.isGLTexture)return console.warn("TileSprites can only use Image or Canvas based textures"),void(this.dirty=!1);var e=this.fillContext,i=this.fillCanvas,s=this.potWidth,r=this.potHeight;this.renderer&&this.renderer.gl||(s=t.cutWidth,r=t.cutHeight),e.clearRect(0,0,s,r),i.width=s,i.height=r,e.drawImage(t.source.image,t.cutX,t.cutY,t.cutWidth,t.cutHeight,0,0,s,r),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(i,this.fillPattern):this.fillPattern=e.createPattern(i,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var t=this.canvas;if(t.width===this.width&&t.height===this.height||(t.width=this.width,t.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl)this.dirty=!1;else{var e=this.context;this.scene.sys.game.config.antialias||l.disable(e);var i=this._tileScale.x,s=this._tileScale.y,r=this._tilePosition.x,n=this._tilePosition.y;e.clearRect(0,0,this.width,this.height),e.save(),e.scale(i,s),e.translate(-r,-n),e.fillStyle=this.fillPattern,e.fillRect(r,n,this.width/i,this.height/s),e.restore(),this.dirty=!1}},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),s.remove(this.canvas),s.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null,this.texture.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(t){this._tilePosition.x=t,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(t){this._tilePosition.y=t,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(t){this._tileScale.x=t,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(t){this._tileScale.y=t,this.dirty=!0}}});t.exports=c},1036:t=>{t.exports=function(t,e,i,s){e.updateCanvas(),i.addToRenderList(e),t.batchSprite(e,e.frame,i,s)}},24249:(t,e,i)=>{var s=i(90062),r=i(78757),n=i(7973),a=i(99191);r.register("tileSprite",(function(t,e){void 0===t&&(t={});var i=n(t,"x",0),r=n(t,"y",0),h=n(t,"width",512),o=n(t,"height",512),l=n(t,"key",""),d=n(t,"frame",""),u=new a(this.scene,i,r,h,o,l,d);return void 0!==e&&(t.add=e),s(this.scene,u,t),u}))},8175:(t,e,i)=>{var s=i(99191);i(66642).register("tileSprite",(function(t,e,i,r,n,a){return this.displayList.add(new s(this.scene,t,e,i,r,n,a))}))},27579:(t,e,i)=>{var s=i(45733),r=i(45733);s=i(51040),r=i(1036),t.exports={renderWebGL:s,renderCanvas:r}},51040:(t,e,i)=>{var s=i(64564);t.exports=function(t,e,i,r){e.updateCanvas();var n=e.width,a=e.height;if(0!==n&&0!==a){i.addToRenderList(e),t.pipelines.preBatch(e);var h=s.getTintAppendFloatAlpha,o=t.pipelines.set(e.pipeline,e),l=o.setTexture2D(e.fillPattern,e);o.batchTexture(e,e.fillPattern,e.displayFrame.width*e.tileScaleX,e.displayFrame.height*e.tileScaleY,e.x,e.y,n,a,e.scaleX,e.scaleY,e.rotation,e.flipX,e.flipY,e.scrollFactorX,e.scrollFactorY,e.originX*n,e.originY*a,0,0,n,a,h(e.tintTopLeft,i.alpha*e._alphaTL),h(e.tintTopRight,i.alpha*e._alphaTR),h(e.tintBottomLeft,i.alpha*e._alphaBL),h(e.tintBottomRight,i.alpha*e._alphaBR),e.tintFill,e.tilePositionX%e.displayFrame.width/e.displayFrame.width,e.tilePositionY%e.displayFrame.height/e.displayFrame.height,i,r,!1,l),t.pipelines.postBatch(e)}}},50295:(t,e,i)=>{var s=i(69186),r=i(2543),n=i(19506),a=i(99370),h=i(24496),o=i(65210),l=i(38236),d=i(21577),u=i(61004),c=i(97189),p=i(80925),f=new s({Extends:l,Mixins:[n.Alpha,n.BlendMode,n.Depth,n.Flip,n.GetBounds,n.Mask,n.Origin,n.Pipeline,n.ScrollFactor,n.Size,n.TextureCrop,n.Tint,n.Transform,n.Visible,c],initialize:function(t,e,i,s){l.call(this,t,"Video"),this.video=null,this.videoTexture=null,this.videoTextureSource=null,this.snapshotTexture=null,this.flipY=!1,this._key=u(),this.touchLocked=!0,this.playWhenUnlocked=!1,this.retryLimit=20,this.retry=0,this.retryInterval=500,this._retryID=null,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={play:this.playHandler.bind(this),error:this.loadErrorHandler.bind(this),end:this.completeHandler.bind(this),time:this.timeUpdateHandler.bind(this),seeking:this.seekingHandler.bind(this),seeked:this.seekedHandler.bind(this)},this._crop=this.resetCropObject(),this.markers={},this._markerIn=-1,this._markerOut=p.MAX_SAFE_INTEGER,this._lastUpdate=0,this._cacheKey="",this._isSeeking=!1,this.removeVideoElementOnDestroy=!1,this.setPosition(e,i),this.initPipeline(),s&&this.changeSource(s,!1);var r=t.sys.game.events;r.on(h.PAUSE,this.globalPause,this),r.on(h.RESUME,this.globalResume,this);var n=t.sys.sound;n&&n.on(d.GLOBAL_MUTE,this.globalMute,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},play:function(t,e,i){if(this.touchLocked&&this.playWhenUnlocked||this.isPlaying())return this;var s=this.video;if(!s)return console.warn("Video not loaded"),this;void 0===t&&(t=s.loop);var r=this.scene.sys.sound;r&&r.mute&&this.setMute(!0),isNaN(e)||(this._markerIn=e),!isNaN(i)&&i>e&&(this._markerOut=i),s.loop=t;var n=this._callbacks,a=s.play();return void 0!==a?a.then(this.playPromiseSuccessHandler.bind(this)).catch(this.playPromiseErrorHandler.bind(this)):(s.addEventListener("playing",n.play,!0),s.readyState<2&&(this.retry=this.retryLimit,this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval))),s.addEventListener("ended",n.end,!0),s.addEventListener("timeupdate",n.time,!0),s.addEventListener("seeking",n.seeking,!0),s.addEventListener("seeked",n.seeked,!0),this},changeSource:function(t,e,i,s,r){void 0===e&&(e=!0),this.video&&this.stop();var n=this.scene.sys.cache.video.get(t);return n?(this.video=n,this._cacheKey=t,this._codePaused=n.paused,this._codeMuted=n.muted,this.videoTexture?(this.scene.sys.textures.remove(this._key),this.videoTexture=this.scene.sys.textures.create(this._key,n,n.videoWidth,n.videoHeight),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,n.videoWidth,n.videoHeight),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(a.VIDEO_CREATED,this,n.videoWidth,n.videoHeight)):this.updateTexture(),n.currentTime=0,this._lastUpdate=0,e&&this.play(i,s,r)):this.video=null,this},addMarker:function(t,e,i){return!isNaN(e)&&e>=0&&!isNaN(i)&&(this.markers[t]=[e,i]),this},playMarker:function(t,e){var i=this.markers[t];return i&&this.play(e,i[0],i[1]),this},removeMarker:function(t){return delete this.markers[t],this},snapshot:function(t,e){return void 0===t&&(t=this.width),void 0===e&&(e=this.height),this.snapshotArea(0,0,this.width,this.height,t,e)},snapshotArea:function(t,e,i,s,r,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=this.width),void 0===s&&(s=this.height),void 0===r&&(r=i),void 0===n&&(n=s);var a=this.video,h=this.snapshotTexture;return h?(h.setSize(r,n),a&&h.context.drawImage(a,t,e,i,s,0,0,r,n)):(h=this.scene.sys.textures.createCanvas(u(),r,n),this.snapshotTexture=h,a&&h.context.drawImage(a,t,e,i,s,0,0,r,n)),h.update()},saveSnapshotTexture:function(t){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,t):this.snapshotTexture=this.scene.sys.textures.createCanvas(t,this.width,this.height),this.snapshotTexture},loadURL:function(t,e,i){void 0===e&&(e="loadeddata"),void 0===i&&(i=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var s=document.createElement("video");return s.controls=!1,i&&(s.muted=!0,s.defaultMuted=!0,s.setAttribute("autoplay","autoplay")),s.setAttribute("playsinline","playsinline"),s.setAttribute("preload","auto"),s.addEventListener("error",this._callbacks.error,!0),s.src=t,s.load(),this.video=s,this},loadMediaStream:function(t,e,i){void 0===e&&(e="loadeddata"),void 0===i&&(i=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var s=document.createElement("video");s.controls=!1,i&&(s.muted=!0,s.defaultMuted=!0,s.setAttribute("autoplay","autoplay")),s.setAttribute("playsinline","playsinline"),s.setAttribute("preload","auto"),s.addEventListener("error",this._callbacks.error,!0);try{s.srcObject=t}catch(e){s.src=window.URL.createObjectURL(t)}return s.load(),this.video=s,this},playPromiseSuccessHandler:function(){this._codePaused=!1,this.touchLocked=!1,this.emit(a.VIDEO_PLAY,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn)},playPromiseErrorHandler:function(t){this.scene.sys.input.once(o.POINTER_DOWN,this.unlockHandler,this),this.touchLocked=!0,this.playWhenUnlocked=!0,this.emit(a.VIDEO_ERROR,this,t)},playHandler:function(){this._codePaused=!1,this.touchLocked=!1,this.emit(a.VIDEO_PLAY,this),this.video.removeEventListener("playing",this._callbacks.play,!0)},loadErrorHandler:function(t){this.stop(),this.emit(a.VIDEO_ERROR,this,t)},unlockHandler:function(){this.touchLocked=!1,this.playWhenUnlocked=!1,this.emit(a.VIDEO_UNLOCKED,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn),this.video.play(),this.emit(a.VIDEO_PLAY,this)},completeHandler:function(){this.emit(a.VIDEO_COMPLETE,this)},timeUpdateHandler:function(){this.video&&this.video.currentTime<this._lastUpdate&&(this.emit(a.VIDEO_LOOP,this),this._lastUpdate=0)},preUpdate:function(){var t=this.video;if(t){var e=t.currentTime;e!==this._lastUpdate&&(this._lastUpdate=e,this.updateTexture(),e>=this._markerOut&&(t.loop?(t.currentTime=this._markerIn,this.updateTexture(),this._lastUpdate=e,this.emit(a.VIDEO_LOOP,this)):(this.emit(a.VIDEO_COMPLETE,this),this.stop())))}},checkVideoProgress:function(){this.video.readyState>=2?this.updateTexture():(this.retry--,this.retry>0?this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval):this.emit(a.VIDEO_TIMEOUT,this))},updateTexture:function(){var t=this.video,e=t.videoWidth,i=t.videoHeight;if(this.videoTexture){var s=this.videoTextureSource;s.source!==t&&(s.source=t,s.width=e,s.height=i),s.update()}else this.videoTexture=this.scene.sys.textures.create(this._key,t,e,i),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,e,i),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(a.VIDEO_CREATED,this,e,i)},getVideoKey:function(){return this._cacheKey},seekTo:function(t){var e=this.video;if(e){var i=e.duration;if(i!==1/0&&!isNaN(i)){var s=i*t;this.setCurrentTime(s)}}return this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(t){var e=this.video;if(e){if("string"==typeof t){var i=t[0],s=parseFloat(t.substr(1));"+"===i?t=e.currentTime+s:"-"===i&&(t=e.currentTime-s)}e.currentTime=t,this._lastUpdate=t}return this},isSeeking:function(){return this._isSeeking},seekingHandler:function(){this._isSeeking=!0,this.emit(a.VIDEO_SEEKING,this)},seekedHandler:function(){this._isSeeking=!1,this.emit(a.VIDEO_SEEKED,this),this.video&&this.updateTexture()},getProgress:function(){var t=this.video;if(t){var e=t.currentTime,i=t.duration;if(i!==1/0&&!isNaN(i))return e/i}return 0},getDuration:function(){return this.video?this.video.duration:0},setMute:function(t){void 0===t&&(t=!0),this._codeMuted=t;var e=this.video;return e&&(e.muted=!!this._systemMuted||t),this},isMuted:function(){return this._codeMuted},globalMute:function(t,e){this._systemMuted=e;var i=this.video;i&&(i.muted=!!this._codeMuted||e)},globalPause:function(){this._systemPaused=!0,this.video&&this.video.pause()},globalResume:function(){this._systemPaused=!1,this.video&&!this._codePaused&&this.video.play()},setPaused:function(t){void 0===t&&(t=!0);var e=this.video;return this._codePaused=t,e&&(t?e.paused||e.pause():t||e.paused&&!this._systemPaused&&e.play()),this},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(t){return void 0===t&&(t=1),this.video&&(this.video.volume=r(t,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(t){return this.video&&(this.video.playbackRate=t),this},getLoop:function(){return!!this.video&&this.video.loop},setLoop:function(t){return void 0===t&&(t=!0),this.video&&(this.video.loop=t),this},isPlaying:function(){return!!this.video&&!(this.video.paused||this.video.ended)},isPaused:function(){return this.video&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(t,e){return void 0===e&&(e=!1),this.videoTexture&&this.scene.sys.textures.renameTexture(this._key,t),this._key=t,this.flipY=e,this.videoTextureSource&&this.videoTextureSource.setFlipY(e),this.videoTexture},stop:function(){var t=this.video;if(t){var e=this._callbacks;for(var i in e)t.removeEventListener(i,e[i],!0);t.pause()}return this._retryID&&window.clearTimeout(this._retryID),this.emit(a.VIDEO_STOP,this),this},removeVideoElement:function(){var t=this.video;if(t){for(t.parentNode&&t.parentNode.removeChild(t);t.hasChildNodes();)t.removeChild(t.firstChild);t.removeAttribute("autoplay"),t.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(),this.removeVideoElementOnDestroy&&this.removeVideoElement();var t=this.scene.sys.game.events;t.off(h.PAUSE,this.globalPause,this),t.off(h.RESUME,this.globalResume,this);var e=this.scene.sys.sound;e&&e.off(d.GLOBAL_MUTE,this.globalMute,this),this._retryID&&window.clearTimeout(this._retryID)}});t.exports=f},8336:t=>{t.exports=function(t,e,i,s){e.videoTexture&&(i.addToRenderList(e),t.batchSprite(e,e.frame,i,s))}},22775:(t,e,i)=>{var s=i(90062),r=i(78757),n=i(7973),a=i(50295);r.register("video",(function(t,e){void 0===t&&(t={});var i=n(t,"key",null),r=new a(this.scene,0,0,i);return void 0!==e&&(t.add=e),s(this.scene,r,t),t.add||this.updateList.add(r),r}))},36235:(t,e,i)=>{var s=i(50295);i(66642).register("video",(function(t,e,i){return this.displayList.add(new s(this.scene,t,e,i))}))},97189:(t,e,i)=>{var s=i(45733),r=i(45733);s=i(8315),r=i(8336),t.exports={renderWebGL:s,renderCanvas:r}},8315:t=>{t.exports=function(t,e,i,s){e.videoTexture&&(i.addToRenderList(e),e.pipeline.batchSprite(e,i,s))}},42309:(t,e,i)=>{var s=i(78757),r=i(7973),n=i(64043);s.register("zone",(function(t){var e=r(t,"x",0),i=r(t,"y",0),s=r(t,"width",1),a=r(t,"height",s);return new n(this.scene,e,i,s,a)}))},59037:(t,e,i)=>{var s=i(64043);i(66642).register("zone",(function(t,e,i,r){return this.displayList.add(new s(this.scene,t,e,i,r))}))}}]);