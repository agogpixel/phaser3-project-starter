/*! For license information please see vendors~phaser~loader.cfa8e74cfff86f74f77b.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{1409:function(t,e,i){var s=i(24),a=i(20),n={Events:i(100),FileTypes:i(1410),File:i(27),FileTypesManager:i(11),GetURL:i(168),LoaderPlugin:i(1436),MergeXHRSettings:i(261),MultiFile:i(57),XHRLoader:i(546),XHRSettings:i(169)};n=a(!1,n,s),t.exports=n},1410:function(t,e,i){t.exports={AnimationJSONFile:i(1411),AsepriteFile:i(1412),AtlasJSONFile:i(1413),AtlasXMLFile:i(1414),AudioFile:i(547),AudioSpriteFile:i(1415),BinaryFile:i(1416),BitmapFontFile:i(1417),CSSFile:i(1418),GLSLFile:i(1419),HTML5AudioFile:i(548),HTMLFile:i(1420),HTMLTextureFile:i(1421),ImageFile:i(78),JSONFile:i(69),MultiAtlasFile:i(1422),MultiScriptFile:i(1423),OBJFile:i(1424),PackFile:i(1425),PluginFile:i(1426),SceneFile:i(1427),ScenePluginFile:i(1428),ScriptFile:i(549),SpriteSheetFile:i(1429),SVGFile:i(1430),TextFile:i(263),TilemapCSVFile:i(1431),TilemapImpactFile:i(1432),TilemapJSONFile:i(1433),UnityAtlasFile:i(1434),VideoFile:i(1435),XMLFile:i(262)}},1411:function(t,e,i){var s=i(3),a=i(11),n=i(69),r=i(100),o=new s({Extends:n,initialize:function(t,e,i,s,a){n.call(this,t,e,i,s,a),this.type="animationJSON"},onProcess:function(){this.loader.once(r.POST_PROCESS,this.onLoadComplete,this),n.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});a.register("animation",(function(t,e,i,s){if(Array.isArray(t))for(var a=0;a<t.length;a++)this.addFile(new o(this,t[a]));else this.addFile(new o(this,t,e,s,i));return this})),t.exports=o},1412:function(t,e,i){var s=i(3),a=i(11),n=i(5),r=i(78),o=i(10),h=i(69),l=i(57),d=new s({Extends:l,initialize:function(t,e,i,s,a,d){var c,u;if(o(e)){var f=e;e=n(f,"key"),c=new r(t,{key:e,url:n(f,"textureURL"),extension:n(f,"textureExtension","png"),normalMap:n(f,"normalMap"),xhrSettings:n(f,"textureXhrSettings")}),u=new h(t,{key:e,url:n(f,"atlasURL"),extension:n(f,"atlasExtension","json"),xhrSettings:n(f,"atlasXhrSettings")})}else c=new r(t,e,i,a),u=new h(t,e,s,d);c.linkFile?l.call(this,t,"atlasjson",e,[c,u,c.linkFile]):l.call(this,t,"atlasjson",e,[c,u])},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],e=this.files[1],i=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(t.key,t.data,e.data,i),e.addToCache(),this.complete=!0}}});a.register("aseprite",(function(t,e,i,s,a){var n;if(Array.isArray(t))for(var r=0;r<t.length;r++)n=new d(this,t[r]),this.addFile(n.files);else n=new d(this,t,e,i,s,a),this.addFile(n.files);return this})),t.exports=d},1413:function(t,e,i){var s=i(3),a=i(11),n=i(5),r=i(78),o=i(10),h=i(69),l=i(57),d=new s({Extends:l,initialize:function(t,e,i,s,a,d){var c,u;if(o(e)){var f=e;e=n(f,"key"),c=new r(t,{key:e,url:n(f,"textureURL"),extension:n(f,"textureExtension","png"),normalMap:n(f,"normalMap"),xhrSettings:n(f,"textureXhrSettings")}),u=new h(t,{key:e,url:n(f,"atlasURL"),extension:n(f,"atlasExtension","json"),xhrSettings:n(f,"atlasXhrSettings")})}else c=new r(t,e,i,a),u=new h(t,e,s,d);c.linkFile?l.call(this,t,"atlasjson",e,[c,u,c.linkFile]):l.call(this,t,"atlasjson",e,[c,u])},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],e=this.files[1],i=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(t.key,t.data,e.data,i),e.pendingDestroy(),this.complete=!0}}});a.register("atlas",(function(t,e,i,s,a){var n;if(Array.isArray(t))for(var r=0;r<t.length;r++)n=new d(this,t[r]),this.addFile(n.files);else n=new d(this,t,e,i,s,a),this.addFile(n.files);return this})),t.exports=d},1414:function(t,e,i){var s=i(3),a=i(11),n=i(5),r=i(78),o=i(10),h=i(57),l=i(262),d=new s({Extends:h,initialize:function(t,e,i,s,a,d){var c,u;if(o(e)){var f=e;e=n(f,"key"),c=new r(t,{key:e,url:n(f,"textureURL"),extension:n(f,"textureExtension","png"),normalMap:n(f,"normalMap"),xhrSettings:n(f,"textureXhrSettings")}),u=new l(t,{key:e,url:n(f,"atlasURL"),extension:n(f,"atlasExtension","xml"),xhrSettings:n(f,"atlasXhrSettings")})}else c=new r(t,e,i,a),u=new l(t,e,s,d);c.linkFile?h.call(this,t,"atlasxml",e,[c,u,c.linkFile]):h.call(this,t,"atlasxml",e,[c,u])},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],e=this.files[1],i=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(t.key,t.data,e.data,i),e.pendingDestroy(),this.complete=!0}}});a.register("atlasXML",(function(t,e,i,s,a){var n;if(Array.isArray(t))for(var r=0;r<t.length;r++)n=new d(this,t[r]),this.addFile(n.files);else n=new d(this,t,e,i,s,a),this.addFile(n.files);return this})),t.exports=d},1415:function(t,e,i){var s=i(547),a=i(3),n=i(11),r=i(5),o=i(10),h=i(69),l=i(57),d=new a({Extends:l,initialize:function(t,e,i,a,n,d,c){if(o(e)){var u=e;e=r(u,"key"),i=r(u,"jsonURL"),a=r(u,"audioURL"),n=r(u,"audioConfig"),d=r(u,"audioXhrSettings"),c=r(u,"jsonXhrSettings")}var f;if(a){var p=s.create(t,e,a,n,d);p&&(f=new h(t,e,i,c),l.call(this,t,"audiosprite",e,[p,f]),this.config.resourceLoad=!1)}else f=new h(t,e,i,c),l.call(this,t,"audiosprite",e,[f]),this.config.resourceLoad=!0,this.config.audioConfig=n,this.config.audioXhrSettings=d},onFileComplete:function(t){if(-1!==this.files.indexOf(t)&&(this.pending--,this.config.resourceLoad&&"json"===t.type&&t.data.hasOwnProperty("resources"))){var e=t.data.resources,i=r(this.config,"audioConfig"),a=r(this.config,"audioXhrSettings"),n=s.create(this.loader,t.key,e,i,a);n&&(this.addToMultiFile(n),this.loader.addFile(n))}},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],e=this.files[1];t.addToCache(),e.addToCache(),this.complete=!0}}});n.register("audioSprite",(function(t,e,i,s,a,n){var r,o=this.systems.game,h=o.config.audio,l=o.device.audio;if(h&&h.noAudio||!l.webAudio&&!l.audioData)return this;if(Array.isArray(t))for(var c=0;c<t.length;c++)(r=new d(this,t[c])).files&&this.addFile(r.files);else(r=new d(this,t,e,i,s,a,n)).files&&this.addFile(r.files);return this}))},1416:function(t,e,i){var s=i(3),a=i(24),n=i(27),r=i(11),o=i(5),h=i(10),l=new s({Extends:n,initialize:function(t,e,i,s,a){var r="bin";if(h(e)){var l=e;e=o(l,"key"),i=o(l,"url"),s=o(l,"xhrSettings"),r=o(l,"extension",r),a=o(l,"dataType",a)}var d={type:"binary",cache:t.cacheManager.binary,extension:r,responseType:"arraybuffer",key:e,url:i,xhrSettings:s,config:{dataType:a}};n.call(this,t,d)},onProcess:function(){this.state=a.FILE_PROCESSING;var t=this.config.dataType;this.data=t?new t(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});r.register("binary",(function(t,e,i,s){if(Array.isArray(t))for(var a=0;a<t.length;a++)this.addFile(new l(this,t[a]));else this.addFile(new l(this,t,e,s,i));return this})),t.exports=l},1417:function(t,e,i){var s=i(3),a=i(11),n=i(5),r=i(78),o=i(10),h=i(57),l=i(164),d=i(262),c=new s({Extends:h,initialize:function(t,e,i,s,a,l){var c,u;if(o(e)){var f=e;e=n(f,"key"),c=new r(t,{key:e,url:n(f,"textureURL"),extension:n(f,"textureExtension","png"),normalMap:n(f,"normalMap"),xhrSettings:n(f,"textureXhrSettings")}),u=new d(t,{key:e,url:n(f,"fontDataURL"),extension:n(f,"fontDataExtension","xml"),xhrSettings:n(f,"fontDataXhrSettings")})}else c=new r(t,e,i,a),u=new d(t,e,s,l);c.linkFile?h.call(this,t,"bitmapfont",e,[c,u,c.linkFile]):h.call(this,t,"bitmapfont",e,[c,u])},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],e=this.files[1];t.addToCache(),e.pendingDestroy();var i=t.cache.get(t.key),s=l(e.data,t.cache.getFrame(t.key),0,0,i);this.loader.cacheManager.bitmapFont.add(t.key,{data:s,texture:t.key,frame:null}),this.complete=!0}}});a.register("bitmapFont",(function(t,e,i,s,a){var n;if(Array.isArray(t))for(var r=0;r<t.length;r++)n=new c(this,t[r]),this.addFile(n.files);else n=new c(this,t,e,i,s,a),this.addFile(n.files);return this})),t.exports=c},1418:function(t,e,i){var s=i(3),a=i(24),n=i(27),r=i(11),o=i(5),h=i(10),l=new s({Extends:n,initialize:function(t,e,i,s){var a="css";if(h(e)){var r=e;e=o(r,"key"),i=o(r,"url"),s=o(r,"xhrSettings"),a=o(r,"extension",a)}var l={type:"script",cache:!1,extension:a,responseType:"text",key:e,url:i,xhrSettings:s};n.call(this,t,l)},onProcess:function(){this.state=a.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});r.register("css",(function(t,e,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)this.addFile(new l(this,t[s]));else this.addFile(new l(this,t,e,i));return this})),t.exports=l},1419:function(t,e,i){var s=i(3),a=i(24),n=i(27),r=i(11),o=i(5),h=i(10),l=i(415),d=new s({Extends:n,initialize:function(t,e,i,s,a){var r="glsl";if(h(e)){var l=e;e=o(l,"key"),i=o(l,"url"),s=o(l,"shaderType","fragment"),a=o(l,"xhrSettings"),r=o(l,"extension",r)}else void 0===s&&(s="fragment");var d={type:"glsl",cache:t.cacheManager.shader,extension:r,responseType:"text",key:e,url:i,config:{shaderType:s},xhrSettings:a};n.call(this,t,d)},onProcess:function(){this.state=a.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var t=this.data.split("\n"),e=this.extractBlock(t,0);if(e)for(;e;){var i=this.getShaderName(e.header),s=this.getShaderType(e.header),a=this.getShaderUniforms(e.header),n=e.shader;if(this.cache.has(i)){var r=this.cache.get(i);"fragment"===s?r.fragmentSrc=n:r.vertexSrc=n,r.uniforms||(r.uniforms=a)}else"fragment"===s?this.cache.add(i,new l(i,n,"",a)):this.cache.add(i,new l(i,"",n,a));e=this.extractBlock(t,e.offset)}else"fragment"===this.config.shaderType?this.cache.add(this.key,new l(this.key,this.data)):this.cache.add(this.key,new l(this.key,"",this.data));this.pendingDestroy()},getShaderName:function(t){for(var e=0;e<t.length;e++){var i=t[e].trim();if("name:"===i.substring(0,5))return i.substring(5).trim()}return this.key},getShaderType:function(t){for(var e=0;e<t.length;e++){var i=t[e].trim();if("type:"===i.substring(0,5))return i.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(t){for(var e={},i=0;i<t.length;i++){var s=t[i].trim();if("uniform."===s.substring(0,8)){var a=s.indexOf(":");if(a){var n=s.substring(8,a);try{e[n]=JSON.parse(s.substring(a+1))}catch(t){console.warn("Invalid uniform JSON: "+n)}}}}return e},extractBlock:function(t,e){for(var i=-1,s=-1,a=-1,n=!1,r=!1,o=[],h=[],l=e;l<t.length;l++){var d=t[l].trim();if("---"===d)if(-1===i)i=l,n=!0;else{if(!n){r=!1;break}s=l,n=!1,r=!0}else n?o.push(d):r&&(h.push(d),a=l)}return n||-1===s?null:{header:o,shader:h.join("\n"),offset:a}}});r.register("glsl",(function(t,e,i,s){if(Array.isArray(t))for(var a=0;a<t.length;a++)this.addFile(new d(this,t[a]));else this.addFile(new d(this,t,e,i,s));return this})),t.exports=d},1420:function(t,e,i){var s=i(3),a=i(24),n=i(27),r=i(11),o=i(5),h=i(10),l=new s({Extends:n,initialize:function(t,e,i,s){var a="html";if(h(e)){var r=e;e=o(r,"key"),i=o(r,"url"),s=o(r,"xhrSettings"),a=o(r,"extension",a)}var l={type:"text",cache:t.cacheManager.html,extension:a,responseType:"text",key:e,url:i,xhrSettings:s};n.call(this,t,l)},onProcess:function(){this.state=a.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});r.register("html",(function(t,e,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)this.addFile(new l(this,t[s]));else this.addFile(new l(this,t,e,i));return this})),t.exports=l},1421:function(t,e,i){var s=i(3),a=i(24),n=i(27),r=i(11),o=i(5),h=i(10),l=new s({Extends:n,initialize:function(t,e,i,s,a,r){void 0===s&&(s=512),void 0===a&&(a=512);var l="html";if(h(e)){var d=e;e=o(d,"key"),i=o(d,"url"),r=o(d,"xhrSettings"),l=o(d,"extension",l),s=o(d,"width",s),a=o(d,"height",a)}var c={type:"html",cache:t.textureManager,extension:l,responseType:"text",key:e,url:i,xhrSettings:r,config:{width:s,height:a}};n.call(this,t,c)},onProcess:function(){this.state=a.FILE_PROCESSING;var t=this.config.width,e=this.config.height,i=[];i.push('<svg width="'+t+'px" height="'+e+'px" viewBox="0 0 '+t+" "+e+'" xmlns="http://www.w3.org/2000/svg">'),i.push('<foreignObject width="100%" height="100%">'),i.push('<body xmlns="http://www.w3.org/1999/xhtml">'),i.push(this.xhrLoader.responseText),i.push("</body>"),i.push("</foreignObject>"),i.push("</svg>");var s=[i.join("\n")],r=this;try{var o=new window.Blob(s,{type:"image/svg+xml;charset=utf-8"})}catch(t){return r.state=a.FILE_ERRORED,void r.onProcessComplete()}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){n.revokeObjectURL(r.data),r.onProcessComplete()},this.data.onerror=function(){n.revokeObjectURL(r.data),r.onProcessError()},n.createObjectURL(this.data,o,"image/svg+xml")},addToCache:function(){var t=this.cache.addImage(this.key,this.data);this.pendingDestroy(t)}});r.register("htmlTexture",(function(t,e,i,s,a){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addFile(new l(this,t[n]));else this.addFile(new l(this,t,e,i,s,a));return this})),t.exports=l},1422:function(t,e,i){var s=i(3),a=i(11),n=i(5),r=i(78),o=i(10),h=i(69),l=i(57),d=new s({Extends:l,initialize:function(t,e,i,s,a,r,d){if(o(e)){var c=e;e=n(c,"key"),i=n(c,"url",!1)?n(c,"url"):n(c,"atlasURL"),r=n(c,"xhrSettings"),s=n(c,"path"),a=n(c,"baseURL"),d=n(c,"textureXhrSettings")}var u=new h(t,e,i,r);l.call(this,t,"multiatlas",e,[u]),this.config.path=s,this.config.baseURL=a,this.config.textureXhrSettings=d},onFileComplete:function(t){if(-1!==this.files.indexOf(t)&&(this.pending--,"json"===t.type&&t.data.hasOwnProperty("textures"))){var e=t.data.textures,i=this.config,s=this.loader,a=s.baseURL,o=s.path,h=s.prefix,l=n(i,"baseURL",this.baseURL),d=n(i,"path",this.path),c=n(i,"prefix",this.prefix),u=n(i,"textureXhrSettings");s.setBaseURL(l),s.setPath(d),s.setPrefix(c);for(var f=0;f<e.length;f++){var p=e[f].image,g="MA"+this.multiKeyIndex+"_"+p,y=new r(s,g,p,u);if(this.addToMultiFile(y),s.addFile(y),e[f].normalMap){var x=new r(s,g,e[f].normalMap,u);x.type="normalMap",y.setLink(x),this.addToMultiFile(x),s.addFile(x)}}s.setBaseURL(a),s.setPath(o),s.setPrefix(h)}},addToCache:function(){if(this.isReadyToProcess()){for(var t=this.files[0],e=[],i=[],s=[],a=1;a<this.files.length;a++){var n=this.files[a];if("normalMap"!==n.type)for(var r=n.key.indexOf("_"),o=n.key.substr(r+1),h=n.data,l=0;l<t.data.textures.length;l++){var d=t.data.textures[l];if(d.image===o){i.push(h),e.push(d),n.linkFile&&s.push(n.linkFile.data);break}}}for(0===s.length&&(s=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,i,e,s),this.complete=!0,a=0;a<this.files.length;a++)this.files[a].pendingDestroy()}}});a.register("multiatlas",(function(t,e,i,s,a){var n;if(Array.isArray(t))for(var r=0;r<t.length;r++)n=new d(this,t[r]),this.addFile(n.files);else n=new d(this,t,e,i,s,a),this.addFile(n.files);return this})),t.exports=d},1423:function(t,e,i){var s=i(3),a=i(11),n=i(5),r=i(10),o=i(57),h=i(549),l=new s({Extends:o,initialize:function(t,e,i,s){var a="js",l=[];if(r(e)){var d=e;e=n(d,"key"),i=n(d,"url"),s=n(d,"xhrSettings"),a=n(d,"extension",a)}Array.isArray(i)||(i=[i]);for(var c=0;c<i.length;c++){var u=new h(t,{key:e+"_"+c.toString(),url:i[c],extension:a,xhrSettings:s});u.onProcess=function(){this.onProcessComplete()},l.push(u)}o.call(this,t,"scripts",e,l)},addToCache:function(){if(this.isReadyToProcess()){for(var t=0;t<this.files.length;t++){var e=this.files[t];e.data=document.createElement("script"),e.data.language="javascript",e.data.type="text/javascript",e.data.defer=!1,e.data.text=e.xhrLoader.responseText,document.head.appendChild(e.data)}this.complete=!0}}});a.register("scripts",(function(t,e,i){var s;if(Array.isArray(t))for(var a=0;a<t.length;a++)s=new l(this,t[a]),this.addFile(s.files);else s=new l(this,t,e,i),this.addFile(s.files);return this})),t.exports=l},1424:function(t,e,i){var s=i(3),a=i(11),n=i(5),r=i(10),o=i(57),h=i(474),l=i(475),d=i(263),c=new s({Extends:o,initialize:function(t,e,i,s,a,h){var l,c,u=t.cacheManager.obj;if(r(e)){var f=e;e=n(f,"key"),l=new d(t,{key:e,type:"obj",cache:u,url:n(f,"url"),extension:n(f,"extension","obj"),xhrSettings:n(f,"xhrSettings"),config:{flipUV:n(f,"flipUV",a)}}),(s=n(f,"matURL"))&&(c=new d(t,{key:e,type:"mat",cache:u,url:s,extension:n(f,"matExtension","mat"),xhrSettings:n(f,"xhrSettings")}))}else l=new d(t,{key:e,url:i,type:"obj",cache:u,extension:"obj",xhrSettings:h,config:{flipUV:a}}),s&&(c=new d(t,{key:e,url:s,type:"mat",cache:u,extension:"mat",xhrSettings:h}));o.call(this,t,"obj",e,[l,c])},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],e=this.files[1],i=h(t.data,t.config.flipUV);e&&(i.materials=l(e.data)),t.cache.add(t.key,i),this.complete=!0}}});a.register("obj",(function(t,e,i,s,a){var n;if(Array.isArray(t))for(var r=0;r<t.length;r++)n=new c(this,t[r]),this.addFile(n.files);else n=new c(this,t,e,i,s,a),this.addFile(n.files);return this})),t.exports=c},1425:function(t,e,i){var s=i(3),a=i(24),n=i(11),r=i(69),o=new s({Extends:r,initialize:function(t,e,i,s,a){r.call(this,t,e,i,s,a),this.type="packfile"},onProcess:function(){this.state!==a.FILE_POPULATED&&(this.state=a.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.loader.addPack(this.data,this.config),this.onProcessComplete()}});n.register("pack",(function(t,e,i,s){if(Array.isArray(t))for(var a=0;a<t.length;a++)this.addFile(new o(this,t[a]));else this.addFile(new o(this,t,e,s,i));return this})),t.exports=o},1426:function(t,e,i){var s=i(3),a=i(24),n=i(27),r=i(11),o=i(5),h=i(10),l=new s({Extends:n,initialize:function(t,e,i,s,r,l){var d="js";if(h(e)){var c=e;e=o(c,"key"),i=o(c,"url"),l=o(c,"xhrSettings"),d=o(c,"extension",d),s=o(c,"start"),r=o(c,"mapping")}var u={type:"plugin",cache:!1,extension:d,responseType:"text",key:e,url:i,xhrSettings:l,config:{start:s,mapping:r}};n.call(this,t,u),"function"==typeof i&&(this.data=i,this.state=a.FILE_POPULATED)},onProcess:function(){var t=this.loader.systems.plugins,e=this.config,i=o(e,"start",!1),s=o(e,"mapping",null);if(this.state===a.FILE_POPULATED)t.install(this.key,this.data,i,s);else{this.state=a.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var n=t.install(this.key,window[this.key],i,s);(i||s)&&(this.loader.systems[s]=n,this.loader.scene[s]=n)}this.onProcessComplete()}});r.register("plugin",(function(t,e,i,s,a){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addFile(new l(this,t[n]));else this.addFile(new l(this,t,e,i,s,a));return this})),t.exports=l},1427:function(t,e,i){var s=i(3),a=i(24),n=i(27),r=i(11),o=i(5),h=i(10),l=new s({Extends:n,initialize:function(t,e,i,s){var a="js";if(h(e)){var r=e;e=o(r,"key"),i=o(r,"url"),s=o(r,"xhrSettings"),a=o(r,"extension",a)}var l={type:"text",extension:a,responseType:"text",key:e,url:i,xhrSettings:s};n.call(this,t,l)},onProcess:function(){this.state=a.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var t=this.data.concat("(function(){\nreturn new "+this.key+"();\n}).call(this);"),e=eval;this.loader.sceneManager.add(this.key,e(t)),this.complete=!0}});r.register("sceneFile",(function(t,e,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)this.addFile(new l(this,t[s]));else this.addFile(new l(this,t,e,i));return this})),t.exports=l},1428:function(t,e,i){var s=i(3),a=i(24),n=i(27),r=i(11),o=i(5),h=i(10),l=new s({Extends:n,initialize:function(t,e,i,s,r,l){var d="js";if(h(e)){var c=e;e=o(c,"key"),i=o(c,"url"),l=o(c,"xhrSettings"),d=o(c,"extension",d),s=o(c,"systemKey"),r=o(c,"sceneKey")}var u={type:"scenePlugin",cache:!1,extension:d,responseType:"text",key:e,url:i,xhrSettings:l,config:{systemKey:s,sceneKey:r}};n.call(this,t,u),"function"==typeof i&&(this.data=i,this.state=a.FILE_POPULATED)},onProcess:function(){var t=this.loader.systems.plugins,e=this.config,i=this.key,s=o(e,"systemKey",i),n=o(e,"sceneKey",i);this.state===a.FILE_POPULATED?t.installScenePlugin(s,this.data,n,this.loader.scene,!0):(this.state=a.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),t.installScenePlugin(s,window[this.key],n,this.loader.scene,!0)),this.onProcessComplete()}});r.register("scenePlugin",(function(t,e,i,s,a){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addFile(new l(this,t[n]));else this.addFile(new l(this,t,e,i,s,a));return this})),t.exports=l},1429:function(t,e,i){var s=i(3),a=i(11),n=i(78),r=new s({Extends:n,initialize:function(t,e,i,s,a){n.call(this,t,e,i,a,s),this.type="spritesheet"},addToCache:function(){var t=this.cache.addSpriteSheet(this.key,this.data,this.config);this.pendingDestroy(t)}});a.register("spritesheet",(function(t,e,i,s){if(Array.isArray(t))for(var a=0;a<t.length;a++)this.addFile(new r(this,t[a]));else this.addFile(new r(this,t,e,i,s));return this})),t.exports=r},1430:function(t,e,i){var s=i(3),a=i(24),n=i(27),r=i(11),o=i(5),h=i(10),l=new s({Extends:n,initialize:function(t,e,i,s,a){var r="svg";if(h(e)){var l=e;e=o(l,"key"),i=o(l,"url"),s=o(l,"svgConfig",{}),a=o(l,"xhrSettings"),r=o(l,"extension",r)}var d={type:"svg",cache:t.textureManager,extension:r,responseType:"text",key:e,url:i,xhrSettings:a,config:{width:o(s,"width"),height:o(s,"height"),scale:o(s,"scale")}};n.call(this,t,d)},onProcess:function(){this.state=a.FILE_PROCESSING;var t=this.xhrLoader.responseText,e=[t],i=this.config.width,s=this.config.height,r=this.config.scale;t:if(i&&s||r){var o=(new DOMParser).parseFromString(t,"text/xml").getElementsByTagName("svg")[0],h=o.hasAttribute("viewBox"),l=parseFloat(o.getAttribute("width")),d=parseFloat(o.getAttribute("height"));if(!h&&l&&d)o.setAttribute("viewBox","0  0 "+l+" "+d);else if(h&&!l&&!d){var c=o.getAttribute("viewBox").split(/\s+|,/);l=c[2],d=c[3]}if(r){if(!l||!d)break t;i=l*r,s=d*r}o.setAttribute("width",i.toString()+"px"),o.setAttribute("height",s.toString()+"px"),e=[(new XMLSerializer).serializeToString(o)]}try{var u=new window.Blob(e,{type:"image/svg+xml;charset=utf-8"})}catch(t){return void this.onProcessError()}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var f=this,p=!1;this.data.onload=function(){p||n.revokeObjectURL(f.data),f.onProcessComplete()},this.data.onerror=function(){p?f.onProcessError():(p=!0,n.revokeObjectURL(f.data),f.data.src="data:image/svg+xml,"+encodeURIComponent(e.join("")))},n.createObjectURL(this.data,u,"image/svg+xml")},addToCache:function(){var t=this.cache.addImage(this.key,this.data);this.pendingDestroy(t)}});r.register("svg",(function(t,e,i,s){if(Array.isArray(t))for(var a=0;a<t.length;a++)this.addFile(new l(this,t[a]));else this.addFile(new l(this,t,e,i,s));return this})),t.exports=l},1431:function(t,e,i){var s=i(3),a=i(24),n=i(27),r=i(11),o=i(5),h=i(10),l=i(40),d=new s({Extends:n,initialize:function(t,e,i,s){var a="csv";if(h(e)){var r=e;e=o(r,"key"),i=o(r,"url"),s=o(r,"xhrSettings"),a=o(r,"extension",a)}var d={type:"tilemapCSV",cache:t.cacheManager.tilemap,extension:a,responseType:"text",key:e,url:i,xhrSettings:s};n.call(this,t,d),this.tilemapFormat=l.CSV},onProcess:function(){this.state=a.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var t={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,t),this.pendingDestroy(t)}});r.register("tilemapCSV",(function(t,e,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)this.addFile(new d(this,t[s]));else this.addFile(new d(this,t,e,i));return this})),t.exports=d},1432:function(t,e,i){var s=i(3),a=i(11),n=i(69),r=i(40),o=new s({Extends:n,initialize:function(t,e,i,s){n.call(this,t,e,i,s),this.type="tilemapJSON",this.cache=t.cacheManager.tilemap},addToCache:function(){var t={format:r.WELTMEISTER,data:this.data};this.cache.add(this.key,t),this.pendingDestroy(t)}});a.register("tilemapImpact",(function(t,e,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)this.addFile(new o(this,t[s]));else this.addFile(new o(this,t,e,i));return this})),t.exports=o},1433:function(t,e,i){var s=i(3),a=i(11),n=i(69),r=i(40),o=new s({Extends:n,initialize:function(t,e,i,s){n.call(this,t,e,i,s),this.type="tilemapJSON",this.cache=t.cacheManager.tilemap},addToCache:function(){var t={format:r.TILED_JSON,data:this.data};this.cache.add(this.key,t),this.pendingDestroy(t)}});a.register("tilemapTiledJSON",(function(t,e,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)this.addFile(new o(this,t[s]));else this.addFile(new o(this,t,e,i));return this})),t.exports=o},1434:function(t,e,i){var s=i(3),a=i(11),n=i(5),r=i(78),o=i(10),h=i(57),l=i(263),d=new s({Extends:h,initialize:function(t,e,i,s,a,d){var c,u;if(o(e)){var f=e;e=n(f,"key"),c=new r(t,{key:e,url:n(f,"textureURL"),extension:n(f,"textureExtension","png"),normalMap:n(f,"normalMap"),xhrSettings:n(f,"textureXhrSettings")}),u=new l(t,{key:e,url:n(f,"atlasURL"),extension:n(f,"atlasExtension","txt"),xhrSettings:n(f,"atlasXhrSettings")})}else c=new r(t,e,i,a),u=new l(t,e,s,d);c.linkFile?h.call(this,t,"unityatlas",e,[c,u,c.linkFile]):h.call(this,t,"unityatlas",e,[c,u])},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],e=this.files[1],i=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(t.key,t.data,e.data,i),e.pendingDestroy(),this.complete=!0}}});a.register("unityAtlas",(function(t,e,i,s,a){var n;if(Array.isArray(t))for(var r=0;r<t.length;r++)n=new d(this,t[r]),this.addFile(n.files);else n=new d(this,t,e,i,s,a),this.addFile(n.files);return this})),t.exports=d},1435:function(t,e,i){var s=i(3),a=i(24),n=i(27),r=i(11),o=i(168),h=i(5),l=i(10),d=new s({Extends:n,initialize:function(t,e,i,s,a,r,o){void 0===s&&(s="loadeddata"),void 0===a&&(a=!1),void 0===r&&(r=!1),"loadeddata"!==s&&"canplay"!==s&&"canplaythrough"!==s&&(s="loadeddata");var h={type:"video",cache:t.cacheManager.video,extension:i.type,responseType:"blob",key:e,url:i.url,xhrSettings:o,config:{loadEvent:s,asBlob:a,noAudio:r}};this.onLoadCallback=this.onVideoLoadHandler.bind(this),this.onErrorCallback=this.onVideoErrorHandler.bind(this),n.call(this,t,h)},onProcess:function(){if(this.state=a.FILE_PROCESSING,this.config.asBlob){var t=this.createVideoElement();this.data=t;var e=this;this.data.onloadeddata=function(){e.onProcessComplete()},this.data.onerror=function(){n.revokeObjectURL(e.data),e.onProcessError()},n.createObjectURL(t,this.xhrLoader.response,""),t.load()}else this.onProcessComplete()},createVideoElement:function(){var t=document.createElement("video");return t.controls=!1,t.crossOrigin=this.loader.crossOrigin,this.config.noAudio&&(t.muted=!0,t.defaultMuted=!0,t.setAttribute("autoplay","autoplay")),t.setAttribute("playsinline","playsinline"),t.setAttribute("preload","auto"),t},onVideoLoadHandler:function(t){var e=t.target;e.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),e.removeEventListener("error",this.onErrorCallback,!0),this.data=e,this.resetXHR(),this.loader.nextFile(this,!0)},onVideoErrorHandler:function(t){var e=t.target;e&&(e.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),e.removeEventListener("error",this.onErrorCallback,!0)),this.resetXHR(),this.loader.nextFile(this,!1)},load:function(){var t=this.config.loadEvent;if(this.config.asBlob)n.prototype.load.call(this);else{this.percentComplete=0;var e=this.createVideoElement();e.addEventListener(t,this.onLoadCallback,!0),e.addEventListener("error",this.onErrorCallback,!0),e.src=o(this,this.loader.baseURL),e.load()}}});d.create=function(t,e,i,s,a,n,r){var o=t.systems.game;l(e)&&(i=h(e,"url",[]),s=h(e,"loadEvent","loadeddata"),a=h(e,"asBlob",!1),n=h(e,"noAudio",!1),r=h(e,"xhrSettings"),e=h(e,"key"));var c=d.getVideoURL(o,i);if(c)return new d(t,e,c,s,a,n,r)},d.getVideoURL=function(t,e){Array.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++){var s,a=h(e[i],"url",e[i]);if(0===a.indexOf("blob:"))return{url:a,type:""};if(s=0===a.indexOf("data:")?a.split(",")[0].match(/\/(.*?);/):a.match(/\.([a-zA-Z0-9]+)($|\?)/),s=h(e[i],"type",s?s[1]:"").toLowerCase(),t.device.video[s])return{url:a,type:s}}return null},r.register("video",(function(t,e,i,s,a,n){var r;if(Array.isArray(t))for(var o=0;o<t.length;o++)(r=d.create(this,t[o]))&&this.addFile(r);else(r=d.create(this,t,e,i,s,a,n))&&this.addFile(r);return this})),t.exports=d},1436:function(t,e,i){var s=i(3),a=i(24),n=i(160),r=i(12),o=i(100),h=i(11),l=i(5),d=i(29),c=i(22),u=i(169),f=new s({Extends:r,initialize:function(t){r.call(this);var e=t.sys.game.config,i=t.sys.settings.loader;this.scene=t,this.systems=t.sys,this.cacheManager=t.sys.cache,this.textureManager=t.sys.textures,this.sceneManager=t.sys.game.scene,h.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(l(i,"baseURL",e.loaderBaseURL)),this.setPath(l(i,"path",e.loaderPath)),this.setPrefix(l(i,"prefix",e.loaderPrefix)),this.maxParallelDownloads=l(i,"maxParallelDownloads",e.loaderMaxParallelDownloads),this.xhr=u(l(i,"responseType",e.loaderResponseType),l(i,"async",e.loaderAsync),l(i,"user",e.loaderUser),l(i,"password",e.loaderPassword),l(i,"timeout",e.loaderTimeout),l(i,"withCredentials",e.loaderWithCredentials)),this.crossOrigin=l(i,"crossOrigin",e.loaderCrossOrigin),this.totalToLoad=0,this.progress=0,this.list=new n,this.inflight=new n,this.queue=new n,this._deleteQueue=new n,this.totalFailed=0,this.totalComplete=0,this.state=a.LOADER_IDLE,this.multiKeyIndex=0,t.sys.events.once(c.BOOT,this.boot,this),t.sys.events.on(c.START,this.pluginStart,this)},boot:function(){this.systems.events.once(c.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(c.SHUTDOWN,this.shutdown,this)},setBaseURL:function(t){return void 0===t&&(t=""),""!==t&&"/"!==t.substr(-1)&&(t=t.concat("/")),this.baseURL=t,this},setPath:function(t){return void 0===t&&(t=""),""!==t&&"/"!==t.substr(-1)&&(t=t.concat("/")),this.path=t,this},setPrefix:function(t){return void 0===t&&(t=""),this.prefix=t,this},setCORS:function(t){return this.crossOrigin=t,this},addFile:function(t){Array.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++){var i=t[e];this.keyExists(i)||(this.list.set(i),this.emit(o.ADD,i.key,i.type,this,i),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(t){var e=t.hasCacheConflict();return e||this.list.iterate((function(i){if(i.type===t.type&&i.key===t.key)return e=!0,!1})),!e&&this.isLoading()&&(this.inflight.iterate((function(i){if(i.type===t.type&&i.key===t.key)return e=!0,!1})),this.queue.iterate((function(i){if(i.type===t.type&&i.key===t.key)return e=!0,!1}))),e},addPack:function(t,e){e&&t.hasOwnProperty(e)&&(t={packKey:t[e]});var i=0,s=this.baseURL,a=this.path,n=this.prefix;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var o=t[r],h=l(o,"baseURL",s),d=l(o,"path",a),c=l(o,"prefix",n),u=l(o,"files",null),f=l(o,"defaultType","void");if(Array.isArray(u)){this.setBaseURL(h),this.setPath(d),this.setPrefix(c);for(var p=0;p<u.length;p++){var g=u[p],y=g.hasOwnProperty("type")?g.type:f;this[y]&&(this[y](g),i++)}}}return this.setBaseURL(s),this.setPath(a),this.setPrefix(n),i>0},isLoading:function(){return this.state===a.LOADER_LOADING||this.state===a.LOADER_PROCESSING},isReady:function(){return this.state===a.LOADER_IDLE||this.state===a.LOADER_COMPLETE},start:function(){this.isReady()&&(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(o.START,this),0===this.list.size?this.loadComplete():(this.state=a.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(c.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(o.PROGRESS,this.progress)},update:function(){this.state===a.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each((function(t){if((t.state===a.FILE_POPULATED||t.state===a.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(t),this.list.delete(t),t.crossOrigin||(t.crossOrigin=this.crossOrigin),t.load()),this.inflight.size===this.maxParallelDownloads)return!1}),this)},nextFile:function(t,e){this.inflight&&(this.inflight.delete(t),this.updateProgress(),e?(this.totalComplete++,this.queue.set(t),this.emit(o.FILE_LOAD,t),t.onProcess()):(this.totalFailed++,this._deleteQueue.set(t),this.emit(o.FILE_LOAD_ERROR,t),this.fileProcessComplete(t)))},fileProcessComplete:function(t){this.scene&&this.systems&&this.systems.game&&!this.systems.game.pendingDestroy&&(t.state===a.FILE_ERRORED?t.multiFile&&t.multiFile.onFileFailed(t):t.state===a.FILE_COMPLETE&&(t.multiFile?t.multiFile.isReadyToProcess()&&t.multiFile.addToCache():t.addToCache()),this.queue.delete(t),0===this.list.size&&0===this.inflight.size&&0===this.queue.size&&this.loadComplete())},loadComplete:function(){this.emit(o.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=a.LOADER_COMPLETE,this.systems.events.off(c.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(o.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(t){this._deleteQueue.set(t)},saveJSON:function(t,e){return this.save(JSON.stringify(t),e)},save:function(t,e,i){void 0===e&&(e="file.json"),void 0===i&&(i="application/json");var s=new Blob([t],{type:i}),a=URL.createObjectURL(s),n=document.createElement("a");return n.download=e,n.textContent="Download "+e,n.href=a,n.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var t=this.systems.game.config,e=this.systems.settings.loader;this.setBaseURL(l(e,"baseURL",t.loaderBaseURL)),this.setPath(l(e,"path",t.loaderPath)),this.setPrefix(l(e,"prefix",t.loaderPrefix)),this.state=a.LOADER_IDLE},shutdown:function(){this.reset(),this.state=a.LOADER_SHUTDOWN,this.systems.events.off(c.UPDATE,this.update,this),this.systems.events.off(c.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=a.LOADER_DESTROYED,this.systems.events.off(c.UPDATE,this.update,this),this.systems.events.off(c.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});d.register("Loader",f,"load"),t.exports=f},164:function(t,e){function i(t,e){return parseInt(t.getAttribute(e),10)}t.exports=function(t,e,s,a,n){void 0===s&&(s=0),void 0===a&&(a=0);var r=e.cutX,o=e.cutY,h=e.source.width,l=e.source.height,d=e.sourceIndex,c={},u=t.getElementsByTagName("info")[0],f=t.getElementsByTagName("common")[0];c.font=u.getAttribute("face"),c.size=i(u,"size"),c.lineHeight=i(f,"lineHeight")+a,c.chars={};var p=t.getElementsByTagName("char"),g=void 0!==e&&e.trimmed;if(g)var y=e.height,x=e.width;for(var v=0;v<p.length;v++){var m=p[v],L=i(m,"id"),E=String.fromCharCode(L),F=i(m,"x"),w=i(m,"y"),S=i(m,"width"),P=i(m,"height");g&&(F<x&&(x=F),w<y&&(y=w)),g&&0!==y&&0!==x&&(F-=e.x,w-=e.y);var k=(r+F)/h,R=(o+w)/l,T=(r+F+S)/h,A=(o+w+P)/l;if(c.chars[L]={x:F,y:w,width:S,height:P,centerX:Math.floor(S/2),centerY:Math.floor(P/2),xOffset:i(m,"xoffset"),yOffset:i(m,"yoffset"),xAdvance:i(m,"xadvance")+s,data:{},kerning:{},u0:k,v0:R,u1:T,v1:A},n&&0!==S&&0!==P){var O=n.add(E,d,F,w,S,P);O&&O.setUVs(S,P,k,R,T,A)}}var C=t.getElementsByTagName("kerning");for(v=0;v<C.length;v++){var b=C[v],I=i(b,"first"),D=i(b,"second"),U=i(b,"amount");c.chars[D].kerning[I]=U}return c}},168:function(t,e){t.exports=function(t,e){return!!t.url&&(t.url.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?t.url:e+t.url)}},169:function(t,e){t.exports=function(t,e,i,s,a,n){return void 0===t&&(t=""),void 0===e&&(e=!0),void 0===i&&(i=""),void 0===s&&(s=""),void 0===a&&(a=0),void 0===n&&(n=!1),{responseType:t,async:e,user:i,password:s,timeout:a,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:n}}},24:function(t,e){t.exports={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19}},261:function(t,e,i){var s=i(20),a=i(169);t.exports=function(t,e){var i=void 0===t?a():s({},t);if(e)for(var n in e)void 0!==e[n]&&(i[n]=e[n]);return i}},262:function(t,e,i){var s=i(3),a=i(24),n=i(27),r=i(11),o=i(5),h=i(10),l=i(427),d=new s({Extends:n,initialize:function(t,e,i,s){var a="xml";if(h(e)){var r=e;e=o(r,"key"),i=o(r,"url"),s=o(r,"xhrSettings"),a=o(r,"extension",a)}var l={type:"xml",cache:t.cacheManager.xml,extension:a,responseType:"text",key:e,url:i,xhrSettings:s};n.call(this,t,l)},onProcess:function(){this.state=a.FILE_PROCESSING,this.data=l(this.xhrLoader.responseText),this.data?this.onProcessComplete():(console.warn("Invalid XMLFile: "+this.key),this.onProcessError())}});r.register("xml",(function(t,e,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)this.addFile(new d(this,t[s]));else this.addFile(new d(this,t,e,i));return this})),t.exports=d},263:function(t,e,i){var s=i(3),a=i(24),n=i(27),r=i(11),o=i(5),h=i(10),l=new s({Extends:n,initialize:function(t,e,i,s){var a="text",r="txt",l=t.cacheManager.text;if(h(e)){var d=e;e=o(d,"key"),i=o(d,"url"),s=o(d,"xhrSettings"),r=o(d,"extension",r),a=o(d,"type",a),l=o(d,"cache",l)}var c={type:a,cache:l,extension:r,responseType:"text",key:e,url:i,xhrSettings:s};n.call(this,t,c)},onProcess:function(){this.state=a.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});r.register("text",(function(t,e,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)this.addFile(new l(this,t[s]));else this.addFile(new l(this,t,e,i));return this})),t.exports=l},27:function(t,e,i){var s=i(3),a=i(24),n=i(100),r=i(5),o=i(168),h=i(261),l=i(546),d=i(169),c=new s({initialize:function(t,e){this.loader=t,this.cache=r(e,"cache",!1),this.type=r(e,"type",!1),this.key=r(e,"key",!1);var i=this.key;if(t.prefix&&""!==t.prefix&&(this.key=t.prefix+i),!this.type||!this.key)throw new Error("Invalid Loader."+this.type+" key");var s=r(e,"url");void 0===s?s=t.path+i+"."+r(e,"extension",""):"string"!=typeof s||s.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)||(s=t.path+s),this.url=s,this.src="",this.xhrSettings=d(r(e,"responseType",void 0)),r(e,"xhrSettings",!1)&&(this.xhrSettings=h(this.xhrSettings,r(e,"xhrSettings",{}))),this.xhrLoader=null,this.state="function"==typeof this.url?a.FILE_POPULATED:a.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=r(e,"config",{}),this.multiFile,this.linkFile},setLink:function(t){this.linkFile=t,t.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===a.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=a.FILE_LOADING,this.src=o(this,this.loader.baseURL),0===this.src.indexOf("data:")?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=l(this,this.loader.xhr))},onLoad:function(t,e){var i=t.responseURL&&(0===t.responseURL.indexOf("file://")||0===t.responseURL.indexOf("capacitor://"))&&0===e.target.status,s=!(e.target&&200!==e.target.status)||i;4===t.readyState&&t.status>=400&&t.status<=599&&(s=!1),this.state=a.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,s)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(t){t.lengthComputable&&(this.bytesLoaded=t.loaded,this.bytesTotal=t.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(n.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=a.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=a.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){this.state=a.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.cache.add(this.key,this.data),this.pendingDestroy()},pendingDestroy:function(t){void 0===t&&(t=this.data);var e=this.key,i=this.type;this.loader.emit(n.FILE_COMPLETE,e,i,t),this.loader.emit(n.FILE_KEY_COMPLETE+i+"-"+e,e,i,t),this.loader.flagForRemoval(this)},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});c.createObjectURL=function(t,e,i){if("function"==typeof URL)t.src=URL.createObjectURL(e);else{var s=new FileReader;s.onload=function(){t.removeAttribute("crossOrigin"),t.src="data:"+(e.type||i)+";base64,"+s.result.split(",")[1]},s.onerror=t.onerror,s.readAsDataURL(e)}},c.revokeObjectURL=function(t){"function"==typeof URL&&URL.revokeObjectURL(t.src)},t.exports=c},40:function(t,e){t.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},546:function(t,e,i){var s=i(261);t.exports=function(t,e){var i=s(e,t.xhrSettings),a=new XMLHttpRequest;if(a.open("GET",t.src,i.async,i.user,i.password),a.responseType=t.xhrSettings.responseType,a.timeout=i.timeout,i.headers)for(var n in i.headers)a.setRequestHeader(n,i.headers[n]);return i.header&&i.headerValue&&a.setRequestHeader(i.header,i.headerValue),i.requestedWith&&a.setRequestHeader("X-Requested-With",i.requestedWith),i.overrideMimeType&&a.overrideMimeType(i.overrideMimeType),i.withCredentials&&(a.withCredentials=!0),a.onload=t.onLoad.bind(t,a),a.onerror=t.onError.bind(t,a),a.onprogress=t.onProgress.bind(t),a.send(),a}},547:function(t,e,i){var s=i(3),a=i(24),n=i(27),r=i(11),o=i(5),h=i(548),l=i(10),d=new s({Extends:n,initialize:function(t,e,i,s,a){if(l(e)){var r=e;e=o(r,"key"),s=o(r,"xhrSettings"),a=o(r,"context",a)}var h={type:"audio",cache:t.cacheManager.audio,extension:i.type,responseType:"arraybuffer",key:e,url:i.url,xhrSettings:s,config:{context:a}};n.call(this,t,h)},onProcess:function(){this.state=a.FILE_PROCESSING;var t=this;this.config.context.decodeAudioData(this.xhrLoader.response,(function(e){t.data=e,t.onProcessComplete()}),(function(e){console.error("Error decoding audio: "+t.key+" - ",e?e.message:null),t.onProcessError()})),this.config.context=null}});d.create=function(t,e,i,s,a){var n=t.systems.game,r=n.config.audio,c=n.device.audio;l(e)&&(i=o(e,"url",[]),s=o(e,"config",{}));var u=d.getAudioURL(n,i);return u?c.webAudio&&!r.disableWebAudio?new d(t,e,u,a,n.sound.context):new h(t,e,u,s):null},d.getAudioURL=function(t,e){Array.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++){var s=o(e[i],"url",e[i]);if(0===s.indexOf("blob:")||0===s.indexOf("data:"))return{url:s,type:""};var a=s.match(/\.([a-zA-Z0-9]+)($|\?)/);if(a=o(e[i],"type",a?a[1]:"").toLowerCase(),t.device.audio[a])return{url:s,type:a}}return null},r.register("audio",(function(t,e,i,s){var a,n=this.systems.game,r=n.config.audio,o=n.device.audio;if(r.noAudio||!o.webAudio&&!o.audioData)return this;if(Array.isArray(t))for(var h=0;h<t.length;h++)(a=d.create(this,t[h]))&&this.addFile(a);else(a=d.create(this,t,e,i,s))&&this.addFile(a);return this})),t.exports=d},548:function(t,e,i){var s=i(3),a=i(100),n=i(27),r=i(5),o=i(168),h=i(10),l=new s({Extends:n,initialize:function(t,e,i,s){if(h(e)){var a=e;e=r(a,"key"),s=r(a,"config",s)}var o={type:"audio",cache:t.cacheManager.audio,extension:i.type,key:e,url:i.url,config:s};n.call(this,t,o),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var t=0;t<this.data.length;t++){var e=this.data[t];e.oncanplaythrough=null,e.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(t){var e=t.target;e.oncanplaythrough=null,e.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(a.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var t=this.config&&this.config.instances||1;this.filesTotal=t,this.filesLoaded=0,this.percentComplete=0;for(var e=0;e<t;e++){var i=new Audio;i.dataset||(i.dataset={}),i.dataset.name=this.key+("0"+e).slice(-2),i.dataset.used="false",this.locked?i.dataset.locked="true":(i.dataset.locked="false",i.preload="auto",i.oncanplaythrough=this.onProgress.bind(this),i.onerror=this.onError.bind(this)),this.data.push(i)}for(e=0;e<this.data.length;e++)(i=this.data[e]).src=o(this,this.loader.baseURL),this.locked||i.load();this.locked&&setTimeout(this.onLoad.bind(this))}});t.exports=l},549:function(t,e,i){var s=i(3),a=i(24),n=i(27),r=i(11),o=i(5),h=i(10),l=new s({Extends:n,initialize:function(t,e,i,s){var a="js";if(h(e)){var r=e;e=o(r,"key"),i=o(r,"url"),s=o(r,"xhrSettings"),a=o(r,"extension",a)}var l={type:"script",cache:!1,extension:a,responseType:"text",key:e,url:i,xhrSettings:s};n.call(this,t,l)},onProcess:function(){this.state=a.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});r.register("script",(function(t,e,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)this.addFile(new l(this,t[s]));else this.addFile(new l(this,t,e,i));return this})),t.exports=l},57:function(t,e,i){var s=new(i(3))({initialize:function(t,e,i,s){var a=[];s.forEach((function(t){t&&a.push(t)})),this.loader=t,this.type=e,this.key=i,this.multiKeyIndex=t.multiKeyIndex++,this.files=a,this.complete=!1,this.pending=a.length,this.failed=0,this.config={},this.baseURL=t.baseURL,this.path=t.path,this.prefix=t.prefix;for(var n=0;n<a.length;n++)a[n].multiFile=this},isReadyToProcess:function(){return 0===this.pending&&0===this.failed&&!this.complete},addToMultiFile:function(t){return this.files.push(t),t.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(t){-1!==this.files.indexOf(t)&&this.pending--},onFileFailed:function(t){-1!==this.files.indexOf(t)&&this.failed++}});t.exports=s},69:function(t,e,i){var s=i(3),a=i(24),n=i(27),r=i(11),o=i(5),h=i(9),l=i(10),d=new s({Extends:n,initialize:function(t,e,i,s,r){var d="json";if(l(e)){var c=e;e=o(c,"key"),i=o(c,"url"),s=o(c,"xhrSettings"),d=o(c,"extension",d),r=o(c,"dataKey",r)}var u={type:"json",cache:t.cacheManager.json,extension:d,responseType:"text",key:e,url:i,xhrSettings:s,config:r};n.call(this,t,u),l(i)&&(this.data=r?h(i,r):i,this.state=a.FILE_POPULATED)},onProcess:function(){if(this.state!==a.FILE_POPULATED){this.state=a.FILE_PROCESSING;try{var t=JSON.parse(this.xhrLoader.responseText)}catch(t){throw console.warn("Invalid JSON: "+this.key),this.onProcessError(),t}var e=this.config;this.data="string"==typeof e?h(t,e,t):t}this.onProcessComplete()}});r.register("json",(function(t,e,i,s){if(Array.isArray(t))for(var a=0;a<t.length;a++)this.addFile(new d(this,t[a]));else this.addFile(new d(this,t,e,s,i));return this})),t.exports=d},78:function(t,e,i){var s=i(3),a=i(24),n=i(27),r=i(11),o=i(5),h=i(10),l=new s({Extends:n,initialize:function t(e,i,s,a,r){var l,d="png";if(h(i)){var c=i;i=o(c,"key"),s=o(c,"url"),l=o(c,"normalMap"),a=o(c,"xhrSettings"),d=o(c,"extension",d),r=o(c,"frameConfig")}Array.isArray(s)&&(l=s[1],s=s[0]);var u={type:"image",cache:e.textureManager,extension:d,responseType:"blob",key:i,url:s,xhrSettings:a,config:r};if(n.call(this,e,u),l){var f=new t(e,this.key,l,a,r);f.type="normalMap",this.setLink(f),e.addFile(f)}},onProcess:function(){this.state=a.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var t=this;this.data.onload=function(){n.revokeObjectURL(t.data),t.onProcessComplete()},this.data.onerror=function(){n.revokeObjectURL(t.data),t.onProcessError()},n.createObjectURL(this.data,this.xhrLoader.response,"image/png")},addToCache:function(){var t,e=this.linkFile;e&&e.state===a.FILE_COMPLETE?(t="image"===this.type?this.cache.addImage(this.key,this.data,e.data):this.cache.addImage(e.key,e.data,this.data),this.pendingDestroy(t),e.pendingDestroy(t)):e||(t=this.cache.addImage(this.key,this.data),this.pendingDestroy(t))}});r.register("image",(function(t,e,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)this.addFile(new l(this,t[s]));else this.addFile(new l(this,t,e,i));return this})),t.exports=l}}]);