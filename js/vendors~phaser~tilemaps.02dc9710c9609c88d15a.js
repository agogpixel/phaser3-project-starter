/*! For license information please see vendors~phaser~tilemaps.02dc9710c9609c88d15a.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{133:function(e,t){e.exports=function(e,t,i){return e>=0&&e<i.width&&t>=0&&t<i.height}},134:function(e,t,i){var r=i(3),n=i(34),l=i(5),a=new r({initialize:function(e){void 0===e&&(e={}),this.name=l(e,"name","layer"),this.x=l(e,"x",0),this.y=l(e,"y",0),this.width=l(e,"width",0),this.height=l(e,"height",0),this.tileWidth=l(e,"tileWidth",0),this.tileHeight=l(e,"tileHeight",0),this.baseTileWidth=l(e,"baseTileWidth",this.tileWidth),this.baseTileHeight=l(e,"baseTileHeight",this.tileHeight),this.orientation=l(e,"orientation",n.ORTHOGONAL),this.widthInPixels=l(e,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=l(e,"heightInPixels",this.height*this.baseTileHeight),this.alpha=l(e,"alpha",1),this.visible=l(e,"visible",!0),this.properties=l(e,"properties",[]),this.indexes=l(e,"indexes",[]),this.collideIndexes=l(e,"collideIndexes",[]),this.callbacks=l(e,"callbacks",[]),this.bodies=l(e,"bodies",[]),this.data=l(e,"data",[]),this.tilemapLayer=l(e,"tilemapLayer",null),this.hexSideLength=l(e,"hexSideLength",0)}});e.exports=a},135:function(e,t,i){var r=i(3),n=i(34),l=i(5),a=new r({initialize:function(e){void 0===e&&(e={}),this.name=l(e,"name","map"),this.width=l(e,"width",0),this.height=l(e,"height",0),this.infinite=l(e,"infinite",!1),this.tileWidth=l(e,"tileWidth",0),this.tileHeight=l(e,"tileHeight",0),this.widthInPixels=l(e,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=l(e,"heightInPixels",this.height*this.tileHeight),this.format=l(e,"format",null),this.orientation=l(e,"orientation",n.ORTHOGONAL),this.renderOrder=l(e,"renderOrder","right-down"),this.version=l(e,"version","1"),this.properties=l(e,"properties",{}),this.layers=l(e,"layers",[]),this.images=l(e,"images",[]),this.objects=l(e,"objects",{}),this.collision=l(e,"collision",{}),this.tilesets=l(e,"tilesets",[]),this.imageCollections=l(e,"imageCollections",[]),this.tiles=l(e,"tiles",[]),this.hexSideLength=l(e,"hexSideLength",0)}});e.exports=a},136:function(e,t,i){var r=new(i(3))({initialize:function(e,t,i,r,n,l,a,o){(void 0===i||i<=0)&&(i=32),(void 0===r||r<=0)&&(r=32),void 0===n&&(n=0),void 0===l&&(l=0),void 0===a&&(a={}),void 0===o&&(o={}),this.name=e,this.firstgid=t,this.tileWidth=i,this.tileHeight=r,this.tileMargin=n,this.tileSpacing=l,this.tileProperties=a,this.tileData=o,this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(e){return this.containsTileIndex(e)?this.tileProperties[e-this.firstgid]:null},getTileData:function(e){return this.containsTileIndex(e)?this.tileData[e-this.firstgid]:null},getTileCollisionGroup:function(e){var t=this.getTileData(e);return t&&t.objectgroup?t.objectgroup:null},containsTileIndex:function(e){return e>=this.firstgid&&e<this.firstgid+this.total},getTileTextureCoordinates:function(e){return this.containsTileIndex(e)?this.texCoordinates[e-this.firstgid]:null},setImage:function(e){return this.image=e,this.glTexture=e.get().source.glTexture,this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setTileSize:function(e,t){return void 0!==e&&(this.tileWidth=e),void 0!==t&&(this.tileHeight=t),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(e,t){return void 0!==e&&(this.tileMargin=e),void 0!==t&&(this.tileSpacing=t),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(e,t){var i=(t-2*this.tileMargin+this.tileSpacing)/(this.tileHeight+this.tileSpacing),r=(e-2*this.tileMargin+this.tileSpacing)/(this.tileWidth+this.tileSpacing);i%1==0&&r%1==0||console.warn("Image tile area not tile size multiple in: "+this.name),i=Math.floor(i),r=Math.floor(r),this.rows=i,this.columns=r,this.total=i*r,this.texCoordinates.length=0;for(var n=this.tileMargin,l=this.tileMargin,a=0;a<this.rows;a++){for(var o=0;o<this.columns;o++)this.texCoordinates.push({x:n,y:l}),n+=this.tileWidth+this.tileSpacing;n=this.tileMargin,l+=this.tileHeight+this.tileSpacing}return this}});e.exports=r},1499:function(e,t,i){var r=i(20),n=i(1500),l={Components:i(282),Parsers:i(1533),Formats:i(40),ImageCollection:i(612),ParseToTilemap:i(293),Tile:i(91),Tilemap:i(616),TilemapCreator:i(1540),TilemapFactory:i(1541),Tileset:i(136),TilemapLayer:i(617),Orientation:i(34),LayerData:i(134),MapData:i(135),ObjectLayer:i(608)};l=r(!1,l,n.ORIENTATION),e.exports=l},1500:function(e,t,i){var r={ORIENTATION:i(34)};e.exports=r},1501:function(e,t,i){var r=i(28),n=i(71);e.exports=function(e,t,i,l,a,o,s,h){void 0===s&&(s=!0),e<0&&(e=0),t<0&&(t=0);for(var c=r(e,t,i,l,null,h),u=a-e,d=o-t,f=0;f<c.length;f++){var p=c[f].x+u,g=c[f].y+d;p>=0&&p<h.width&&g>=0&&g<h.height&&h.data[g][p]&&h.data[g][p].copy(c[f])}s&&n(a-1,o-1,i+2,l+2,h)}},1502:function(e,t,i){var r=i(28),n=i(579);e.exports=function(e,t,i,l,a,o){i||(i={}),Array.isArray(e)||(e=[e]);var s=o.tilemapLayer;l||(l=s.scene),a||(a=l.cameras.main);var h,c=r(0,0,o.width,o.height,null,o),u=[];for(h=0;h<c.length;h++){var d=c[h];if(-1!==e.indexOf(d.index)){var f=s.tileToWorldXY(d.x,d.y,void 0,a,o);i.x=f.x,i.y=f.y,u.push(l.make.sprite(i))}}if("number"==typeof t)for(h=0;h<e.length;h++)n(e[h],t,0,0,o.width,o.height,o);else if(Array.isArray(t))for(h=0;h<e.length;h++)n(e[h],t[h],0,0,o.width,o.height,o);return u}},1503:function(e,t,i){var r=i(28),n=i(71),l=i(80);e.exports=function(e,t,i,a,o,s,h){for(var c=-1!==h.collideIndexes.indexOf(e),u=r(t,i,a,o,null,h),d=0;d<u.length;d++)u[d].index=e,l(u[d],c);s&&n(t-1,i-1,a+2,o+2,h)}},1504:function(e,t,i){var r=i(28);e.exports=function(e,t,i,n,l,a,o,s){return r(i,n,l,a,o,s).filter(e,t)}},1505:function(e,t){e.exports=function(e,t,i,r){void 0===t&&(t=0),void 0===i&&(i=!1);var n,l,a,o=0;if(i){for(l=r.height-1;l>=0;l--)for(n=r.width-1;n>=0;n--)if((a=r.data[l][n])&&a.index===e){if(o===t)return a;o+=1}}else for(l=0;l<r.height;l++)for(n=0;n<r.width;n++)if((a=r.data[l][n])&&a.index===e){if(o===t)return a;o+=1}return null}},1506:function(e,t,i){var r=i(28);e.exports=function(e,t,i,n,l,a,o,s){return r(i,n,l,a,o,s).find(e,t)||null}},1507:function(e,t,i){var r=i(28);e.exports=function(e,t,i,n,l,a,o,s){r(i,n,l,a,o,s).forEach(e,t)}},1508:function(e,t,i){var r=i(34),n=i(581),l=i(582),a=i(584),o=i(4),s=i(585);e.exports=function(e){return e===r.ORTHOGONAL?n:e===r.HEXAGONAL?l:e===r.STAGGERED?s:e===r.ISOMETRIC?a:o}},1509:function(e,t,i){var r=i(175),n=new(i(6));e.exports=function(e,t,i,l,a){return a.tilemapLayer.worldToTileXY(e,t,!0,n,l),r(n.x,n.y,i,a)}},1510:function(e,t,i){var r=i(454),n=i(28),l=i(458),a=i(4),o=i(6),s=function(e,t){return l.RectangleToTriangle(t,e)},h=new o,c=new o,u=new o;e.exports=function(e,t,i,o){if(void 0===e)return[];var d=a;e instanceof r.Circle?d=l.CircleToRectangle:e instanceof r.Rectangle?d=l.RectangleToRectangle:e instanceof r.Triangle?d=s:e instanceof r.Line&&(d=l.LineToRectangle),o.tilemapLayer.worldToTileXY(e.left,e.top,!0,c,i);var f=c.x,p=c.y;o.tilemapLayer.worldToTileXY(e.right,e.bottom,!0,u,i);var g=Math.ceil(u.x),y=Math.ceil(u.y),v=Math.max(g-f,1),x=Math.max(y-p,1),m=n(f,p,v,x,t,o),T=o.tileWidth,w=o.tileHeight;o.tilemapLayer&&(T*=o.tilemapLayer.scaleX,w*=o.tilemapLayer.scaleY);for(var L=[],b=new r.Rectangle(0,0,T,w),W=0;W<m.length;W++){var A=m[W];o.tilemapLayer.tileToWorldXY(A.x,A.y,h,i),b.x=h.x,b.y=h.y,d(e,b)&&L.push(A)}return L}},1511:function(e,t,i){var r=i(34),n=i(4),l=i(284);e.exports=function(e){return e===r.ORTHOGONAL?l:n}},1512:function(e,t,i){var r=i(34),n=i(587),l=i(588),a=i(4),o=i(589),s=i(590);e.exports=function(e){return e===r.ORTHOGONAL?s:e===r.ISOMETRIC?l:e===r.HEXAGONAL?n:e===r.STAGGERED?o:a}},1513:function(e,t,i){var r=i(34),n=i(591),l=i(4),a=i(592),o=i(285);e.exports=function(e){return e===r.ORTHOGONAL?o:e===r.HEXAGONAL?n:e===r.STAGGERED?a:l}},1514:function(e,t,i){var r=i(34),n=i(4),l=i(286);e.exports=function(e){return e===r.ORTHOGONAL?l:n}},1515:function(e,t,i){var r=i(34),n=i(593),l=i(594),a=i(4),o=i(595),s=i(596);e.exports=function(e){return e===r.ORTHOGONAL?s:e===r.ISOMETRIC?l:e===r.HEXAGONAL?n:e===r.STAGGERED?o:a}},1516:function(e,t,i){var r=i(34),n=i(597),l=i(4),a=i(598),o=i(287);e.exports=function(e){return e===r.ORTHOGONAL?o:e===r.HEXAGONAL?n:e===r.STAGGERED?a:l}},1517:function(e,t,i){var r=i(599),n=new(i(6));e.exports=function(e,t,i,l){l.tilemapLayer.worldToTileXY(e,t,!0,n,i);var a=n.x,o=n.y;return r(a,o,l)}},1518:function(e,t,i){var r=i(288),n=new(i(6));e.exports=function(e,t,i,l,a,o){return o.tilemapLayer.worldToTileXY(t,i,!0,n,a,o),r(e,n.x,n.y,l,o)}},1519:function(e,t,i){var r=i(71),n=i(288);e.exports=function(e,t,i,l,a){if(void 0===l&&(l=!0),!Array.isArray(e))return null;Array.isArray(e[0])||(e=[e]);for(var o=e.length,s=e[0].length,h=0;h<o;h++)for(var c=0;c<s;c++){var u=e[h][c];n(u,t+c,i+h,!1,a)}l&&r(t-1,i-1,s+2,o+2,a)}},1520:function(e,t,i){var r=i(28),n=i(234);e.exports=function(e,t,i,l,a,o){var s,h=r(e,t,i,l,{},o);if(!a)for(a=[],s=0;s<h.length;s++)-1===a.indexOf(h[s].index)&&a.push(h[s].index);for(s=0;s<h.length;s++)h[s].index=n(a)}},1521:function(e,t,i){var r=i(600),n=new(i(6));e.exports=function(e,t,i,l,a,o){return o.tilemapLayer.worldToTileXY(e,t,!0,n,a,o),r(n.x,n.y,i,l,o)}},1522:function(e,t,i){var r=i(28),n=i(416),l=new n(105,210,231,150),a=new n(243,134,48,200),o=new n(40,39,37,150);e.exports=function(e,t,i){void 0===t&&(t={});var n=void 0!==t.tileColor?t.tileColor:l,s=void 0!==t.collidingTileColor?t.collidingTileColor:a,h=void 0!==t.faceColor?t.faceColor:o,c=r(0,0,i.width,i.height,null,i);e.translateCanvas(i.tilemapLayer.x,i.tilemapLayer.y),e.scaleCanvas(i.tilemapLayer.scaleX,i.tilemapLayer.scaleY);for(var u=0;u<c.length;u++){var d=c[u],f=d.width,p=d.height,g=d.pixelX,y=d.pixelY,v=d.collides?s:n;null!==v&&(e.fillStyle(v.color,v.alpha/255),e.fillRect(g,y,f,p)),g+=1,y+=1,f-=2,p-=2,null!==h&&(e.lineStyle(1,h.color,h.alpha/255),d.faceTop&&e.lineBetween(g,y,g+f,y),d.faceRight&&e.lineBetween(g+f,y,g+f,y+p),d.faceBottom&&e.lineBetween(g,y+p,g+f,y+p),d.faceLeft&&e.lineBetween(g,y,g,y+p))}}},1523:function(e,t,i){var r=i(80),n=i(71),l=i(177);e.exports=function(e,t,i,a,o){void 0===t&&(t=!0),void 0===i&&(i=!0),void 0===o&&(o=!0),Array.isArray(e)||(e=[e]);for(var s=0;s<e.length;s++)l(e[s],t,a);if(o)for(var h=0;h<a.height;h++)for(var c=0;c<a.width;c++){var u=a.data[h][c];u&&-1!==e.indexOf(u.index)&&r(u,t)}i&&n(0,0,a.width,a.height,a)}},1524:function(e,t,i){var r=i(80),n=i(71),l=i(177);e.exports=function(e,t,i,a,o,s){if(void 0===i&&(i=!0),void 0===a&&(a=!0),void 0===s&&(s=!0),!(e>t)){for(var h=e;h<=t;h++)l(h,i,o);if(s)for(var c=0;c<o.height;c++)for(var u=0;u<o.width;u++){var d=o.data[c][u];d&&d.index>=e&&d.index<=t&&r(d,i)}a&&n(0,0,o.width,o.height,o)}}},1525:function(e,t,i){var r=i(80),n=i(71),l=i(177);e.exports=function(e,t,i,a){void 0===t&&(t=!0),void 0===i&&(i=!0),Array.isArray(e)||(e=[e]);for(var o=0;o<a.height;o++)for(var s=0;s<a.width;s++){var h=a.data[o][s];h&&-1===e.indexOf(h.index)&&(r(h,t),l(h.index,t,a))}i&&n(0,0,a.width,a.height,a)}},1526:function(e,t,i){var r=i(80),n=i(71),l=i(127);e.exports=function(e,t,i,a){void 0===t&&(t=!0),void 0===i&&(i=!0);for(var o=0;o<a.height;o++)for(var s=0;s<a.width;s++){var h=a.data[o][s];if(h)for(var c in e)if(l(h.properties,c)){var u=e[c];Array.isArray(u)||(u=[u]);for(var d=0;d<u.length;d++)h.properties[c]===u[d]&&r(h,t)}}i&&n(0,0,a.width,a.height,a)}},1527:function(e,t,i){var r=i(80),n=i(71);e.exports=function(e,t,i){void 0===e&&(e=!0),void 0===t&&(t=!0);for(var l=0;l<i.height;l++)for(var a=0;a<i.width;a++){var o=i.data[l][a];if(o){var s=o.getCollisionGroup();s&&s.objects&&s.objects.length>0&&r(o,e)}}t&&n(0,0,i.width,i.height,i)}},1528:function(e,t){e.exports=function(e,t,i,r){if("number"==typeof e)r.callbacks[e]=null!==t?{callback:t,callbackContext:i}:void 0;else for(var n=0,l=e.length;n<l;n++)r.callbacks[e[n]]=null!==t?{callback:t,callbackContext:i}:void 0}},1529:function(e,t,i){var r=i(28);e.exports=function(e,t,i,n,l,a,o){for(var s=r(e,t,i,n,null,o),h=0;h<s.length;h++)s[h].setCollisionCallback(l,a)}},1530:function(e,t,i){var r=i(28),n=i(141);e.exports=function(e,t,i,l,a){var o=r(e,t,i,l,null,a),s=o.map((function(e){return e.index}));n(s);for(var h=0;h<o.length;h++)o[h].index=s[h]}},1531:function(e,t,i){var r=i(28);e.exports=function(e,t,i,n,l,a,o){for(var s=r(i,n,l,a,null,o),h=0;h<s.length;h++)s[h]&&(s[h].index===e?s[h].index=t:s[h].index===t&&(s[h].index=e))}},1532:function(e,t,i){var r=i(28);e.exports=function(e,t,i,n,l,a){if(l){var o,s=r(e,t,i,n,null,a),h=0;for(o=0;o<l.length;o++)h+=l[o].weight;if(!(h<=0))for(o=0;o<s.length;o++){for(var c=Math.random()*h,u=0,d=-1,f=0;f<l.length;f++)if(c<=(u+=l[f].weight)){var p=l[f].index;d=Array.isArray(p)?p[Math.floor(Math.random()*p.length)]:p;break}s[o].index=d}}}},1533:function(e,t,i){e.exports={FromOrientationString:i(289),Parse:i(601),Parse2DArray:i(290),ParseCSV:i(602),Impact:i(1535),Tiled:i(1536)}},1534:function(e,t){e.exports=function(e,t){for(var i=0;i<e.length;i++){var r=e[i],n=i;if(r.name&&""!==r.name&&(n=r.name),Array.isArray(r.wangtiles)&&r.wangtiles.length>0){var l,a,o,s={},h={};if(Array.isArray(r.edgecolors))for(l=0;l<r.edgecolors.length;l++)o=1+l,""!==(a=r.edgecolors[l]).name&&(s[o]=a.name);if(Array.isArray(r.cornercolors))for(l=0;l<r.cornercolors.length;l++)o=1+l,""!==(a=r.cornercolors[l]).name&&(h[o]=a.name);if(Array.isArray(r.colors))for(l=0;l<r.colors.length;l++)o=1+l,""!==(a=r.colors[l]).name&&(s[o]=h[o]=a.name);for(var c=[s,h,s,h,s,h,s,h],u=0;u<r.wangtiles.length;u++){var d=r.wangtiles[u],f=t[d.tileid]||(t[d.tileid]={});f=f.wangid||(f.wangid={});for(var p=[],g=0;g<Math.min(c.length,d.wangid.length);g++)if(0!==(a=d.wangid[g])){var y=c[g][a];void 0===y?p.push(a):p.push(y)}else p.push(void 0);f[n]=p}}}}},1535:function(e,t,i){e.exports={ParseTileLayers:i(614),ParseTilesets:i(615),ParseWeltmeister:i(613)}},1536:function(e,t,i){e.exports={AssignTileProperties:i(604),Base64Decode:i(610),BuildTilesetIndex:i(605),CreateGroupLayer:i(178),ParseGID:i(292),ParseImageLayers:i(606),ParseJSONTiled:i(603),ParseObject:i(291),ParseObjectLayers:i(607),ParseTileLayers:i(609),ParseTilesets:i(611)}},1537:function(e,t,i){var r=i(4),n=i(4);r=i(1538),n=i(1539),e.exports={renderWebGL:r,renderCanvas:n}},1538:function(e,t,i){var r=i(15);e.exports=function(e,t,i){var n=t.cull(i),l=n.length,a=i.alpha*t.alpha;if(!(0===l||a<=0)){var o=t.gidMap,s=e.pipelines.set(t.pipeline,t),h=r.getTintAppendFloatAlpha,c=t.scrollFactorX,u=t.scrollFactorY,d=t.x,f=t.y,p=t.scaleX,g=t.scaleY;e.pipelines.preBatch(t);for(var y=0;y<l;y++){var v=n[y],x=o[v.index];if(x){var m=x.getTileTextureCoordinates(v.index);if(null!==m){var T=x.glTexture,w=s.setTexture2D(T,t),L=x.tileWidth,b=x.tileHeight,W=m.x,A=m.y,C=.5*x.tileWidth,Y=.5*x.tileHeight,X=h(v.tint,a*v.alpha);s.batchTexture(t,T,T.width,T.height,d+(C+v.pixelX)*p,f+(Y+v.pixelY)*g,v.width,v.height,p,g,v.rotation,v.flipX,v.flipY,c,u,C,Y,W,A,L,b,X,X,X,X,!1,0,0,i,null,!0,w)}}}e.pipelines.postBatch(t)}}},1539:function(e,t,i){var r=i(30),n=new r,l=new r,a=new r;e.exports=function(e,t,i,r){var o=t.cull(i),s=o.length,h=i.alpha*t.alpha;if(!(0===s||h<=0)){var c=n,u=l,d=a;u.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY),c.copyFrom(i.matrix);var f=e.currentContext,p=t.gidMap;f.save(),r?(c.multiplyWithOffset(r,-i.scrollX*t.scrollFactorX,-i.scrollY*t.scrollFactorY),u.e=t.x,u.f=t.y,c.multiply(u,d),d.copyToContext(f)):(u.e-=i.scrollX*t.scrollFactorX,u.f-=i.scrollY*t.scrollFactorY,u.copyToContext(f)),(!e.antialias||t.scaleX>1||t.scaleY>1)&&(f.imageSmoothingEnabled=!1);for(var g=0;g<s;g++){var y=o[g],v=p[y.index];if(v){var x=v.image.getSourceImage(),m=v.getTileTextureCoordinates(y.index);if(null!==m){var T=v.tileWidth,w=v.tileHeight,L=.5*T,b=.5*w;f.save(),f.translate(y.pixelX+L,y.pixelY+b),0!==y.rotation&&f.rotate(y.rotation),(y.flipX||y.flipY)&&f.scale(y.flipX?-1:1,y.flipY?-1:1),f.globalAlpha=h*y.alpha,f.drawImage(x,m.x,m.y,T,w,-L,-b,T,w),f.restore()}}}f.restore()}}},1540:function(e,t,i){var r=i(19),n=i(293);r.register("tilemap",(function(e){var t=void 0!==e?e:{};return n(this.scene,t.key,t.tileWidth,t.tileHeight,t.width,t.height,t.data,t.insertNull)}))},1541:function(e,t,i){var r=i(8),n=i(293);r.register("tilemap",(function(e,t,i,r,l,a,o){return null===e&&(e=void 0),null===t&&(t=void 0),null===i&&(i=void 0),null===r&&(r=void 0),null===l&&(l=void 0),n(this.scene,e,t,i,r,l,a,o)}))},175:function(e,t,i){var r=i(133);e.exports=function(e,t,i,n){if(void 0===i&&(i=!1),r(e,t,n)){var l=n.data[t][e]||null;return l?-1===l.index?i?l:null:l:null}return null}},176:function(e,t){e.exports=function(e,t,i,r){var n,l,a,o=e.data,s=e.width,h=e.height,c=e.tilemapLayer,u=Math.max(0,t.left),d=Math.min(s,t.right),f=Math.max(0,t.top),p=Math.min(h,t.bottom);if(0===i)for(l=f;l<p;l++)for(n=u;o[l]&&n<d;n++)(a=o[l][n])&&-1!==a.index&&a.visible&&0!==a.alpha&&r.push(a);else if(1===i)for(l=f;l<p;l++)for(n=d;o[l]&&n>=u;n--)(a=o[l][n])&&-1!==a.index&&a.visible&&0!==a.alpha&&r.push(a);else if(2===i)for(l=p;l>=f;l--)for(n=u;o[l]&&n<d;n++)(a=o[l][n])&&-1!==a.index&&a.visible&&0!==a.alpha&&r.push(a);else if(3===i)for(l=p;l>=f;l--)for(n=d;o[l]&&n>=u;n--)(a=o[l][n])&&-1!==a.index&&a.visible&&0!==a.alpha&&r.push(a);return c.tilesDrawn=r.length,c.tilesTotal=s*h,r}},177:function(e,t){e.exports=function(e,t,i){var r=i.collideIndexes.indexOf(e);t&&-1===r?i.collideIndexes.push(e):t||-1===r||i.collideIndexes.splice(r,1)}},178:function(e,t,i){var r=i(5);e.exports=function(e,t,i){if(!t)return{i:0,layers:e.layers,name:"",opacity:1,visible:!0,x:0,y:0};var n=t.x+r(t,"startx",0)*e.tilewidth+r(t,"offsetx",0),l=t.y+r(t,"starty",0)*e.tileheight+r(t,"offsety",0);return{i:0,layers:t.layers,name:i.name+t.name+"/",opacity:i.opacity*t.opacity,visible:i.visible&&t.visible,x:i.x+n,y:i.y+l}}},248:function(e,t,i){var r=i(4),n=i(4);r=i(249),n=i(250),e.exports={renderWebGL:r,renderCanvas:n}},249:function(e,t){e.exports=function(e,t,i,r){i.addToRenderList(t),t.pipeline.batchSprite(t,i,r)}},250:function(e,t){e.exports=function(e,t,i,r){i.addToRenderList(t),e.batchSprite(t,t.frame,i,r)}},269:function(e,t,i){var r=i(28),n=i(6),l=new n,a=new n;e.exports=function(e,t,i,n,o,s,h){var c=h.tilemapLayer.tilemap._convert.WorldToTileXY;c(e,t,!0,l,s,h);var u=l.x,d=l.y;c(e+i,t+n,!1,a,s,h);var f=Math.ceil(a.x),p=Math.ceil(a.y);return r(u,d,f-u,p-d,o,h)}},28:function(e,t,i){var r=i(5);e.exports=function(e,t,i,n,l,a){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=a.width),void 0===n&&(n=a.height),l||(l={});var o=r(l,"isNotEmpty",!1),s=r(l,"isColliding",!1),h=r(l,"hasInterestingFace",!1);e<0&&(i+=e,e=0),t<0&&(n+=t,t=0),e+i>a.width&&(i=Math.max(a.width-e,0)),t+n>a.height&&(n=Math.max(a.height-t,0));for(var c=[],u=t;u<t+n;u++)for(var d=e;d<e+i;d++){var f=a.data[u][d];if(null!==f){if(o&&-1===f.index)continue;if(s&&!f.collides)continue;if(h&&!f.hasInterestingFace)continue;c.push(f)}}return c}},282:function(e,t,i){e.exports={CalculateFacesAt:i(283),CalculateFacesWithin:i(71),CheckIsoBounds:i(578),Copy:i(1501),CreateFromTiles:i(1502),CullBounds:i(580),CullTiles:i(581),Fill:i(1503),FilterTiles:i(1504),FindByIndex:i(1505),FindTile:i(1506),ForEachTile:i(1507),GetCullTilesFunction:i(1508),GetTileAt:i(175),GetTileAtWorldXY:i(1509),GetTilesWithin:i(28),GetTilesWithinShape:i(1510),GetTilesWithinWorldXY:i(269),GetTileToWorldXFunction:i(1511),GetTileToWorldXYFunction:i(1512),GetTileToWorldYFunction:i(1513),GetWorldToTileXFunction:i(1514),GetWorldToTileXYFunction:i(1515),GetWorldToTileYFunction:i(1516),HasTileAt:i(599),HasTileAtWorldXY:i(1517),HexagonalCullBounds:i(583),HexagonalCullTiles:i(582),HexagonalTileToWorldXY:i(587),HexagonalTileToWorldY:i(591),HexagonalWorldToTileXY:i(593),HexagonalWorldToTileY:i(597),IsInLayerBounds:i(133),IsometricCullTiles:i(584),IsometricTileToWorldXY:i(588),IsometricWorldToTileXY:i(594),PutTileAt:i(288),PutTileAtWorldXY:i(1518),PutTilesAt:i(1519),Randomize:i(1520),RemoveTileAt:i(600),RemoveTileAtWorldXY:i(1521),RenderDebug:i(1522),ReplaceByIndex:i(579),RunCull:i(176),SetCollision:i(1523),SetCollisionBetween:i(1524),SetCollisionByExclusion:i(1525),SetCollisionByProperty:i(1526),SetCollisionFromCollisionGroup:i(1527),SetLayerCollisionIndex:i(177),SetTileCollision:i(80),SetTileIndexCallback:i(1528),SetTileLocationCallback:i(1529),Shuffle:i(1530),StaggeredCullBounds:i(586),StaggeredCullTiles:i(585),StaggeredTileToWorldXY:i(589),StaggeredTileToWorldY:i(592),StaggeredWorldToTileXY:i(595),StaggeredWorldToTileY:i(598),SwapByIndex:i(1531),TileToWorldX:i(284),TileToWorldXY:i(590),TileToWorldY:i(285),WeightedRandomize:i(1532),WorldToTileX:i(286),WorldToTileXY:i(596),WorldToTileY:i(287)}},283:function(e,t,i){var r=i(175);e.exports=function(e,t,i){var n=r(e,t,!0,i),l=r(e,t-1,!0,i),a=r(e,t+1,!0,i),o=r(e-1,t,!0,i),s=r(e+1,t,!0,i),h=n&&n.collides;return h&&(n.faceTop=!0,n.faceBottom=!0,n.faceLeft=!0,n.faceRight=!0),l&&l.collides&&(h&&(n.faceTop=!1),l.faceBottom=!h),a&&a.collides&&(h&&(n.faceBottom=!1),a.faceTop=!h),o&&o.collides&&(h&&(n.faceLeft=!1),o.faceRight=!h),s&&s.collides&&(h&&(n.faceRight=!1),s.faceLeft=!h),n&&!n.collides&&n.resetFaces(),n}},284:function(e,t){e.exports=function(e,t,i){var r=i.baseTileWidth,n=i.tilemapLayer,l=0;return n&&(t||(t=n.scene.cameras.main),l=n.x+t.scrollX*(1-n.scrollFactorX),r*=n.scaleX),l+e*r}},285:function(e,t){e.exports=function(e,t,i){var r=i.baseTileHeight,n=i.tilemapLayer,l=0;return n&&(t||(t=n.scene.cameras.main),l=n.y+t.scrollY*(1-n.scrollFactorY),r*=n.scaleY),l+e*r}},286:function(e,t){e.exports=function(e,t,i,r){void 0===t&&(t=!0);var n=r.baseTileWidth,l=r.tilemapLayer;return l&&(i||(i=l.scene.cameras.main),e-=l.x+i.scrollX*(1-l.scrollFactorX),n*=l.scaleX),t?Math.floor(e/n):e/n}},287:function(e,t){e.exports=function(e,t,i,r){void 0===t&&(t=!0);var n=r.baseTileHeight,l=r.tilemapLayer;return l&&(i||(i=l.scene.cameras.main),e-=l.y+i.scrollY*(1-l.scrollFactorY),n*=l.scaleY),t?Math.floor(e/n):e/n}},288:function(e,t,i){var r=i(91),n=i(133),l=i(283),a=i(80);e.exports=function(e,t,i,o,s){if(void 0===o&&(o=!0),!n(t,i,s))return null;var h=s.data[i][t],c=h&&h.collides;if(e instanceof r)null===s.data[i][t]&&(s.data[i][t]=new r(s,e.index,t,i,s.tileWidth,s.tileHeight)),s.data[i][t].copy(e);else{var u=e;null===s.data[i][t]?s.data[i][t]=new r(s,u,t,i,s.tileWidth,s.tileHeight):s.data[i][t].index=u}var d=s.data[i][t],f=-1!==s.collideIndexes.indexOf(d.index);return a(d,f),o&&c!==d.collides&&l(t,i,s),d}},289:function(e,t,i){var r=i(34);e.exports=function(e){return"isometric"===(e=e.toLowerCase())?r.ISOMETRIC:"staggered"===e?r.STAGGERED:"hexagonal"===e?r.HEXAGONAL:r.ORTHOGONAL}},290:function(e,t,i){var r=i(40),n=i(134),l=i(135),a=i(91);e.exports=function(e,t,i,o,s){for(var h=new n({tileWidth:i,tileHeight:o}),c=new l({name:e,tileWidth:i,tileHeight:o,format:r.ARRAY_2D,layers:[h]}),u=[],d=t.length,f=0,p=0;p<t.length;p++){u[p]=[];for(var g=t[p],y=0;y<g.length;y++){var v=parseInt(g[y],10);isNaN(v)||-1===v?u[p][y]=s?null:new a(h,-1,y,p,i,o):u[p][y]=new a(h,v,y,p,i,o)}0===f&&(f=g.length)}return c.width=h.width=f,c.height=h.height=d,c.widthInPixels=h.widthInPixels=f*i,c.heightInPixels=h.heightInPixels=d*o,h.data=u,c}},291:function(e,t,i){var r=i(504),n=i(292),l=function(e){return{x:e.x,y:e.y}},a=["id","name","type","rotation","properties","visible","x","y","width","height"];e.exports=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=0);var o=r(e,a);if(o.x+=t,o.y+=i,e.gid){var s=n(e.gid);o.gid=s.gid,o.flippedHorizontal=s.flippedHorizontal,o.flippedVertical=s.flippedVertical,o.flippedAntiDiagonal=s.flippedAntiDiagonal}else e.polyline?o.polyline=e.polyline.map(l):e.polygon?o.polygon=e.polygon.map(l):e.ellipse?o.ellipse=e.ellipse:e.text?o.text=e.text:e.point?o.point=!0:o.rectangle=!0;return o}},292:function(e,t){var i=2147483648,r=1073741824,n=536870912;e.exports=function(e){var t=Boolean(e&i),l=Boolean(e&r),a=Boolean(e&n);e&=536870911;var o=0,s=!1;return t&&l&&a?(o=Math.PI/2,s=!0):t&&l&&!a?(o=Math.PI,s=!1):t&&!l&&a?(o=Math.PI/2,s=!1):!t||l||a?!t&&l&&a?(o=3*Math.PI/2,s=!1):t||!l||a?t||l||!a?t||l||a||(o=0,s=!1):(o=3*Math.PI/2,s=!0):(o=Math.PI,s=!0):(o=0,s=!0),{gid:e,flippedHorizontal:t,flippedVertical:l,flippedAntiDiagonal:a,rotation:o,flipped:s}}},293:function(e,t,i){var r=i(40),n=i(135),l=i(601),a=i(616);e.exports=function(e,t,i,o,s,h,c,u){void 0===i&&(i=32),void 0===o&&(o=32),void 0===s&&(s=10),void 0===h&&(h=10),void 0===u&&(u=!1);var d=null;if(Array.isArray(c))d=l(void 0!==t?t:"map",r.ARRAY_2D,c,i,o,u);else if(void 0!==t){var f=e.cache.tilemap.get(t);f?d=l(t,f.format,f.data,i,o,u):console.warn("No map data found for key "+t)}return null===d&&(d=new n({tileWidth:i,tileHeight:o,width:s,height:h})),new a(e,d)}},34:function(e,t){e.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}},40:function(e,t){e.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},578:function(e,t,i){var r=new(i(6));e.exports=function(e,t,i,n){var l=i.tilemapLayer,a=l.cullPaddingX,o=l.cullPaddingY,s=l.tilemap.tileToWorldXY(e,t,r,n,l);return s.x>n.worldView.x+l.scaleX*i.tileWidth*(-a-.5)&&s.x<n.worldView.right+l.scaleX*i.tileWidth*(a-.5)&&s.y>n.worldView.y+l.scaleY*i.tileHeight*(-o-1)&&s.y<n.worldView.bottom+l.scaleY*i.tileHeight*(o-.5)}},579:function(e,t,i){var r=i(28);e.exports=function(e,t,i,n,l,a,o){for(var s=r(i,n,l,a,null,o),h=0;h<s.length;h++)s[h]&&s[h].index===e&&(s[h].index=t)}},580:function(e,t,i){var r=i(13),n=i(149),l=i(83),a=new r;e.exports=function(e,t){var i=e.tilemapLayer.tilemap,r=e.tilemapLayer,o=Math.floor(i.tileWidth*r.scaleX),s=Math.floor(i.tileHeight*r.scaleY),h=l(t.worldView.x-r.x,o,0,!0)-r.cullPaddingX,c=n(t.worldView.right-r.x,o,0,!0)+r.cullPaddingX,u=l(t.worldView.y-r.y,s,0,!0)-r.cullPaddingY,d=n(t.worldView.bottom-r.y,s,0,!0)+r.cullPaddingY;return a.setTo(h,u,c-h,d-u)}},581:function(e,t,i){var r=i(580),n=i(176);e.exports=function(e,t,i,l){void 0===i&&(i=[]),void 0===l&&(l=0),i.length=0;var a=e.tilemapLayer,o=r(e,t);return(a.skipCull||1!==a.scrollFactorX||1!==a.scrollFactorY)&&(o.left=0,o.right=e.width,o.top=0,o.bottom=e.height),n(e,o,l,i),i}},582:function(e,t,i){var r=i(583),n=i(176);e.exports=function(e,t,i,l){void 0===i&&(i=[]),void 0===l&&(l=0),i.length=0;var a=e.tilemapLayer;if(!a.skipCull&&1===a.scrollFactorX&&1===a.scrollFactorY){var o=r(e,t);n(e,o,l,i)}return i}},583:function(e,t,i){var r=i(149),n=i(83);e.exports=function(e,t){var i=e.tilemapLayer.tilemap,l=e.tilemapLayer,a=Math.floor(i.tileWidth*l.scaleX),o=Math.floor(i.tileHeight*l.scaleY),s=e.hexSideLength,h=(o-s)/2+s;return{left:n(t.worldView.x-l.x,a,0,!0)-l.cullPaddingX,right:r(t.worldView.right-l.x,a,0,!0)+l.cullPaddingX,top:n(t.worldView.y-l.y,h,0,!0)-l.cullPaddingY,bottom:r(t.worldView.bottom-l.y,h,0,!0)+l.cullPaddingY}}},584:function(e,t,i){var r=i(578);e.exports=function(e,t,i,n){void 0===i&&(i=[]),void 0===n&&(n=0),i.length=0;var l,a,o,s=e.tilemapLayer,h=e.data,c=e.width,u=e.height,d=c,f=u;if(!s.skipCull)if(0===n){for(a=0;a<f;a++)for(l=0;h[a]&&l<d;l++)if(r(l,a,e,t)){if(!(o=h[a][l])||-1===o.index||!o.visible||0===o.alpha)continue;i.push(o)}}else if(1===n){for(a=0;a<f;a++)for(l=d;h[a]&&l>=0;l--)if(r(l,a,e,t)){if(!(o=h[a][l])||-1===o.index||!o.visible||0===o.alpha)continue;i.push(o)}}else if(2===n){for(a=f;a>=0;a--)for(l=0;h[a]&&l<d;l++)if(r(l,a,e,t)){if(!(o=h[a][l])||-1===o.index||!o.visible||0===o.alpha)continue;i.push(o)}}else if(3===n)for(a=f;a>=0;a--)for(l=d;h[a]&&l>=0;l--)if(r(l,a,e,t)){if(!(o=h[a][l])||-1===o.index||!o.visible||0===o.alpha)continue;i.push(o)}return s.tilesDrawn=i.length,s.tilesTotal=c*u,i}},585:function(e,t,i){var r=i(586),n=i(176);e.exports=function(e,t,i,l){void 0===i&&(i=[]),void 0===l&&(l=0),i.length=0;var a=e.tilemapLayer;if(!a.skipCull&&1===a.scrollFactorX&&1===a.scrollFactorY){var o=r(e,t);n(e,o,l,i)}return i}},586:function(e,t,i){var r=i(149),n=i(83);e.exports=function(e,t){var i=e.tilemapLayer.tilemap,l=e.tilemapLayer,a=Math.floor(i.tileWidth*l.scaleX),o=Math.floor(i.tileHeight*l.scaleY);return{left:n(t.worldView.x-l.x,a,0,!0)-l.cullPaddingX,right:r(t.worldView.right-l.x,a,0,!0)+l.cullPaddingX,top:n(t.worldView.y-l.y,o/2,0,!0)-l.cullPaddingY,bottom:r(t.worldView.bottom-l.y,o/2,0,!0)+l.cullPaddingY}}},587:function(e,t,i){var r=i(6);e.exports=function(e,t,i,n,l){i||(i=new r);var a=l.baseTileWidth,o=l.baseTileHeight,s=l.tilemapLayer,h=0,c=0;s&&(n||(n=s.scene.cameras.main),h=s.x+n.scrollX*(1-s.scrollFactorX),a*=s.scaleX,c=s.y+n.scrollY*(1-s.scrollFactorY),o*=s.scaleY);var u=l.hexSideLength,d=h+e*a+t%2*(a/2),f=c+t*((o-u)/2+u);return i.set(d,f)}},588:function(e,t,i){var r=i(6);e.exports=function(e,t,i,n,l){i||(i=new r);var a=l.baseTileWidth,o=l.baseTileHeight,s=l.tilemapLayer,h=0,c=0;s&&(n||(n=s.scene.cameras.main),h=s.x+n.scrollX*(1-s.scrollFactorX),a*=s.scaleX,c=s.y+n.scrollY*(1-s.scrollFactorY),o*=s.scaleY);var u=h+a/2*(e-t),d=c+(e+t)*(o/2);return i.set(u,d)}},589:function(e,t,i){var r=i(6);e.exports=function(e,t,i,n,l){i||(i=new r);var a=l.baseTileWidth,o=l.baseTileHeight,s=l.tilemapLayer,h=0,c=0;s&&(n||(n=s.scene.cameras.main),h=s.x+n.scrollX*(1-s.scrollFactorX),a*=s.scaleX,c=s.y+n.scrollY*(1-s.scrollFactorY),o*=s.scaleY);var u=h+e*a+t%2*(a/2),d=c+t*(o/2);return i.set(u,d)}},590:function(e,t,i){var r=i(284),n=i(285),l=i(6);e.exports=function(e,t,i,a,o){return i||(i=new l(0,0)),i.x=r(e,a,o),i.y=n(t,a,o),i}},591:function(e,t){e.exports=function(e,t,i){var r=i.baseTileHeight,n=i.tilemapLayer,l=0;n&&(void 0===t&&(t=n.scene.cameras.main),l=n.y+t.scrollY*(1-n.scrollFactorY),r*=n.scaleY);var a=n.tilemap.hexSideLength;return l+e*((r-a)/2+a)}},592:function(e,t){e.exports=function(e,t,i){var r=i.baseTileHeight,n=i.tilemapLayer,l=0;return n&&(void 0===t&&(t=n.scene.cameras.main),l=n.y+t.scrollY*(1-n.scrollFactorY),r*=n.scaleY),l+e*(r/2)}},593:function(e,t,i){var r=i(6);e.exports=function(e,t,i,n,l,a){n||(n=new r);var o=a.baseTileWidth,s=a.baseTileHeight,h=a.tilemapLayer;h&&(l||(l=h.scene.cameras.main),t-=h.y+l.scrollY*(1-h.scrollFactorY),s*=h.scaleY,e-=h.x+l.scrollX*(1-h.scrollFactorX),o*=h.scaleX);var c=a.hexSideLength,u=(s-c)/2+c,d=i?Math.floor(t/u):t/u,f=i?Math.floor((e-d%2*.5*o)/o):(e-d%2*.5*o)/o;return n.set(f,d)}},594:function(e,t,i){var r=i(6);e.exports=function(e,t,i,n,l,a){n||(n=new r);var o=a.baseTileWidth,s=a.baseTileHeight,h=a.tilemapLayer;h&&(l||(l=h.scene.cameras.main),t-=h.y+l.scrollY*(1-h.scrollFactorY),s*=h.scaleY,e-=h.x+l.scrollX*(1-h.scrollFactorX),o*=h.scaleX);var c=i?Math.floor((e/(o/2)+t/(s/2))/2):(e/(o/2)+t/(s/2))/2,u=i?Math.floor((t/(s/2)-e/(o/2))/2):(t/(s/2)-e/(o/2))/2;return n.set(c,u)}},595:function(e,t,i){var r=i(6);e.exports=function(e,t,i,n,l,a){n||(n=new r);var o=a.baseTileWidth,s=a.baseTileHeight,h=a.tilemapLayer;h&&(l||(l=h.scene.cameras.main),t-=h.y+l.scrollY*(1-h.scrollFactorY),s*=h.scaleY,e-=h.x+l.scrollX*(1-h.scrollFactorX),o*=h.scaleX);var c=i?Math.floor(t/(s/2)):t/(s/2),u=i?Math.floor((e+c%2*.5*o)/o):(e+c%2*.5*o)/o;return n.set(u,c)}},596:function(e,t,i){var r=i(286),n=i(287),l=i(6);e.exports=function(e,t,i,a,o,s){return void 0===i&&(i=!0),a||(a=new l(0,0)),a.x=r(e,i,o,s),a.y=n(t,i,o,s),a}},597:function(e,t){e.exports=function(e,t,i,r){var n=r.baseTileHeight,l=r.tilemapLayer;l&&(i||(i=l.scene.cameras.main),e-=l.y+i.scrollY*(1-l.scrollFactorY),n*=l.scaleY);var a=r.hexSideLength,o=(n-a)/2+a;return t?Math.floor(e/o):e/o}},598:function(e,t){e.exports=function(e,t,i,r){var n=r.baseTileHeight,l=r.tilemapLayer;return l&&(i||(i=l.scene.cameras.main),e-=l.y+i.scrollY*(1-l.scrollFactorY),n*=l.scaleY),t?Math.floor(e/(n/2)):e/(n/2)}},599:function(e,t,i){var r=i(133);e.exports=function(e,t,i){if(r(e,t,i)){var n=i.data[t][e];return null!==n&&n.index>-1}return!1}},600:function(e,t,i){var r=i(91),n=i(133),l=i(283);e.exports=function(e,t,i,a,o){if(void 0===i&&(i=!0),void 0===a&&(a=!0),!n(e,t,o))return null;var s=o.data[t][e];return s?(o.data[t][e]=i?null:new r(o,-1,e,t,o.tileWidth,o.tileHeight),a&&s&&s.collides&&l(e,t,o),s):null}},601:function(e,t,i){var r=i(40),n=i(290),l=i(602),a=i(603),o=i(613);e.exports=function(e,t,i,s,h,c){var u;switch(t){case r.ARRAY_2D:u=n(e,i,s,h,c);break;case r.CSV:u=l(e,i,s,h,c);break;case r.TILED_JSON:u=a(e,i,c);break;case r.WELTMEISTER:u=o(e,i,c);break;default:console.warn("Unrecognized tilemap data format: "+t),u=null}return u}},602:function(e,t,i){var r=i(40),n=i(290);e.exports=function(e,t,i,l,a){var o=t.trim().split("\n").map((function(e){return e.split(",")})),s=n(e,o,i,l,a);return s.format=r.CSV,s}},603:function(e,t,i){var r=i(604),n=i(605),l=i(34),a=i(40),o=i(289),s=i(135),h=i(606),c=i(607),u=i(609),d=i(611);e.exports=function(e,t,i){var f=new s({width:t.width,height:t.height,name:e,tileWidth:t.tilewidth,tileHeight:t.tileheight,orientation:o(t.orientation),format:a.TILED_JSON,version:t.version,properties:t.properties,renderOrder:t.renderorder,infinite:t.infinite});f.orientation===l.HEXAGONAL&&(f.hexSideLength=t.hexsidelength),f.layers=u(t,i),f.images=h(t);var p=d(t);return f.tilesets=p.tilesets,f.imageCollections=p.imageCollections,f.objects=c(t),f.tiles=n(f),r(f),f}},604:function(e,t,i){var r=i(20);e.exports=function(e){for(var t,i,n,l,a,o=0;o<e.layers.length;o++){t=e.layers[o],l=null;for(var s=0;s<t.data.length;s++){a=t.data[s];for(var h=0;h<a.length;h++)null===(i=a[h])||i.index<0||(n=e.tiles[i.index][2],l=e.tilesets[n],i.width=l.tileWidth,i.height=l.tileHeight,l.tileProperties&&l.tileProperties[i.index-l.firstgid]&&(i.properties=r(i.properties,l.tileProperties[i.index-l.firstgid])))}}}},605:function(e,t,i){var r=i(136);e.exports=function(e){var t,i,n=[];for(t=0;t<e.imageCollections.length;t++)for(var l=e.imageCollections[t],a=l.images,o=0;o<a.length;o++){var s=a[o];(i=new r(s.image,s.gid,l.imageWidth,l.imageHeight,0,0)).updateTileData(l.imageWidth,l.imageHeight),e.tilesets.push(i)}for(t=0;t<e.tilesets.length;t++)for(var h=(i=e.tilesets[t]).tileMargin,c=i.tileMargin,u=0,d=0,f=0,p=i.firstgid;p<i.firstgid+i.total&&(n[p]=[h,c,t],h+=i.tileWidth+i.tileSpacing,++u!==i.total)&&(++d!==i.columns||(h=i.tileMargin,c+=i.tileHeight+i.tileSpacing,d=0,++f!==i.rows));p++);return n}},606:function(e,t,i){var r=i(5),n=i(178);e.exports=function(e){for(var t=[],i=[],l=n(e);l.i<l.layers.length||i.length>0;)if(l.i>=l.layers.length){if(i.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}l=i.pop()}else{var a=l.layers[l.i];if(l.i++,"imagelayer"===a.type){var o=r(a,"offsetx",0)+r(a,"startx",0),s=r(a,"offsety",0)+r(a,"starty",0);t.push({name:l.name+a.name,image:a.image,x:l.x+o+a.x,y:l.y+s+a.y,alpha:l.opacity*a.opacity,visible:l.visible&&a.visible,properties:r(a,"properties",{})})}else if("group"===a.type){var h=n(e,a,l);i.push(l),l=h}}return t}},607:function(e,t,i){var r=i(5),n=i(291),l=i(608),a=i(178);e.exports=function(e){for(var t=[],i=[],o=a(e);o.i<o.layers.length||i.length>0;)if(o.i>=o.layers.length){if(i.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}o=i.pop()}else{var s=o.layers[o.i];if(o.i++,s.opacity*=o.opacity,s.visible=o.visible&&s.visible,"objectgroup"===s.type){s.name=o.name+s.name;for(var h=o.x+r(s,"startx",0)+r(s,"offsetx",0),c=o.y+r(s,"starty",0)+r(s,"offsety",0),u=[],d=0;d<s.objects.length;d++){var f=n(s.objects[d],h,c);u.push(f)}var p=new l(s);p.objects=u,t.push(p)}else if("group"===s.type){var g=a(e,s,o);i.push(o),o=g}}return t}},608:function(e,t,i){var r=i(3),n=i(5),l=new r({initialize:function(e){void 0===e&&(e={}),this.name=n(e,"name","object layer"),this.opacity=n(e,"opacity",1),this.properties=n(e,"properties",{}),this.propertyTypes=n(e,"propertytypes",{}),this.type=n(e,"type","objectgroup"),this.visible=n(e,"visible",!0),this.objects=n(e,"objects",[])}});e.exports=l},609:function(e,t,i){var r=i(610),n=i(34),l=i(178),a=i(289),o=i(5),s=i(134),h=i(292),c=i(91);e.exports=function(e,t){for(var i=o(e,"infinite",!1),u=[],d=[],f=l(e);f.i<f.layers.length||d.length>0;)if(f.i>=f.layers.length){if(d.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}f=d.pop()}else{var p=f.layers[f.i];if(f.i++,"tilelayer"===p.type)if(p.compression)console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+p.name+"'");else{if(p.encoding&&"base64"===p.encoding){if(p.chunks)for(var g=0;g<p.chunks.length;g++)p.chunks[g].data=r(p.chunks[g].data);p.data&&(p.data=r(p.data)),delete p.encoding}var y,v,x,m,T=[],w=0;if(i){var L=o(p,"startx",0)+p.x,b=o(p,"starty",0)+p.y;(y=new s({name:f.name+p.name,x:f.x+o(p,"offsetx",0)+L*e.tilewidth,y:f.y+o(p,"offsety",0)+b*e.tileheight,width:p.width,height:p.height,tileWidth:e.tilewidth,tileHeight:e.tileheight,alpha:f.opacity*p.opacity,visible:f.visible&&p.visible,properties:o(p,"properties",[]),orientation:a(e.orientation)})).orientation===n.HEXAGONAL&&(y.hexSideLength=e.hexsidelength);for(var W=0;W<p.height;W++){T.push([null]);for(var A=0;A<p.width;A++)T[W][A]=null}for(W=0,G=p.chunks.length;W<G;W++)for(var C=p.chunks[W],Y=C.x-L,X=C.y-b,I=0,S=0,O=C.data.length;S<O;S++){var H=w+Y,F=I+X;(v=h(C.data[S])).gid>0?((x=new c(y,v.gid,H,F,e.tilewidth,e.tileheight)).rotation=v.rotation,x.flipX=v.flipped,T[F][H]=x):(m=t?null:new c(y,-1,H,F,e.tilewidth,e.tileheight),T[F][H]=m),++w===C.width&&(I++,w=0)}}else{(y=new s({name:f.name+p.name,x:f.x+o(p,"offsetx",0)+p.x,y:f.y+o(p,"offsety",0)+p.y,width:p.width,height:p.height,tileWidth:e.tilewidth,tileHeight:e.tileheight,alpha:f.opacity*p.opacity,visible:f.visible&&p.visible,properties:o(p,"properties",[]),orientation:a(e.orientation)})).orientation===n.HEXAGONAL&&(y.hexSideLength=e.hexsidelength);for(var R=[],P=0,G=p.data.length;P<G;P++)(v=h(p.data[P])).gid>0?((x=new c(y,v.gid,w,T.length,e.tilewidth,e.tileheight)).rotation=v.rotation,x.flipX=v.flipped,R.push(x)):(m=t?null:new c(y,-1,w,T.length,e.tilewidth,e.tileheight),R.push(m)),++w===p.width&&(T.push(R),w=0,R=[])}y.data=T,u.push(y)}else if("group"===p.type){var D=l(e,p,f);d.push(f),f=D}}return u}},610:function(e,t){e.exports=function(e){for(var t=window.atob(e),i=t.length,r=new Array(i/4),n=0;n<i;n+=4)r[n/4]=(t.charCodeAt(n)|t.charCodeAt(n+1)<<8|t.charCodeAt(n+2)<<16|t.charCodeAt(n+3)<<24)>>>0;return r}},611:function(e,t,i){var r=i(136),n=i(612),l=i(291),a=i(1534);e.exports=function(e){for(var t,i=[],o=[],s=null,h=0;h<e.tilesets.length;h++){var c=e.tilesets[h];if(c.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(c.image){var u=new r(c.name,c.firstgid,c.tilewidth,c.tileheight,c.margin,c.spacing);if(e.version>1){var d=void 0,f=void 0;if(Array.isArray(c.tiles)){d=d||{},f=f||{};for(var p=0;p<c.tiles.length;p++){var g=c.tiles[p];if(g.properties){var y={};g.properties.forEach((function(e){y[e.name]=e.value})),f[g.id]=y}if(g.objectgroup&&((d[g.id]||(d[g.id]={})).objectgroup=g.objectgroup,g.objectgroup.objects)){var v=g.objectgroup.objects.map((function(e){return l(e)}));d[g.id].objectgroup.objects=v}g.animation&&((d[g.id]||(d[g.id]={})).animation=g.animation),g.type&&((d[g.id]||(d[g.id]={})).type=g.type)}}Array.isArray(c.wangsets)&&(d=d||{},f=f||{},a(c.wangsets,d)),d&&(u.tileData=d,u.tileProperties=f)}else if(c.tileproperties&&(u.tileProperties=c.tileproperties),c.tiles)for(t in u.tileData=c.tiles,u.tileData){var x=u.tileData[t].objectgroup;if(x&&x.objects){var m=x.objects.map((function(e){return l(e)}));u.tileData[t].objectgroup.objects=m}}u.updateTileData(c.imagewidth,c.imageheight),i.push(u)}else{var T=new n(c.name,c.firstgid,c.tilewidth,c.tileheight,c.margin,c.spacing,c.properties),w=0;for(p=0;p<c.tiles.length;p++){var L=(g=c.tiles[p]).image,b=parseInt(g.id,10),W=c.firstgid+b;T.addImage(W,L),w=Math.max(b,w)}T.maxId=w,o.push(T)}s&&(s.lastgid=c.firstgid-1),s=c}return{tilesets:i,imageCollections:o}}},612:function(e,t,i){var r=new(i(3))({initialize:function(e,t,i,r,n,l,a){(void 0===i||i<=0)&&(i=32),(void 0===r||r<=0)&&(r=32),void 0===n&&(n=0),void 0===l&&(l=0),this.name=e,this.firstgid=0|t,this.imageWidth=0|i,this.imageHeight=0|r,this.imageMargin=0|n,this.imageSpacing=0|l,this.properties=a||{},this.images=[],this.total=0},containsImageIndex:function(e){return e>=this.firstgid&&e<this.firstgid+this.total},addImage:function(e,t){return this.images.push({gid:e,image:t}),this.total++,this}});e.exports=r},613:function(e,t,i){var r=i(40),n=i(135),l=i(614),a=i(615);e.exports=function(e,t,i){if(0===t.layer.length)return console.warn("No layers found in the Weltmeister map: "+e),null;for(var o=0,s=0,h=0;h<t.layer.length;h++)t.layer[h].width>o&&(o=t.layer[h].width),t.layer[h].height>s&&(s=t.layer[h].height);var c=new n({width:o,height:s,name:e,tileWidth:t.layer[0].tilesize,tileHeight:t.layer[0].tilesize,format:r.WELTMEISTER});return c.layers=l(t,i),c.tilesets=a(t),c}},614:function(e,t,i){var r=i(134),n=i(91);e.exports=function(e,t){for(var i=[],l=0;l<e.layer.length;l++){for(var a=e.layer[l],o=new r({name:a.name,width:a.width,height:a.height,tileWidth:a.tilesize,tileHeight:a.tilesize,visible:1===a.visible}),s=[],h=[],c=0;c<a.data.length;c++){for(var u=0;u<a.data[c].length;u++){var d,f=a.data[c][u]-1;d=f>-1?new n(o,f,u,c,a.tilesize,a.tilesize):t?null:new n(o,-1,u,c,a.tilesize,a.tilesize),s.push(d)}h.push(s),s=[]}o.data=h,i.push(o)}return i}},615:function(e,t,i){var r=i(136);e.exports=function(e){for(var t=[],i=[],n=0;n<e.layer.length;n++){var l=e.layer[n],a=l.tilesetName;""!==a&&-1===i.indexOf(a)&&(i.push(a),t.push(new r(a,0,l.tilesize,l.tilesize,0,0)))}return t}},616:function(e,t,i){var r=i(3),n=i(42),l=i(40),a=i(5),o=i(134),s=i(34),h=i(381),c=i(81),u=i(67),d=i(91),f=i(282),p=i(617),g=i(136),y=new r({initialize:function(e,t){this.scene=e,this.tileWidth=t.tileWidth,this.tileHeight=t.tileHeight,this.width=t.width,this.height=t.height,this.orientation=t.orientation,this.renderOrder=t.renderOrder,this.format=t.format,this.version=t.version,this.properties=t.properties,this.widthInPixels=t.widthInPixels,this.heightInPixels=t.heightInPixels,this.imageCollections=t.imageCollections,this.images=t.images,this.layers=t.layers,this.tilesets=t.tilesets,this.objects=t.objects,this.currentLayerIndex=0,this.hexSideLength=t.hexSideLength;var i=this.orientation;this._convert={WorldToTileXY:f.GetWorldToTileXYFunction(i),WorldToTileX:f.GetWorldToTileXFunction(i),WorldToTileY:f.GetWorldToTileYFunction(i),TileToWorldXY:f.GetTileToWorldXYFunction(i),TileToWorldX:f.GetTileToWorldXFunction(i),TileToWorldY:f.GetTileToWorldYFunction(i)}},createBlankDynamicLayer:function(e,t,i,r,n,l,a,o){return console.warn("createBlankDynamicLayer is deprecated. Use createBlankLayer"),this.createBlankLayer(e,t,i,r,n,l,a,o)},createDynamicLayer:function(e,t,i,r){return console.warn("createDynamicLayer is deprecated. Use createLayer"),this.createLayer(e,t,i,r)},createStaticLayer:function(e,t,i,r){return console.warn("createStaticLayer is deprecated. Use createLayer"),this.createLayer(e,t,i,r)},setRenderOrder:function(e){var t=["right-down","left-down","right-up","left-up"];return"number"==typeof e&&(e=t[e]),t.indexOf(e)>-1&&(this.renderOrder=e),this},addTilesetImage:function(e,t,i,r,n,a,o){if(void 0===e)return null;if(null==t&&(t=e),!this.scene.sys.textures.exists(t))return console.warn("Invalid Tileset Image: "+t),null;var s=this.scene.sys.textures.get(t),h=this.getTilesetIndex(e);if(null===h&&this.format===l.TILED_JSON)return console.warn("No data found for Tileset: "+e),null;var c=this.tilesets[h];return c?(c.setTileSize(i,r),c.setSpacing(n,a),c.setImage(s),c):(void 0===i&&(i=this.tileWidth),void 0===r&&(r=this.tileHeight),void 0===n&&(n=0),void 0===a&&(a=0),void 0===o&&(o=0),(c=new g(e,o,i,r,n,a)).setImage(s),this.tilesets.push(c),c)},copy:function(e,t,i,r,n,l,a,o){return null!==(o=this.getLayer(o))?(f.Copy(e,t,i,r,n,l,a,o),this):null},createBlankLayer:function(e,t,i,r,n,l,a,s){if(void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=this.width),void 0===l&&(l=this.height),void 0===a&&(a=this.tileWidth),void 0===s&&(s=this.tileHeight),null!==this.getLayerIndex(e))return console.warn("Invalid Tilemap Layer ID: "+e),null;for(var h,c=new o({name:e,tileWidth:a,tileHeight:s,width:n,height:l,orientation:this.orientation}),u=0;u<l;u++){h=[];for(var f=0;f<n;f++)h.push(new d(c,-1,f,u,a,s,this.tileWidth,this.tileHeight));c.data.push(h)}this.layers.push(c),this.currentLayerIndex=this.layers.length-1;var g=new p(this.scene,this,this.currentLayerIndex,t,i,r);return g.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(g),g},createLayer:function(e,t,i,r){var n=this.getLayerIndex(e);if(null===n)return console.warn("Invalid Tilemap Layer ID: "+e),"string"==typeof e&&console.warn("Valid tilelayer names:\n\t"+this.getTileLayerNames().join(",\n\t")),null;var l=this.layers[n];if(l.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+e),null;this.currentLayerIndex=n,void 0===i&&(i=l.x),void 0===r&&(r=l.y);var a=new p(this.scene,this,n,t,i,r);return a.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(a),a},createFromObjects:function(e,t){var i=[],r=this.getObjectLayer(e);if(!r)return console.warn("createFromObjects: Invalid objectLayerName given: "+e),i;Array.isArray(t)||(t=[t]);for(var l=r.objects,o=0;o<t.length;o++){for(var s,c=t[o],d=a(c,"id",null),f=a(c,"gid",null),p=a(c,"name",null),g=[],y=0;y<l.length;y++)s=l[y],(null===d&&null===f&&null===p||null!==d&&s.id===d||null!==f&&s.gid===f||null!==p&&s.name===p)&&g.push(s);for(var v=a(c,"classType",u),x=a(c,"scene",this.scene),m=a(c,"container",null),T=a(c,"key",null),w=a(c,"frame",null),L=0;L<g.length;L++){s=g[L];var b=new v(x);b.setName(s.name),b.setPosition(s.x,s.y),b.setTexture(T,w),s.width&&(b.displayWidth=s.width),s.height&&(b.displayHeight=s.height);var W={x:b.originX*s.width,y:(b.originY-1)*s.height};if(s.rotation){var A=n(s.rotation);h(W,A),b.rotation=A}if(b.x+=W.x,b.y+=W.y,void 0===s.flippedHorizontal&&void 0===s.flippedVertical||b.setFlip(s.flippedHorizontal,s.flippedVertical),s.visible||(b.visible=!1),Array.isArray(s.properties))s.properties.forEach((function(e){var t=e.name;void 0!==b[t]?b[t]=e.value:b.setData(t,e.value)}));else for(var C in s.properties)void 0!==b[C]?b[C]=s.properties[C]:b.setData(C,s.properties[C]);m?m.add(b):x.add.existing(b),i.push(b)}}return i},createFromTiles:function(e,t,i,r,n,l){return null===(l=this.getLayer(l))?null:f.CreateFromTiles(e,t,i,r,n,l)},fill:function(e,t,i,r,n,l,a){return void 0===l&&(l=!0),null===(a=this.getLayer(a))?null:(f.Fill(e,t,i,r,n,l,a),this)},filterObjects:function(e,t,i){if("string"==typeof e){var r=e;if(!(e=this.getObjectLayer(e)))return console.warn("No object layer found with the name: "+r),null}return e.objects.filter(t,i)},filterTiles:function(e,t,i,r,n,l,a,o){return null===(o=this.getLayer(o))?null:f.FilterTiles(e,t,i,r,n,l,a,o)},findByIndex:function(e,t,i,r){return null===(r=this.getLayer(r))?null:f.FindByIndex(e,t,i,r)},findObject:function(e,t,i){if("string"==typeof e){var r=e;if(!(e=this.getObjectLayer(e)))return console.warn("No object layer found with the name: "+r),null}return e.objects.find(t,i)||null},findTile:function(e,t,i,r,n,l,a,o){return null===(o=this.getLayer(o))?null:f.FindTile(e,t,i,r,n,l,a,o)},forEachTile:function(e,t,i,r,n,l,a,o){return null===(o=this.getLayer(o))?null:(f.ForEachTile(e,t,i,r,n,l,a,o),this)},getImageIndex:function(e){return this.getIndex(this.images,e)},getImageLayerNames:function(){return this.images&&Array.isArray(this.images)?this.images.map((function(e){return e.name})):[]},getIndex:function(e,t){for(var i=0;i<e.length;i++)if(e[i].name===t)return i;return null},getLayer:function(e){var t=this.getLayerIndex(e);return null!==t?this.layers[t]:null},getObjectLayer:function(e){var t=this.getIndex(this.objects,e);return null!==t?this.objects[t]:null},getObjectLayerNames:function(){return this.objects&&Array.isArray(this.objects)?this.objects.map((function(e){return e.name})):[]},getLayerIndex:function(e){return void 0===e?this.currentLayerIndex:"string"==typeof e?this.getLayerIndexByName(e):"number"==typeof e&&e<this.layers.length?e:e instanceof p?e.layerIndex:null},getLayerIndexByName:function(e){return this.getIndex(this.layers,e)},getTileAt:function(e,t,i,r){return null===(r=this.getLayer(r))?null:f.GetTileAt(e,t,i,r)},getTileAtWorldXY:function(e,t,i,r,n){return null===(n=this.getLayer(n))?null:f.GetTileAtWorldXY(e,t,i,r,n)},getTileLayerNames:function(){return this.layers&&Array.isArray(this.layers)?this.layers.map((function(e){return e.name})):[]},getTilesWithin:function(e,t,i,r,n,l){return null===(l=this.getLayer(l))?null:f.GetTilesWithin(e,t,i,r,n,l)},getTilesWithinShape:function(e,t,i,r){return null===(r=this.getLayer(r))?null:f.GetTilesWithinShape(e,t,i,r)},getTilesWithinWorldXY:function(e,t,i,r,n,l,a){return null===(a=this.getLayer(a))?null:f.GetTilesWithinWorldXY(e,t,i,r,n,l,a)},getTileset:function(e){var t=this.getIndex(this.tilesets,e);return null!==t?this.tilesets[t]:null},getTilesetIndex:function(e){return this.getIndex(this.tilesets,e)},hasTileAt:function(e,t,i){return null===(i=this.getLayer(i))?null:f.HasTileAt(e,t,i)},hasTileAtWorldXY:function(e,t,i,r){return null===(r=this.getLayer(r))?null:f.HasTileAtWorldXY(e,t,i,r)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(e){this.setLayer(e)}},putTileAt:function(e,t,i,r,n){return void 0===r&&(r=!0),null===(n=this.getLayer(n))?null:f.PutTileAt(e,t,i,r,n)},putTileAtWorldXY:function(e,t,i,r,n,l){return void 0===r&&(r=!0),null===(l=this.getLayer(l))?null:f.PutTileAtWorldXY(e,t,i,r,n,l)},putTilesAt:function(e,t,i,r,n){return void 0===r&&(r=!0),null===(n=this.getLayer(n))?null:(f.PutTilesAt(e,t,i,r,n),this)},randomize:function(e,t,i,r,n,l){return null===(l=this.getLayer(l))?null:(f.Randomize(e,t,i,r,n,l),this)},calculateFacesAt:function(e,t,i){return null===(i=this.getLayer(i))?null:(f.CalculateFacesAt(e,t,i),this)},calculateFacesWithin:function(e,t,i,r,n){return null===(n=this.getLayer(n))?null:(f.CalculateFacesWithin(e,t,i,r,n),this)},removeLayer:function(e){var t=this.getLayerIndex(e);if(null!==t){c(this.layers,t);for(var i=t;i<this.layers.length;i++)this.layers[i].tilemapLayer&&this.layers[i].tilemapLayer.layerIndex--;return this.currentLayerIndex===t&&(this.currentLayerIndex=0),this}return null},destroyLayer:function(e){var t=this.getLayerIndex(e);return null!==t?((e=this.layers[t]).destroy(),c(this.layers,t),this.currentLayerIndex===t&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var e=this.layers,t=0;t<e.length;t++)e[t].tilemapLayer&&e[t].tilemapLayer.destroy(!1);return e.length=0,this.currentLayerIndex=0,this},removeTile:function(e,t,i){void 0===t&&(t=-1),void 0===i&&(i=!0);var r=[];Array.isArray(e)||(e=[e]);for(var n=0;n<e.length;n++){var l=e[n];r.push(this.removeTileAt(l.x,l.y,!0,i,l.tilemapLayer)),t>-1&&this.putTileAt(t,l.x,l.y,i,l.tilemapLayer)}return r},removeTileAt:function(e,t,i,r,n){return void 0===i&&(i=!0),void 0===r&&(r=!0),null===(n=this.getLayer(n))?null:f.RemoveTileAt(e,t,i,r,n)},removeTileAtWorldXY:function(e,t,i,r,n,l){return void 0===i&&(i=!0),void 0===r&&(r=!0),null===(l=this.getLayer(l))?null:f.RemoveTileAtWorldXY(e,t,i,r,n,l)},renderDebug:function(e,t,i){return null===(i=this.getLayer(i))?null:(this.orientation===s.ORTHOGONAL&&f.RenderDebug(e,t,i),this)},renderDebugFull:function(e,t){for(var i=this.layers,r=0;r<i.length;r++)f.RenderDebug(e,t,i[r]);return this},replaceByIndex:function(e,t,i,r,n,l,a){return null===(a=this.getLayer(a))?null:(f.ReplaceByIndex(e,t,i,r,n,l,a),this)},setCollision:function(e,t,i,r,n){return void 0===t&&(t=!0),void 0===i&&(i=!0),void 0===n&&(n=!0),null===(r=this.getLayer(r))?null:(f.SetCollision(e,t,i,r,n),this)},setCollisionBetween:function(e,t,i,r,n){return void 0===i&&(i=!0),void 0===r&&(r=!0),null===(n=this.getLayer(n))?null:(f.SetCollisionBetween(e,t,i,r,n),this)},setCollisionByProperty:function(e,t,i,r){return void 0===t&&(t=!0),void 0===i&&(i=!0),null===(r=this.getLayer(r))?null:(f.SetCollisionByProperty(e,t,i,r),this)},setCollisionByExclusion:function(e,t,i,r){return void 0===t&&(t=!0),void 0===i&&(i=!0),null===(r=this.getLayer(r))?null:(f.SetCollisionByExclusion(e,t,i,r),this)},setCollisionFromCollisionGroup:function(e,t,i){return void 0===e&&(e=!0),void 0===t&&(t=!0),null===(i=this.getLayer(i))?null:(f.SetCollisionFromCollisionGroup(e,t,i),this)},setTileIndexCallback:function(e,t,i,r){return null===(r=this.getLayer(r))?null:(f.SetTileIndexCallback(e,t,i,r),this)},setTileLocationCallback:function(e,t,i,r,n,l,a){return null===(a=this.getLayer(a))?null:(f.SetTileLocationCallback(e,t,i,r,n,l,a),this)},setLayer:function(e){var t=this.getLayerIndex(e);return null!==t&&(this.currentLayerIndex=t),this},setBaseTileSize:function(e,t){this.tileWidth=e,this.tileHeight=t,this.widthInPixels=this.width*e,this.heightInPixels=this.height*t;for(var i=0;i<this.layers.length;i++){this.layers[i].baseTileWidth=e,this.layers[i].baseTileHeight=t;for(var r=this.layers[i].data,n=this.layers[i].width,l=this.layers[i].height,a=0;a<l;a++)for(var o=0;o<n;o++){var s=r[a][o];null!==s&&s.setSize(void 0,void 0,e,t)}}return this},setLayerTileSize:function(e,t,i){if(null===(i=this.getLayer(i)))return this;i.tileWidth=e,i.tileHeight=t;for(var r=i.data,n=i.width,l=i.height,a=0;a<l;a++)for(var o=0;o<n;o++){var s=r[a][o];null!==s&&s.setSize(e,t)}return this},shuffle:function(e,t,i,r,n){return null===(n=this.getLayer(n))?null:(f.Shuffle(e,t,i,r,n),this)},swapByIndex:function(e,t,i,r,n,l,a){return null===(a=this.getLayer(a))?null:(f.SwapByIndex(e,t,i,r,n,l,a),this)},tileToWorldX:function(e,t,i){return null===(i=this.getLayer(i))?null:this._convert.TileToWorldX(e,t,i)},tileToWorldY:function(e,t,i){return null===(i=this.getLayer(i))?null:this._convert.TileToWorldY(e,t,i)},tileToWorldXY:function(e,t,i,r,n){return null===(n=this.getLayer(n))?null:this._convert.TileToWorldXY(e,t,i,r,n)},weightedRandomize:function(e,t,i,r,n,l){return null===(l=this.getLayer(l))?null:(f.WeightedRandomize(t,i,r,n,e,l),this)},worldToTileX:function(e,t,i,r){return null===(r=this.getLayer(r))?null:this._convert.WorldToTileX(e,t,i,r)},worldToTileY:function(e,t,i,r){return null===(r=this.getLayer(r))?null:this._convert.WorldToTileY(e,t,i,r)},worldToTileXY:function(e,t,i,r,n,l){return null===(l=this.getLayer(l))?null:this._convert.WorldToTileXY(e,t,i,r,n,l)},destroy:function(){this.removeAllLayers(),this.tilesets.length=0,this.objects.length=0,this.scene=null}});e.exports=y},617:function(e,t,i){var r=i(3),n=i(14),l=i(16),a=i(282),o=i(1537),s=new r({Extends:l,Mixins:[n.Alpha,n.BlendMode,n.ComputedSize,n.Depth,n.Flip,n.GetBounds,n.Origin,n.Pipeline,n.Transform,n.Visible,n.ScrollFactor,o],initialize:function(e,t,i,r,n,o){l.call(this,e,"TilemapLayer"),this.isTilemap=!0,this.tilemap=t,this.layerIndex=i,this.layer=t.layers[i],this.layer.tilemapLayer=this,this.tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=a.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.setTilesets(r),this.setAlpha(this.layer.alpha),this.setPosition(n,o),this.setOrigin(),this.setSize(t.tileWidth*this.layer.width,t.tileHeight*this.layer.height),this.initPipeline()},setTilesets:function(e){var t=[],i=[],r=this.tilemap;Array.isArray(e)||(e=[e]);for(var n=0;n<e.length;n++){var l=e[n];if("string"==typeof l&&(l=r.getTileset(l)),l){i.push(l);for(var a=l.firstgid,o=0;o<l.total;o++)t[a+o]=l}}this.gidMap=t,this.tileset=i},setRenderOrder:function(e){return"string"==typeof e&&(e=["right-down","left-down","right-up","left-up"].indexOf(e)),e>=0&&e<4&&(this._renderOrder=e),this},calculateFacesAt:function(e,t){return a.CalculateFacesAt(e,t,this.layer),this},calculateFacesWithin:function(e,t,i,r){return a.CalculateFacesWithin(e,t,i,r,this.layer),this},createFromTiles:function(e,t,i,r,n){return a.CreateFromTiles(e,t,i,r,n,this.layer)},cull:function(e){return this.cullCallback(this.layer,e,this.culledTiles,this._renderOrder)},copy:function(e,t,i,r,n,l,o){return a.Copy(e,t,i,r,n,l,o,this.layer),this},fill:function(e,t,i,r,n,l){return a.Fill(e,t,i,r,n,l,this.layer),this},filterTiles:function(e,t,i,r,n,l,o){return a.FilterTiles(e,t,i,r,n,l,o,this.layer)},findByIndex:function(e,t,i){return a.FindByIndex(e,t,i,this.layer)},findTile:function(e,t,i,r,n,l,o){return a.FindTile(e,t,i,r,n,l,o,this.layer)},forEachTile:function(e,t,i,r,n,l,o){return a.ForEachTile(e,t,i,r,n,l,o,this.layer),this},getTileAt:function(e,t,i){return a.GetTileAt(e,t,i,this.layer)},getTileAtWorldXY:function(e,t,i,r){return a.GetTileAtWorldXY(e,t,i,r,this.layer)},getTilesWithin:function(e,t,i,r,n){return a.GetTilesWithin(e,t,i,r,n,this.layer)},getTilesWithinShape:function(e,t,i){return a.GetTilesWithinShape(e,t,i,this.layer)},getTilesWithinWorldXY:function(e,t,i,r,n,l){return a.GetTilesWithinWorldXY(e,t,i,r,n,l,this.layer)},hasTileAt:function(e,t){return a.HasTileAt(e,t,this.layer)},hasTileAtWorldXY:function(e,t,i){return a.HasTileAtWorldXY(e,t,i,this.layer)},putTileAt:function(e,t,i,r){return a.PutTileAt(e,t,i,r,this.layer)},putTileAtWorldXY:function(e,t,i,r,n){return a.PutTileAtWorldXY(e,t,i,r,n,this.layer)},putTilesAt:function(e,t,i,r){return a.PutTilesAt(e,t,i,r,this.layer),this},randomize:function(e,t,i,r,n){return a.Randomize(e,t,i,r,n,this.layer),this},removeTileAt:function(e,t,i,r){return a.RemoveTileAt(e,t,i,r,this.layer)},removeTileAtWorldXY:function(e,t,i,r,n){return a.RemoveTileAtWorldXY(e,t,i,r,n,this.layer)},renderDebug:function(e,t){return a.RenderDebug(e,t,this.layer),this},replaceByIndex:function(e,t,i,r,n,l){return a.ReplaceByIndex(e,t,i,r,n,l,this.layer),this},setSkipCull:function(e){return void 0===e&&(e=!0),this.skipCull=e,this},setCullPadding:function(e,t){return void 0===e&&(e=1),void 0===t&&(t=1),this.cullPaddingX=e,this.cullPaddingY=t,this},setCollision:function(e,t,i,r){return a.SetCollision(e,t,i,this.layer,r),this},setCollisionBetween:function(e,t,i,r){return a.SetCollisionBetween(e,t,i,r,this.layer),this},setCollisionByProperty:function(e,t,i){return a.SetCollisionByProperty(e,t,i,this.layer),this},setCollisionByExclusion:function(e,t,i){return a.SetCollisionByExclusion(e,t,i,this.layer),this},setCollisionFromCollisionGroup:function(e,t){return a.SetCollisionFromCollisionGroup(e,t,this.layer),this},setTileIndexCallback:function(e,t,i){return a.SetTileIndexCallback(e,t,i,this.layer),this},setTileLocationCallback:function(e,t,i,r,n,l){return a.SetTileLocationCallback(e,t,i,r,n,l,this.layer),this},shuffle:function(e,t,i,r){return a.Shuffle(e,t,i,r,this.layer),this},swapByIndex:function(e,t,i,r,n,l){return a.SwapByIndex(e,t,i,r,n,l,this.layer),this},tileToWorldX:function(e,t){return this.tilemap.tileToWorldX(e,t,this)},tileToWorldY:function(e,t){return this.tilemap.tileToWorldY(e,t,this)},tileToWorldXY:function(e,t,i,r){return this.tilemap.tileToWorldXY(e,t,i,r,this)},weightedRandomize:function(e,t,i,r,n){return a.WeightedRandomize(t,i,r,n,e,this.layer),this},worldToTileX:function(e,t,i){return this.tilemap.worldToTileX(e,t,i,this)},worldToTileY:function(e,t,i){return this.tilemap.worldToTileY(e,t,i,this)},worldToTileXY:function(e,t,i,r,n){return this.tilemap.worldToTileXY(e,t,i,r,n,this)},destroy:function(e){void 0===e&&(e=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),e&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],l.prototype.destroy.call(this))}});e.exports=s},67:function(e,t,i){var r=i(112),n=i(3),l=i(14),a=i(16),o=i(248),s=new n({Extends:a,Mixins:[l.Alpha,l.BlendMode,l.Depth,l.Flip,l.GetBounds,l.Mask,l.Origin,l.Pipeline,l.ScrollFactor,l.Size,l.TextureCrop,l.Tint,l.Transform,l.Visible,o],initialize:function(e,t,i,n,l){a.call(this,e,"Sprite"),this._crop=this.resetCropObject(),this.anims=new r(this),this.setTexture(n,l),this.setPosition(t,i),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(e,t){this.anims.update(e,t)},play:function(e,t){return this.anims.play(e,t)},playReverse:function(e,t){return this.anims.playReverse(e,t)},playAfterDelay:function(e,t){return this.anims.playAfterDelay(e,t)},playAfterRepeat:function(e,t){return this.anims.playAfterRepeat(e,t)},chain:function(e){return this.anims.chain(e)},stop:function(){return this.anims.stop()},stopAfterDelay:function(e){return this.anims.stopAfterDelay(e)},stopAfterRepeat:function(e){return this.anims.stopAfterRepeat(e)},stopOnFrame:function(e){return this.anims.stopOnFrame(e)},toJSON:function(){return l.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});e.exports=s},71:function(e,t,i){var r=i(175),n=i(28);e.exports=function(e,t,i,l,a){for(var o=null,s=null,h=null,c=null,u=n(e,t,i,l,null,a),d=0;d<u.length;d++){var f=u[d];f&&(f.collides?(o=r(f.x,f.y-1,!0,a),s=r(f.x,f.y+1,!0,a),h=r(f.x-1,f.y,!0,a),c=r(f.x+1,f.y,!0,a),f.faceTop=!o||!o.collides,f.faceBottom=!s||!s.collides,f.faceLeft=!h||!h.collides,f.faceRight=!c||!c.collides):f.resetFaces())}}},80:function(e,t){e.exports=function(e,t){t?e.setCollision(!0,!0,!0,!0,!1):e.resetCollision(!1)}},91:function(e,t,i){var r=i(34),n=i(3),l=i(14),a=i(482),o=new n({Mixins:[l.Alpha,l.Flip,l.Visible],initialize:function(e,t,i,r,n,l,a,o){this.layer=e,this.index=t,this.x=i,this.y=r,this.width=n,this.height=l,this.right,this.bottom,this.baseWidth=void 0!==a?a:n,this.baseHeight=void 0!==o?o:l,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,this.collisionCallbackContext=this,this.tint=16777215,this.physics={}},containsPoint:function(e,t){return!(e<this.pixelX||t<this.pixelY||e>this.right||t>this.bottom)},copy:function(e){return this.index=e.index,this.alpha=e.alpha,this.properties=e.properties,this.visible=e.visible,this.setFlip(e.flipX,e.flipY),this.tint=e.tint,this.rotation=e.rotation,this.collideUp=e.collideUp,this.collideDown=e.collideDown,this.collideLeft=e.collideLeft,this.collideRight=e.collideRight,this.collisionCallback=e.collisionCallback,this.collisionCallbackContext=e.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(e){var t=this.tilemapLayer;return t?t.tileToWorldX(this.x,e):this.x*this.baseWidth},getRight:function(e){var t=this.tilemapLayer;return t?this.getLeft(e)+this.width*t.scaleX:this.getLeft(e)+this.width},getTop:function(e){var t=this.tilemapLayer;return t?t.tileToWorldY(this.y,e)-(this.height-this.baseHeight)*t.scaleY:this.y*this.baseHeight-(this.height-this.baseHeight)},getBottom:function(e){var t=this.tilemapLayer;return t?this.getTop(e)+this.height*t.scaleY:this.getTop(e)+this.height},getBounds:function(e,t){return void 0===t&&(t=new a),t.x=this.getLeft(),t.y=this.getTop(),t.width=this.getRight()-t.x,t.height=this.getBottom()-t.y,t},getCenterX:function(e){return(this.getLeft(e)+this.getRight(e))/2},getCenterY:function(e){return(this.getTop(e)+this.getBottom(e))/2},intersects:function(e,t,i,r){return!(i<=this.pixelX||r<=this.pixelY||e>=this.right||t>=this.bottom)},isInteresting:function(e,t){return e&&t?this.canCollide||this.hasInterestingFace:e?this.collides:!!t&&this.hasInterestingFace},resetCollision:function(e){(void 0===e&&(e=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,e)&&(this.tilemapLayer&&this.tilemapLayer.calculateFacesAt(this.x,this.y));return this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(e,t,i,r,n){(void 0===t&&(t=e),void 0===i&&(i=e),void 0===r&&(r=e),void 0===n&&(n=!0),this.collideLeft=e,this.collideRight=t,this.collideUp=i,this.collideDown=r,this.faceLeft=e,this.faceRight=t,this.faceTop=i,this.faceBottom=r,n)&&(this.tilemapLayer&&this.tilemapLayer.calculateFacesAt(this.x,this.y));return this},setCollisionCallback:function(e,t){return null===e?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=e,this.collisionCallbackContext=t),this},setSize:function(e,t,i,r){return void 0!==e&&(this.width=e),void 0!==t&&(this.height=t),void 0!==i&&(this.baseWidth=i),void 0!==r&&(this.baseHeight=r),this.updatePixelXY(),this},updatePixelXY:function(){var e=this.layer.orientation;if(e===r.ORTHOGONAL)this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight;else if(e===r.ISOMETRIC)this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5;else if(e===r.STAGGERED)this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2);else if(e===r.HEXAGONAL){var t=this.layer.hexSideLength,i=(this.baseHeight-t)/2+t;this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*i}return this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||void 0!==this.collisionCallback}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var e=this.layer.tilemapLayer;if(e){var t=e.gidMap[this.index];if(t)return t}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var e=this.tilemapLayer;return e?e.tilemap:null}}});e.exports=o}}]);